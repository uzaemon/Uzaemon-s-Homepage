00095/00095 AAA00000  uzaemon          *IPDS spool files                       
( 1)   00/11/04 12:26  00094へのコメント

Chris,

> Is there something special you have to do to get it to work with *IPDS spool files?

SPL2STMF is just a frontend to QwpzHostPrintTransform API. See http://publib.boulder.ibm.com/pubs/html/as400/v4r5/ic2924/info/apis/QWPZHPTR.htm and http://www.redbooks.ibm.com/redbooks/SG242160.html for more information.

uzaemon@Japan

 

00094/00094 AAA00000  Chris Teague     Re^3: SPL2STMF                          
( 1)   00/11/04 03:42  00093へのコメント  コメント数：1
One more question.
Is there something special you have to do to get it to work with *IPDS spool files?
Thanks.
Chris
 

00093/00093 AAA00000  Chris Teague     Re^2: SPL2STMF                          
( 1)   00/11/04 00:34  00089へのコメント  コメント数：2
Works great!
Thanks!
Chris
 

00090/00090 AAA00000  uzaemon          Re: TIFF2PDFでの変換後Paper Size        
( 1)   00/11/03 23:45  00088へのコメント

Miyasakaさん、こん＊＊は。

> TIFFまではA4横のままなのですが、PDFにするとA4縦に
> なってしまいます。A4横のまま変換する方法がありましたら
> 教えていただけないでしょうか？

縦/横幅の設定はTIFF2PDFCの107/108行目で行っているようですので、この数値を入れ替えればA4横になりそうな気がします。

0107.00 #define A4W 595.0
0108.00 #define A4H 842.0

お時間があれば試してみて結果をお知らせください。

uzaemon@Japan

 

00089/00089 AAA00000  uzaemon          Re: SPL2STMF                            
( 1)   00/11/03 23:26  00087へのコメント  コメント数：3
Chris,

> I get the following error when I try the SPL2STMF command:
> "Fatal error : API QwpzHostPrintTransform failed : CPF6DF9 hptopt = 30"

According to DSPMSGD command, CPF6DF9 indicates:

Message . . . . :   Transformed data buffer too small.
Cause . . . . . :   The transformed data buffer of &2 bytes is too small to hold the &1 bytes of transformed data that is available.  Only &2 bytes of data have been copied to the transformed data buffer.  The remaining transformed data is lost.

That means you should increase buffer size (200,000) which is defined at line 57 and 233. You can try DEBUG(*YES) to determine the buffer size.

Hope this helps and waiting for your report.

uzaemon@Japan

 

00088/00088 AAA00000  H.Miyasaka       TIFF2PDFでの変換後Paper Size            
( 1)   00/11/02 16:18

はじめまして、Miyasakaと申します。

AS/400で作成したA4横のSPOOLを、SPL2SMTFで
TIFFに変換し、TIFF2PDFでPDFに変換しています。

TIFFまではA4横のままなのですが、PDFにするとA4縦に
なってしまいます。A4横のまま変換する方法がありましたら
教えていただけないでしょうか？
よろしくお願いします。

 

00087/00087 AAA00000  Chris Teague     SPL2STMF                                
( 1)   00/11/02 08:10

SPL2STMF
I get the following error when I try the SPL2STMF command:
"Fatal error : API QwpzHostPrintTransform failed : CPF6DF9 hptopt = 30"
Please help,
Thanks
Chris    
 

00086/00086 AAA00000  Michael Schmidt  Re^2: SNDM Attachment-File              
( 1)   00/10/27 17:45  00084へのコメント

> Michael,
> 
> >you have to do is to comment out several statements in >source-File #INIT.
> >
> > The statements are 243.00 - 247.00 (after "path must be a stream file")
> 
> Thank you very much for your suggestion. I recommend to modify like followings if you want to send documents under QDLS:
> 
> 0242.00  *   path must be stream file or doc
> 0243.00 C                   IF        (%SUBST(st_objtype : 1 : 10)  <> '*STMF') AND
> 0244.00 C                             (%SUBST(st_objtype : 1 : 10)  <> '*DOC')
> 0245.00 C                   CALLP     em(em1(17) : 'PATH-' + %TRIM(at_elem(I)) +
> 0246.00 C                             ', TYPE-' + %SUBST(st_objtype : 1 : 10))
> 0247.00 C                   EXSR      #ABORT
> 0248.00 C                   ENDIF
> 
> uzaemon @ Japan


Hi uzaemon,

thanks for your suggestion. I will modify the program to make it possible for all the cases.
 

00084/00084 AAA00000  uzaemon          Re: SNDM Attachment-File                
( 1)   00/10/27 08:56  00082へのコメント  コメント数：1
Michael,

>you have to do is to comment out several statements in >source-File #INIT.
>
> The statements are 243.00 - 247.00 (after "path must be a stream file")

Thank you very much for your suggestion. I recommend to modify like followings if you want to send documents under QDLS:

0242.00  *   path must be stream file or doc
0243.00 C                   IF        (%SUBST(st_objtype : 1 : 10)  <> '*STMF') AND
0244.00 C                             (%SUBST(st_objtype : 1 : 10)  <> '*DOC')
0245.00 C                   CALLP     em(em1(17) : 'PATH-' + %TRIM(at_elem(I)) +
0246.00 C                             ', TYPE-' + %SUBST(st_objtype : 1 : 10))
0247.00 C                   EXSR      #ABORT
0248.00 C                   ENDIF

uzaemon @ Japan

 

00083/00083 AAA00000  uzaemon          Re: CRTCSVF                             
( 1)   00/10/27 08:51  00081へのコメント

Andrew,

> Very useful and nice utility CRTCSVF! Do you have utility
> to upload CVS file to AS/400? Something like CPYFRMIMPF...

No, because it is very difficult (complex) to write such utility. 15 years ago, I wrote similar program using PL/I on S/38 but it's obsolete...

uzaemon @ Japan


 

00082/00082 AAA00000  Michael Schmidt  SNDM Attachment-File                    
( 1)   00/10/26 00:19

it is very easy to use any kind of PC-file within a folder. the only thing you have to do is to comment out several statements in source-File #INIT.

The statements are 243.00 - 247.00 (after "path must be a stream file")

if you remove those lines any attachment like i.e. .doc, .pdf is working fine


 

00081/00081 AAA00000  Andrew           CRTCSVF                                 
( 1)   00/10/25 19:00

Hello!

Very useful and nice utility CRTCSVF! Do you have utility
to upload CVS file to AS/400? Something like CPYFRMIMPF...
 

00080/00080 AAA00000  uzaemon          Re: SPL2STMF                            
( 1)   00/10/20 12:49  00079へのコメント


> I sometimes get message CPF9897 when converting these spoolfiles.

CPF9897 implies several reasons. Use DEBUG(*YES) to determine the problem.

uzaemon @ Japan

 

00079/00079 AAA00000  H. Sterken       SPL2STMF                                
( 1)   00/10/19 00:08

I'm using SPL2STMF to convert AFPDS-spoolfiles to TIFF.
I sometimes get message CPF9897 when converting these spoolfiles. I first thought it was due to the 16M-limit, but the spoolfiles are ranging from 250-500 Kb.
When I convert the spoolfile using HPTTOFLR it works fine, but HPTTOFLR has problems if you run it twice at the same time.
Any suggestions?


 

00078/00078 AAA00000  uzaemon          Re: SPL2STMFでの漢字変換                
( 1)   00/10/11 10:02  00077へのコメント

Soneさん、こんにちは。

久々の日本語の書き込みですね。;-)

> SPL2STMFを使用して変換してみたのですが、漢字が変換できません。
> よろしければ、設定方法等を教えてください。

どのようなWSCSTをご利用ですか?

こちらではhttp://homepage1.nifty.com/uzaemon/hpt_usage.htmlの末尾で紹介しているようにテキストファイルへの変換はできています。スプールを生成する前にOVRPRTF FILE(QPSUPRTF) CHRID(*JOBCCSID)を実行しておくように注意してください。

uzaemon


 

00077/00077 AAA00000  Y Sone           SPL2STMFでの漢字変換                    
( 1)   00/10/10 21:11

はじめまして。
SPL2STMFを使用して変換してみたのですが、漢字が変換できません。
よろしければ、設定方法等を教えてください。


 

00076/00076 AAA00000  uzaemon          SNDM attachement file                   
( 1)   00/09/28 10:05  00075へのコメント

Jim,

> When using SNDM to produce an e-mail with an attached stream file, The stream file has unreadable data. Any ideas. 

If you have questions regarding SNDM, please clarify followings:

- What version of SNDM are you using? (If you use 1.2x, you should use 1.31)
- What is the version of your OS/400?
- What kind of mail client are you using? Have you tried other mail clients?
- Does this happen to all stream files, or only specific file?

uzaeomn @ Japan


 

00075/00075 AAA00000  Jim Stout        SAP Basis Administrator                 
( 1)   00/09/27 22:38

When using SNDM to produce an e-mail with an attached stream file, The stream file has unreadable data. Any ideas. 
Thank You 
Jim Stout
Hollister Incorporated
 

00074/00074 AAA00000  uzaemon          Re: License Price                       
( 1)   00/09/27 09:57  00073へのコメント

Mike,

> I'm interesting in obtaining a price for a license to use SNDM, SPL2STMF and TIF2PDF.  Please email me with specifics.

Thank you for your interest.

SNDM and SPL2STMF are subject to the dual-license which means you can use whichever you want. 

- You may use/modify/distribute SNDM and SPL2STMF under the terms of GNU GPL. GPL allows you to use the software without fee for commercial and non-commercial purpose.

- You need commercial license only when you *sell* SNDM and/or SPL2STMF.

TIFF2PDF is different, it should be distributed without fee.

- TIFF2PDF is *not* covered by dual-license. It is free, open-sourced software. See 'license'(http://homepage1.nifty.com/uzaemon/tifflib_license.html) for detail.

If you really need commercial license for SNDM and SPL2STMF (in other words, you want to sell them), please send mail to uzaemon@my-Deja.com.

uzaemon @ Japan


 

00073/00073 AAA00000  Mike Bernard     License Price                           
( 1)   00/09/27 06:42

I'm interesting in obtaining a price for a license to use SNDM, SPL2STMF and TIF2PDF.  Please email me with specifics. THANKS mike
 

00072/00072 AAA00000  uzaemon          Re: License price.                      
( 1)   00/09/24 11:57  00071へのコメント

Jordi,

Thank you for your quotation.

> We're interested comercially your SNDM command.

SNDM is subject to the dual-license which means you can use whichever you want.
 
- You may use/modify/distribute SNDM under the terms of GNU GPL. GPL allows you to use the software without fee for commercial and non-commercial purpose.

- You need commercial license only when you sell SNDM.

> So, we're need price your SNDM command License.

Currently I've not determined the price of SNDM. I assume most people prefer GPL and I don't want to receive lengthy legal documents to sign.

If you really need commercial license, please send mail to uzaemon@my-Deja.com.

uzaemon @ Japan

 

00071/00071 AAA00000  Jordi carreras   License price.                          
( 1)   00/09/22 19:59

Hi,
We're interested comercially your SNDM command.

So, we're need price your SNDM command License.

Can you write me an Email with your price?

Is it possible sell all our product with only Business License or one for every Customer Software?

We're pleased to meet you.

GoodBye.
- Jordi Carreras. 
 

00070/00070 AAA00000  uzaemon          Re^5: /COPY                             
( 1)   00/09/19 09:43  00069へのコメント

Erwin,

> I only have a problem with attachments now, so I will have to check this out.

What version of SNDM are you using? If you are using 1.2x, try latest version (1.31). See previous post (63. Re^2: Missing body text when attaching) for details.

uzaemon @ Japan

 

00069/00069 AAA00000  Erwin Zwikstra   Re^4: /COPY                             
( 1)   00/09/18 20:13  00068へのコメント  コメント数：1
YES!

It works.
I only have a problem with attachments now, so I will have to check this out.

Kind regards,
Erwin Zwikstra
 

00068/00068 AAA00000  uzaemon          Re^3: /COPY                             
( 1)   00/09/13 21:07  00067へのコメント  コメント数：2
Erwin,

> I checked, and I miss these copy members:
> 
> 
> >   /COPY QSYSINC/QRPGLESRC,QUSEC 
> >   /COPY QSYSINC/QRPGLESRC,QUSRJOBI
> >   /COPY QSYSINC/QRPGLESRC,QDBRTVFD

Library QSYSINC is IBM supplied program product. You have to install it before 'make' my utilities.

 Licensed Program : 5769SS1
 Product Option : 13
 Description : OS/400 - System Openness Includes

QSYSINC is no charge option and should have come with OS/400.

uzaemon @ Japan

 

00067/00067 AAA00000  Erwin Zwikstra   Re^2: /COPY                             
( 1)   00/09/12 16:23  00066へのコメント  コメント数：3
Hello,

I checked, and I miss these copy members:


>   /COPY QSYSINC/QRPGLESRC,QUSEC 
>   /COPY QSYSINC/QRPGLESRC,QUSRJOBI
>   /COPY QSYSINC/QRPGLESRC,QDBRTVFD

Regards, and thanks in advance,
Erwin Zwikstra.
 

00066/00066 AAA00000  uzaemon          Re: /COPY                               
( 1)   00/09/06 10:37  00064へのコメント  コメント数：4
Erwin,

> I have downloaded your SMTP program. I am however not able to compile the programs because of /copy members in the sources that I do not seem to have. Can you provide me with these /copy members, so I can compile the programs? 

Please check compile list and determine which member(s) you don't have.

SNDM package includes members shown below:

  Source file - SMTP/H
    UNIX, USER
  Source file - SMTP/QCMDSRC
    SNDM, SNDMHLP
  Source file - SMTP/QREXSRC
    MAKE
  Source file - SMTP/QRPGLESRC
    #CTDATA, #GEN, #INIT, #PROC, #SEND
    CDATE, FD_, GETERRINFO, GETFILENAM
    GETJOBINFO, GETPFINFO, PREPAREUS 
    SNDM, SNDPM

ILE-RPG programs use following '/COPY' members:

  /COPY H,USER
  /COPY H,UNIX
  /COPY QSYSINC/QRPGLESRC,QUSEC 
  /COPY QSYSINC/QRPGLESRC,QUSRJOBI
  /COPY QSYSINC/QRPGLESRC,QDBRTVFD
  /COPY QRPGLESRC,#INIT
  /COPY QRPGLESRC,#GEN 
  /COPY QRPGLESRC,#SEND
  /COPY QRPGLESRC,#PROC   
  /COPY QRPGLESRC,#CTDATA 

Let me know the name of 'missing' member(s). Waiting for your reply.

uzaemon @ Japan

 

00065/00065 AAA00000  Erwin Zwikstra   Re^2: SMTP                              
( 1)   00/09/05 17:59  00049へのコメント

Hello,

Just sent you a new message, for I can not locate the /copy files on my AS400.
(I did not look in these messages before, I had the idea I would get an email with a response....)

Kind regards,
Erwin Zwikstra
 

00064/00064 AAA00000  Erwin Zwikstra   Supervisor systems maintenance          
( 1)   00/09/05 17:43

Dear Sirs,

I have downloaded your SMTP program. I am however not able to compile the programs because of /copy members in the sources that I do not seem to have. Can you provide me with these /copy members, so I can compile the programs? 
Your program seems to be just what I have been looking for for quite some time now.
Kind regards,

Geest North Sea Line BV,
Erwin Zwikstra.
 

00063/00063 AAA00000  uzaemon          Re^2: Missing body text when attaching a
( 1)   00/08/29 17:42  00061へのコメント

John,

Thank you for your mail to Deja.

I put test version of SMTP client program on my server. Please download http://homepage1.nifty.com/uzaemon/smtp131.exe and try again.

Just for your information, I changed boundary (in multipart mail) structure as follows. 

*current sndm
|This is a multi-part message in MIME format.
|
|----=_Next_Part_29_Aug_2000_16.49.06
|(Body text) 

*sndm test version 131
|This is a multi-part message in MIME format.
|
|----=_Next_Part_29_Aug_2000_17.04.19
|Content-Type: text/plain; charset="US-ASCII"
|
|(Body text) 

Waiting for your reply.

uzaemon @ Japan

 

00061/00061 AAA00000  uzaemon          Re: Missing body text when attaching att
( 1)   00/08/28 21:46  00059へのコメント  コメント数：1
John,

>  I seem to have trouble with the sndm when i am sending attachments. The body text no longer appears in the email. If I perform the same sndm with no attachments then the body text apears no problems. We are running V4R4. Any help appreciated.

Please confirm followings,

- What kind of mail client are you using? Does this happen to any mail client (e.g. Outlook Express, Netscape Messenger)?

- If you use SNDM version 1.2, try newer verson from http://homepage1.nifty.com/uzaemon/smtp130.exe .

- If above doesn't work, please send SNDM log file (spooled file) and mail temporary file (in temporary directory) to uzaemon@my-Deja.com. 
SNDM creates spooled file when DEBUG(*YES) is specified. Run CPYSPLF to copy the spooled file to a physical file, then download the physical file to your PC in ASCII format using either FTP or Client Access. 
Also, SNDM leaves mail temporary work file in temporary directory if DEBUG(*YES) was specified. See online help for details.

Waiting for your mail.

uzaemon @ Japan

 

00060/00060 AAA00000  uzaemon          Re: it works!!!                         
( 1)   00/08/28 21:26  00058へのコメント

Fabian,

> i will completely test during the next
> few days and send you information how well it works!

Please let me know the result of your test. If you didn't find any problem, I will make the new version available from my homepage. 

Thank you for your cooperation.

uzaemon @ Japan

 

00059/00059 AAA00000  John Marshall    Missing body text when attaching attachm
( 1)   00/08/28 08:46

 I seem to have trouble with the sndm when i am sending attachments. The body text no longer appears in the email. If I perform the same sndm with no attachments then the body text apears no problems. We are running V4R4. Any help appreciated.


 

00058/00058 AAA00000  Fabian Emmes     it works!!!                             
( 1)   00/08/21 18:56  00057へのコメント  コメント数：1
hello uzaemon,

great!
just send a first mail to test your new version.
thank you very much. i will completely test during the next
few days and send you information how well it works!

thanks!
fabian emmes
 

00057/00057 AAA00000  uzaemon          Re^4: sndm: @ character in FROM string i
( 1)   00/08/21 18:06  00053へのコメント  コメント数：2
Fabian,

Thanks for your posts. I determined the problem (I hope...) and put test version of SMTP client program on my server. Please download http://homepage1.nifty.com/uzaemon/smtp130.exe and try again.

Just for your information, as I don't have pure German environment, I tested under following settings to emulate German environment as much as possible:
- AS/400 primary language 2962(Japanese), secondary 2924(US English)
- Specify 273 as codepage of Client Access terminal session and select German keyboard 
- Create new subsystem description and specify QSYS2924
- Exec 'CHGJOB CCSID(273)' before run sndm.
Under this environment, sndm works fine with '@' character and some German characters in from/to/subject/body.

I appreciate your time and waiting for your reply.

uzaemon @ Japan

 

00056/00056 AAA00000  Fabian Emmes     Re^3: sndm: @ character in FROM string i
( 1)   00/08/21 15:43  00052へのコメント

then i tried to send directly to mailgate1.nifty.ne.jp but it failed too
    > SNDM FROM('fab@orlen.de' 'Fabian Emmes') TO(('mxa02134@nifty.ne.jp')) FIL
      E(SMTP/QCMDSRC) MBR(TESTADD) SUBJECT('mail send by SNDM to mailgate1.nift
      y.ne.jp') SMTPHOST('mailgate2.nifty.ne.jp')
      Command failed. reason -301 negative response from SMTP server ( RSPｬ553
        <fab5orlen.de>... Domain part missing璢| REQｬMAIL
        FROM:<fab@orlen.de>璢|)


sending some german specific characters in the body

send:
蔕ﾄﾖﾜ

received:
=7B=A6=7D=A2=5C=21

my mail program showed them this way:
{ｦ}｢\!

fabian

 

00054/00054 AAA00000  Fabian Emmes     Re^3: sndm: @ character in FROM string i
( 1)   00/08/21 15:42  00052へのコメント

after this i tried to send with "chgjob ccsid(37)"
   > chgjob ccsid(37)
   > SNDM FROM('fab@orlen.de' 'Fabian Emmes') TO(('fab@baumarktforschung.com')
      ('Fabian Emmes')) FILE(SMTP/H) SUBJECT('blabla') SMTPHOST('localhost') D
      EBUG(*YES)
      Command failed. reason -301 negative response from SMTP server ( RSPｬ501
        Syntax error.  Special characters only permitted with escape
        character.璢| REQｬMAIL FROM:<fab@orlen.de>璢|)

and then recompiled SNDM
   > chgjob ccsid(37)
   > STRREXPRC SRCMBR(MAKE)
   > sndm from('fab@orlen.de') to('fab@pc42.bfd.de') file(smtp/h) subject('bla
     bla') smtphost('localhost') debug(*yes)
     Command failed. reason -301 negative response from SMTP server ( RSPｬ501
       Syntax error.  Special characters only permitted with escape
       character.璢| REQｬMAIL FROM:<fab@orlen.de>璢|)

 

00053/00053 AAA00000  Fabian Emmes     Re^3: sndm: @ character in FROM string i
( 1)   00/08/21 15:41  00052へのコメント  コメント数：3
hi,

thank you for your mail!

i tried to follow the instructions for the tcpip dump on the as400
but it didnt work out. instead i made an tcpip dump from the smtp server.
it showed that the @ character was wrong.

to try another smtp server i used the one installed on the as400
    > SNDM FROM('fab@orlen.de' 'Fabian Emmes') TO(('fab@baumarktforschung.com')
       ('Fabian Emmes')) FILE(SMTP/H) SUBJECT('blabla') SMTPHOST('localhost') D
      EBUG(*YES)
      Command failed. reason -301 negative response from SMTP server ( RSPｬ501
        Syntax error.  Special characters only permitted with escape
        character.璢| REQｬMAIL FROM:<fab@orlen.de>璢|)
 

00052/00052 AAA00000  uzaemon          Re^2: sndm: @ character in FROM string i
( 1)   00/08/18 10:58  00051へのコメント  コメント数：6
Fabian, 

Thank you for your mail to Deja.

>the debug file is attached. it looks alright
>and the @ characters in it are ok, but are transfered
>as ｵ instead. (i use qmail as the smtp server)

I see no poroblem in the log file. I tried same thing with CHGJOB CCSID(273) but everything worked fine.

Please try followings and let me know the result.

1. Take TCP/IP trace and confirm that '@' is sent as it is. Trace procedure is shown below.

> STRCMNTRC CFGOBJ(EZTR1) CFGTYPE(*LIN) TEXT('SNDM trace 1')
> SNDM FROM('foo@nowhere' 'nobody') TO(('xxx@xxx.yyy.zzz' 'somebody')) FILE(SMTP/H) SUBJECT('Hello nobody') SMTPHOST(aaa.bbb.ccc) DEBUG(*YES)                                          
> ENDCMNTRC CFGOBJ(EZTR1) CFGTYPE(*LIN)
> PRTCMNTRC CFGOBJ(EZTR1) CFGTYPE(*LIN) CODE(*ASCII) FMTTCP(*YES) TCPIPADR('server_IP_addr' 'client_IP_addr')  
> DLTCMNTRC CFGOBJ(EZTR1) CFGTYPE(*LIN)
(check spooled file 'QPCSMPRT')

2. If you have any other mail server, try it instead of qmail server.

3. Exec CHGJOB CCSID(37) and run SNDM.

4. Exec CHGJOB CCSID(37) and run make again, then send mail using SNDM.

5. Are all '@' characters (From/to/body text) changed to 'mu'? Did you find any other character that had been changed?

6. Can you send me a mail to mxa02134@nifty.ne.jp using SNDM?

Waiting for your response.

uzaemon @ Japan

 

00051/00051 AAA00000  uzaemon          Re: sndm: @ character in FROM string is 
( 1)   00/08/16 09:54  00050へのコメント  コメント数：7
Fabian,

> we use a german release of V4R4. the @ character is
> transmitted as the mu character, so the smtp server
> doesn't recognize the address correctly.

If you need to pursue the problem, please send SNDM log file to uzaemon@my-Deja.com.

SNDM creates spooled file when DEBUG(*YES) is specified. Run CPYSPLF to copy the spooled file to a physical file, then download the physical file to your PC in ASCII format using either FTP or Client Access.

Waiting for your mail.

uzaemon @ Japan

 

00050/00050 AAA00000  Fabian Emmes     sndm: @ character in FROM string is wron
( 1)   00/08/15 19:14

hi,

i have a problem sending mail with your smtp client.
we use a german release of V4R4. the @ character is
transmitted as the mu character, so the smtp server
doesn't recognize the address correctly.

thanks for the software

fabian
 

00049/00049 AAA00000  uzaemon          Re: SMTP                                
( 1)   00/08/11 22:43  00048へのコメント  コメント数：1
Erwin,

> However, I can not succesfully run the 'MAKE' procedure, because the RPGLE sources contain '/COPY' lines, and the members in the '/COPY' are not available on my system. Can you help me?

I'm not sure why PRG compiler cannot find source member. Please check followings:

- Confirm that all source file/members specified at /COPY statements exist.
- Exec CHGCURLIB CURLIB(SMTP) before running make.
- If you have edited make procedure and changed source and/or object library, discard all changes and try make again.

Let me know the result.

uzaemon @ Japan

 

00048/00048 AAA00000  Erwin            SMTP                                    
( 1)   00/08/10 00:05

Hello,
I tried your SMTP utility, for it is exactly what I am looking for.
However, I can not succesfully run the 'MAKE' procedure, because the RPGLE sources contain '/COPY' lines, and the members in the '/COPY' are not available on my system. Can you help me?
Maybe I only need the library QSYSINC?

Kind Regards,
Erwin Zwikstra
 

00047/00047 AAA00000  Doug             Re^2: Wcount problem                    
( 1)   00/08/02 22:05  00046へのコメント


All the code settings look OK.  Not sure what is wrong.  
I will have to get back to this at a later date.

Thank you

> Doug,
> 
> > Is this refering to the http config file? 
> 
> No, the message implies something wrong with wcount configuration (database physical) file 'WCOUNT/CONFIG', member 'COUNT.CFG'. Please check followings:
> 
> - the library/file/member exists.
> - the file is program-described file and the CCSID is tagged to 65535.
> - invalid characters are not included in the file. First character of each line should be ' ' or '#' or ';' or '['. See count documentation for details.
> - header file correctly points to the configuration file. Count configuration is defined in WCOUNT/H.CONFIG as follows:
> 
> 0020.00 #define CONFIG_DIR "/QSYS.LIB/WCOUNT.LIB/CONFIG.FILE"
> 0021.00 #define CONFIG_FILE "COUNT.CFG.MBR" 
> 
> 
> If you can debug the program, set break point to module MCFG line 326 and examine why function Parse() returns -1.
> 
> Function paramProcess() returns '-3' if Parse() fails, then wcount send message "parse error in config file" to browser.
> 
> uzaemon @ Japan

 

00046/00046 AAA00000  uzaemon          Re: Wcount problem                      
( 1)   00/07/29 14:29  00042へのコメント  コメント数：1
Doug,

> Is this refering to the http config file? 

No, the message implies something wrong with wcount configuration (database physical) file 'WCOUNT/CONFIG', member 'COUNT.CFG'. Please check followings:

- the library/file/member exists.
- the file is program-described file and the CCSID is tagged to 65535.
- invalid characters are not included in the file. First character of each line should be ' ' or '#' or ';' or '['. See count documentation for details.
- header file correctly points to the configuration file. Count configuration is defined in WCOUNT/H.CONFIG as follows:

0020.00 #define CONFIG_DIR "/QSYS.LIB/WCOUNT.LIB/CONFIG.FILE"
0021.00 #define CONFIG_FILE "COUNT.CFG.MBR" 


If you can debug the program, set break point to module MCFG line 326 and examine why function Parse() returns -1.

Function paramProcess() returns '-3' if Parse() fails, then wcount send message "parse error in config file" to browser.

uzaemon @ Japan



 

00045/00045 AAA00000  uzaemon          Re: Convert tiff file to PDF file       
( 1)   00/07/29 14:24  00041へのコメント

VILLE,

Personally, I think people who want to use open-source software are considered to have comipler so that they can contribute to the society in future. 


> Is it possible to send me the objets ???

Sorry but I can't send you the objects.

- If I put program objects on my homepage, I'll be running out of server space.
- I don't want to spend my time sending objects to people everytime I make changes to the software.
- You should be very careful to use executables on the Internet. The object you get from somewhere may exec 'CLRLIB QSYS', 'PWRDWNSYS *IMMED', 'CHGUSRPRF QSECOFR..' or such.

Please consider followings:

- Buy ILE-C compiler.
- Ask your friends or IBM to compile the distribution.
- Use grace period of IBM software to compile the distribution. Contact IBM if it's OK to use the object after grace period.

uzaemon @ Japan

 

00042/00042 AAA00000  Doug             Wcount problem                          
( 1)   00/07/28 23:19

I have installed Wcount on my AS/400 V4R4M0 and when I view the test page Count2_5-ex.html all my counter boxes have 'Parse error in config file' showing in place of the digits.  Is this refering to the http config file?  I did enable GET , and added the Exec and Pass statments as show in the doucmentation.  

Help please.

 

00041/00041 AAA00000  B. de VILLE      Convert tiff file to PDF file           
( 1)   00/07/28 16:50

We have not the compilator C on our system AS400.
Your program : Converts TIFF image file to Adobe PDF(Acrobat). Can be used with SPL2STMF to convert AFP spooled file to PDF.
Is it possible to send me the objets ???
Regards.
 

00040/00040 AAA00000  perel            Re^10: tiff2pdf problem                 
( 1)   00/07/26 13:50  00039へのコメント

uzaemon,
> 
> > I've send the files to your new mail address, Have U received ??
> > Waiting for your good news.!!
> 
> I posted a reply 9 days ago. Please see message number 37, 'Re^8: works fine in my AS/400...'.
I'm sorry, I missed to read message #37. thanks !!

Perel
 

00039/00039 AAA00000  uzaemon          Re^9: tiff2pdf problem                  
( 1)   00/07/25 19:55  00038へのコメント  コメント数：1
Perel,

> I've send the files to your new mail address, Have U received ??
> Waiting for your good news.!!

I posted a reply 9 days ago. Please see message number 37, 'Re^8: works fine in my AS/400...'.

uzaemon @ Japan

 

00038/00038 AAA00000  perel            Re^8: tiff2pdf problem                  
( 1)   00/07/25 11:18  00032へのコメント  コメント数：2
uzaemon,
> 
> > I've send the two files to your. Are your e-mail address
> > uzaemon@my-Deja.com ??
> 
> Yes, but I haven't received your mail. If my-Deja doesn't work by some reason, please try 'mxa02134@nifty.ne.jp'.
> 
I've send the files to your new mail address, Have U received ??
Waiting for your good news.!!

Perel
 

00037/00037 AAA00000  uzaemon          Re^8: works fine in my AS/400...        
( 1)   00/07/16 14:04  00032へのコメント

perel,

Thanks for sending me a mail and files.

First, I see no problem with your TIFF file, WRKSTS.TIFF (though lines are folded to the same line because page width of printer file had not been set to enough size, I guess).

Second, I loaded your PDF file (WRKSTS.PDF) and only see blank page on my Acrobat reader (Acrobat Exchange 3.01J). Appearently something wrong with the PDF file.

Thirdly, I ran TIFF2PDF and create WRKSTS2.PDF on my AS/400(V4R4,Cum-TL00049) from WRKSTS.TIFF and it worked just fine. You can see my PDF at http://homepage1.nifty.com/uzaemon/wrksts2.pdf 

Then I took 'diff' between WRKSTS.PDF(yours) and WRKSTS2.PDF(mine). There are about 10 differences but the essential difference is here.

******** C:\My Documents\wrksts2.pdf 113
/Count 1 /Type /Pages /MediaBox [ 0 0 595 842 ]

-------- C:\My Documents\wrksts.pdf 113
/Count 1 /Type /Pages /MediaBox [ 0 0 -889710572 1096098590 ]

In source code (TIFFLIB/TIFF2PDF.TIFF2PDFC), the line is described as follows.

0528.00 j = sprintf(wbuf, " ] \n/Count %d /Type /Pages /MediaBox [ 0 0 %d %d ]\n>>\nendobj\n", 
0529.00 dircount - 1, (int)A4W, (int)A4H ) ; 

'A4W' and 'A4H' are just constants and should be set as they are. I can not think of anything why they can be changed to abnormal value.

0107.00 #define A4W 595.0
0108.00 #define A4H 842.0

Please check followings:

- If you have modified the source code, discard all changes and try again.
- If you have not, apply latest Cum-PTF to your AS/400.
- If you are not on V4R4, plan to install V4R4 (same as my test environment), or I cannot pursue this issue.

Hope this helps.

Uzeamon @ Japan




 

00032/00032 AAA00000  uzaemon          Re^7: tiff2pdf problem                  
( 1)   00/07/14 13:47  00031へのコメント  コメント数：4
perel,

> I've send the two files to your. Are your e-mail address
> uzaemon@my-Deja.com ??

Yes, but I haven't received your mail. If my-Deja doesn't work by some reason, please try 'mxa02134@nifty.ne.jp'.

uzaemon @ Japan

 

00031/00031 AAA00000  perel            Re^6: tiff2pdf problem                  
( 1)   00/07/14 10:56  00030へのコメント  コメント数：5
Uzaemon,
 
> Could you send me two files? One is TIFF image file generated by SPL2STMF and another is PDF file generated by TIFF2PDF.

I've send the two files to your. Are your e-mail address
uzaemon@my-Deja.com ??

perel
 

00030/00030 AAA00000  uzaemon          Re^5: tiff2pdf problem                  
( 1)   00/07/12 18:13  00029へのコメント  コメント数：6
Perel,

> If you want to know what's problem with the pdf file. I can e-mail the file to your. Thanks for your help but I don't know what should I do then ?

Could you send me two files? One is TIFF image file generated by SPL2STMF and another is PDF file generated by TIFF2PDF.

Thanks.

Uzaemon @ Japan

 

00029/00029 AAA00000  perel            Re^4: tiff2pdf problem                  
( 1)   00/07/12 12:33  00027へのコメント  コメント数：7
uzaemon,

> >> 1. Is the TIFF file generated properly? Use Microsoft Imaging or any other image tool to check the TIFF image.
> > I've check the image and the size is normal(A4).
> 
> So doesn't the image shrink to small portion in bottom left corner when you display full image?

The tif image is normal and fit the A4 paper.

> 
> >> 2. What version of OS/400 are you using? Older OS/400 (say, V4R2 or before) has may PTFs for HPT(Host Print Transform).
> > I'm using V4R3. Do I need to apply some PTFs ??
> 
> If the TIFF image is normal, no, you don't need PTF.
> 
> >> 3. Does this happen to all AFP spool files? If you convert, for example WRKSYSSTS *PRINT, do you still see the same problem?
> >  I test the *SCS spool file and it also fail. and the spool file just the compile list of the source code.
> 
> I don't think you can convert *SCS to TIFF. First you need to exec 'OVRPRTF FILE(---) DEVTYPE(*AFPDS)' then produce AFP spool file (run compile, call print program, etc). Use WRKSPLF option-8 to confirm the spooled file has devtype-*AFPDS.

I type the command OVRPRRT FILE(*PRTF) DEVTYPE(*AFPDS) and then
WRKSYSSTS *PRINT to get the spool file. The spool file is normal and then I use the command SPL2STMF to convert it to .tiff image. Also, 
the .tif image is ok and NOT shink to small portion. After, I convert
the .tif to pdf by TIFF2PDF and the problem occur.

> 
> >> 4. Did you specify WSCST(QWPTIFFG4) at SPL2STMF command? TIFF2PDF supports only TIFF-G4 format.
> >  Yes. I convert the spool file to Tiff by wscst(QWPTIFFG4). But when I convert the .tiff file to .pdf, it shrink... What can I do then ??
> 
> If you display/print the spool file from AFP viewer (shipped with CA Express) or AFP printer, do you see correct output?
> 
> If above doesn't work, let me know exact procedure you are doing. I'll try the same thing using my AS/400.
If you want to know what's problem with the pdf file. I can e-mail the file to your. Thanks for your help but I don't know what should I do then ?

Perel 



 

00028/00028 AAA00000  uzaemon          Re: convert  JPG  to RTF  in RPGIV      
( 1)   00/07/07 22:01

Casper,

> Can you tell me how to convert the JPG File to RTF file format in RPGIV ? 

Why JPG? To convert image(JPEG?) file to text(RTF or whatever), you need OCR(Character Recognition) software. Unfortunately, I've never heard of RPG-based OCR software.

If what you want is to convert AS/400 spooled file to RTF, there are serveral solutions. Check out 'comp.sys.ibm.as400.misc' newsgroup around 06/07/2000 (or post question when necessary).

uzaemon @ Japan



 

00027/00027 AAA00000  uzaemon          Re^3: tiff2pdf problem                  
( 1)   00/07/07 18:14  00025へのコメント  コメント数：8

perel,

>> 1. Is the TIFF file generated properly? Use Microsoft Imaging or any other image tool to check the TIFF image.
> I've check the image and the size is normal(A4).

So doesn't the image shrink to small portion in bottom left corner when you display full image?

>> 2. What version of OS/400 are you using? Older OS/400 (say, V4R2 or before) has may PTFs for HPT(Host Print Transform).
> I'm using V4R3. Do I need to apply some PTFs ??

If the TIFF image is normal, no, you don't need PTF.

>> 3. Does this happen to all AFP spool files? If you convert, for example WRKSYSSTS *PRINT, do you still see the same problem?
>  I test the *SCS spool file and it also fail. and the spool file just the compile list of the source code.

I don't think you can convert *SCS to TIFF. First you need to exec 'OVRPRTF FILE(---) DEVTYPE(*AFPDS)' then produce AFP spool file (run compile, call print program, etc). Use WRKSPLF option-8 to confirm the spooled file has devtype-*AFPDS.

>> 4. Did you specify WSCST(QWPTIFFG4) at SPL2STMF command? TIFF2PDF supports only TIFF-G4 format.
>  Yes. I convert the spool file to Tiff by wscst(QWPTIFFG4). But when I convert the .tiff file to .pdf, it shrink... What can I do then ??

If you display/print the spool file from AFP viewer (shipped with CA Express) or AFP printer, do you see correct output?

If above doesn't work, let me know exact procedure you are doing. I'll try the same thing using my AS/400.

uzaemon @ Japan


 

00025/00025 AAA00000  perel            Re^2: tiff2pdf problem                  
( 1)   00/07/07 13:04  00019へのコメント  コメント数：9
> perel,
> 
> > The command tiff2pdf cann't work properly. I convert my spool file from 
> > spl2stmf (.tif file) and then convert it to pdf.
> > I found that it shrink to small portion in bottom left corner in the pdf file.
> 
> Please check followings:
> 
> 1. Is the TIFF file generated properly? Use Microsoft Imaging or any other image tool to check the TIFF image.
 I've check the image and the size is normal(A4).
> 
> 2. What version of OS/400 are you using? Older OS/400 (say, V4R2 or before) has may PTFs for HPT(Host Print Transform).
 I'm using V4R3. Do I need to apply some PTFs ??
> 
> 3. Does this happen to all AFP spool files? If you convert, for example WRKSYSSTS *PRINT, do you still see the same problem?
  I test the *SCS spool file and it also fail. and the spool file just the compile list of the source code.

> 
> 4. Did you specify WSCST(QWPTIFFG4) at SPL2STMF command? TIFF2PDF supports only TIFF-G4 format.
  Yes. I convert the spool file to Tiff by wscst(QWPTIFFG4). But when I convert the .tiff file to .pdf, it shrink... What can I do then ??

Perel


 

00021/00021 AAA00000  uzaemon          Help file added                         
( 1)   00/07/07 10:12  00010へのコメント

Folks,

I added help file (PNLGRP) to SMTP. Descriptions are re-written in English.

Enjoy!

uzaemon @ Japan

 

00019/00019 AAA00000  uzaemon          Re: tiff2pdf problem                    
( 1)   00/07/07 10:07  00017へのコメント  コメント数：10
perel,

> The command tiff2pdf cann't work properly. I convert my spool file from 
> spl2stmf (.tif file) and then convert it to pdf.
> I found that it shrink to small portion in bottom left corner in the pdf file.

Please check followings:

1. Is the TIFF file generated properly? Use Microsoft Imaging or any other image tool to check the TIFF image.

2. What version of OS/400 are you using? Older OS/400 (say, V4R2 or before) has may PTFs for HPT(Host Print Transform).

3. Does this happen to all AFP spool files? If you convert, for example WRKSYSSTS *PRINT, do you still see the same problem?

4. Did you specify WSCST(QWPTIFFG4) at SPL2STMF command? TIFF2PDF supports only TIFF-G4 format.

Waiting for your reply.

uzaemon @ Japan

 

00017/00017 AAA00000  perel            tiff2pdf problem                        
( 1)   00/07/06 15:14

The command tiff2pdf cann't work properly. I convert my spool file from 
spl2stmf (.tif file) and then convert it to pdf.
I found that it shrink to small portion in bottom left corner in the pdf file.
 

00016/00016 AAA00000  editor           www.400times.co.uk                      
( 1)   00/06/04 17:25

Hi, You might want to visit www.400times.co.uk

We carry product reviews and news, features and views, and are starting to catalogue most API's with examples.

Give us a try.

We are free and non-profit making.
 

00015/00015 AAA00000  uzaemon          Re: Zlib for AS/400 does not work here!!
( 1)   00/05/09 11:27  00014へのコメント

Hello Peter,

> I compiled Zlib for AS/400 under OS/400 V3R2M0 and encountered
> problems:

I'm not sure if my utils works on CISC AS/400. I edit/compile/test them only on RISC(V4R4) machines. 

> Problem 1:the following command doesn't work and complains 
> "cannot open /close /qsys.lib/qgpl.lib/testpf.file/testys.mbr"
------------------------(SNIP)---------------------------

Specify ZIP file to 'root' file system (stream file) as follows.

| > CALL PGM(MINIZIP) PARM('-o' '/tmp/testys.zip' 
|   '/qsys.lib/qgpl.lib/testpf.file/testys.mbr')

> Where can I find detailed Zlib usage manual? 

Just run minizip/miniunz without parameters, or look into source code.

> Could minizip compress files into a physical file member?
> Could minunx decompress PF from a compressed PF ?

It depends on IFS function of OS/400 and C-runtime service program, but I don't think it's possible or necessary. If you really want to put ZIP file into PF by some reason, try CPYFRM(TO)STMF command.

uzaemon@Japan

 

00014/00014 AAA00000  Peter            Zlib for AS/400 does not work here!!!   
( 1)   00/05/08 23:48

I compiled Zlib for AS/400 under OS/400 V3R2M0 and encountered problems:
Problem 1:the following command doesn't work and complains "cannot open
/close /qsys.lib/qgpl.lib/testpf.file/testys.mbr" while the file qgpl/
testpf exists and member testys doesn't exists.
call minizip parm("-o" "/qsys.lib/qgpl.lib/testpf.file/testys.mbr" 
"/qsys.lib/qgpl.lib/testpf.file/testpf.mbr")
Problem 2:the following command works but original member compressed.
call minizip parm("-o" "/qsys.lib/qgpl.lib/testpf.file/testpf.mbr")
Problem 3:miniunz doesn't work for Problem 2 compressed result
call miniunz parm("-x" "/qsys.lib/qgpl.lib/testpf.file/testpf.mbr")
or other command strings that I could imagine, the command complains
that cannot open /qsys.lib/qgpl.lib/testpf.file/testpf.mbr

Where can I find detailed Zlib usage manual? 
Could minizip compress files into a physical file member?
Could minunx decompress PF from a compressed PF ?

Best Regards
Peter
May8,2000
 

00013/00013 AAA00000  uzaemon          Re: can't read your site                
( 1)   00/04/25 21:51  00012へのコメント

Hello Bill,

> Interested in the shareware software your offering...but i cannot read it.....characters are misinterpreted..  is it possible for you to repair the damaged site???/

Most HTML pages except 'download' section in this site are wrtten in Japanese. If your browser doesn't display Japanese characters, you'll see gabage.

Even in the 'download' section, SNDM documents have not been translated to English though SNDM itself should run fine in English(SBCS) environment.

If you encounter any difficulty using my utils, please post your message here. 

uzaemon@Japan

 

00012/00012 AAA00000  Bill Kobus       can't read your site                    
( 1)   00/04/25 02:49

Interested in the shareware software your offering...but i cannot read it.....characters are misinterpreted..  is it possible for you to repair the damaged site???/
 

00011/00011 AAA00000  uzaemon          Re: SNDMHLP missing from SMTP120.exe    
( 1)   00/04/07 14:26  00010へのコメント

Hello martin,

> can you send me this file or update smtp120.exe

Sorry but I've not been able to spare my time to translate HLP file from Japanese to English. Same applies to SPL2STMF and TIFF2PDF.

I think those commands are straightforward but if you find any difficulties using those commands, please post question here.

uzaemon at Japan

 

00010/00010 AAA00000  martin           SNDMHLP missing from SMTP120.exe        
( 1)   00/04/06 00:32

hi

i'm trying to use sndm but smtp/qcmdsrc(sndmhlp) is missing
can you send me this file or update smtp120.exe

thank you in advance
 

00009/00009 AAA00000  uzaemon          Re: Can I create TIF file (Group 3) with
( 1)   00/04/05 16:01  00008へのコメント

Hello Jordi,

> Can I create TIF file (Group 3) with SPL2SMTF command?.
No, you can't. AFAIK, HPT doesn't generate G3 format TIFF.

If you have ILE-C compiler, you are not out of luck. TIFFLIB
contains TIFFCP program which converts a TIFF to another format.
You can also see TIFF information using TIFFINFO/TIFFDUMP.

Here's sample operation for you:

| > SPL2STMF FILE(QPSUPRTF) TOSTMF('/tmp/g4.tif') WSCST(QWPTIFFG4)
|   Stream file generated. execution time 0 min 2 sec, total pages = 14
| > ADDLIBLE LIB(TIFFLIB) POSITION(*LAST)
|   LIBRARY TIFFLIB ADDED TO LIBRARY LIST.
| > CALL PGM(TIFFINFO) PARM('/tmp/g4.tif')
| > CALL PGM(TIFFCP) PARM('-cg3' '/tmp/g4.tif' '/tmp/g3.tif')
| > CALL PGM(TIFFINFO) PARM('/tmp/g3.tif')

> I use GammaFax cards on Windows NT connected by Lan with AS/400...
I don't know anything about GammaFax. Please contact GammaFax support
person if G3 TIFF generated by TIFFCP can be sent using GammaFax.

I ported TIFFCP/TIFFINFO just to confirm that TIFFLIB works on AS/400.
I haven't fully tested those programs so I'm crossing fingers ;-)

Hope this helps.

uzaemon at Japan

 

00008/00008 AAA00000  Jordi Carreras   Can I create TIF file (Group 3) with SPL
( 1)   00/04/03 23:24

Hi:

I'm Jordi, from Barcelona, Spain.

Sorry for my bad English.
Can I create TIF file (Group 3) with SPL2SMTF command?.
I use GammaFax cards on Windows NT connected by Lan with AS/400 (V4R3). When I run SPL2SMTF command, I try WSCST(QWPTIFFG4), but GammaFax card don't understand version Tiff file. Why?. Is it possible to send a Fax?
 

00007/00007 AAA00000  uzaemon          掲載されたソフトのライセンスの考え方    
( 1)   00/03/18 14:00

SENDMのライセンスについてメールでお問い合わせがありましたが、次のように考えています。

☆移植物(zlib/Analog/wcount/tifflib/tiff2pdf)
  原作のライセンスに準拠します。GPLやその他のライセンスに
  ついては添付の文書やリンク先をご参照ください。

☆独自開発ソフト(SENDM/CRTCSVF/SPL2STMF)
  GPLと個別ライセンスのいずれかから選択できます。
  GPLは一部制約(商用/非商用とも自由に使用できるが、ソフト
  自体を高価に販売してはいけない、商用ソフトに組み込んでは
  ならない、など)があるため、抜け道として「個別ライセンス」
  という文言を入れてあります。

つまり簡単にいうと、「(商用を含めて)自由に利用できる。ただし、該当のソフトを法外な(配布手数料程度以上の)値段で売ってはいけない。」となります。

不明な部分がありましたらこちらの発言にコメントしてください。

 

00006/00006 AAA00000  Koji Echizen     AFP2PDF                                 
( 1)   00/01/21 09:54

はじめまして。
今回、私たちの開発でWEBを使用したシステムを考えております。
*不特定多数のユーザーを対象に展開するし、クライアント側にはIE環境だけで制御させようと考えています。
データのDLはCPYTOPCDを使用して可能ですが、帳票系などはPDF配布を考えており子の部分が行き詰まっております。
AFP2PDFが発表されれば非常に有り難いのですが、このような製品が発表されているのでしょうか？
（一応、AFPスプールファイルの出力が生成できる環境で、DBCSフォントを購入してあります。これからですが、AFPの基礎を勉強していこうと考えております。）

 

00005/00005 AAA00000  SEVEN            Re^2: 開設おめどうございます。          
( 1)   00/01/13 17:36  00004へのコメント

私もＡＦＰ２ＰＤＦが待ち遠しいです。
ＳＥＮＤＭテストでいろいろ使わせていただいてます。
何かの形で正式に製品化されるといいですね。
 

00004/00004 AAA00000  uzaemon          Re: 開設おめどうございます。            
( 1)   00/01/12 11:04  00003へのコメント  コメント数：1
> ＡＦＰ２ＰＤＦの具体的な入手方法を教えていただけませんか。

残念ながらまだ完成していませんので、もうしばらくお待ちください。
完成し次第こちらのホームページに掲載いたします。

今は別のツールに手を入れたりSENDMの機能追加をしています。AFP2PDF
のご要望が多いようでしたら優先順位をあげますので、こちらの掲示板
にご意見をお寄せください。
 

00003/00003 AAA00000  makoto komai     開設おめどうございます。                
( 1)   00/01/11 19:13

開設おめどうございます。
ｉ－ＳＵＣでのセミナーは大変興味深いものでした。
ＡＦＰ２ＰＤＦの具体的な入手方法を教えていただけませんか。
 

00001/00001 AAA00000  uzaemon          Test by webmaster.                      
( 1)   99/11/08 20:17

This is a test message.
日本語で入れてもOKです。

うざえもん
 


00103/00103 AAA00000  uzaemon          Re: Project manager                     
( 1)   00/11/11 15:44  00101へのコメント

Jorge,

> I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thank you for reporting that. I forgot to specify TGTRLS when I ran SAVLIB command. I put new smtp132.exe so please download and try again.

uzaemon@Japan

 

00102/00102 AAA00000  uzaemon          Re: SPL2STMFHLがソースにない            
( 1)   00/11/11 15:33  00100へのコメント

NISIさん、こん＊＊は。

> ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
> していません。

はい、存在しません。メッセージ11「Re: SNDMHLP missing from SMTP120.exe」の方に書いてありますが、まだこのメンバーは用意していません。コマンドプロンプトでF1を押したときにヘルプが表示されませんが、動作自体に支障はありません。

すっかり忘れてました... (^-^;; そのうち余裕ができたら追加しますのであしからず。

uzaemon@Japan

 

00101/00101 AAA00000  Jorge Lopez-Serr Project manager                         
( 1)   00/11/11 07:31

Hello :
I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thanks

Jorge
 

00100/00100 AAA00000  NISI             SPL2STMFHLがソースにない                
( 1)   00/11/10 14:28

はじめまして、今回ＡＳのスプールをＰＤＦに変換しようとして
まずはSPL2STMFをインストールしようとしてつまづいてしまいました。
ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
していません。
CRTPNLGRP PNLGRP(&OLIB/SPL2STMFHL) SRCFILE(&SLIB/SOURCE)
は実行されません。
SPL2STMFHLのパネルグループのソースは無いです。
何か処理がおかしかったのかそれとも、なにか勘違いでもしていますか？
教えていただけませんでしょうか？
 

00099/00099 AAA00000  uzaemon          Re: SPL2STMFでのＴＩＦＦ変換時の漢字    
( 1)   00/11/07 18:43  00096へのコメント

Y.Oさん、こん＊＊は。

> Ｙ　Ｓｏｎｅさんににているのですが、SPL2STMFを使ってＴＩＦＦに変換したとき漢字が化けてしまうのですが、何か設定方法があったら教えてください。
> ちなみに、WSCSTは、QWPTIFFG4を使用しています。

次の点を確認してください。

- AFP用の日本語フォント(5738-FN1など)が導入されている
- 印刷装置ファイルのCDEFNT/IGCCDEFNTに日本語フォントが指定されている(http://homepage1.nifty.com/uzaemon/hpt_usage.htmlやhttp://homepage1.nifty.com/uzaemon/afpprt.htmlに設定例があります)
- AFPプリンターやAFPビューアー(CA Expressに付属)では正しく漢字が表示される

> あと、ＷＳＣＳＴ作成の参考ＨＰ又は、資料がありましたら教えてください。

WSCSTについてはマニュアル(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AQ600/CCONTENTS)、RedBook(http://www.redbooks.ibm.com/abstracts/sg242160.html)や研修用資料(http://www.ibm.co.jp/as400/network/internet/cgiprog/doc.htmの「lpr/lpd」)が参考になると思います。

uzaemon@Japan

 

00098/00098 AAA00000  uzaemon          Re^3: TIFF2PDFでの変換後Paper Size      
( 1)   00/11/07 18:42  00097へのコメント

Miyasakaさん、

> SPL2STMFで AS/400のSPOOL->TIFFと変換した時点で、
> 元より文字が小さくなってしまいます。
> 文字を大きくする方法がありましたら教えていただけないでしょうか？

AFP印刷出力の場合、通常の文字の大きさは使用するフォントによって決まります。例えばhttp://homepage1.nifty.com/uzaemon/hpt_usage.htmlで使用例を示しているように、ソースファイルの印刷出力をAFPにする場合はOVRPRFコマンドでフォントを指定します。

例) OVRPRTF FILE(QPSUPRTF) DEVTYPE(*AFPDS) CDEFNT(QFNT61/X0N13N) IGCCDEFNT(QFNT61/X0M26F)

文字を大きくしたい場合は24ドットフォント(QFNT61/X0N13NとQFNT61/X0M26F)ではなく32ドット(QFNT61/X0N18NとQFNT61/X0M36F)などにします。

なお、TIFF2PDFではさらに元のTIFFファイルが用紙に収まるようにスケーリングしているようですので、あまり大きなフォントと用紙サイズを指定しても実際にPDFとして閲覧する際に縮小表示されてしまいます。この辺りは試行錯誤が必要でしょう。

uzaemon@Japan

 

00097/00097 AAA00000  H.Miyasaka       Re^2: TIFF2PDFでの変換後Paper Size      
( 1)   00/11/06 17:47  00090へのコメント  コメント数：1
Miyasakaです。迅速な回答ありがとうございます。
> 
> 縦/横幅の設定はTIFF2PDFCの107/108行目で行っているようですの　で、この数値を入れ替えればA4横になりそうな気がします。
> 0107.00 #define A4W 595.0
> 0108.00 #define A4H 842.0
> 
ご指示いただいた通りに試してみたところ、うまくいきました。
どうもありがとうございました。

そこでもう一つ質問があるのですが、
SPL2STMFで AS/400のSPOOL->TIFFと変換した時点で、
元より文字が小さくなってしまいます。
文字を大きくする方法がありましたら教えていただけないでしょうか？

よろしくお願いします。
 


00103/00103 AAA00000  uzaemon          Re: Project manager                     
( 1)   00/11/11 15:44  00101へのコメント

Jorge,

> I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thank you for reporting that. I forgot to specify TGTRLS when I ran SAVLIB command. I put new smtp132.exe so please download and try again.

uzaemon@Japan

 

00102/00102 AAA00000  uzaemon          Re: SPL2STMFHLがソースにない            
( 1)   00/11/11 15:33  00100へのコメント

NISIさん、こん＊＊は。

> ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
> していません。

はい、存在しません。メッセージ11「Re: SNDMHLP missing from SMTP120.exe」の方に書いてありますが、まだこのメンバーは用意していません。コマンドプロンプトでF1を押したときにヘルプが表示されませんが、動作自体に支障はありません。

すっかり忘れてました... (^-^;; そのうち余裕ができたら追加しますのであしからず。

uzaemon@Japan

 

00101/00101 AAA00000  Jorge Lopez-Serr Project manager                         
( 1)   00/11/11 07:31

Hello :
I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thanks

Jorge
 

00100/00100 AAA00000  NISI             SPL2STMFHLがソースにない                
( 1)   00/11/10 14:28

はじめまして、今回ＡＳのスプールをＰＤＦに変換しようとして
まずはSPL2STMFをインストールしようとしてつまづいてしまいました。
ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
していません。
CRTPNLGRP PNLGRP(&OLIB/SPL2STMFHL) SRCFILE(&SLIB/SOURCE)
は実行されません。
SPL2STMFHLのパネルグループのソースは無いです。
何か処理がおかしかったのかそれとも、なにか勘違いでもしていますか？
教えていただけませんでしょうか？
 

00099/00099 AAA00000  uzaemon          Re: SPL2STMFでのＴＩＦＦ変換時の漢字    
( 1)   00/11/07 18:43  00096へのコメント

Y.Oさん、こん＊＊は。

> Ｙ　Ｓｏｎｅさんににているのですが、SPL2STMFを使ってＴＩＦＦに変換したとき漢字が化けてしまうのですが、何か設定方法があったら教えてください。
> ちなみに、WSCSTは、QWPTIFFG4を使用しています。

次の点を確認してください。

- AFP用の日本語フォント(5738-FN1など)が導入されている
- 印刷装置ファイルのCDEFNT/IGCCDEFNTに日本語フォントが指定されている(http://homepage1.nifty.com/uzaemon/hpt_usage.htmlやhttp://homepage1.nifty.com/uzaemon/afpprt.htmlに設定例があります)
- AFPプリンターやAFPビューアー(CA Expressに付属)では正しく漢字が表示される

> あと、ＷＳＣＳＴ作成の参考ＨＰ又は、資料がありましたら教えてください。

WSCSTについてはマニュアル(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AQ600/CCONTENTS)、RedBook(http://www.redbooks.ibm.com/abstracts/sg242160.html)や研修用資料(http://www.ibm.co.jp/as400/network/internet/cgiprog/doc.htmの「lpr/lpd」)が参考になると思います。

uzaemon@Japan

 

00098/00098 AAA00000  uzaemon          Re^3: TIFF2PDFでの変換後Paper Size      
( 1)   00/11/07 18:42  00097へのコメント

Miyasakaさん、

> SPL2STMFで AS/400のSPOOL->TIFFと変換した時点で、
> 元より文字が小さくなってしまいます。
> 文字を大きくする方法がありましたら教えていただけないでしょうか？

AFP印刷出力の場合、通常の文字の大きさは使用するフォントによって決まります。例えばhttp://homepage1.nifty.com/uzaemon/hpt_usage.htmlで使用例を示しているように、ソースファイルの印刷出力をAFPにする場合はOVRPRFコマンドでフォントを指定します。

例) OVRPRTF FILE(QPSUPRTF) DEVTYPE(*AFPDS) CDEFNT(QFNT61/X0N13N) IGCCDEFNT(QFNT61/X0M26F)

文字を大きくしたい場合は24ドットフォント(QFNT61/X0N13NとQFNT61/X0M26F)ではなく32ドット(QFNT61/X0N18NとQFNT61/X0M36F)などにします。

なお、TIFF2PDFではさらに元のTIFFファイルが用紙に収まるようにスケーリングしているようですので、あまり大きなフォントと用紙サイズを指定しても実際にPDFとして閲覧する際に縮小表示されてしまいます。この辺りは試行錯誤が必要でしょう。

uzaemon@Japan

 

00097/00097 AAA00000  H.Miyasaka       Re^2: TIFF2PDFでの変換後Paper Size      
( 1)   00/11/06 17:47  00090へのコメント  コメント数：1
Miyasakaです。迅速な回答ありがとうございます。
> 
> 縦/横幅の設定はTIFF2PDFCの107/108行目で行っているようですの　で、この数値を入れ替えればA4横になりそうな気がします。
> 0107.00 #define A4W 595.0
> 0108.00 #define A4H 842.0
> 
ご指示いただいた通りに試してみたところ、うまくいきました。
どうもありがとうございました。

そこでもう一つ質問があるのですが、
SPL2STMFで AS/400のSPOOL->TIFFと変換した時点で、
元より文字が小さくなってしまいます。
文字を大きくする方法がありましたら教えていただけないでしょうか？

よろしくお願いします。
 


00099/00099 AAA00000  uzaemon          Re: SPL2STMFでのＴＩＦＦ変換時の漢字    
( 1)   00/11/07 18:43  00096へのコメント

Y.Oさん、こん＊＊は。

> Ｙ　Ｓｏｎｅさんににているのですが、SPL2STMFを使ってＴＩＦＦに変換したとき漢字が化けてしまうのですが、何か設定方法があったら教えてください。
> ちなみに、WSCSTは、QWPTIFFG4を使用しています。

次の点を確認してください。

- AFP用の日本語フォント(5738-FN1など)が導入されている
- 印刷装置ファイルのCDEFNT/IGCCDEFNTに日本語フォントが指定されている(http://homepage1.nifty.com/uzaemon/hpt_usage.htmlやhttp://homepage1.nifty.com/uzaemon/afpprt.htmlに設定例があります)
- AFPプリンターやAFPビューアー(CA Expressに付属)では正しく漢字が表示される

> あと、ＷＳＣＳＴ作成の参考ＨＰ又は、資料がありましたら教えてください。

WSCSTについてはマニュアル(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AQ600/CCONTENTS)、RedBook(http://www.redbooks.ibm.com/abstracts/sg242160.html)や研修用資料(http://www.ibm.co.jp/as400/network/internet/cgiprog/doc.htmの「lpr/lpd」)が参考になると思います。

uzaemon@Japan

 

00096/00096 AAA00000  Y.O              SPL2STMFでのＴＩＦＦ変換時の漢字        
( 1)   00/11/06 14:41

はじめまして
Ｙ　Ｓｏｎｅさんににているのですが、SPL2STMFを使ってＴＩＦＦに変換したとき漢字が化けてしまうのですが、何か設定方法があったら教えてください。
ちなみに、WSCSTは、QWPTIFFG4を使用しています。
http://homepage1.nifty.com/uzaemon/hpt_usage.htmlのとうりに行ってＴＸＴ変換は、うまく行えました。
あと、ＷＳＣＳＴ作成の参考ＨＰ又は、資料がありましたら教えてください。
 


00139/00139 AAA00000  uzaemon          Thanks, Tim                             
( 1)   01/03/10 11:40  00138へのコメント

Tim,

I'm very glad to hear that you have found something useful at this site. If you have any questions that you think we can help with, please put them on this BBS. 

uzaemon @ Japan

 

00138/00138 AAA00000  Tim Swearingen   Programmer Analyst                      
( 1)   01/03/10 01:51

Just wanted to say thanks for posting your work.  You have helped me eliminate a lot of work I needed to do.
 

00137/00137 AAA00000  uzaemon          Re: Conversion of RPG code to Japanese  
( 1)   01/03/08 19:14  00136へのコメント

Tapan,

> I would appreciate information/pointers to any resources which will help me in completing my assignment successfully.

You can find the information at the Web. For example, check out:

DBCS GUIDE -- http://www.as400.ibm.com/developer/dbcs/guide.html
Manuals such as "AS/400 International Application Development V4R2", "AS/400 National Language Support V4R2" at -- http://publib.boulder.ibm.com/pubs/html/as400/online/homeeng1.htm

Leaving that aside, please post messages only related to my softwares. This BBS is not for general Q&A.

uzaemon @ Japan

 

00136/00136 AAA00000  Tapan            Conversion of RPG code to Japanese      
( 1)   01/03/08 16:52

Hi

I am working on localising a RPG IV application on AS/400 to enable Japanese character set (double byte).

I would appreciate information/pointers to any resources which will help me in completing my assignment successfully.

Rgds
Tapan

 

00135/00135 AAA00000  uzaemon          Re: Tifflib and no c compiler           
( 1)   01/03/06 20:23  00134へのコメント

Marco,

> I mean i'd like to use tifflib but I cannot compile the sources.

You cannot make TIFFLIB without C compiler but you can use TIFFLIB without C compiler. See '45. Re: Convert tiff file to PDF file'.

Anyway you cannot convert SCS to PDF using utilities in this site. You might better look for alternatives such as:

CPYSPLFPDF Command -> http://www.midrangecomputing.com/anje/article.cfm?id=180&md=19993
PDF/400? - eVC's SCS to PDF Print Driver -> http://www.export-ventures.com/TreeSaverDL.htm
NEED AS400 REPORTS IN PDF? -> http://www.dfowle.dircon.co.uk/PDFing/
RJS Software Systems -> http://www.rjssoft.com/rjsdown.htm
AS/400, Acrobat and e-mail -> http://www.users.dircon.co.uk/~dfowle/wpxoq1.htm

uzaemon @ Japan

 

00134/00134 AAA00000  Marco Facchinett Tifflib and no c compiler               
( 1)   01/03/06 01:41

How to convert spool (SCS) to pdf if I have no c compiler?
I mean i'd like to use tifflib but I cannot compile the sources.

Tia 
Marco Facchinetti
 

00133/00133 AAA00000  uzaemon          Re^2: 掲載されたソフトのライセンスの考 
( 1)   01/02/28 22:30  00130へのコメント

入井さん、こん○○は。

> ＳＥＮＤＭに関しては基幹システムへ組み込むためのプログラミング工数のみを顧客に請求する予定でおりますが、使用する旨の契約書等を
> 私（弊社）と”uzaemon”様の間で取り交わす必要はないのでしょうか？

必要ありません。GPLに準拠している限り自由にご利用ください。

なお、当方ではいかなる責任も負うことはできませんので、入井さんとお客様の判断にて利用の可否をご判断ください。

uzaemon@japan

 

00132/00132 AAA00000  uzaemon          Re: Using ZLIB with *SAVF               
( 1)   01/02/28 22:23  00131へのコメント

Al,

Here's the sample operation.

* * ZIP * * * * * * * * * * * * * * *
> CRTLIB LIB(LIB)
  Library LIB created.
> CRTSRCPF FILE(LIB/QXXXSRC)
  File QXXXSRC created in library LIB.
> CRTSAVF FILE(QGPL/TEST)
  File TEST created in library QGPL.
> SAVLIB LIB(LIB) DEV(*SAVF) SAVF(QGPL/TEST) DTACPR(*YES)
  2 objects saved from library LIB.
> CPYTOSTMF FROMMBR('/qsys.lib/qgpl.lib/test.file') TOSTMF('/tmp/test.savf'
  ) STMFOPT(*REPLACE)
  Object copied.
> CALL PGM(ZLIB/MINIZIP) PARM('-o' '/tmp/test.zip' '/tmp/test.savf')
  creating /tmp/test.zip
  Press ENTER to end terminal session.
> DLTLIB LIB(LIB)
  Library LIB deleted.
> DLTF FILE(QGPL/TEST)
  Object TEST in QGPL type *FILE deleted.
> DEL OBJLNK('/tmp/test.savf')
  Link removed.

* * UNZIP * * * * * * * * * * * * * *
> CALL PGM(ZLIB/MINIUNZ) PARM('-x' '/tmp/test.zip')
  MiniUnz 0.15, demo of zLib + Unz package written by Gilles Vollant
  more info at http://wwww.winimage/zLibDll/unzip.htm

  /tmp/test.zip opened
   extracting: /tmp/test.savf
  Press ENTER to end terminal session.
> CRTSAVF FILE(QGPL/TEST2)
  File TEST2 created in library QGPL.
> CPYFRMSTMF FROMSTMF('/tmp/test.savf') TOMBR('/qsys.lib/qgpl.lib/test2.fil
  e') MBROPT(*REPLACE)
  Stream file copied to object.
> RSTLIB SAVLIB(LIB) DEV(*SAVF) SAVF(QGPL/TEST2)
  2 objects restored from LIB to LIB.
> DEL OBJLNK('/tmp/test.savf')
  Link removed.
> DEL OBJLNK('/tmp/test.zip')
  Link removed.

Have fun!

uzaemon@Japan


 

00131/00131 AAA00000  Al               Using ZLIB with *SAVF                   
( 1)   01/02/27 17:45

Hi, I would like to use ZLIB with *SAVF to make daily backups smaller. You recommend to convert save files to  stream file using CPYTOSTMF/CPYFRMSTMF. 
Could you be so kind and help me with syntax of these commands, (I don't know what is wrong, but I'm not able to convert save file to physical file member).
Thanks, Al.
 

00130/00130 AAA00000  入井明彦         Re: 掲載されたソフトのライセンスの考え 
( 1)   01/02/27 11:45  00007へのコメント  コメント数：1
 SENDMのライセンスに関して”不明な部分がありましたらこちらの発言にコメントしてください。”と記載されていましたので、お聞きします。
現在、基幹システムの一部Web化を行う受託をしています。この開発の中で、基幹システムからメールを送信する必要があるため、ＳＥＮＤＭ
の機能でメール送信行おうとしています。
ＳＥＮＤＭに関しては基幹システムへ組み込むためのプログラミング工数のみを顧客に請求する予定でおりますが、使用する旨の契約書等を
私（弊社）と”uzaemon”様の間で取り交わす必要はないのでしょうか？

 

00129/00129 AAA00000  uzaemon          Re: Library QSYSINC                     
( 1)   01/02/18 00:01  00126へのコメント

Aaron,

> I am trying to install SNDM and it cannot find QSYSINC in the /COPY statements.  I cannot find QSYSINC on my system at all and don't know what it is either.

See message '68. Re^3: /COPY' in this BBS.
Hope this solves your problem.

uzaemon@Japan

 

00128/00128 AAA00000  uzaemon          Re: GIF FILE QUALITY                    
( 1)   01/02/17 23:49  00125へのコメント

CANADA,

> I then tried to greate .gif files using workstation customization object QWPGIF and the quality is much reduced?

I tried it and got same result on V4R5. Image resolution of GIF file is much lower than TIFF (see http://homepage1.nifty.com/uzaemon/tiff_gif.png ).

> Are there any workstation customization objects out there that could be of better quality.

TIFF has better quality and I don't know why it's not enough for you. Anyway I think you have two options:

- Ask IBM if QWPGIF can generate better image. As RTVWSCST is not available for QWPGIF, you need to ask IBM through your standard support process.

- Convert TIFF to GIF. You can find some tools (for ANSI-C) on the Web, for example, check out http://cfa-www.harvard.edu/~alberto/tiff/ , http://netpbm.sourceforge.net/ , http://kalex.engin.umich.edu/tif2gif/ and many more. 

uzaemon@Japan

 

00127/00127 AAA00000  uzaemon          Re: TIFF2PDFについて                    
( 1)   01/02/17 23:32  00124へのコメント

Masaさん、

> Ｃのコンパイラは入っていませんが、問題ないでしょうか？

ILE-Cコンパイラがなければコンパイルができませんのでプログラムを作成することはできません。配布方針についてはこのBBSのメッセージ「41. Convert tiff file to PDF file」と45をご覧ください。  

なお、ILE-Cコンパイラが無くても実行することはできるはずです。

uzaemon@Japan

 

00126/00126 AAA00000  Aaron Bartell    RPG Programmer                          
( 1)   01/02/16 08:20

I am trying to install SNDM and it cannot find QSYSINC in the /COPY statements.  I cannot find QSYSINC on my system at all and don't know what it is either.

Thanks in advance,
Aaron Bartell
 

00125/00125 AAA00000  CANADA           GIF FILE QUALITY                        
( 1)   01/02/16 05:31

I was using your SPL2STMF with much sucess to create tiff files then converting them to PDF. I then tried to greate .gif files using workstation customization object QWPGIF and the quality is much reduced? Are there any workstation customization objects out there that could be of better quality. (Also, I was wondering if colour would be supported in these transforms? Up until now I was only using black and white since I cannot generate an overlay from Windows is colour using the IBM AFP drivers they supply?)
 

00124/00124 AAA00000  Masa             TIFF2PDFについて                        
( 1)   01/02/16 01:43

どうも、初めまして。
スプールファイルのＰＤＦの案件がありまして、ＴＩＦＦ２ＰＤＦを
テストさせていただこうと思っていますが、ウチのＡＳ４００には
Ｃのコンパイラは入っていませんが、問題ないでしょうか？

ＲＥＸＸの中身を見ると、コンパイルするようなのですが....
 

00123/00123 AAA00000  uzaemon          Re^3: ＡＰＷをつかった印刷物            
( 1)   01/02/14 22:40  00122へのコメント

taroさん、

> さて、サンプルを拝見させていただきましたが、結構文字が小さいような気がします。これは、SPL2STMFの仕様、つまりA4サイズに縮小されるというものによるのでしょうか？
> 
> また、使用するAFPフォントの指定によるものなのでしょうか？

元のフォントが小さい(デフォルトで24x24ドットフォントを使っている?)ためだと思います。


> 今回のサンプル作成していただいた際には、上記のオプションが入っているAS/400で試していただいたのですね。

はい。

> SPL2STMFの部分では、QFNTｘｘｘが必要になると思っていたのですが、必須条件ではないということですね。

古い情報ですがIPDSプリンター・サポート発表時の資料に「現行のSCS漢字フォントをAFPフォントに変換することができます」とありますので、標準のQIGC2424またはQIGC3232の文字イメージが利用できるようです。担当のSEさんにご確認ください。

> あと、TIFFファイルのサイズが大きくなる要素としては、変換したいスプールファイルに含まれるＡＰＷによる罫線や、文字の量に比例すると考えてますが、間違いないでしょうか？

正確には、ファイルサイズは印刷出力の複雑さに依存します。HPT(SPL2STMF)はAFP印刷出力を白黒の圧縮画像に変換するので、一般的に「文字/罫線が多い≒圧縮率が低い→サイズが大きくなる」と考えられます。

uzaemon@Japan

 

00122/00122 AAA00000  taro             Re^2: ＡＰＷをつかった印刷物            
( 1)   01/02/14 11:54  00121へのコメント  コメント数：1
uzaemonさん、早速のReplyありがとうございます。
さて、サンプルを拝見させていただきましたが、結構文字が小さいような気がします。これは、SPL2STMFの仕様、つまりA4サイズに縮小されるというものによるのでしょうか？

また、使用するAFPフォントの指定によるものなのでしょうか？


> APSU(5769AP1)のオプション1(APSU-IPDSプリンター・サポート)が導入されていればできるような気がします。
> 

今回のサンプル作成していただいた際には、上記のオプションが入っているAS/400で試していただいたのですね。

> 
> > ＡＦＰフォントなどないと無理でしょうか？
> 
> テストしたAS/400にAFPフォントは導入済みであり、これが無くても出力できるかはテストしていません。
> 

SPL2STMFの部分では、QFNTｘｘｘが必要になると思っていたのですが、必須条件ではないということですね。


あと、TIFFファイルのサイズが大きくなる要素としては、変換したいスプールファイルに含まれるＡＰＷによる罫線や、文字の量に比例すると考えてますが、間違いないでしょうか？


 

00121/00121 AAA00000  uzaemon          Re: ＡＰＷをつかった印刷物              
( 1)   01/02/12 10:23  00120へのコメント  コメント数：2
taroさん、

> ＡＰＷをつかった印刷スプールを、ＴＩＦＦファイルまたはＰＤＦにはそもそも変換できるのでしょうか？

APSU(5769AP1)のオプション1(APSU-IPDSプリンター・サポート)が導入されていればできるような気がします。

試してみたところ一般的なCPI、横倍角、罫線はSPL2STMFでTIFFに変換されました。縦倍角やLPI、記号セットなどは試していません。

○APWソースファイル

| ADDAPW LINE(1)
|  ＡＰＷのテスト
| ADDAPW LINE(3) CPI((20 15 10))
| CPI10   ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890
| ADDAPW LINE(5) CPI((20 15 12))
| CPI12   ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890
| ADDAPW LINE(7) CPI((20 15 13.4))
| CPI13.4 ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890
| ADDAPW LINE(9) CPI((20 15 15))
| CPI15   ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890
| ADDAPW LINE(11) IGCCPI((30 15 5))
|  ＩＧＣＣＰＩ５　　　亜居卯絵尾可気区毛小差詩酢背粗
| ADDAPW LINE(13) IGCCPI((30 15 6))
|  ＩＧＣＣＰＩ６　　　亜居卯絵尾可気区毛小差詩酢背粗
| ADDAPW LINE(15) IGCCPI((30 15 6.7))
|  ＩＧＣＣＰＩ６．７　亜居卯絵尾可気区毛小差詩酢背粗
| ADDAPW LINE(17) IGCCPI((30 15 7.5))
|  ＩＧＣＣＰＩ７．５　亜居卯絵尾可気区毛小差詩酢背粗
| ADDAPW LINE(19) MAGNIFY((1 18))
|  倍角文字 ﾊﾞｲｶｸﾓｼﾞ 
| ADDAPW LINE(21)
|  細線    太線    二重線    点線
| DRAW(1 20  1 21  7)
| DRAW(2 20  9 21 15)
| DRAW(3 20 17 21 25)
| DRAW(4 20 27 21 33)

○手順

> CRTAPW FORMD(APWTEST) FILE(QAPWOBJ) SRCFILE(QAPWSRC)
   書式ファイル QAPWOBJ がライブラリー XXXXXX に作成された。
   書式 APWTEST が書式ファイル XXXXXX/QAPWOBJ に作成された。
> MRGAPW FORMD(APWTEST) FILE(QAPWOBJ) DEVTYPE(*AFPDS)
   書式合成が終了した。
> ADDLIBLE LIB(HPT) POSITION(*LAST)
   ライブラリー HPT がライブラリー・リストに追加された。
> SPL2STMF FILE(APWTEST) TOSTMF('/tmp/apwtest.tif') WSCST(QWPTIFFG4)
  Stream file generated. execution time 0 min 1 sec, total pages = 1

○変換結果

http://homepage1.nifty.com/uzaemon/apwtest.tif をご覧ください。(半角カナが化けていますが原因は調べていません)

> ＡＦＰフォントなどないと無理でしょうか？

テストしたAS/400にAFPフォントは導入済みであり、これが無くても出力できるかはテストしていません。

uzaemon@Japan

 

00120/00120 AAA00000  taro             ＡＰＷをつかった印刷物                  
( 1)   01/02/11 01:28

ＡＰＷをつかった印刷スプールを、ＴＩＦＦファイルまたはＰＤＦにはそもそも変換できるのでしょうか？
ＡＦＰフォントなどないと無理でしょうか？
 

00119/00119 AAA00000  uzaemon          Re: Selecting certain pages to convert t
( 1)   01/02/07 12:30  00116へのコメント

CANADA,

> I was wondering if there was any way when using SPL2STMF to create just certain pages or 1 page as a tiff instead of the whole spool file to TIFF.

I think there are several ways to do this:


1) Extract page(s) during host-print-transform

You need to modify ILE-RPG program 'SPL2STMFPR'. I'm not sure how to do that...

2) Sprit TIFF

TIFFLIB contains a small sample utility called 'TIFFSPRIT'.
TIFFSPRIT divides multi-page TIFF to single TIFFs.

Compile the program as follows:

> CRTCMOD MODULE(QTEMP/TIFFSPRIT) SRCFILE(TIFFLIB/TOOLS) OUTPUT(*PRINT)
> CRTPGM PGM(QTEMP/TIFFSPRIT) BNDSRVPGM(TIFFLIB/TIFFLIB)

Then you can sprit the TIFF:

> OVRPRTF FILE(QPDSPAJB) DEVTYPE(*AFPDS) CDEFNT(*FNTCHRSET)         
> WRKACTJOB OUTPUT(*PRINT)                                          
> SPL2STMF FILE(QPDSPAJB) TOSTMF('/tmp/ajb.tif') WSCST(QWPTIFFG4)   
  Stream file generated. execution time 0 min 0 sec, total pages = 4
> CALL PGM(QTEMP/TIFFSPRIT) PARM('/tmp/ajb.tif' SPRIT)              

Above operation converts one multi-page TIFF (four pages TIFF) to four files (SPRITaa.tif, SPRITab.tif, SPRITac.tif, SPRITad.tif).

If you want to extruct certain range of pages, you need to modify the program.

3) Extract page(s) during TIFF->PDF conversion

Modify TIFF2PDFC so that the program converts specific range of pages. Perhaps you need to edit main loop counter around line 192.

| for ( obj_nr=img_nr=1 ;  img_nr < dircount ; obj_nr+=4, img_nr++ ) 

4) Split the PDF file

Search the Internet (such as http://www.pdfzone.com/index.asp) to find the software which splits the PDF to smaller pieces.


Hope this helps.

uzaemon@Japan

 

00118/00118 AAA00000  uzaemon          Re: Perl dbi on AS/400                  
( 1)   01/02/07 12:27  00115へのコメント

Todd,

> Recently you posted a message about perl dbi returning blank fields from AS/400.  Did you ever resolve this?  We are having the same problem.

Unfortunately I have not been able to solve the problem.
I'm considering to contact developer (at IBM?) to make it work.

uzaemon@Japan

 

00117/00117 AAA00000  uzaemon          Re^4: Missing body text when attaching a
( 1)   01/02/07 12:24  00114へのコメント

John,

Thank you for your post.
If you find any problem with SMDM or if you have any feedback, then please post a message using this BBS.

uzaemon@Japan

 

00116/00116 AAA00000  CANADA           Selecting certain pages to convert to TI
( 1)   01/02/07 04:12

I was wondering if there was any way when using SPL2STMF to create just certain pages or 1 page as a tiff instead of the whole spool file to TIFF.

Thanks in advance.
 

00115/00115 AAA00000  Todd Chaffee     Perl dbi on AS/400                      
( 1)   01/02/07 02:45

Recently you posted a message about perl dbi returning blank fields from AS/400.  Did you ever resolve this?  We are having the same problem.  Please reply to tc@toddbiz.com

Thanks,
Todd Chaffee
 

00114/00114 AAA00000  John Marshall    Re^3: Missing body text when attaching a
( 1)   01/02/05 15:39  00063へのコメント  コメント数：1
Uzaemon,

I haven't been able to test this for a while. Sorry about that. The change does work. Thanks very much,

John M

> John,
> 
> Thank you for your mail to Deja.
> 
> I put test version of SMTP client program on my server. Please download http://homepage1.nifty.com/uzaemon/smtp131.exe and try again.
> 
> Just for your information, I changed boundary (in multipart mail) structure as follows. 
> 
> *current sndm
> |This is a multi-part message in MIME format.
> |
> |----=_Next_Part_29_Aug_2000_16.49.06
> |(Body text) 
> 
> *sndm test version 131
> |This is a multi-part message in MIME format.
> |
> |----=_Next_Part_29_Aug_2000_17.04.19
> |Content-Type: text/plain; charset="US-ASCII"
> |
> |(Body text) 
> 
> Waiting for your reply.
> 
> uzaemon @ Japan

 

00111/00111 AAA00000  uzaemon          Re^3: CRTCSVFRPG compiling error        
( 1)   01/01/09 12:43  00110へのコメント

> I've got the QSYSINC library. The /COPY seems to be OK.
> The problem is a compiling error in the QSYSINC/QRPGLESRC(QLGRLNGI)

Guillaume,

I'm not sure why the program includes QSYSINC/QRPGLESRC(QLGRLNGI). In CSV/SOURCE.CRTCSVFRPG, /COPY is defined as follows:

0134.00 D*COPY QSYSINC/QRPGLESRC,QLGRLNGI 
0135.00 D/COPY QSYSINC/QRPGSRC,QLGRLNGI   

As IBM put the ILE source member QLGRLNGI to QRPGSRC by mistake (I guess, at least on V4R4 and V4R5), the program should copy from source file QSYSINC/QRPGSRC, not from QSYSINC/QRPGLESRC. Please confirm that you are using the original source code and the program copies QSYSINC/QRPGSRC(QLGRLNGI).

Let me know result of your investigation.

uzaemon @ Japan

 

00110/00110 AAA00000  guillaume cesbro Re^2: CRTCSVFRPG compiling error        
( 1)   01/01/08 20:02  00109へのコメント  コメント数：1
> > Compiling error with CRTCSVFRPG
> > when i'm compiling this RPGLE source, i've the RNF4005 error on the first line of QSYSINC/QRPGLE,QLGRLNGI !!!
> 
> Guillaume,
> 
> Check if IBM supplied library QSYSINC exists on your AS/400. If not, see message '68. Re^3: /COPY' in this BBS.
> 
> Hope this helps.
> 
> uzaemon @ Japan

I've got the QSYSINC library. The /COPY seems to be OK.
The problem is a compiling error in the QSYSINC/QRPGLESRC(QLGRLNGI)
 

00109/00109 AAA00000  uzaemon          Re: CRTCSVFRPG compiling error          
( 1)   01/01/07 14:08  00108へのコメント  コメント数：2
> Compiling error with CRTCSVFRPG
> when i'm compiling this RPGLE source, i've the RNF4005 error on the first line of QSYSINC/QRPGLE,QLGRLNGI !!!

Guillaume,

Check if IBM supplied library QSYSINC exists on your AS/400. If not, see message '68. Re^3: /COPY' in this BBS.

Hope this helps.

uzaemon @ Japan

 

00108/00108 AAA00000  guillaume cesbro CRTCSVFRPG compiling error              
( 1)   01/01/05 01:01

Compiling error with CRTCSVFRPG
when i'm compiling this RPGLE source, i've the RNF4005 error on the first line of QSYSINC/QRPGLE,QLGRLNGI !!!
 

00107/00107 AAA00000  uzaemon          Re: SPL2STMFのフオントファイル          
( 1)   00/12/06 21:09  00106へのコメント

S.Aさん、こん○○は。

> ライブラリーQFNT61が存在しません　入手方法何かありますでしょか

AS/400の日本語AFPフォント(QFNT61を含む)は別売になっています。IBMさんからご購入ください。

uzaemon@Japan

 

00106/00106 AAA00000  S.A              SPL2STMFのフオントファイル              
( 1)   00/12/05 19:25

AS/400 VER 4.3を使用しています

SPL2STMFのフオントファイル
ライブラリーQFNT61が存在しません　入手方法何かありますでしょか

　　　　X0N13N, X0M26F ファイル等
 

00105/00105 AAA00000  uzaemon          Re: SPL2STMFでのエラー                  
( 1)   00/11/24 08:59  00104へのコメント

Miyasakaさん、こん○○わ。

>   Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt=30 

OS/400ではDSPMSGDというコマンドでメッセージの詳細を表示することができます。CPF3CF2は下記のような意味になります。

|メッセージＩＤ . . . . . . . :   CPF3CF2
|メッセージ・ファイル . . . . :   QCPFMSG
|  ライブラリー . . . . . . . :     QSYS
|
|  メッセージ . . :   &1 API の実行中にエラーが起こった。
| 原因－－貴社担当のサービス会社に連絡して，問題を報告してください。問題といっ
|   しょに渡す資料は次の通りです。
|    -- 正常に実行されなかった API のジョブ・ログ。
|    -- API で指定した実際のパラメーター。

つまり、API(QwpzHostPrintTransform)内部で問題が起こっているのでサービスに連絡を取る必要があるといっています。API側の問題である以上ユーザー・プログラム(SPL2STMF)側では対処が困難です。

通常のIBM製品の障害の場合と同様に、下記のような問題判別の手順を実施して結果をお知らせください。

- HPT関連の最新のPTFを適用しているか
- (可能であれば)他のリリースのOS/400でも発生するか
- 他のHPT機能(LPR/RMTOUTQなど)を利用した場合でも同様の現象が発生するか
- 発生する場合/しない場合の差異(具体的な再現の条件)は何か

uzaemon@Japan

 

00104/00104 AAA00000  H.Miyasaka       SPL2STMFでのエラー                      
( 1)   00/11/22 20:11

こんにちは、Miyasakaと申します。

SPL2STMFでSPOOL FILEをTIFF FILEに変換したところ、
SPOOLのページ数が多くなると、

  Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt=30 

というエラーが出てしまいます。
どのようにしたら回避できるか教えていただけないでしょうか？

（SPL2STMFRPの中の 57LINE & 233LINEで指定しているサイズは
増やしてあります。）

よろしくお願い致します。

 

00103/00103 AAA00000  uzaemon          Re: Project manager                     
( 1)   00/11/11 15:44  00101へのコメント

Jorge,

> I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thank you for reporting that. I forgot to specify TGTRLS when I ran SAVLIB command. I put new smtp132.exe so please download and try again.

uzaemon@Japan

 

00102/00102 AAA00000  uzaemon          Re: SPL2STMFHLがソースにない            
( 1)   00/11/11 15:33  00100へのコメント

NISIさん、こん＊＊は。

> ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
> していません。

はい、存在しません。メッセージ11「Re: SNDMHLP missing from SMTP120.exe」の方に書いてありますが、まだこのメンバーは用意していません。コマンドプロンプトでF1を押したときにヘルプが表示されませんが、動作自体に支障はありません。

すっかり忘れてました... (^-^;; そのうち余裕ができたら追加しますのであしからず。

uzaemon@Japan

 

00101/00101 AAA00000  Jorge Lopez-Serr Project manager                         
( 1)   00/11/11 07:31

Hello :
I'm interested on SNDM but I can't restore library because I have V4R3M0 OS/400.May I have a V4R3M0 backup from you.

Thanks

Jorge
 

00100/00100 AAA00000  NISI             SPL2STMFHLがソースにない                
( 1)   00/11/10 14:28

はじめまして、今回ＡＳのスプールをＰＤＦに変換しようとして
まずはSPL2STMFをインストールしようとしてつまづいてしまいました。
ダウンロードしたSOURCEファイル中にメンバーSPL2STMFHLは存在
していません。
CRTPNLGRP PNLGRP(&OLIB/SPL2STMFHL) SRCFILE(&SLIB/SOURCE)
は実行されません。
SPL2STMFHLのパネルグループのソースは無いです。
何か処理がおかしかったのかそれとも、なにか勘違いでもしていますか？
教えていただけませんでしょうか？
 

00099/00099 AAA00000  uzaemon          Re: SPL2STMFでのＴＩＦＦ変換時の漢字    
( 1)   00/11/07 18:43  00096へのコメント

Y.Oさん、こん＊＊は。

> Ｙ　Ｓｏｎｅさんににているのですが、SPL2STMFを使ってＴＩＦＦに変換したとき漢字が化けてしまうのですが、何か設定方法があったら教えてください。
> ちなみに、WSCSTは、QWPTIFFG4を使用しています。

次の点を確認してください。

- AFP用の日本語フォント(5738-FN1など)が導入されている
- 印刷装置ファイルのCDEFNT/IGCCDEFNTに日本語フォントが指定されている(http://homepage1.nifty.com/uzaemon/hpt_usage.htmlやhttp://homepage1.nifty.com/uzaemon/afpprt.htmlに設定例があります)
- AFPプリンターやAFPビューアー(CA Expressに付属)では正しく漢字が表示される

> あと、ＷＳＣＳＴ作成の参考ＨＰ又は、資料がありましたら教えてください。

WSCSTについてはマニュアル(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AQ600/CCONTENTS)、RedBook(http://www.redbooks.ibm.com/abstracts/sg242160.html)や研修用資料(http://www.ibm.co.jp/as400/network/internet/cgiprog/doc.htmの「lpr/lpd」)が参考になると思います。

uzaemon@Japan

 

00098/00098 AAA00000  uzaemon          Re^3: TIFF2PDFでの変換後Paper Size      
( 1)   00/11/07 18:42  00097へのコメント

Miyasakaさん、

> SPL2STMFで AS/400のSPOOL->TIFFと変換した時点で、
> 元より文字が小さくなってしまいます。
> 文字を大きくする方法がありましたら教えていただけないでしょうか？

AFP印刷出力の場合、通常の文字の大きさは使用するフォントによって決まります。例えばhttp://homepage1.nifty.com/uzaemon/hpt_usage.htmlで使用例を示しているように、ソースファイルの印刷出力をAFPにする場合はOVRPRFコマンドでフォントを指定します。

例) OVRPRTF FILE(QPSUPRTF) DEVTYPE(*AFPDS) CDEFNT(QFNT61/X0N13N) IGCCDEFNT(QFNT61/X0M26F)

文字を大きくしたい場合は24ドットフォント(QFNT61/X0N13NとQFNT61/X0M26F)ではなく32ドット(QFNT61/X0N18NとQFNT61/X0M36F)などにします。

なお、TIFF2PDFではさらに元のTIFFファイルが用紙に収まるようにスケーリングしているようですので、あまり大きなフォントと用紙サイズを指定しても実際にPDFとして閲覧する際に縮小表示されてしまいます。この辺りは試行錯誤が必要でしょう。

uzaemon@Japan

 


00236/00236 AAA00000  uzaemon          Re^4: SPL2STMF                          
( 1)   01/09/04 12:29  00235へのコメント

Jose,

> result-> RNS9309 

"RNS9309" indicates ILE-RPG compile error. Use WRKSPLF command and look for the compile list to examine the reason. Possible reasons are:

- You don't have library QSYSINC.
- You don't have enough authority to make the utility.

Let me know what you found.

uzaemon@Japan

 
00235/00235 AAA00000  jose             Re^3: SPL2STMF                          
( 1)   01/09/03 22:58  00234へのコメント  コメント数：1
> > Jose,
> > 
> > > STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
> > > after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.
> > 
> > How "it dosen't work"? Don't you see any error message?
> > Please examine your joblog (or low-level message) and let me know.
> > 
> > uzaemon@Japan
>   Start SPL2STMF compilation.                      
>    You must have authority to exec CRTxxx.         
>                                                    
>       * * * * * * * * * * * * * * * * * * * * * *  
>                                                    
>                                                    
>   Start creating SPL2STMF command...               
>     creating main program module SPL2STMFRP...     
>                                                    
>      result-> RNS9309                                     
>      creating main program SPL2STMFRP...                  
>      result-> CPF3C50                                     
>      creating pnlgrp...                                   
>      result-> CPF5A02                                     
>      creating command...                                  
>      result-> 0                                           
>                                                           
>    Compile finished. Confirm error(s) if exists.          
>                                                           
>    Press ENTER to end terminal session. 

>Pardon  me i forget to put an answer here is what appear on my screen and i try to see dspjoblog and i can't see anything.so what else can i do for this great program work?.
Thanks in advance.

 
00234/00234 AAA00000  jose             Re^2: SPL2STMF                          
( 1)   01/09/03 22:57  00233へのコメント  コメント数：2
> Jose,
> 
> > STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
> > after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.
> 
> How "it dosen't work"? Don't you see any error message?
> Please examine your joblog (or low-level message) and let me know.
> 
> uzaemon@Japan
  Start SPL2STMF compilation.                      
   You must have authority to exec CRTxxx.         
                                                   
      * * * * * * * * * * * * * * * * * * * * * *  
                                                   
                                                   
  Start creating SPL2STMF command...               
    creating main program module SPL2STMFRP...     
                                                   
     result-> RNS9309                                     
     creating main program SPL2STMFRP...                  
     result-> CPF3C50                                     
     creating pnlgrp...                                   
     result-> CPF5A02                                     
     creating command...                                  
     result-> 0                                           
                                                          
   Compile finished. Confirm error(s) if exists.          
                                                          
   Press ENTER to end terminal session. 
 
00233/00233 AAA00000  uzaemon          Re: SPL2STMF                            
( 1)   01/09/01 10:55  00232へのコメント  コメント数：3
Jose,

> STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
> after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.

How "it dosen't work"? Don't you see any error message?
Please examine your joblog (or low-level message) and let me know.

uzaemon@Japan

 
00232/00232 AAA00000  jose galvez      SPL2STMF                                
( 1)   01/09/01 05:09

STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.
Thanks en adavance.

Regards.

Jose.
 
00231/00231 AAA00000  uzaemon          Re^5: *Userascii AS/400 spools.         
( 1)   01/08/31 21:54  00230へのコメント

Jordi,

Now I understand what you mean.

> I try to use your command, but I can't. I think that result is in EBCDIC code (into IFS file), and I should convert them to ASCII code, is it true?. 

No. You are translating from ASCII to ASCII using EBCDIC to ASCII converter.

> Do you know how can I retrieve *Userascii spool files?

I think of several ways. 

The easiest way is to create WSCST which does NOTHING though I don't know if this is a right way (IBM does not support customized WSCST anyway). Here's the operation I tried.

1. Edit WSCST source file member (named "NONE" in this example) as follows.

| 0001.00 :WSCST DEVCLASS=TRANSFORM.
| 0002.00     :TRNSFRMTBL.          
| 0003.00 :EWSCST.                  

2. Create WSCST.

> CRTWSCST WSCST(HPT/NONE) SRCFILE(HPT/WSCST)

3. Exec SPL2STMF.

> SPL2STMF FILE(LPD0FF5) TOSTMF('/tmp/pcl2.pcl') WSCST(HPT/NONE) JOB(041573
  /?????/QPRTJOB) SPLNBR(2)                                                
  Stream file generated. execution time 0 min 0 sec, total pages = 1       

But above method has some overhead because it calls HPT API which is not necessary. You may modify SPL2STMF (or create from scrach) not to call HPT but create stream file just using QSPGETSP API.

Or you may use LPD software for PC or UNIX to store stream file. Some LPD softwares have capability to store the printer output as stream file instead of send it to the printer.


FYI, you can create *USERASCII spooled file using lpr/lpd as follow.

> CRTOUTQ OUTQ(QGPL/EBCDIC) RMTSYS(*INTNETADR) RMTPRTQ(QGPL/ASCII) CNNTYPE(
  *IP) DESTTYPE(*OTHER) MFRTYPMDL(*HP????) INTNETADR('ipaddress_of_your_as400')
> CRTOUTQ OUTQ(QGPL/ASCII)
> STRRMTWTR OUTQ(QGPL/EBCDIC) MSGQ(*REQUESTER)

Put your spooled file into OUTQ QGPL/EBCDIC. You'll see the file will be sent to QGPL/ASCII automatically.

uzaemon@Japan

 
00230/00230 AAA00000  Jordi carreras   Re^4: *Userascii AS/400 spools.         
( 1)   01/08/31 16:38  00229へのコメント  コメント数：1
Uzaemons,

Sorry for my bad english, but I try to explain with a easy example (PrintScreen key press). I need your help.

I need to retrieve a *Userascii Spools files into IFS files and after I send them to Fax board (I convert them from PCL format to TIF format), these spools are made into AS/400 by QUIKPRESS Software, a French Enterprise, and their format are *Userascii (graphics are included in them).
I try to use your command, but I can't. I think that result is in EBCDIC code (into IFS file), and I should convert them to ASCII code, is it true?. 

Do you know how can I retrieve *Userascii spool files?

Thanks for all.

Regards,

Jordi

 
00229/00229 AAA00000  uzaemon          Re^3: *Userascii AS/400 spools.         
( 1)   01/08/30 21:58  00228へのコメント  コメント数：2
Jordi,

Unfortunately, I still don't understand exactly what you *want* to do and I need more information.

> I make a spool file with AS/400 command:
>         OVRPRTF QSYSPRT DEVTYPE(*USERASCII) 

Why do you specify *USERASCII to transform "Printscreen" to PCL? I think QWPEPLPCL5 should be used to transform *SCS or *AFPDS to PCL.

> An other option for make a *Userascii spool into the AS/400 is by LPR command from MSDOS/Windows PC. The object generated is an *Userascii spool (print to Document with bitmaps, etc) in one AS/400 OUTQ.

This is completely different story. You don't need to transform (execute SPL2STMF) the spooled file because the contents has been already generated as PC data (PCL, Postscript or any other data stream for specific printer device).

Are you trying to make a stream file from spooled file which is sent from PC via LPR?

Waiting for your reply.

uzaemon@Japan

 
00228/00228 AAA00000  Jordi carreras   Re^2: *Userascii AS/400 spools.         
( 1)   01/08/29 23:24  00227へのコメント  コメント数：3
Uzaemon,

I make a spool file with AS/400 command:
        OVRPRTF QSYSPRT DEVTYPE(*USERASCII) 
and after, I press Printscreen key. I try to view that spool file generated before but I can't (you can see 1* into spool pages section).

Then, I use your command SPL2STMF, and I select *WSCST (QWPEPLPCL5). With my NT Explorer program, I go to path which where there is a test.pcl file generated by your command.

I use "Page View" program to Lincoln Company for view a PCL file, then when I try to view it, I see a lot of @@@. Isn't a original PrintScreen made for me.

Do you understand?

An other option for make a *Userascii spool into the AS/400 is by LPR command from MSDOS/Windows PC. The object generated is an *Userascii spool (print to Document with bitmaps, etc) in one AS/400 OUTQ.

Thanks for your fast request. I'm waiting for your news.

Jordi.

 
00227/00227 AAA00000  uzaemon          Re: *Userascii AS/400 spools.           
( 1)   01/08/29 22:04  00225へのコメント  コメント数：4
Jordi,

> I've tried to retrieve an *Userascii spool with SPL2STMF command but when I see it with Visual PCL program it's bad success.

I'm not sure what you are going to do.

- How did you create the *USERASCII spooled file?
- Which WSCST did you use with SPL2STMF command?
- What is "Visual PCL program" and how bad?

uzaemon@Japan

 
00226/00226 AAA00000  uzaemon          Re: sndm (PF in message body)           
( 1)   01/08/29 21:54  00223へのコメント

Beck,

> Is it possible to embed the contents of a physical file within the body of the message?  It looked like you can specify an 80 byte file.  Thanks, Beck

Please let me know what you want more specifically.

What kind of PF are you gonna send (i.e. customer master which contains PACK and ZONE fields or source file with 132 byte RCDLEN)? Why don't you send the PF as attachment file?

uzaemon@Japan

 
00225/00225 AAA00000  Jordi carreras   *Userascii AS/400 spools.               
( 1)   01/08/29 20:43

Hi,

I've tried to retrieve an *Userascii spool with SPL2STMF command but when I see it with Visual PCL program it's bad success.

Do you know how can I do? Is it possible to do?

Thanks for all.

Jordi.
 
00224/00224 AAA00000  Jordi carreras   Re^2: Greek fonts in SPL2STMF command   
( 1)   01/08/29 20:30  00209へのコメント

Hi Uzaemons,

Thanks for your request.

Jordi.
 
00223/00223 AAA00000  becky fredericks sndm                                    
( 1)   01/08/29 03:53

Is it possible to embed the contents of a physical file within the body of the message?  It looked like you can specify an 80 byte file.  Thanks, Beck
 
00221/00221 AAA00000  uzaemon          Re^5: output file with CRTCSVF          
( 1)   01/08/23 13:14  00220へのコメント

Mike,

> - This caracter ";" is use in french literatur not in database.

Do you mean french people cannot input ';' from their 5250 terminal (codepage 297, I assume)?

> How I can disable the option doublequote to have the same format as above.
> edede;frfr;frfr;eded;1212;1212

Double quote is necessary to canonical CSV file (IMHO) so I don't have a plan to add a function to "disable the option doublequote" for now. However you can create your own CRTCSVF by yourself as I stated in previous message "217. Re: output file with CRTCSVF". 

For example, you may change the default value of  variable "quote" in line 182 of CSV/SOURCE(CRTCSVF) to space (X'40'). Or change to control character (such as X'01') and remove the character before write to output stream file. Remember to comment out line 760 ~ 773 to avoid side effect.

uzaemon@Japan

 
00220/00220 AAA00000  Mike             Re^4: output file with CRTCSVF          
( 1)   01/08/23 03:51  00219へのコメント  コメント数：1
- This caracter ";" is use in french literatur not in database.
Now my question is :
How I can disable the option doublequote to have the same format as above.
edede;frfr;frfr;eded;1212;1212

Thank's in advance

> Laurent,
> 
> > We change the delimiter with this caracter ";" and we don't use in the data. 
> > for exemple :
> > the data line is
> > name,vendor,adress,item,number,
> > WASSENAR;MIKE;36, POSTADM;6600;236.36;
> 
> Two questions.
> 
> - How do you guarantee (not guess) that there are no delimiter character (in your case ';') in character fields?
> 
> - Have you modified the CRTCSVF not to write double quotation?
> 
> uzaemon@Japan

 
00219/00219 AAA00000  uzaemon          Re^3: output file with CRTCSVF          
( 1)   01/08/22 17:09  00218へのコメント  コメント数：2
Laurent,

> We change the delimiter with this caracter ";" and we don't use in the data. 
> for exemple :
> the data line is
> name,vendor,adress,item,number,
> WASSENAR;MIKE;36, POSTADM;6600;236.36;

Two questions.

- How do you guarantee (not guess) that there are no delimiter character (in your case ';') in character fields?

- Have you modified the CRTCSVF not to write double quotation?

uzaemon@Japan

 
00218/00218 AAA00000  Laurent          Re^2: output file with CRTCSVF          
( 1)   01/08/22 15:30  00217へのコメント  コメント数：3
We change the delimiter with this caracter ";" and we don't use in the data. 
for exemple :
the data line is
name,vendor,adress,item,number,
WASSENAR;MIKE;36, POSTADM;6600;236.36;

> Mike,
> 
> > but for a application I need a file without doublequote
> > for the data field, like this
> > 
> > name,vendor,adress,item,number,
> > 
> > is it possible ?
> 
> Anything is possible because we have the source code.
> 
> However I'll not do that for CRTCSVF which is not for specific purpose, because I cannot come up with the good circumvention when a character field includes comma (,) character. 
> 
> What happens if a field (say, "address") includes comma? Do you have any idea?
> 
> uzaemon@Japan

 
00217/00217 AAA00000  uzaemon          Re: output file with CRTCSVF            
( 1)   01/08/22 13:36  00215へのコメント  コメント数：4
Mike,

> but for a application I need a file without doublequote
> for the data field, like this
> 
> name,vendor,adress,item,number,
> 
> is it possible ?

Anything is possible because we have the source code.

However I'll not do that for CRTCSVF which is not for specific purpose, because I cannot come up with the good circumvention when a character field includes comma (,) character. 

What happens if a field (say, "address") includes comma? Do you have any idea?

uzaemon@Japan

 
00216/00216 AAA00000  uzaemon          Re: crtcsvf (delimiter)                 
( 1)   01/08/22 13:26  00214へのコメント

Laurent,

> Is it possible to use this caracter ";" to delimiter the record ?

Yes.

Just modify the command difinition (and optionally PNLGRP) to allow the character.

For example, you can edit CSV/SOURCE(CRTCSVF) as follows.

| 0049.00              PARM       KWD(FLDDLM) TYPE(*CHAR) LEN(1) DFT(*COMMA) +
| 0050.00                           SPCVAL((*COMMA ',') (*SPACE ' ')) +       
| 0051.00                           PMTCTL(*PMTRQS) PROMPT('Field delimiter') 

uzaemon@Japan

 
00215/00215 AAA00000  Mike             output file with CRTCSVF                
( 1)   01/08/22 03:29

Now when I exctract the file, the format is like this :

"name","vendor","adress",item,number,

but for a application I need a file without doublequote
for the data field, like this

name,vendor,adress,item,number,

is it possible ?

Thanks in advance.

 
00214/00214 AAA00000  Laurent          crtcsvf                                 
( 1)   01/08/21 21:14

Is it possible to use this caracter ";" to delimiter the record ?
 
00213/00213 AAA00000  uzaemon          Re^2: SNDM (Date header Timezone)       
( 1)   01/08/15 17:17  00212へのコメント

Johannes,

> here ar the parameters in our case:
> QUTCOFFSET   +01:00
> QTIME        09:15:11   HH:MM:SS
> now i start the programm.
> the date header is generated as follows:
> 15.08.2001 10:16 
> right were:
> 15.08.2001 09:16
> you see, the time is moved by an hour.
> why?

Uuum... What "time" do you mean? Is that the "time" your mailer shows or are you looking at actual (raw) mail header? Does your mailer convert the "Data:" header to GMT? 

SNDM command generates a following header as I stated in message "207.  Re: SNDM".

 Date: Sat, 11 Aug 2001 00:15:56 +0900

You should see "day of week", "day", "month", "year", "local time" and "timezone". In line 80 of source member SMTP/QRPGLESRC(CDATE),  the "Date" header is composed as follows.

| EVAL      datestring =                          
|           dow(dtout_dow + 1) + ', ' +          
|           %TRIM(%EDITC(dtout_day :'4')) + ' ' +
|           moy(dtout_month) + ' ' +             
|           %TRIM(%EDITC(dtout_year :'4')) +     
|           %EDITW(hms :'0  :  :  ') + ' ' +     
|           tzone_c                              

Please try followings and let me know.

- Run SNDM with DEBUG(*YES) and check the "Data" header, then examine the "Date" header. Here's an example.
                                   
17:30:09.708|S->[From: "=?ISO-2022-JP?B?GyhKQVM0MDAbJEIlRyViJTUlJCVIGyhC?="｣･ <webmaster@xxx.com>｣･To:]
17:30:09.708|   [ "=?ISO-2022-JP?B?GyRCJCpMPkEwTU0bKEI=?=" <user1@xxx.com>｣･Subject: =?ISO-2022-JP?B?G]
17:30:09.708|   [yRCRkAwVUBoJV4lOSU/ITw+SDJxN2syTBsoQg==?=｣･Date: Tue, 3 Jul 2001 17:30:09 +0900 ｣･MIME-Version: 1.0｣]
17:30:09.708|   [･Content-Type: multipart/mixed; boundary = "--=_Next_Part_03_Jul_2001_17.30.09"｣･X-Mailer: SMTP Clie]

- Let me know the mailer you are using, and try other mailer such as Outlook Express or Netscape Messenger.

uzaemon@Japan


P.S.
For our convenience, please use "reply" function of this BBS to follow up this thread.

 
00212/00212 AAA00000  Johannes Bley    Re: SNDM                                
( 1)   01/08/15 16:22

uzaemon,
here ar the parameters in our case:
QUTCOFFSET   +01:00
QTIME        09:15:11   HH:MM:SS
now i start the programm.
the date header is generated as follows:
15.08.2001 10:16 
right were:
15.08.2001 09:16
you see, the time is moved by an hour.
why?
johannes   
 
00211/00211 AAA00000  uzaemon          Re: No funciona TIFF2PDF                
( 1)   01/08/15 12:35  00210へのコメント

> Quiero utilizar el proceso TIFF2PDF,  luego de ejecutar los procedimientos rexx el obj TIFF2PDF *pgm no se genera.
> Estoy muy interesado en este proceso.
> Desde ya muchas gracias.
> 
> Carlos Horacio Suarez - Buenos Aires - Argentina.

(I want to use process TIFF2PDF, after executing the procedures rexx obj TIFF2PDF * WW I is not generated  Very I am interested in this process.  From already thank you very much.)

- - - - - - - - - - - - - - - - - - - - - - - - - - - 

Utilic http://wwwsystransoft.com / para traducir su mensaje.

(I used http://www.systransoft.com/ to translate your message.)

Entiendo solamente japon駸 e ingl駸  Si usted necesita mi
contestaci, fije por favor su mensaje en ingl駸.

(I only understand Japanese and English. If you need my reply, please post your message in English.)

De todas formas, controle por favor fuera de followings:
 - versi de su AS/400. 
 - usted tiene compilador de ILE-C. 
 - usted biblioteca QSYSINC del hav. 
 - mensaje de error del detalle.

(Anyway, please check out followings :
 - Version of your AS/400.
 - You have ILE-C compiler.
 - You hav library QSYSINC.
 - Detail error message.)

uzaemon@Japan

 
00210/00210 AAA00000  Carlos Suarez    No funciona TIFF2PDF                    
( 1)   01/08/14 08:25

Quiero utilizar el proceso TIFF2PDF,  luego de ejecutar los procedimientos rexx el obj TIFF2PDF *pgm no se genera.
Estoy muy interesado en este proceso.
Desde ya muchas gracias.

Carlos Horacio Suarez - Buenos Aires - Argentina.


 
00209/00209 AAA00000  uzaemon          Re: Greek fonts in SPL2STMF command     
( 1)   01/08/11 01:10  00201へのコメント  コメント数：1
Jordi,

SPL2STMF has nothing to do with character sets and data conversions. It just calls HPT and write the transformed data to stream file.

If you want to use SPL2STMF for Greek, Turkish, Chinese and Japanese spooled files, you should be able to generate the spooled files to pass to HPT. Also, you may need to create your own WSCST to generate appropriate stream file.

For example, if you want to generate Japanese text file from SCS spooled file, you need to customize WSCST to use IBMNONPAGES data stream. Or You should specify Japanese-capable CDEFNT and IGCCDTFNT to generate Japanese AFP spooled file.

Frankly, it is not an easy task. If you are not familiar to them, I recommend to consult your support channel.

uzaemon@Japan

 
00208/00208 AAA00000  uzaemon          Re: crtcvsf                             
( 1)   01/08/11 00:45  00204へのコメント

Joe,

Thank you for using CRTCSVF.

> Perhaps it s because I am using it on 4.3?

No, I have been using the utility since V3R7 (now, CRTCSVF is working well on V5R1).

> The debug printout shows a file was created, however, I cannot find it in the IFS.

Frankly, I cannot determine your problem from only this information.

- How are you looking for the stream file, by WRKLNK command or NetServer or FTP or anything else?
- Did you modify the program?
- Did you rebuild the program? 
- Are you using latest version?
- Do you have any special characters in the stream file name?
- Can you create CSV file in IBM supplied directory such as '/tmp' or '/home'?

Let me know the result of your investigation.

uzaemon@Japan ,now in vacation :-)

 
00207/00207 AAA00000  uzaemon          Re: SNDM                                
( 1)   01/08/11 00:42  00203へのコメント

Johannes,

> If email is generated has this in the head a wrong date. The time then by an hour is moved.

In Japan, we set system value QUTCOFFSET to +09:00. When I send a mail using SNDM at 0AM, the date header is generated as follows:

  Date: Sat, 11 Aug 2001 00:15:56 +0900

Immediately, I did the same thing from Microsoft OutlookExpress.

  Date: Sat, 11 Aug 2001 00:16:33 +0900

From this experiment, I think SNDM is working well (as designed). Please describe your problem more detail (possibly with some examples) so that I can better understand your situation.

uzaemon@Japan ,now in vacation :-)

 
00204/00204 AAA00000  Joe              crtcvsf                                 
( 1)   01/08/08 21:30

Thank you for this great utility.  I am having problems getting it to work properly.  Perhaps it s because I am using it on 4.3?  

The debug printout shows a file was created, however, I cannot find it in the IFS.

Thanks in advance.


 
00203/00203 AAA00000  Johannes Bley    SNDM                                    
( 1)   01/08/06 19:04

We have on our AS/400 set the system value to QUTCOOSET on "+1". This is correctly, there we are in Germany (MET).
Your program CDATE uses this system value about the program QWCCVTDT.
If email is generated has this in the head a wrong date. The time then by an hour is moved.
Must we change your SourceFile CDATE or what can we do?

With best regards Johannes Bley
 
00201/00201 AAA00000  Jordi Carreras   Greek fonts in SPL2STMF command         
( 1)   01/08/06 18:28

Hi Uzaemon,

I use your SPL2STMF command and now, I should to convert SCS and AFPDS spool files into IFS files, but they have Greek fonts (Turkish, Chinese and Japanese in the future). How can I do it? Do I have to only change any CodePage in ILE RPG source code?.

Thanks for all.

Regards.

Jordi.
Barcelona (Spain)
 
00200/00200 AAA00000  uzaemon          Re: SNDM and AOL users                  
( 1)   01/06/23 23:10  00199へのコメント

Tim,

I've tested SNDM with specific version of Netscape Messenger, Lotus Notes and Outlook Express. 

If the "AOL users" are using other mail client, please ask the software supplier regarding your problem. If they think SNDM generates invalid (in view of RFCs) mail, ask them the reason and let me know.

uzaemon @ Japan

 
00199/00199 AAA00000  Tim Swearingen   SNDM and AOL users                      
( 1)   01/06/22 13:49

I'm using SNDM with good success except for AOL users and attachments.  If I send a binary attachment such as a TIF image, the AOL user will not be able to open the attachment.  The AOL user can forward the email on to another email account and the attachment can be opened.

Do you have any ideas?

Thanks,
Tim Swearingen
 
00198/00198 AAA00000  uzaemon          Re: Question Aboute Socket              
( 1)   01/06/16 15:00  00197へのコメント

Nicolas,

> What documents shoul I read to create a FTP Client,

You should read FTP related RFCs (ex. http://www.wu-ftpd.org/rfc/) on the net.

If you are going to write the FTP client using ILE-RPG, go to http://www.redbooks.ibm.com/ and look for redbook titled "Who Knew You Could Do That with RPG IV? A Sorcerer's Guide to System Access and More".

I recommend to use Java because it is not an easy job to create FTP client and you can find some open-source Java based FTP clients on the net.

> Another question, where I can get Information about licensing this utility

If you are talking about SNDM, please read message "72.  Re: License price" in this BBS.

uzaemon @ Japan

 
00197/00197 AAA00000  Nicolas Machado  Question Aboute Socket                  
( 1)   01/06/15 01:22

Helo, I found the SNDM utility very instructive in the use of Sockets, What documents shoul I read to create a FTP Client, because I want to kwnow the result of every command I send to the server.

Another question, where I can get Information about licensing this utility

Best Regards.
 
00196/00196 AAA00000  Barry            Re^2: SNDM reason -203                  
( 1)   01/06/09 05:32  00195へのコメント

> Barry,
> 
> > I've got this error using SNDM. Do you have any ideas on what I can check. Message . . . . :   Command failed. reason -203 failed to connect remote server (connect(), 3425:A remote host refused an attempted connect operation.)                                                 
> 
> 
> The message indicates that the remote host (mail server) does not respond to TCP/IP socket connection request from your AS/400.
> 
> Try followings and let me know the result:
> 
> - Contact administrator of the mail server and confirm that the mail server is up and running to accept requests from TCP/IP hosts in your company.
> 
> - Can you send a mail using other mail servers? (If you don't have alternative mail server, you can configure your AS/400 as mail server)
> 
> - Can you send a mail using the same mail server from PC mailer (such as Outlook Express or Netscape Messenger)? PC and the AS/400 should reside in the same LAN segment. 
> 
> uzaemon @ Japan
Either the gateway they had (they bought a new gateway) was blocking the request and/or they gave me the gateway's address instead of mail server's address.  Changed the mail server's address and it works great.

Thanks,

Barry
 
00195/00195 AAA00000  uzaemon          Re: SNDM reason -203                    
( 1)   01/06/07 20:30  00194へのコメント  コメント数：1
Barry,

> I've got this error using SNDM. Do you have any ideas on what I can check. Message . . . . :   Command failed. reason -203 failed to connect remote server (connect(), 3425:A remote host refused an attempted connect operation.)                                                 


The message indicates that the remote host (mail server) does not respond to TCP/IP socket connection request from your AS/400.

Try followings and let me know the result:

- Contact administrator of the mail server and confirm that the mail server is up and running to accept requests from TCP/IP hosts in your company.

- Can you send a mail using other mail servers? (If you don't have alternative mail server, you can configure your AS/400 as mail server)

- Can you send a mail using the same mail server from PC mailer (such as Outlook Express or Netscape Messenger)? PC and the AS/400 should reside in the same LAN segment. 

uzaemon @ Japan

 
00194/00194 AAA00000  Barry            reason -203                             
( 1)   01/06/07 06:12

I've got this error using SNDM. Do you have any ideas on what I can check. Message . . . . :   Command failed. reason -203 failed to connect remote server (connect(), 3425:A remote host refused an attempted connect operation.)                                                 

Thank you

 
00193/00193 AAA00000  Eduardo Pascual  Re^2: TIFFOpen: smtf.tif: Cannot open.  
( 1)   01/05/30 18:10  00192へのコメント

> Eduardo,
> 
> > When I execute the TIFF2PDF utility I receive the message " TIFFOpen: smtf.tif: Cannot open.". Why is the cause of the message? 
> 
> The message is sent from TIFFLIB/QCSRC(UNIX) line 148. It indicates open() at line 145 returned error.
> 
> | 0145.00 fd = open(name, m, 0666);
> 
> > May it be a problem with the CCSID?
> 
> I don't think so, because TIFF is a binary format and CCSID has nothing to do with it. Still you can use CPY command to change the CCSID of the stream file.
> 
> Please try to open the TIFF file using PC graphic tools, such as "Imaging for Windows" or PaintShop Pro. Also please confirm that you have enough authority to open the TIFF and are specifying correct path name.
> 
> Let me know the result of your investigation.
> 
> uzaemon @ Japan

Thanks by your request.

Iｴve resolved the problem taking off the extension to TIFF file. So like that, the TIFF2PDF works.

Bye

Eduardo
 
00192/00192 AAA00000  uzaemon          Re: TIFFOpen: smtf.tif: Cannot open.    
( 1)   01/05/30 11:00  00191へのコメント  コメント数：1
Eduardo,

> When I execute the TIFF2PDF utility I receive the message " TIFFOpen: smtf.tif: Cannot open.". Why is the cause of the message? 

The message is sent from TIFFLIB/QCSRC(UNIX) line 148. It indicates open() at line 145 returned error.

| 0145.00 fd = open(name, m, 0666);

> May it be a problem with the CCSID?

I don't think so, because TIFF is a binary format and CCSID has nothing to do with it. Still you can use CPY command to change the CCSID of the stream file.

Please try to open the TIFF file using PC graphic tools, such as "Imaging for Windows" or PaintShop Pro. Also please confirm that you have enough authority to open the TIFF and are specifying correct path name.

Let me know the result of your investigation.

uzaemon @ Japan

 
00191/00191 AAA00000  Eduardo Pascual  TIFFOpen: smtf.tif: Cannot open.        
( 1)   01/05/30 02:35

I use the spl2stmf utility for create the smtf.tif file. When I execute the TIFF2PDF utility I receive the message " TIFFOpen: smtf.tif: Cannot open.". Why is the cause of the message? May it be a problem with the CCSID?

 
00190/00190 AAA00000  uzaemon          Re: Program (API) to receive EMails on A
( 1)   01/05/24 23:01  00189へのコメント

Claudia,

> is there any program, to receive EMails on the AS400?

I don't have general purpose mail (POP3) client software to receive versatile Internet mail.

You can use Domino server to receive Internet mail, or you may look for the Internet to find what you want.

uzaemon @ Japan

 
00189/00189 AAA00000  Claudia          Program (API) to receive EMails on AS400
( 1)   01/05/23 00:16

Hello,
is there any program, to receive EMails on the AS400?

Thank you
 
00188/00188 AAA00000  uzaemon          Re: Install SMTP, Library QSYSINC missin
( 1)   01/05/22 18:12  00187へのコメント

Frank,

> The library QSYSINC does not exist on my AS400.

To "MAKE" SNDM and most of utilities here, you should have IBM supplied library QSYSINC installed on your AS/400. See message "68. Re^3: /COPY" at this BBS for more info.

Thanks for your interest in SNDM.

uzaemon @ Japan

 
00187/00187 AAA00000  Frank Werner     Install SMTP, Library QSYSINC missing   
( 1)   01/05/22 17:35

Hello,
i made a download from SMTP. Some programs missing the copy file QSYSINC/QRPGLESRC , QUSEC.

The upload to the AS400 was ok. After the upload I started the MAKE Procedure, but the RPGLE program; CDATE, GETJOBINF, GETPFINF, PREPAREUS, SNDPM received an error.

The library QSYSINC does not exist on my AS400.

OS/400 Version 4 R. 3

Thank you for your help

Frank Werner

 
00186/00186 AAA00000  uzaemon          Re: spl2stmf (Paper size)               
( 1)   01/05/16 21:49  00185へのコメント

Le Guillou,

> Could you tell me what i do to make a tif file wiht A4 size 

It does not make sense for image files to be specific papar size such as "A4". Usually softwares which print image files adjust (enlarge or squeeze) the size of image.

For example, TIFF2PDF scales TIFF image to fit to A4(portrait) PDF file and Acrobat (Reader) send A4 print image to your printer.

P.S. If you have some result regarding "179. Re^3: SPL2STMF bad carracters", please post a message.

uzaemon @ Japan

 
00185/00185 AAA00000  Le Guillou       spl2stmf                                
( 1)   01/05/16 02:02

Thank you for your very goods programes.

Could you tell me what i do to make a tif file wiht A4 size 
 
00184/00184 AAA00000  Le Guillou       Re^2: sndm                              
( 1)   01/05/15 22:09  00181へのコメント

> Le Guillou,
> 
> > i send you a pdf 
> You mean you've sent a mail to uzaemon@my-deja.com?
> I've got nothing yet.
> 
> uzaemon @ Japan


Thank you for yor response it is ok Now !

 
00182/00182 AAA00000  uzaemon          Re: sndm                                
( 1)   01/05/14 22:24  00180へのコメント

Le Guillou,

> i send you a pdf 
I got your mail and investigated the debug output you sent.

Currently I don't have an access to my AS/400 so I cannot perform thorough test. For tentative solution, please try following patch. 

- Open source member SMTP/QRPGLESRC(#INIT)
- Search string '4446'
- Change the number to '4546'
- Recompile the sndm using MAKE procedure
- Try to send mail

Waiting for your reply.

uzaemon @ Japan

 
00181/00181 AAA00000  uzaemon          Re: sndm                                
( 1)   01/05/13 15:34  00180へのコメント  コメント数：1
Le Guillou,

> i send you a pdf 
You mean you've sent a mail to uzaemon@my-deja.com?
I've got nothing yet.

uzaemon @ Japan

 
00180/00180 AAA00000  Le Guillou       sndm                                    
( 1)   01/05/12 18:00

hello i me again, with a other problem

i try to execute sndm and i receive the folowing message.
Thank you for your help.

 SNDM FROM('pleguillou@inforquin.fr' PAT) TO(('titi@inforquin.fr')) FILE(G
 IE400GEN/QTXTSRC) MBR(MAILPAT) SMTPHOST(FREE.FR) DEBUG(*YES)             
 Command failed. reason -301 negative response from SMTP server ( RSP[501 
   Invalid domain name@緇 REQ[HELO INFORQUIN.FR@緇)                       

i send you a pdf 
 
00179/00179 AAA00000  uzaemon          Re^3: SPL2STMF bad carracters           
( 1)   01/05/11 20:17  00178へのコメント

Le Guillou,

> - I convert afp to tiff
> - I use WSCST(QWPTIFFG4)
> - My CCSID is 65535
> - The version OS/400 is V4R4M0 or V4R5M0

Run "CHGJOB CCSID(297)" before create your spool file. If it doesn't work, exec "OVRPRTF FILE(QSYSPRT) DEVTYPE(*AFPDS) CHRID(*JOBCCSID)" also.

I don't have French environment but I changed CCSID of the job to 297 in reference to "10.13.1.18 French Settings for Client Access" at http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AWC01/CCONTENTS . See http://homepage1.nifty.com/uzaemon/French.gif for the result of my testing.

Let me know the result of your investigation.

uzaemon @ Japan

 
00178/00178 AAA00000  Le Guillou       Re^2: SPL2STMF bad carracters           
( 1)   01/05/10 16:03  00175へのコメント  コメント数：1
> Le Guillou,
> 
> > Sp馗ial carracters like ・or ・or ・are translate by @ or { or \.
> 
> Please answer to following questions:
> 
> - How are you trying to convert spool files, from SCS to text or from AFP to TIFF or anything else?
> - What WSCST are you using with SPL2STMF?
> - What is your job CCSID and CHRID of printer file?
> - What is the version of your OS/400?
> 
> uzaemon @ Japan

Hello 

- I convert afp to tiff
- I use WSCST(QWPTIFFG4)
- My CCSID is 65535
- The version OS/400 is V4R4M0 or V4R5M0

Thank you for your answer
 
00177/00177 AAA00000  Tim Swearingen   Re^2: SPL2STMF blowing up               
( 1)   01/05/09 22:57  00176へのコメント

> Tim,
> 
> > I'm getting errors on the HostPrintTransform API failing.  I need some help in the debug process.  I'm converting an AFP spooled file to TIFF
> 
> - What kind error are you getting? Please describe more detail, for example, provide complete error message and debug print out information.
> - Does it happen to all AFP spooled file or only specific file?
> - Have you modified the source code?
> 
> uzaemon @ Japan
Uzaemon,

After posting the message I read through this BBS and was able to answer my own question.  The error message was CPFDF9  Transformed Data buffer to small.  I saw on your BBS where someone else had the same problem and followed your advice.  The problem is resolved!!  Thanks again
 
00176/00176 AAA00000  uzaemon          Re: SPL2STMF blowing up                 
( 1)   01/05/09 21:58  00174へのコメント  コメント数：1
Tim,

> I'm getting errors on the HostPrintTransform API failing.  I need some help in the debug process.  I'm converting an AFP spooled file to TIFF

- What kind error are you getting? Please describe more detail, for example, provide complete error message and debug print out information.
- Does it happen to all AFP spooled file or only specific file?
- Have you modified the source code?

uzaemon @ Japan

 
00175/00175 AAA00000  uzaemon          Re: SPL2STMF bad carracters             
( 1)   01/05/09 21:54  00173へのコメント  コメント数：2
Le Guillou,

> Sp馗ial carracters like ・or ・or ・are translate by @ or { or \.

Please answer to following questions:

- How are you trying to convert spool files, from SCS to text or from AFP to TIFF or anything else?
- What WSCST are you using with SPL2STMF?
- What is your job CCSID and CHRID of printer file?
- What is the version of your OS/400?

uzaemon @ Japan

 
00174/00174 AAA00000  Tim Swearingen   SPL2STMF blowing up                     
( 1)   01/05/09 06:16

I'm getting errors on the HostPrintTransform API failing.  I need some help in the debug process.  I'm converting an AFP spooled file to TIFF
 
00173/00173 AAA00000  Le Guillou       SPL2STMF bad carracters                 
( 1)   01/05/09 00:51

Hello.
My machine wrok with a french language.
Sp馗ial carracters like  or  or  are translate by @ or { or \.
have you a soltion for me.
Thank you.

 
00172/00172 AAA00000  Masahiko Mutoh   Re^2: SPL2STMF compile error            
( 1)   01/04/27 13:16  00171へのコメント

Dear Uzaemon san,

Thank you for your replay.

> - Did you use the MAKE procedure?

No, I didn't. Sorry, the install site wasn't read thoroughly. I finally could create that CMD by using "STRRECPRC". 

regards

Mutoh.
 
00171/00171 AAA00000  uzaemon          Re: SPL2STMF compile error              
( 1)   01/04/26 20:04  00170へのコメント  コメント数：1
Mutoh-san,

Thanks for your interest in SPL2STMF. Please answer to following questions:

- Did you use the MAKE procedure?
- Did you modify/copy the source code?
- Was the module QTEMP/SPL2STMFRP created?
- What is the CCSID of the job? (use WRKJOB command)
- Do you have library QSYSINC installed on your AS/400?
- What happens if you run MAKE using QSECOFR usrprf?

Waiting for your reply.

uzaemon @ Japan

 
00170/00170 AAA00000  Masahiko Mutoh   SPL2STMF                                
( 1)   01/04/26 11:22

Dear Sir,

I would like to use cmd "SPL2STMF" on UZAEMON site.
It was downloaded normality and I tried to compile RPG program "SPL2STMFRP". However, it is not created in our product environment (OS400:V4R4M0).
I got following log message .
Could you please give me advice ?

Best regards,

Mutoh.
************************************************************                                                            
    OWNERSHIP OF OBJECT SPL2STMFRP IN QTEMP TYPE *MODULE CHANGED.      
    DEFINITION NOT FOUND FOR SYMBOL '__errno'.                         
    DEFINITION NOT FOUND FOR SYMBOL 'QwpzHostPrintTransform'.          
    DEFINITION NOT FOUND FOR SYMBOL 'strerror'.                        
    PROGRAM SPL2STMFRP IN LIBRARY HPT NOT CREATED.                     
    COMPILATION FAILED. PROGRAM SPL2STMFRP NOT CREATED IN LIBRARY HPT. 
 
00169/00169 AAA00000  uzaemon          Re: SNDM - Number of Attachments        
( 1)   01/04/20 23:47  00167へのコメント

Mike,

> How many attachments can be included in a message sent with SNDM?

Five. 

This limitation is derived from the maximum length of CPP. See command help for details.

uzaemon @ Japan

 
00168/00168 AAA00000  uzaemon          Re: Re. *IPDS on AS/400                 
( 1)   01/04/20 23:41  00165へのコメント

Jordi,

> Do you think it will be able to process *IPDS spool files with SPL2STMF command in the future ?.

I tried to convert *IPDS spooled file to stream file using some WSCSTs as follows without success on my V4R5.

> OVRPRTF FILE(QPDSPSTS) DEVTYPE(*IPDS)
> WRKSYSSTS OUTPUT(*PRINT)
> ADDLIBLE LIB(HPT) POSITION(*LAST)
  Library HPT added to library list.
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/qpdspsts.tif') WSCST(QWPTIFFG4)
  Command failed. reason - API QwpzHostPrintTransform failed : CPF6DF8
    hptopt = 30

Message ID CPF6DF8 indicates that the transform program does not exist for data stream. Detail ability of HPT is not documented, so you may contact your support channel to clarify the specification of HPT.

As I'm not a developer in Rochester Lab, I don't know if they have a plan to support *IPDS. I hope next release of OS/400 provides more printer streams and WSCSTs support.

uzaemon @ Japan

 
00167/00167 AAA00000  Mike Eovino      SNDM - Number of Attachments            
( 1)   01/04/20 23:38

How many attachments can be included in a message sent with SNDM?

 
00166/00166 AAA00000  uzaemon          Re: SNDM                                
( 1)   01/04/20 23:33  00164へのコメント

dominique,

> can you please provide me with the necessary files ?

If you can see the library QSYSINC, you will notice that each source member states that it is impossible to provide source code to others.

| 5763-SS1  (C) Copyright IBM Corp. 1994,1994
| All rights reserved.
| US Government Users Restricted Rights -
| Use, duplication or disclosure restricted
| by GSA ADP Schedule Contract with IBM Corp.
|
| Licensed Materials-Property of IBM

I recommend you to ask your systems manager again. QSYSINC is free and not harmful to your applications.

uzaemon @ Japan

 
00165/00165 AAA00000  Jordi Carreras   Re. *IPDS on AS/400                     
( 1)   01/04/19 22:46

Hi,

Do you think it will be able to process *IPDS spool files with SPL2STMF command in the future ?.

I'm very interested.

Thanks.

Jordi.
Barcelona, Spain.


 
00164/00164 AAA00000  dominique van en SNDM                                    
( 1)   01/04/18 23:32

dear uzaemon,
i tried to execute "make" (STRREXPRC), but i got compile problems; there is no QSYSINC on the system and the systems manager doesn't want to install it. 
can you please provide me with the necessary files ? (a sort of smtpxxx.savf is fine)
kind regards,
dominique
 
00163/00163 AAA00000  uzaemon          Re^5: SNDM compilation problem          
( 1)   01/04/16 18:24  00162へのコメント

Peter,

> Isn't it possible to compile SNDM on a newer OS with setting the target release to v3r2?

I don't think it possible. I tried to compile test code on V4R5 specifying TGTRLS(V3R2M0) and got following error.

|     82 C                   EVAL      request_method = %STR(env_p)
| ======>                                               aaaa
| *RNF0604 20 a      008200  The token is not valid; token is ignored.

uzaemon @ Japan

 
00162/00162 AAA00000  Peter Gyorffy    Re^4: SNDM compilation problem          
( 1)   01/04/16 03:58  00161へのコメント  コメント数：1
Oh !@#$,

unfortunately the OS can not be upgraded, because in that case we would need to replace the AS/400 too (it's and old 200-9402 CICS box). Isn't it possible to compile SNDM on a newer OS with setting the target release to v3r2?

Peter

 
00161/00161 AAA00000  uzaemon          Re^3: SNDM compilation problem          
( 1)   01/04/15 00:19  00160へのコメント  コメント数：2
Peter,

> we run v3r2, the library QSYSINC is present and I changed

Unfortunately, you need at least V3R7 (maybe.. I'm using V4R5) or later to compile SNDM as stated at my homepage. ILE-RPG compiler on V3R2 lacks many built-in functions (such as %EDITC, %LEN, %SCAN, %STR) used in the source members.

I recommend to upgrade your AS/400 if you plan to add new application. According to 'OS/400 Software - OS/400 Release Support' (http://as400service.ibm.com/supporthome.nsf/document/17623433), V3R2 had been withdrawn at 05/31/00. 

uzaemon @ Japan

 
00160/00160 AAA00000  Peter Gyorffy    Re^2: SNDM compilation problem          
( 1)   01/04/14 18:16  00159へのコメント  コメント数：3
Hi,

we run v3r2, the library QSYSINC is present and I changed the current library to SMTP before running MAKE.

Thanks for the quick reply

Peter
 
00159/00159 AAA00000  uzaemon          Re: SNDM compilation problem            
( 1)   01/04/13 18:58  00158へのコメント  コメント数：4
Peter,

> I had some problems with compiling SNDM. As it seems, the installation script could not create the RPG program(s). Can I send you the spoolfiles I got after compilation?

Yes, but please answer to the followings questions before you send the compile lists.

? What is the version of your OS/400 ?
? Do you have library QSYSINC on your AS/400 ?
? Did you run CHGCURLIB command before MAKE ?

Waiting for your reply.

uzaemon @ Japan

 
00158/00158 AAA00000  Peter Gyorffy    SNDM compilation problem                
( 1)   01/04/12 17:56

Dear Uzaemon,

I had some problems with compiling SNDM. As it seems, the installation script could not create the RPG program(s). Can I send you the spoolfiles I got after compilation?

Thanks

Peter
 
00157/00157 AAA00000  kkohno           Re^2: sndm メール本文の漢字変換エラー   
( 1)   01/04/11 14:59  00154へのコメント

修正版の適用でＯＫとなりました。
迅速なご対応ありがとうございました。
 
00156/00156 AAA00000  uzaemon          Re: FYI                                 
( 1)   01/04/09 18:17  00151へのコメント

Traceroute now works on my V4R5. I tried older version (http://www.ediconsulting.com/download.html) / newer version (http://www.unitessile.it/ced400/tracertu.zip) and both worked fine.

If you encounter the same problem, you need to apply the following PTF.

- V4R4M0 : MF23973
- V4R5M0 : MF25278

I found this information at "NEWS/400" web site.
> http://www.as400network.com/  -> click "Tech Resources" button at upper right.
> http://www.as400network.com/resources/ -> click "Tips/Tech Community" at left pane.
> http://www.as400network.com/Resources/ClubTech/TNT400/ -> look for "Networking (TCP/IP and network security)" and click the link.
> http://www.as400network.com/Forums/Index.cfm?cfapp=57 -> click "Search" at the top.
> Query: [traceroute] and press search button
> You'll find some messages regarding traceroute.

For detail PTF description, access http://as400service.ibm.com/ and follow the links.
> PTF Cover Letters Database
> V4R5 PTF Cover Letters
> Search
> Search for the following word(s): [traceroute]
> You'll find "MF25278 V4R5M0   LIC-COMM-TCPIP RAW SOCKETS IP PROTOCOL 0 INSTEAD OF UDP" (http://as400service.ibm.com/a_dir/as4ptf.nsf/c986a4d27be19c048625690d0045408a/bc33c781c7834a098625697a00476ef0?OpenDocument&Highlight=2,MF25278)

| DESCRIPTION OF PROBLEM FIXED FOR APAR MA21503 :
| -----------------------------------------------
|   Customer has traceroute application that runs fine on V4R3. He
|   upgraded to V4R4 and recompiled the program. now traceroute
|   application does not work.
|   Commtrace for V4R3 shows packet being sent out with IP protocol
|   field of 17 for UDP. Commtrace for V4R4 shows packet being sent
|   out with IP protocol field of 0. The formatted part of trace
|   shows protocol field  'Reserved'.
|
| CORRECTION FOR APAR MA21503 :
| -----------------------------
|   v4r4 raw code does not initialize values for header options.
|   Raw applications that don't complete IP header won't work

uzaemon @ Japan

 
00155/00155 AAA00000  uzaemon          Re: tracert                             
( 1)   01/04/07 13:25  00151へのコメント

Hans,

> do you think that its possible to write a "tracert" for the AS/400? I found one at  http://www.ediconsulting.com/download.html but it didn't work (my foult?) on our machine.

I tried the same program and got following error. '-d' option 'Enable socket level debugging'.

> CALL PGM(TRACERT) PARM('-d' 'xxx.com')

   traceroute to xxx.com (xxx.xxx.xxx.xxx), 30 hops max, 40 byte packets
   sendto: Cannot reach the destination network.
    1 traceroute: wrote xxx.com 40 chars, ret=-1
   sendto: Cannot reach the destination network.
    *traceroute: wrote xxx.com 40 chars, ret=-1
   sendto: Cannot reach the destination network.
    *traceroute: wrote xxx.com 40 chars, ret=-1

As you can see, function sendto() returns error. Check the source code for details.

0503.00      i = sendto(sndsock, (char *)outpacket, datalen, 0, &whereto,
0504.00              sizeof(struct sockaddr));
0505.00      if (i < 0 || i != datalen)  {
0506.00           if (i<0)
0507.00                perror("sendto");
0508.00           Printf("traceroute: wrote %s %d chars, ret=%d\n", hostname,
0509.00                datalen, i);
0510.00           (void) fflush(stdout);
0511.00      }

For usage of sendto() functin, see http://publib.boulder.ibm.com/pubs/html/as400/v4r5/ic2924/index.htm?info/apis/sendto.htm

You may ask IBM why sendto() returns error, or contact author of the traceroute if he/she has any resolution.

- - - - - - - - - - - - - - - - - -

Please post messages only related to my softwares. This BBS is not for general Q&A.

uzaemon @ Japan

 
00154/00154 AAA00000  uzaemon          Re: sndm メール本文の漢字変換エラー     
( 1)   01/04/07 12:39  00150へのコメント  コメント数：1
kkohnoさん、

> メール本文中にJIS句点番号06706の'礒'の字が入っていると
> non-JIS character の変換エラーになります。

SNDMのバグでした。修正版を1-33としてアップしますのでそちらでお試しの上結果をお知らせください。

> 変換の仕様、制限等お教えいただければ幸いです。

ご紹介のコード表はISO-2022-JP以外の文字も含まれています。下記のようなサイトも参照されると良いでしょう。

Japanese Character Encoding for Internet Messages
http://www.faqs.org/rfcs/rfc1468.html

情報交換用漢字符号系 JIS X 0208
http://www.koba.tv/network/mail/JIS-X-0208.html

ソースを見れば分かりますが、下記のロジックでJIS外文字を検出しています。

EBCDIC漢字コードではJIS外文字の検出が困難であるため、まずはCCSID932に変換します。この時点でNEC選定文字などMS932(CCSID943)の独自コードがあれば変換不能文字として除外されるはずです。

CCSID932のキャラクターセットを下記のように分類しており、X'F0'以降の漢字をJIS外字として除外しています。

X'00' - X'1F'          control character
X'20' - X'7F'          SBCS ASCII (alphabet/numeric/symbol)
X'81' - X'9F'          first byte of DBCS - 1
  X'8140' - X'84BE'      non-kanji DBCS
  X'889F' - X'9872'      JIS level1
  X'989F' - X'9FFC'      JIS level2 - 1
X'A1' - X'DF'          SBCS katakana
X'E0' - X'FC'          first byte of DBCS - 2
  X'E040' - X'EAA4'      JIS level2 - 2
  X'F0' - X'F9'          user defined character area (IBM)
  X'FA40' - X'FC4B'      IBM selected character

uzaemon @ Japan

 
00153/00153 AAA00000  Hans Bertol      Re: Executive Vice President            
( 1)   01/04/05 05:53  00140へのコメント

Did you fix the error finaly ??

HANS
 
00151/00151 AAA00000  Hans Bertol      tracert                                 
( 1)   01/04/05 05:50

Hello
do you think that its possible to write a "tracert" for the AS/400? I found one at  http://www.ediconsulting.com/download.html but it didn't work (my foult?) on our machine.
Greeting Hans
 
00150/00150 AAA00000  kkohno           sndm メール本文の漢字変換エラー         
( 1)   01/04/04 17:47

メール本文中にJIS句点番号06706の'礒'の字が入っていると
non-JIS character の変換エラーになります。

http://www4.justnet.ne.jp/~greentree/CODEMAP.LZH

のサイトより入手したＪＩＳ漢字一覧表を用いてテストしたところ、
おおむね句点 06300以降の文字がエラーになるようですが、
06672'礦'など、ISO-2022-JPに変換可能なものもあります。
（規則性が分かりません）

変換の仕様、制限等お教えいただければ幸いです。
 
00149/00149 AAA00000  uzaemon          Re: GIF Image                           
( 1)   01/03/25 14:34  00148へのコメント

Simon,

> I try to convert from AFP to GIF, and Zetafax like it very much, but when my AFP document is more lenght then 1 page, SPL2STMF only create an image GIF with the first page. 

SPL2STMF is just a front-end to QwpzHostPrintTransform API. Most functionalities depend on the API which is provided from IBM. If the API cannot generate multi-page(?) GIF image, SPL2STMF has nothing to do with your problem.

You may

- ask IBM if API QwpzHostPrintTransform has the capability to generate multi-page(?) GIF file.

- generate a multi-page TIFF, split the image to multiple files (one image file per page), convert them to GIF, then send them using your FAX software. See messages, '119. Re: Selecting certain pages to convert to TIFF with SPL2STMF' and '128. Re: GIF FILE QUALITY' for related information.

> I'm also using TIFF2PDF and SNDM and both are working very well.

Thanks for your report. I hope you have some fun using them.

uzaemon @ Japan

 
00148/00148 AAA00000  Simon            GIF Image                               
( 1)   01/03/24 20:53

Hi Uzaemon
I'm writing to you on SPL2STMF problem. The command work very well when I make the convert from AFP to TIFF, but my fax server don't like it. My fax server (Zetafax) expand the image, so the result is the fax pages with only half image. 
I try to convert from AFP to GIF, and Zetafax like it very much, but when my AFP document is more lenght then 1 page, SPL2STMF only create an image GIF with the first page. 

Could you help me?

I'm also using TIFF2PDF and SNDM and both are working very well.

Thank you very much from Italy.
Bye
 
00147/00147 AAA00000  uzaemon          Re: Counter                             
( 1)   01/03/23 19:50  00145へのコメント

Hans,

> Im very happy to tell you that i have installed your Counter 2.5 on our AS/400  and it works. 

I'm very happy to hear that wcount is working well on your AS/400.

Also I appreciate your message at '146. Re^2: wcount parsing problem'. There are some difficulties handling variant characters such as '@' and '[' on AS/400.

Thanks again and have a good weekend!

uzaemon @ Japan

 
00146/00146 AAA00000  Hans Bertol      Re^2: wcount parsing problem            
( 1)   01/03/23 03:30  00141へのコメント

Hi

I got the same error. I fixed it in the CONFIG-File. The [] (Brakets) have been translated to wrong character. 

Hans 
 
00145/00145 AAA00000  Hans Bertol      Counter                                 
( 1)   01/03/23 03:28

Hi Uzaemon

Im very happy to tell you that i have installed your Counter 2.5 on our AS/400  and it works. 

The counter was running after only one our installing. 

Now we have a very nice counter for out AS/400 intranetserver (running V4R4). 

Greeting from Vienna
and THANKS to YOU
Hans Bertol

 
00144/00144 AAA00000  uzaemon          Re: It sjef                             
( 1)   01/03/22 16:33  00142へのコメント

Jan,

> we download your CRTCSVF and it works fine. But... we have som small truble : the CRTCSVF rutine convert data into ASCII format, we need ANSI...

I'm not sure about the difference between ASCII and ANSI. CRTCSVF converts from EBCDIC CCSID to ASCII CCSID.

Can you give me an example?

uzaemon @ Japan

 
00142/00142 AAA00000  Jan Magne        It sjef                                 
( 1)   01/03/21 16:00

hi
we download your CRTCSVF and it works fine. But... we have som small truble : the CRTCSVF rutine convert data into ASCII format, we need ANSI...
 
00141/00141 AAA00000  uzaemon          Re: wcount parsing problem              
( 1)   01/03/17 10:16  00140へのコメント  コメント数：1
Michael,

Another person had reported similar problem. See message '46. Re: Wcount problem' in this BBS.

Also, please provide following information if you need to resolve the problem:

- Version/release of your OS/400.
- Your HTTP configuration.
- Contents of file WCOUNT/LOGS(LOG)
- URL to evoke wcount.

Waiting for your reply.

uzaemon @ Japan

 
00140/00140 AAA00000  Michael J. Bonvi Executive Vice President                
( 1)   01/03/17 06:52

I tried to install wcount, and get the following error message when I access the Wcount.htm page:

"parse error in config file"

Can you please help me?
 
00302/00302 AAA00000  uzaemon          Re^5: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/30 22:05  00301へのコメント

Jesus,

> In fact, I think these aren't PCL WSCSTs, they're HPT WSCSTs.

There are WSCSTs which convert SCS/AFPDS to PCL. Run "WRKOBJPDM LIB(QSYS) OBJ(QWPHP*) OBJTYPE(*WSCST)" and you can find more than 10 WSCST which support HP printers.

If you are still not sure, try followings and open the output file with any PCL viewer.

| > WRKACTJOB OUTPUT(*PRINT)
| > ADDLIBLE LIB(HPT)
|   Library HPT added to library list.
| > SPL2STMF FILE(QPDSPAJB) TOSTMF('/tmp/qpdspajb.pcl') WSCST(QWPHPLSR2)
|   Stream file generated. execution time 0 min 0 sec, total pages = 6

> I retrieved the sources for these WSCSTs using:

You can find a line similar to "DATASTREAM = HPPCL5" in your source. 

>   Then I appended a translation table for EBCDIC (CP=37) to ASCII (CP=437), in order to convert some not commonlly used character (ｬ) to <esc> (1B HEX). This way the printer knows the following report's data is PCL code, i.e.: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

Those strings are simply translated from EBCDIC to ASCII by your WSCST and sent to HP printers. Only HP (or PCL-capable) printers can interpret the string as meaningful data.

> I tried SPL2STMF using my WSCSTs and both QWPTIFFxx and the result is allways the same, I can read the escape codes as text, overlapped with report's data and overlay.

Yes, of course. QWPTIFFxx is designed to convert SCS/AFPDS to TIFF (I assume). Your "escape codes" are neither of them so should be interpreted as plain text.

Please read documents at http://publib.boulder.ibm.com/html/as400/v5r1/ic2924/info/rzahgicprinting.htm to understand how HPT and WSCST works.  Also, see "296. Re^3: SPL2STMF (AFP to PCL/TIFF?)" again and take appropriate solution for you.

uzaemon@Japan



 
00301/00301 AAA00000  Jesus Olague     Re^4: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/30 02:07  00296へのコメント  コメント数：1
Uzaemon,

In fact, I think these aren't PCL WSCSTs, they're HPT WSCSTs. I retrieved the sources for these WSCSTs using:
    RTVWSCST DEVTYPE(*TRANSFORM)
        MFRTYPMDL(*HP5SI)                          
        SRCMBR(HP5SI)                              
        SRCFILE(PRTFLIB/QTXTSRC)                   
        TEXT('Modified WSCST for HPLJ 5Si printer')

  Then I appended a translation table for EBCDIC (CP=37) to ASCII (CP=437), in order to convert some not commonlly used character (ｬ) to <esc> (1B HEX). This way the printer knows the following report's data is PCL code, i.e.: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

My printers are PC attached and AS/400 emulated with Rally! (an AS/400's device emulator like CA) or Lan printers using HP JetDirect ethernet adapters.

I tried SPL2STMF using my WSCSTs and both QWPTIFFxx and the result is allways the same, I can read the escape codes as text, overlapped with report's data and overlay.

I'm using AFPDS device type, with OVRPRTF .. DEVTYPE(*AFPDS) .. , to print overlays.

Regards.

Jesus.
 
00300/00300 AAA00000  uzaemon          Re: -301 negative........ ( RSP[554     
( 1)   01/11/23 23:53  00299へのコメント

leve,

> I am trying to use sndm in a CL and it returns with followig message:
>  Command failed. reason -301 negative response from SMTP server ( RSP[554 
>    Relay rejected for policy reasons.璢] REQ[RCPT TO:<to>璢])             

It looks like the SMTP server you specified does not allow mail relay (perhaps to prevent SPAM mail). Contact SMTP server administrator to allow your AS/400 to send mail to external users.

uzaemon@Japan

 
00299/00299 AAA00000  leve             -301 negative........ ( RSP[554         
( 1)   01/11/23 20:22

I am trying to use sndm in a CL and it returns with followig message:
 Command failed. reason -301 negative response from SMTP server ( RSP[554 
   Relay rejected for policy reasons.璢] REQ[RCPT TO:<to>璢])             

any advices?
 
00298/00298 AAA00000  uzaemon          Re: CRTCSVF Error (iconv_open error)    
( 1)   01/11/22 21:09  00297へのコメント

Laurent,

> I have this error when i use CRTCSVF with *FILE and *SYSTEM
> PROGRAM ABORTED 0/7199 records processed, 0 errors
> iconv_open failed. EBCDIC CCSID - 0000J / ASCII CCSID 00850 - 3021 the value specified for the argument is not correct
> In my file the CCSID is 65535, is this the problem ?

Yes. CCSID 65535 indicates "no conversion", hence CRTCSVF cannot open code conversion routine.

> Is it possible to change this value ?

Yes, but I don't recommend it unless you are familiar to CCSID related matters.

Just specify valid EBCDIC CCSID for DBFCCSID parameter of CRTCSVF command.

Try out and let me know the result.

uzaemon@Japan

 
00297/00297 AAA00000  Laurent          CRTCSVF Error                           
( 1)   01/11/22 18:53

I have this error when i use CRTCSVF with *FILE and *SYSTEM
PROGRAM ABORTED 0/7199 records processed, 0 errors
iconv_open failed. EBCDIC CCSID - 0000J / ASCII CCSID 00850 - 3021 the value specified for the argument is not correct
In my file the CCSID is 65535, is this the problem ?
Is it possible to change this value ?
Thank's
 
00296/00296 AAA00000  uzaemon          Re^3: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/22 18:41  00292へのコメント  コメント数：2
Jesus,

> Before I used SPL2STMF I created several WSCSTs where I changed some HEX codes to translate the escape code to ｬ, the following is an example of my escape codes: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

So you are using customized WSCSTs based on IBM supplied PCL WSCSTs, right?
 
> SPL2STMF don't converts these codes so I can see them in the image, overlapped with the data of the report.

SPL2STMF does not perform any conversion but HPT does. If you are using exactly same PCL WSCST for SPL2STMF and LPR(or remote writer?), they should produce same result because both utilize HPT.

> What I want to do is, using SPL2STMF, convert this formatted reports to TIFF to send them via e-mail;

You should use QWPTIFFG4 (or QWPTIFFPB if you want) to produce TIFF file from AS/400 spooled file. In other words, you cannot produce TIFF using PCL-based WSCST.

You may consider followings.

- Use APFDS to format your reports. SPL2STMF can convert the spooled file to TIFF file by QWPTIFFG4.

- Look for a software which converts PCL to TIFF. You can find some commercial products on the Web.

Hope this helps.

uzaemon@Japan

 
00295/00295 AAA00000  uzaemon          Re: ＳＮＤＭの利用について              
( 1)   01/11/22 18:18  00294へのコメント

big_moonさん、

> ＳＮＤＭの商用の利用についてお伺いしたいのですが・・
> メールいただけたら幸いです。

SNDMの商利用については「72. Re: License price.」や「133. Re^2: 掲載されたソフトのライセンスの考え方」をご参照ください。

その上で不明な点がありましたら、まずはこちらのBBSに書き込みお願いします。内容が公開できないものであれば uzaemon@nifty.com 宛にメールをお送りください。

uzaemon@Japan

 
00294/00294 AAA00000  big_moon         ＳＮＤＭの利用について                  
( 1)   01/11/22 11:46

ＳＮＤＭの商用の利用についてお伺いしたいのですが・・
メールいただけたら幸いです。
 
00293/00293 AAA00000  Masaaki Yamada   Re^4: SPL2STMF について(カナ文字化け)   
( 1)   01/11/22 10:09  00291へのコメント

お手数おかけします
 
ジョブのCCSIDを5026にしたところ、うまく表示されました。

有難うございました。

 
00292/00292 AAA00000  Jesus Olague     Re^2: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/22 02:20  00289へのコメント  コメント数：3
Hi Uzaemon,

> > 3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.
> 
> I don't understand what you want to do. Are you trying to create a TIFF file using WSCST for PCL data stream?
> 
-----------------------------------------------------

Before I used SPL2STMF I created several WSCSTs where I changed some HEX codes to translate the escape code to ｬ, the following is an example of my escape codes: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

I'm using these WSCSTs to print formatted reports (with overlays and escape secuences) in diferent HP printers such as models 4, 5M, 5Si, 8000, 1100 and 1200.

SPL2STMF don't converts these codes so I can see them in the image, overlapped with the data of the report.

What I want to do is, using SPL2STMF, convert this formatted reports to TIFF to send them via e-mail; I know TIF2PDF (or STMF2PDF?) could be usefull, but many of aour contacts don't have Acrobat Reader nor any other tool to view PDFs.

Regards.

Jesus
 
00291/00291 AAA00000  uzaemon          Re^3: SPL2STMF について(カナ文字化け)   
( 1)   01/11/21 19:43  00290へのコメント  コメント数：1
Yamadaさん、

当方のiSeries(V4R5およびV5R1)で試したのですが、特別な指定をしなくても正常に半角カタカナに変換されました。

> addlible hpt                                                      
   ライブラリー HPT がライブラリー・リストに追加された。            
> wrksyssts *print                                                  
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/dspsts.txt') WSCST(TEXTJ)    
  Stream file generated. execution time 0 min 0 sec, total pages = 1

ジョブのCCSIDは5035、印刷装置ファイルQPDSPSTSの文字識別コード(CHRID)は*CHRIDCTLです。

Yamadaさんの実行環境(OS/400のバージョン、JOBのCCSID、印刷装置ファイルのCHRID)はどのように設定されていますか? また、印刷出力の作成前にCHGJOB CCSID(5026) および、OVRPRTF 印刷装置ファイル名 CHRID(*JOBCCSID or *CHRIDCTL)を実行しても化けますか?

uzaemon@Japan

 
00290/00290 AAA00000  Masaaki Yamada   Re^2: SPL2STMF について(カナ文字化け)   
( 1)   01/11/21 10:55  00288へのコメント  コメント数：2
有難うございます。

> また、問題判別には次のような情報が必要になります。
> 
> - どのようにして作成したか(ユーザー・プログラム or システ
>   ムコマンドによる出力)

両方で試してみたのですが、いずれも半角ｶﾅ文字が化けてしまいます。

> - スプールファイルのタイプ(SCS or AFPDS?)

SCS です。

> - 指定したWSCST(自作WSCST or IBM supplied?)

http://homepage1.nifty.com/uzaemon/hpt_usage.htmlの末尾で紹介して頂いたのを、そのまま使っております。

初歩的なことのようで恐縮してしまうのですが、宜しくお願い致します。
 
00289/00289 AAA00000  uzaemon          Re: SPL2STMF (AFP to PCL/TIFF?)         
( 1)   01/11/20 20:31  00287へのコメント  コメント数：4
Olague,

> 1. I don't know what WSCST object I must use, after several attempts I'd found QSYS/QWPTIFFG4 and QSYS/QWPTIFFPB but I don't know if there are other objects more recomended.

I don't know either (it depends). As stated at "95. *IPDS spool files" SPL2STMF is just a front-end to IBM supplied API. Contact your support channel and ask IBM about "recommended" WSCST for your specific purpose.

As far as I know, QWPTIFFG4 should be used to generate a TIFF file for TIFF2PDF command.

> 2. When the spooled file to convert has overlays, the data falls down around one line in the format.

SPL2STMF has nothing to do with contents. To determine the problem and report to IBM, try LPR on your AS/400. Use LPD software for PC or UNIX to store stream file. Some LPD softwares have capability to store the printer output as stream file instead of send it to the printer. 

> 3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.

I don't understand what you want to do. Are you trying to create a TIFF file using WSCST for PCL data stream?

uzaemon@Japan

 
00288/00288 AAA00000  uzaemon          Re: SPL2STMF について(カナ文字化け)     
( 1)   01/11/20 20:08  00286へのコメント  コメント数：3
Yamadaさん、

> 『SPL2STMF』をダウンロードして試しているのですが、ｶﾅ文字が化けてしまってうまく表示されません。コード等はどう設定すればよろしいでしょうか？宜しくお願い致します。

まずはこのBBSの「78. Re: SPL2STMFでの漢字変換」をご一読ください。

また、問題判別には次のような情報が必要になります。

- どのようにして作成したか(ユーザー・プログラム or システムコマンドによる出力)
- スプールファイルのタイプ(SCS or AFPDS?)
- 指定したWSCST(自作WSCST or IBM supplied?)

uzaemon@Japan

 
00287/00287 AAA00000  Jesus Olague     SPL2STMF                                
( 1)   01/11/20 08:57

Hi, I've downloaded SPL2STMF early and it's working fine when is used to convert text-only spooled files to TIFF images; but I've some problems:

1. I don't know what WSCST object I must use, after several attempts I'd found QSYS/QWPTIFFG4 and QSYS/QWPTIFFPB but I don't know if there are other objects more recomended.

2. When the spooled file to convert has overlays, the data falls down around one line in the format.

3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.

Regards.

Jesus Olague
 
00286/00286 AAA00000  Masaaki Yamada   SPL2STMF について                       
( 1)   01/11/19 17:00

『SPL2STMF』をダウンロードして試しているのですが、ｶﾅ文字が化けてしまってうまく表示されません。コード等はどう設定すればよろしいでしょうか？宜しくお願い致します。
 
00285/00285 AAA00000  uzaemon          Re: 日本語でお願いできませんか？        
( 1)   01/11/07 17:46  00284へのコメント

t_abeさん、

> なんか使ってみたいものが、たくさんありそうなんですが
> 日本語の説明は無いんでしょうか（^^;

残念ながら今のところ日本語の説明はありません。英語と日本語の両方を作成・維持する時間が取れませんので...

このBBSは日本語も通りますので、ツールに関して不明な点があればこちらに書き込みしてください。

uzaemon@Japan

 
00284/00284 AAA00000  t_abe            日本語でお願いできませんか？            
( 1)   01/11/07 16:15

なんか使ってみたいものが、たくさんありそうなんですが
日本語の説明は無いんでしょうか（^^;

 
00283/00283 AAA00000  uzaemon          Re: French caracter codepage            
( 1)   01/11/01 12:55  00281へのコメント

Milk,

> I'm french and I've got a problem with the output file.
> Some caracters like "・#34; or "・#34; are replaced by "," or other special caracters.

First of all, which tool are you using? And exactly what CCSID did you specify for JOB, FILE and command parameters?

Waiting for your reply.

uzaemon@Japan

 
00282/00282 AAA00000  Milk             Re: sndm                                
( 1)   01/11/01 01:04  00279へのコメント

You just have to specify *FILE instead of *JOB in the Database file CCSID field. 
 
00281/00281 AAA00000  Milk             French caracter codepage                
( 1)   01/11/01 01:02

Hi,

I'm french and I've got a problem with the output file.
Some caracters like "" or "" are replaced by "," or other special caracters.

I've tried to modify the codepage in the program but without any result.

Thank's for helping me,

Me
 
00280/00280 AAA00000  uzaemon          Re: sndm (Another "failed to initialize 
( 1)   01/10/31 15:35  00279へのコメント

Christian,

> We use V4R4M0. We get the following Message:
> Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
> The next Entry is File CCSID -1 may not valid, trying anyway.
> In Germany we have CCSID 65535.

CCSID 65535 indicates the contents is not tagged to any language thus no conversion will take place.

Have you read a message "272.  Re^3: SNDM: failed to initialize code conversion"? If so, you should know that there are circumventions.

1. Specify DBFCCSID(*DFTJOBCCSID) or DBFCCSID(valid EBCDIC CCSID).
2. Create source physical file with vaild CCSID (not 65535) and specify the file for FILE parameter.

In German, I assume that you are using 273 as default job CCSID.

Try them and let me know the result.

uzaemon@Japan

 
00279/00279 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/30 23:07

I didnt found a solution to the following problem (Alfred Adjei didnt answer to my mail):
We use V4R4M0. We get the following Message:
Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
The next Entry is File CCSID -1 may not valid, trying anyway.
In Germany we have CCSID 65535.
Whats wrong ?
What CCSID should I use for the Source File ? Did I create a file from the source-File ? 
Thanks for your Help.
Best Regards.
Christian

 
00278/00278 AAA00000  uzaemon          Re: SPL2STMF (can't save for earlier rel
( 1)   01/10/25 18:27  00277へのコメント

Chris,

> Is there any way that I can get a compiled version of the two programs TIFFLIB and all it's objects and HPT and all it's objects??

For binary distribution issue, please read message "45. Re: Convert tiff file to PDF file" in this BBS.

> The problem is that I can't save it a a earlier release...  The machine I want it on is on V4R4..

What is your problem?

If you are using V4R5 or V5R1, you can modify the "MAKE" procedure to specify TGTRLS(V4R4M0) for CRTBNDC, CRTPGM, CRTCMOD, CRTSRVPGM commands so that you can save objects for V4R4.

If you are using V4R4 or earlier, you should be able to restore objects compiled on the release to V4R4.

Hope this helps.

uzaemon@Japan

 
00277/00277 AAA00000  Chris            SPL2STMF                                
( 1)   01/10/25 05:18

Is there any way that I can get a compiled version of the two programs TIFFLIB and all it's objects and HPT and all it's objects?? I have a machine that has all the compilers I need... The problem is that I can't save it a a earlier release...  The machine I want it on is on V4R4..  :(   Can you help me out?? :)  Thanks...

Chris
 
00276/00276 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/23 19:45

Sorry, I didnt read the message from Alfred Adjej.
Christian
 
00275/00275 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/23 19:38

We use V4R4M0. We get the following Message:
Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
The next Entry is File CCSID -1 may not valid, trying anyway.
In Germany we have CCSID 65535.
Whats wrong ?
Thanks for your Help.
Best Regards.
Christian
 
00274/00274 AAA00000  Wolfgang Kaufman tiff2                                   
( 1)   01/10/22 21:46

Thank you very much for your help. it works no very well
regards 
wolfgang
 
00273/00273 AAA00000  Wolfgang Kaufman Tiff2                                   
( 1)   01/10/22 18:52

Please tell me did yopu get my question
regards 
Wolfgang
 
00272/00272 AAA00000  uzaemon          Re^3: SNDM: failed to initialize code co
( 1)   01/10/20 18:53  00271へのコメント

Alfred,

> Problem: When I try to send a Physical database file of record length 80, I get the following error message ...
> 
> Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40      
> Message type . . . . . :   Information                                      
> Date sent  . . . . . . :   10/19/01      Time sent  . . . . . . :   12:03:10
>                                                                             
> [ Message . . . . :   Command failed. reason -111 failed to initialize code   
>   conversion API ( CCSID 0000J->00819, 3021:The value specified for the     
>   argument is not correct.)                                                 
> Cause . . . . . :   No additional online help information is available. ]

It looks like the database file is not tagged to valid CCSID. Try followings:

1. Specify DBFCCSID(*DFTJOBCCSID) or DBFCCSID(valid EBCDIC CCSID).
2. Create source physical file with vaild CCSID (not 65535) and specify the file for FILE parameter.

Waiting for your reply.

uzaemon@Japan

 
00271/00271 AAA00000  Alfred Adjei     Re^2: SNDM: Problem running STRREXPRC SR
( 1)   01/10/20 03:30  00268へのコメント  コメント数：1
> Alfred,
> 
> > When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.
> 
> Please confirm that you have library QSYSINC.
> 
> See messages "159. Re: SNDM compilation problem", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information. Try again and let me know the result.
> 
> uzaemon@Japan

======================================
Thank you. I installed QSYSINC and SNDM runs.
Problem: When I try to send a Physical database file of record length 80, I get the following error message ...

Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40      
Message type . . . . . :   Information                                      
Date sent  . . . . . . :   10/19/01      Time sent  . . . . . . :   12:03:10
                                                                            
[ Message . . . . :   Command failed. reason -111 failed to initialize code   
  conversion API ( CCSID 0000J->00819, 3021:The value specified for the     
  argument is not correct.)                                                 
Cause . . . . . :   No additional online help information is available. ]

Please help.   
                                                                            






 
00269/00269 AAA00000  uzaemon          Re: Tiff2 (Not a TIFF file, bad magic nu
( 1)   01/10/19 22:15  00267へのコメント

Wolfgang,

> SPL2STMF FILES(QPSUPRTF) TOSTMF('tmp/stmf.tif') 
> WSCST(DEFAULT)
> TIFF2PDF TIFF('/tmp/stmf.tif'                                         
>                     PDF('/tmp/stmf.pdf')            
> i got a error message:
> /tmp/stmf.tif: Not a TIFF file, bad magic number 32 (0x20). 

As the name implies, TIFF2PDF converts TIFF (more precise, TIFF, G4 compression, multipage image format) file to PDF. Clearly, the file (/tmp/stmf.tif) is not valid TIFF file.

To generate a TIFF-G4 file using SPL2STMF, you should :

1. Create *AFPDS spooled file.
2. Specify WSCST(QWPTIFFG4) for SPL2STMF command. (What is "WSCST(DEFAULT)"?)

See http://homepage1.nifty.com/uzaemon/hpt_usage.html for sample operation (remember to specify correct font for CDEFNT parameter).

Waiting for your feedback.

uzaemon@Japan

 
00268/00268 AAA00000  uzaemon          Re: SNDM: Problem running STRREXPRC SRCM
( 1)   01/10/19 21:57  00265へのコメント  コメント数：2
Alfred,

> When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.

Please confirm that you have library QSYSINC.

See messages "159. Re: SNDM compilation problem", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information. Try again and let me know the result.

uzaemon@Japan

 
00267/00267 AAA00000  Wolfgang Kaufman Tiff2                                   
( 1)   01/10/19 21:53

Hi uzaemon,
while running proc:
.....
SPL2STMF FILES(QPSUPRTF) TOSTMF('tmp/stmf.tif') 
WSCST(DEFAULT)
TIFF2PDF TIFF('/tmp/stmf.tif'                                         
                    PDF('/tmp/stmf.pdf')            
i got a error message:
/tmp/stmf.tif: Not a TIFF file, bad magic number 32 (0x20). 
but i don't know where is the reason. can you help me., cause i like to use this tool in my company 
thanks a lot                 
 
00265/00265 AAA00000  Alfred Adjei     SNDM: Problem running STRREXPRC SRCMBR(M
( 1)   01/10/19 06:18

When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.

Start creating modules for SNDM...
  creating module SNDM...         
  result-> 0                      
  creating module CDATE...        
  result-> RNS9309                
  creating module FD_...          
  result-> 0                      
  creating module GETERRINFO...   
  result-> 0                      
  creating module GETFILENAM...   
  result-> 0                      
  creating module GETJOBINFO...   
  result-> RNS9309
  creating module GETPFINFO...               
  result-> RNS9309                           
  creating module PREPAREUS...               
  result-> RNS9309                           
  creating module SNDPM...                   
  result-> RNS9309                           
Creating main program (SNDM)...              
  result-> CPF3C50                           
                                             
Start creating command ...                   
  creating pnlgrp...                         
  result-> 0                                 
  creating command...                        
  result-> 0                                 
                                             
Compile finished. Confirm error(s) if exists.
                                             
Press ENTER to end terminal session.         
 
00264/00264 AAA00000  Chris            Re^4: SPL2STMF (cannot find output file)
( 1)   01/10/12 01:46  00261へのコメント

I'm on hold on getting it to work.  I have one AS400 which has a C and RPG compiler on it. I have a second machine with AFP installed and the fonts.  The first machine is on V4R5 and the second is on V4R4.  I have a mix match...  I'm upgrading my second machine from V4R4 to V4R5 so that I can bing back the compiled vesion's.  I want to be able to convert AFP's to PDF's..   I tried what you have said and it seems to be great.. I just have to wait and see if I can get it work with AFP's... 

Thanks
Chris
 
00263/00263 AAA00000  uzaemon          Re: SNDM (*DSTMF as attachment file)    
( 1)   01/10/11 19:37  00262へのコメント

Mark,

> BTW, adding '*DSTMF' to the checking in the #INIT module also allows attachements to be taken from the QNTC file system.

Thank you very much for your suggestion.

It's a similar situation to message "82. SNDM Attachment-File" in this BBS. You can add any valid object type as attachment file in the same manner. 

uzaemon@Japan

 
00262/00262 AAA00000  Mark             SNDM                                    
( 1)   01/10/11 19:16

What an excellent utility...

BTW, adding '*DSTMF' to the checking in the #INIT module also allows attachements to be taken from the QNTC file system.
 
00261/00261 AAA00000  uzaemon          Re^3: SPL2STMF (cannot find output file)
( 1)   01/10/11 17:31  00260へのコメント  コメント数：1
Chris,

> File TIFF2PDF in library TIFFLIB with member TIFF2PDFHL not found. 
> Panel group TIFF2PDFHL not created in library TIFFLIB.
> AUT parameter ignored.

I have not created the panel group yet as I'm busy working for other things. That compile-time error message has nothing to do with your problem because SPL2STMF should run without the panel group (command help).

Have you examined the debug output? Didn't you find any message (such as "file opened" or so on) in it?

Waiting for your reply.

uzaemon@Japan

 
00260/00260 AAA00000  Chris            Re^2: SPL2STMF (cannot find output file)
( 1)   01/10/11 04:59  00259へのコメント  コメント数：2
After I start the REX Procedure to compile the second half of TIFF2PDF I get the following:    

                                         
  Start creating TIFF2PDF command...       
    Creating ILE-C module TIFF2PDF...      
    module result-> 0                      
    Creating ILE-CL module TIFF2PDFCL...   
    module result-> 0                      
    Creating program TIFF2PDF...           
    program result-> 0                     
    creating PNLGRP...                     
    result-> CPF5A02                       
    creating command...                    
    result-> 0 


In the DSPJOBLOG I get the following due to the above error.   

File TIFF2PDF in library TIFFLIB with member TIFF2PDFHL not found. 
Panel group TIFF2PDFHL not created in library TIFFLIB.
AUT parameter ignored.

Help!! :(

Chris

                                                                       
                                           
 
00259/00259 AAA00000  uzaemon          Re: SPL2STMF (cannot find output file)  
( 1)   01/10/05 21:12  00257へのコメント  コメント数：3
Chris,

> After using the program I don't know where the output is placed... 

The output file will be placed at the directory you specified in TOSTMF parameter. For instance, if you run the command as follows, you'll find the file "qpdspajb.txt" at directory "/tmp" on OS/400. Notice that the directory should present before you run SPL2STMF command.

| > WRKACTJOB OUTPUT(*PRINT)
| > SPL2STMF FILE(QPDSPAJB) TOSTMF('/tmp/qpdspajb.txt') WSCST(TEXTJ)
|   Stream file generated. execution time 0 min 1 sec, total pages = 4

Use WRKLNK OBJ('/tmp/*') or EDTF command to look for the output file.

> Where do I look for the PDF file after I issue the command...

SPL2STMF does not directly generate PDF file. Please read the "usage" section of the utility again.

> If the program comes back to say the it took 0 min and 0 seconds.  Does this mean that it did not work???

You can specify DEBUG(*YES) for SPL2STMF and examine spooled file QPRINT to confirm the process of the command,

Try above and let me know what you find.

uzaemon@Japan

 
00258/00258 AAA00000  Chris            Re: SPL2STMF                            
( 1)   01/10/05 03:08  00232へのコメント

> STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
> after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.
> Thanks en adavance.
> 
> Regards.


I noticed that you are using this program too.. Did you get it to work by chance?? I just need to figure out where the file is put?? Do you know??

Chris
> 
> Jose.

 
00257/00257 AAA00000  Chris            SPL2STMF                                
( 1)   01/10/05 03:02

I only have one stupid question.. After using the program I don't know where the output is placed... Where do I look for the PDF file after I issue the command...  If the program comes back to say the it took 0 min and 0 seconds.  Does this mean that it did not work???

Help

Chris
 
00256/00256 AAA00000  uzaemon          Re^3: Thank you for your feedback       
( 1)   01/10/02 18:48  00253へのコメント

Dominique,

> ... the end-result is that the program is now working fine.

Good news. Thank you for using my utility.

uzaemon@Japan

 
00255/00255 AAA00000  uzaemon          Re^3: SNDM (error using 30 *CCs)        
( 1)   01/10/02 18:41  00252へのコメント

MY_KATOHさん、

> SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
> とコーディングします。 
> この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
> 存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。

解説有難うございます。状況は理解しました。

これにSNDM側で対応するには、SMTP/QRPGLESRC.#GENの109行あたり、SMTP/QRPGLESRC.#SENDの86行辺り、SMTP/QRPGLESRC.#INITの107行目あたりなどの処理を見直す必要があります。宛先が全てブランクだった場合などのエラー処理も考えるとかなりの修正量になりますので、修正は難しいでしょう。

また、このようなエラーの発生はOS/400コマンドの一般的な動作であるため、ユーザーがコーディングで回避するのが通常の対応と考えます。例えば次のようなプログラムも同様のエラー(&PARM2がブランクであるため「CPD0078 パラメーター INCREL の値 '          ' が有効な名前でない」)を起こします。

| PGM                                                       
| DCL        VAR(&PARM1) TYPE(*CHAR) LEN(10) VALUE('TKBANG')
| DCL        VAR(&PARM2) TYPE(*CHAR) LEN(10)                
| CPYF       FROMFILE(TOKMSP) TOFILE(QGPL/TOKMSP) +         
|              CRTFILE(*YES) INCREL((*IF &PARM1 *EQ +       
|              '01010') (*AND &PARM2 *EQ '02020'))          
| ENDPGM                                                    

この現象を回避するにはCL(?)プログラムの修正が必要と思われます。*CCの数を固定にするか、あらかじめダミーのメールアドレスを全ての変数に初期値として指定しておくか(サーバーに余分な負荷をかけるため推奨しませんが)、SNDMコマンド部分を文字列として組み立ててQCMDEXCで呼び出すなどの方法で回避されてはいかがでしょうか。

uzaemon@Japan

 
00254/00254 AAA00000  MY_KATOH         Re^3: SNDM (error using 30 *CCs)        
( 1)   01/10/02 18:35  00252へのコメント

> > MY_KATOHさん、こんにちは。
> > 
> > > ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。
> > 
> > 状況が良く把握できないのですが、下記について情報をいただけますでしょうか。
> > 
> > - 「結果的にCCが必要なく」とはどのような意味でしょうか
> > - 具体的なエラーの内容(エラーコード、メッセージIDなど)
> > - DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容
> > 
> > よろしくお願いします。
> > 
> > uzaemon@Japan
> 早速ありがとうございます。詳細に説明させていただきます。
> SNDMを使うプログラムPROGRAM_AでTOのパラメーター用に&TO,&CC01,
> &CC02,.....(30個というのはあまり意味がありませんでした。すいません）と変数を用意します。
> SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
> とコーディングします。 
> この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
> 存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。
> これと同じく、&CC01にユーザーが任意で入れさせるようなプログラムからPROGRAM_Aを呼ぶ場合、ユーザーが入力せず（必要ないと判断した場合）、結果的に&CC01に*CHARのブランク(X'404040...')が入ってしまい、User Unknownという（考えてみればあたりまえなのですが）事になってしまいます。これを、コーディングで回避する以外になにか良い手が無いかというご質問です。
> わがままな質問ですが、よろしくお願いいたします。
申し訳ありません。これはSNDMに限ったことではないですね。CLプログラムの書き方の質問でした。こちらでがんばってみます。ありがとうございました。

 
00253/00253 AAA00000  Dominique        Re^2: SNDM in batch mode                
( 1)   01/10/02 15:25  00249へのコメント  コメント数：1
Uzaemon,

thank you for your reply. I followed you instructions & looked at the debug information. Effectively, the parameters had 'garbage' information when the CL is submitted in batch. After looking at an As400 FAQ which explains issues when submitting jobs in batch and when parameters are > 32 in length, the problem is now solved. I have learned this lesson the hard way but the end-result is that the program is now working fine.
Again, many thanks for this excellent SNDM utility.


Regards
 
00252/00252 AAA00000  MY_KATOH         Re^2: SNDM (error using 30 *CCs)        
( 1)   01/10/02 09:41  00251へのコメント  コメント数：2
> MY_KATOHさん、こんにちは。
> 
> > ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。
> 
> 状況が良く把握できないのですが、下記について情報をいただけますでしょうか。
> 
> - 「結果的にCCが必要なく」とはどのような意味でしょうか
> - 具体的なエラーの内容(エラーコード、メッセージIDなど)
> - DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容
> 
> よろしくお願いします。
> 
> uzaemon@Japan
早速ありがとうございます。詳細に説明させていただきます。
SNDMを使うプログラムPROGRAM_AでTOのパラメーター用に&TO,&CC01,
&CC02,.....(30個というのはあまり意味がありませんでした。すいません）と変数を用意します。
SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
とコーディングします。 
この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。
これと同じく、&CC01にユーザーが任意で入れさせるようなプログラムからPROGRAM_Aを呼ぶ場合、ユーザーが入力せず（必要ないと判断した場合）、結果的に&CC01に*CHARのブランク(X'404040...')が入ってしまい、User Unknownという（考えてみればあたりまえなのですが）事になってしまいます。これを、コーディングで回避する以外になにか良い手が無いかというご質問です。
わがままな質問ですが、よろしくお願いいたします。
 
00251/00251 AAA00000  uzaemon          Re: SNDM (error using 30 *CCs)          
( 1)   01/10/01 18:28  00250へのコメント  コメント数：3
MY_KATOHさん、こんにちは。

> ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。

状況が良く把握できないのですが、下記について情報をいただけますでしょうか。

- 「結果的にCCが必要なく」とはどのような意味でしょうか
- 具体的なエラーの内容(エラーコード、メッセージIDなど)
- DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容

よろしくお願いします。

uzaemon@Japan

 
00250/00250 AAA00000  MY_KATOH         SNDM                                    
( 1)   01/10/01 14:09

お世話になります。SNDMを利用させて頂いています。CLプログラムからこのコマンドを利用する場合の質問です。CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。回避する方法がありますでしょうか。よろしくお願いいたします。

MY_KATOH

 
00249/00249 AAA00000  uzaemon          Re: SNDM in batch mode                  
( 1)   01/09/30 13:08  00248へのコメント  コメント数：2
Dominique,

Command help information states that you cannot use some special characters in "Description" parameter (do not confound with "Mail address" parameter).

| Description                                              
|     Specify mail user information such as sender name or 
|     organization name.  DBCS and special characters are  
|     allowed except following SBCS characters.   ( ) < > @
|     , ; : " / [ ] ? . =                                  

> I cannot find any invalid character here and cannot understand why when called interactively, SNDM works file but when the CL that contains the SNDM call is submitted (same parameters, parm lengths etc), I get the above error.

Please confirm followings and let me know.

1. Don't you use "@" or any other invalid character(s) in "Description" field?

2. Specify DEBUG(*YES) to generate interactive and batch debug print outputs and look for the difference.

Waiting for your reply.

uzaemon@Japan

 
00248/00248 AAA00000  Dominique        SNDM in batch mode                      
( 1)   01/09/28 20:02

Hi,
I am having a problem when executing the SNDM utility in batch mode this way:
When, within a CL program CL1,  I call another CL program CL2 that itself invokes SNDM , SNDM works fine. However if the first CL program  does a SBMJOB of CL2 (instead of a CALL CL2). I get an error message. Have you already experienced this error while using SNDM and know what I am overlooking here?
The error msg is as follows:
Message . . . . :   Command failed. reason -135 invalid character found in
  mail address description (FROM-[DOMINIQUE
  DAHKOW@IBL.INTNET.MU])

(This is the output of the dump)
I cannot find any invalid character here and cannot understand why when called interactively, SNDM works file but when the CL that contains the SNDM call is submitted (same parameters, parm lengths etc), I get the above error.

Any hint?

Regards
 
00247/00247 AAA00000  uzaemon          Re^3: SNDM (why only 80 characters in on
( 1)   01/09/24 01:56  00245へのコメント

Eduard,

> P.S.: it would be nice, if i could send more than 92 characters in one line...

RFC 821 allows to send 1000 octets in one line. I limited the SNDM to allow only 80 bytes by following reasons.

1. After some encodings, 80 characters would be translated to much longer string.

2. Some mailers may unexpectedly fold the text line which exceeds about 80 characters.

3. You can send any data as attachment file.

On balance, 80 characters in one line is the safest value for most users in my opinion. If you really want to extend it by some reason which I cannot think of, you can modify the source code at your will.

uzaemon@Japan

 
00245/00245 AAA00000  Eduard Weinknech Re^2: SNDM (missing. localhost)         
( 1)   01/09/23 20:12  00244へのコメント  コメント数：1
Hi uzaemon,

that fixed my problem and SNDM is working!

thx a lot

P.S.: it would be nice, if i could send more than 92 characters in one line...
 
00244/00244 AAA00000  uzaemon          Re: SNDM (missing. localhost)           
( 1)   01/09/22 11:21  00242へのコメント  コメント数：2
Eduard,

> When I start SNDM, I allways will get the error:
> 214 failed to retrieve local domain name ('.' missing. localhost =) 

Have you defined domain name of your AS/400 by CHGTCPDMN command (or CFGTCP -> option "12. Change TCP/IP domain information")?

Please let me know what you've found.

uzaemon@Japan

 
00242/00242 AAA00000  Eduard Weinknech SNDM                                    
( 1)   01/09/22 00:20

Hi, i've installed your SNDM and added our SMTP-Server in the HOST-TABLE-ENTRY.
When I start SNDM, I allways will get the error:
214 failed to retrieve local domain name ('.' missing. localhost =)  
Please can you help me, thx 
 
00241/00241 AAA00000  uzaemon          Re^5: SPL2STMF                          
( 1)   01/09/18 11:22  00236へのコメント

Jose,

Have your resolved the problem?

uzaemon@Japan

 
00240/00240 AAA00000  uzaemon          Re^7: *Userascii AS/400 spools.         
( 1)   01/09/18 11:19  00239へのコメント

Jordi,

> Thanks for your request.

I would like to hear your feedback. Please let me know your decision.

Thanks in advance.

uzaemon@Japan

 
00239/00239 AAA00000  jordi carreras   Re^6: *Userascii AS/400 spools.         
( 1)   01/09/17 15:49  00231へのコメント  コメント数：1
Uzaemons,

Thanks for your request.

Best regards.

Jordi.

 
00238/00238 AAA00000  uzaemon          Re: Client FTP.                         
( 1)   01/09/14 21:44  00237へのコメント

Nicolas,

> Do you know why?

I don't know how you control the FTP but control part of FTP connection should be same as telnet according to RFC 959.

Another person posted FTP-related question to this BBS and you may refer to message "198. Re: Question Aboute Socket".

For more help, please contact your support channel.

uzaemon@Japan

 
00237/00237 AAA00000  Nicolas Machado  Client FTP.                             
( 1)   01/09/13 03:30

Hello, I want to know where to begin for creating a Client FTP program, in RPG/le.

I wish to control the sentences that I send to the server.
Testing I surprise my self very much, because the commands that I can send to the server are diferent if I use a FTP client o the telnet client with port 21.
Do you know why?

Thanks
 
00454/00454 AAA00000  uzaemon          Re: spl2stmf bmp outpt                  
( 1)   02/08/01 20:28  00453へのコメント

Michael,

> is there a way to create a BMP image file with your tool?

No, because IBM does not provide WSCST to create BMP file. You may either:

1. Convert TIFF or GIF to BMP by some means.
2. Ask IBM to provide WSCST for BMP format.

uzaemon@Japan

 
00453/00453 AAA00000  Michael Heckmann spl2stmf bmp outpt                      
( 1)   02/07/31 21:55

Hi,

is there a way to create a BMP image file with your tool?

Thanks in advance,

Michael Heckmann
 
00452/00452 AAA00000  uzaemon          Re: tiff2pdf (RPG version?)             
( 1)   02/07/30 12:16  00450へのコメント

Fred,

> ... Do you know anywhere I can get this utility using RPG?

As far as I know, there are no RPG version of TIFF2PDF.

uzaemon@japan

 
00451/00451 AAA00000  uzaemon          Re^5: minizip in batch mode             
( 1)   02/07/30 11:58  00449へのコメント

Rod,

> ... Anyway, before I make any mods I thought it best to discuss and clear up these possible errors with you. 

Sorry but I'm so busy on my regular job that cannot spare my time to discuss about your specific project. Also, I need to upgrade zlib for OS/400 to 1.1.4  firstly if I had time.

> I don't know your email address.

My mail address is open at the subject line of each post of this BBS...

uzaemon@Japan

 
00450/00450 AAA00000  fred neeser      tiff2pdf                                
( 1)   02/07/30 00:47

Hello,

I was hoping to use your tiff2pdf utility, but we don't have C at my shop.  Do you know anywhere I can get this utility using RPG?  Thanks.
 
00449/00449 AAA00000  Rod Orr          Re^4: minizip in batch mode             
( 1)   02/07/29 21:25  00447へのコメント  コメント数：1
Uzaemon,

have had a good look at pgm qcsrc(MINIZIP) and I think I have found a few possible errors (minor) in code (but could be my lack of C skills). Anyway, before I make any mods I thought it best to discuss and clear up these possible errors with you. It would be easier via email if you don't mind. I don't know your email address.
Regards Rod Orr

> Rod,
> 
> > I might give this a try when I get some spare time. I'm not a C programmer, ...
> 
> Me too ;-)
> I can read and modify C programs but I cannot write serious C program.
> 
> > Anyway, I'll give it a try shortly and let you know how I get on
> 
> I'm crossing my fingers and looking forward to hearing from you.
> 
> uzaemon@Japan

 
00448/00448 AAA00000  uzaemon          Re^5: ZLIB (parameter length)           
( 1)   02/07/28 22:19  00445へのコメント

Rod,

I recommend you to contanct your support channel to confirm actual specification of CPP. 

For your information, here's what I think of.

If files you want to ZIP can be placed in the same directory, you don't need to specify full path name, but just file name. By doing so, you can change the length (128) shorter.

Or it might be possible to use qshell interpreter to call MINIZIP by creating symlnk to the program. I don't know the length limitation of qshell but it may worth to try.

Hope this helps.

uzaemon@Japan

 
00447/00447 AAA00000  uzaemon          Re^3: minizip in batch mode             
( 1)   02/07/28 22:17  00444へのコメント  コメント数：2
Rod,

> I might give this a try when I get some spare time. I'm not a C programmer, ...

Me too ;-)
I can read and modify C programs but I cannot write serious C program.

> Anyway, I'll give it a try shortly and let you know how I get on

I'm crossing my fingers and looking forward to hearing from you.

uzaemon@Japan

 
00445/00445 AAA00000  Rod Orr          Re^4: ZLIB (parameter length)           
( 1)   02/07/27 21:19  00442へのコメント  コメント数：1
Uzaemon,  
 
> I remember that OS/400 CPP (command processing program) only accepts 6000 bytes as one command line. 75x128=9600 can easily exceeds this limitation. Please look for IBM manuals (CL reference?) or Information Center. 
> 

Commands have max 5000 char variables but if you use a list of elements (eg list of file names) you can exceed this.
CL actually supports a max 9999 char variable. The CL manual says 5000, but the SEU prompter help says 9999 as does the compiler. I have CL programs that compile upto 9999. So a cmd list of 75 files at 128 bytes gives a datastrusture length 2 + 2(75) + 128(75) = 9753 bytes in CL.

Rod Orr
 
00444/00444 AAA00000  Rod Orr          Re^2: minizip in batch mode             
( 1)   02/07/27 21:10  00443へのコメント  コメント数：3
Uzaemon,
 
> 
> Of course you can modify the MINIZIP and create frontend CL program and command definition like TIFF2PDF.
> 
I might give this a try when I get some spare time. I'm not a C programmer, but I've had a look at pgm and I think if I remove all stdout and stdin and return with a retcode everytime there is an error message I could turn it into a bindable module. I can then use callp from a CL program and turn it into a cmd.
Anyway, I'll give it a try shortly and let you know how I get on

Rod Orr 

 
00443/00443 AAA00000  uzaemon          Re: minizip in batch mode               
( 1)   02/07/27 01:42  00440へのコメント  コメント数：4
Rod,

> I have been doing some testing of how minizip behaves in batch mode and it seems to cause a few problems.
> 1. no return code/message mechanism
> 2. uses fprint when in batch mode (ends up in qprint)
> 3. may use scanf for prompt input in batch mode (this actually causes big problems by filling up the spool file)
> 
> So, my question is do you have any suggestions for running this in batch mode? Maybe some of the other readers have got around this (made modifications etc)?

You may create a small CL program which override STDOUT to (temporary) physical file before run MINIZIP. The PF will contain output from MINIZIP and you may examine the PF to check if the command was successful. Also specify '-o' option if you want to avoid file overwrite message.

Of course you can modify the MINIZIP and create frontend CL program and command definition like TIFF2PDF.

uzaemon@Japan



 
00442/00442 AAA00000  uzaemon          Re^3: ZLIB (parameter length)           
( 1)   02/07/27 01:31  00439へのコメント  コメント数：2
Rod,
 
> P.S. Do you see any problem calling MINIZIP with upto 75 file names (each max 128 bytes)? I'm planning on building it into some existing commands which handle this many IFS files. 

I remember that OS/400 CPP (command processing program) only accepts 6000 bytes as one command line. 75x128=9600 can easily exceeds this limitation. Please look for IBM manuals (CL reference?) or Information Center. 

uzaemon@Japan

 
00441/00441 AAA00000  uzaemon          Re^3: ZLIB (vulnerability of zlib 1.1.4)
( 1)   02/07/27 01:08  00439へのコメント

Rod,

> The reason I asked was because of the following statement from zlib and the fact your port dates to 1999. I assumed then that the recent (feb 2002) winimage 0.18 port that you use would include the security fixes.
> 
> from zlib site
> ...."zlib 1.1.4 This version fixes a potential security problem, see details here. Any software that is linked against or derived from an earlier version of zlib should be upgraded immediately......." 

I read the vulnerability and I think zlib for OS/400 should also be upgraded (though the problem is not fatal in most cases).

Unfortunately, I don't have time for now and it might be a good chance for other AS/400 people to contribute.

uzaemon@Japan

 
00440/00440 AAA00000  Rod Orr          minizip in batch mode                   
( 1)   02/07/26 12:33

Uzaemon,

I have been doing some testing of how minizip behaves in batch mode and it seems to cause a few problems.
1. no return code/message mechanism
2. uses fprint when in batch mode (ends up in qprint)
3. may use scanf for prompt input in batch mode (this actually causes big problems by filling up the spool file)

So, my question is do you have any suggestions for running this in batch mode? Maybe some of the other readers have got around this (made modifications etc)?

Regards,   Rod Orr
 
00439/00439 AAA00000  Rod Orr          Re^2: ZLIB (version 0.18)               
( 1)   02/07/26 09:26  00438へのコメント  コメント数：4
> Rod,
> 
> > I noticed it was based on version 0.15. Version 0.18 is now available and I was wondering if you planned to upgrade your OS/400 version to 0.18 ?
> 
> I visited http://www.winimage.com/zLibDll/unzip.html and it states that "February 2002 : you can get version 0.18 with support of custom IO function for read/write zipfile, and raw reading in unzip/zip (for duplicate file from one zip to another without uncompress/compress)". It looks like there are no need to update the port because I don't need those enhancements.

> uzaemon@Japan

Uzaemon,

thanks for quick reply.
The reason I asked was because of the following statement from zlib and the fact your port dates to 1999. I assumed then that the recent (feb 2002) winimage 0.18 port that you use would include the security fixes.

from zlib site
...."zlib 1.1.4 This version fixes a potential security problem, see details here. Any software that is linked against or derived from an earlier version of zlib should be upgraded immediately......." 

Regards, Rod Orr

P.S. Do you see any problem calling MINIZIP with upto 75 file names (each max 128 bytes)? I'm planning on building it into some existing commands which handle this many IFS files. 



 
00438/00438 AAA00000  uzaemon          Re: ZLIB (version 0.18)                 
( 1)   02/07/25 22:59  00437へのコメント  コメント数：5
Rod,

> I noticed it was based on version 0.15. Version 0.18 is now available and I was wondering if you planned to upgrade your OS/400 version to 0.18 ?

I visited http://www.winimage.com/zLibDll/unzip.html and it states that "February 2002 : you can get version 0.18 with support of custom IO function for read/write zipfile, and raw reading in unzip/zip (for duplicate file from one zip to another without uncompress/compress)". It looks like there are no need to update the port because I don't need those enhancements.

If I had time, I would port Info-ZIP (http://www.info-zip.org/pub/infozip/) because it is much more powerful than MINIZIP and MINIUNZ in functionality.

Anyway, thank you very much for your information.

uzaemon@Japan

 
00437/00437 AAA00000  Rod Orr          ZLIB                                    
( 1)   02/07/25 16:53

Hi,
I am using your ZLIB product for OS/400. Thankyou.
I noticed it was based on version 0.15. Version 0.18 is now available and I was wondering if you planned to upgrade your OS/400 version to 0.18 ?
regards,
Rod Orr
 
00436/00436 AAA00000  uzaemon          Re^3: SNDM (my reply to Dave)           
( 1)   02/07/13 20:46  00435へのコメント

> Dave,
> 
> I don't know why you changed the purport of your previous question on my BBS (
> http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=431&log
> _no=431&msg_per_page=50&def=10). You posted several questions and I've never r
> eceived adequate response. Again, it is not possible for anybody to help you w
> ithout good explanation and it is impossible to communicate with...
> 
> Anyway, I try to answer to your mail.
> 
> > It's possible the procedure SNDM change or modifie the set caractere in our 
> AS400.
> 
> No, for sure. As SNMD is open-source software, you can examine SMTP/RPGLESRC.M
> AKE and other source members. There are no code which changes job CCSID (and N
> EVER for QCHRID for printer device).
> 
> I believe that SNDM has been used by many Europian AS/400 shops and you are th
> e only person who reported such weird problem. One possibility is that you hav
> e installed non-original version of SNDM which has been modified by somebody w
> ho inserted (malicious?) code. If you doubt SNDM caused the problem, just dele
> te library SMTP.
> 
> I may post your mail and this reply to my BBS for others to know what has been
>  discussed.
> 
> uzaemon@Japan

 
00435/00435 AAA00000  uzaemon          Re^2: SNDM (mail from Dave)             
( 1)   02/07/13 20:44  00432へのコメント  コメント数：1
> Hello,
> 
> I contact you many times.
> We have a problem since we have installed SNDM.
> We dont have french caratere in our printing we have US caractere we dont know WHY.
> It's possible the procedure SNDM change or modifie the set caractere in our AS400.
> 
> In our QCCSID we have 65535
>          QCHRID we have 667 37
> 
> We need to have 37 in our file caractere ID
> 
> Before to install your procedure is good.......
> 
> But since i had installed SNDM is not good I dont have caractere ・・・etc French caractere in our printer file (The outq is good > but not the printing).
> 
> But when I try to do many test I find it 
> 
> When I change our DEVICE printer *SYSVAL by "667  1147" it's good but I need to change it's since we have intalled SNDM
> procedure but please WHY 1147 ??????????
> 
> 
> Please I and waiting your HELP please it's very important for me.
> 
> Thank you for your help

 
00434/00434 AAA00000  uzaemon          Re: MINIZIP (I/O error - file QUSRSYS/QA
( 1)   02/07/13 20:37  00433へのコメント

> Hi, I have downloaded and recompiled the Zlib library - RLS as V5R1M0 which is the current level of our operating system. But when I run the minizip program it fails - the joblog indicates an I/O error with file QAOKL02A in Qusrsys - I also notice that minizip has these files open for update ? Do you have any idea what may be wrong? Thank you, Reagrds, Ralph. 

I ran the make procedure on my 270(V5R1) and compressed a stream file in IFS (/tmp). Everything went well. I don't know why you encountered such strange problem because file QUSRSYS/QAOKL02A (base file is QAOKP02A) contains system distribution directory information and has nothing to do with ZLIB.

Please check followings:

1. Does your problem happen anytime you run MINIZIP?
2. Does the problem occure to any stream files?
3. Did you try to call MINIZIP by other user profile, e.g. QSECOFR?
4. Does the file QUSRSYS/QAOKL02A exist?
5. Do you perform system IPL every day?
6. What ZLIB package are you using (downloaded from my site)? 
7. If you have other AS/400s, do you see the same problem?

Waiting for your reply.

uzaemon@Japan

 
00433/00433 AAA00000  Ralph Porter     MINIZIP                                 
( 1)   02/07/11 21:14

Hi, I have downloaded and recompiled the Zlib library - RLS as V5R1M0 which is the current level of our operating system. But when I run the minizip program it fails - the joblog indicates an I/O error with file QAOKL02A in Qusrsys - I also notice that minizip has these files open for update ? Do you have any idea what may be wrong? Thank you, Reagrds, Ralph. 
 
00432/00432 AAA00000  uzaemon          Re: SNDM (continue from message 425)    
( 1)   02/07/05 21:45  00431へのコメント  コメント数：2
> Hello,
> 
> Ok but could you tell me now WHY exactly 
> I dont received a file format TEXTE with SNDM.
> I have ALWAYS a file not correctly.
> 
> I hope have an anwser please.
> Best regards

It is impossible to help you unless you provide adequate and accurate information.

First, please reread and answer to my previous questions(message "425. Re: Send file not format text with SNDM").

Second, run the SNDM command specifying DEBUG(*YES) and send debug print output (convert spooled file to PC text format. There are lots of ways to do that) to my mail address.

I will investigate them (answer to my questions and debug print output) and come back to you.

uzaemon@Japan

 
00431/00431 AAA00000  dave             SNDM                                    
( 1)   02/07/05 04:48

Hello,

Ok but could you tell me now WHY exactly 
I dont received a file format TEXTE with SNDM.
I have ALWAYS a file not correctly.

I hope have an anwser please.
Best regards


 
00430/00430 AAA00000  uzaemon          Re^3: Problem in SNDST                  
( 1)   02/07/03 23:04  00429へのコメント

> > > Hello,
> > > 
> > > When I send mail with SNDST I have this message ERROR
> > > user identifier *UNKNOWN *ANYMAIL failed
> > > Could you tell me please why.
> > > Before that is run it's since I had change our CCSID in 37
> > > now I re change the CCSID in 65535 and it's the same again.
> > > 
> > > Please thank you if you can help me.
> > > 
> > > I am waiting your answser.
> > 
> > Could you tell me why you deleted your messages (422 and 423) without responding to my questions? 
> > 
> > uzaemon@Japan
> Yes I can,
> It's because I try some choose for send mail.
> please before I would like you anwser this question
> and I promise you I can anwser the next
> It's very hard for me to explain all in english
> 
> please could you help me before about this question please
> 
> thank you very much

As I stated at the top of this page, my BBS is not for general Q&A and your question is even too vague to answer. I recommed you to:

- Search the Web. You can easily find how to configure your AS/400 as mail server, e.g. "Knowledge Base" (http://www-912.ibm.com/s_dir/slkbase.NSF/0cf528a492c9b4a88625680b0002037f/34879f5e413aa5cd8625697b0053f36a?OpenDocument) or "Technical Studio" (http://www.redbooks.ibm.com/tstudio/ebizv4r3/index101.htm) or "Information Center" (http://publib.boulder.ibm.com/pubs/html/as400/v5r1/ic2924/info/rzair/rzairgetstart.htm)
- Post your question to French netnews or other BBS.
- Contact your local support channel, if any.

Hope this helps.

uzaemon@Japan

 
00429/00429 AAA00000  dave             Re^2: Problem in SNDST                  
( 1)   02/07/03 21:02  00428へのコメント  コメント数：1
> > Hello,
> > 
> > When I send mail with SNDST I have this message ERROR
> > user identifier *UNKNOWN *ANYMAIL failed
> > Could you tell me please why.
> > Before that is run it's since I had change our CCSID in 37
> > now I re change the CCSID in 65535 and it's the same again.
> > 
> > Please thank you if you can help me.
> > 
> > I am waiting your answser.
> 
> Could you tell me why you deleted your messages (422 and 423) without responding to my questions? 
> 
> uzaemon@Japan
Yes I can,
It's because I try some choose for send mail.
please before I would like you anwser this question
and I promise you I can anwser the next
It's very hard for me to explain all in english

please could you help me before about this question please

thank you very much
 
00428/00428 AAA00000  uzaemon          Re: Problem in SNDST                    
( 1)   02/07/03 20:52  00427へのコメント  コメント数：2
> Hello,
> 
> When I send mail with SNDST I have this message ERROR
> user identifier *UNKNOWN *ANYMAIL failed
> Could you tell me please why.
> Before that is run it's since I had change our CCSID in 37
> now I re change the CCSID in 65535 and it's the same again.
> 
> Please thank you if you can help me.
> 
> I am waiting your answser.

Could you tell me why you deleted your messages (422 and 423) without responding to my questions? 

uzaemon@Japan

 
00427/00427 AAA00000  dave             Problem in SNDST                        
( 1)   02/07/03 16:30

Hello,

When I send mail with SNDST I have this message ERROR
user identifier *UNKNOWN *ANYMAIL failed
Could you tell me please why.
Before that is run it's since I had change our CCSID in 37
now I re change the CCSID in 65535 and it's the same again.

Please thank you if you can help me.

I am waiting your answser.

 
00425/00425 AAA00000  uzaemon          Re: Send file not format text with SNDM 
( 1)   02/07/01 21:29

Dave,

> Sorry It's because after 1 day to install SNDM I send the attach file not in format texte I dont know why please
> could you help me

Again, I can't figure out what you mean... 

- Is SNDM working for plain mail?
- Are you trying to send a mail with attachment file?
- If so, how did you specify the attachment file?
- Do you get any error message from SNDM?

Waiting for your reply.

uzaemon@Japan

 
00424/00424 AAA00000  uzaemon          Re: SNDM secure                         
( 1)   02/07/01 21:24

Dave,

> Before to install SNDM I would like if it's secure if I can have some problem with this procedure

Sorry but I don't understand what you are asking. Do you think which "procedure" could cause what kind of problem?

uzaemon@Japan

 
00421/00421 AAA00000  NISITANI TOMIO   Re^2: 文字フィールドのダブルクォーテーシ
( 1)   02/06/28 15:00  00420へのコメント

> NISITANIさん、
> 
> > CRTCSVFを使わせてもらっていますが、CRTCSVFRPGでCSV形式に変換時に、文字タイプフィールドの最初と最後のダブルクォーテーションをセットしない方法を教えていただきたい。
> 
> 現時点でCRTCSVFに文字列前後のダブルクォーテーションをはずす機能はありませんので、プログラムを解析/修正するしか方法はありません。
> 
> 同じ内容の話題が当BBSの"215. output file with CRTCSVF"から始まるスレッドにありますのでご一読ください(一部話がかみ合ってませんが...)。私の見解はメッセージの221番に述べています。
> 
> 個人的にはなぜそのようなフォーマットのファイルが必要なのか、また、文字列中にカンマがあった場合の誤動作を防ぐためにどのような対策を行っているかに興味があります。
> 
> uzaemon@Japan
取引先の要望です。
分かりました、あきらめます。
 
00420/00420 AAA00000  uzaemon          Re: 文字フィールドのダブルクォーテーシ 
( 1)   02/06/27 23:31  00418へのコメント  コメント数：1
NISITANIさん、

> CRTCSVFを使わせてもらっていますが、CRTCSVFRPGでCSV形式に変換時に、文字タイプフィールドの最初と最後のダブルクォーテーションをセットしない方法を教えていただきたい。

現時点でCRTCSVFに文字列前後のダブルクォーテーションをはずす機能はありませんので、プログラムを解析/修正するしか方法はありません。

同じ内容の話題が当BBSの"215. output file with CRTCSVF"から始まるスレッドにありますのでご一読ください(一部話がかみ合ってませんが...)。私の見解はメッセージの221番に述べています。

個人的にはなぜそのようなフォーマットのファイルが必要なのか、また、文字列中にカンマがあった場合の誤動作を防ぐためにどのような対策を行っているかに興味があります。

uzaemon@Japan

 
00418/00418 AAA00000  NISITANI TOMIO   文字フィールドのダブルクォーテーション  
( 1)   02/06/27 19:58

CRTCSVFを使わせてもらっていますが、CRTCSVFRPGでCSV形式に変換時に、文字タイプフィールドの最初と最後のダブルクォーテーションをセットしない方法を教えていただきたい。
 
00417/00417 AAA00000  uzaemon          Re^5: SNDM (mail does not go outside)   
( 1)   02/06/13 20:13  00416へのコメント

Trang,

> The error message is from QGATE send to my email address (the sender).

That makes sense.

> I tried to use command SNDDST to send the mail to outside but the result is the same, there is no errors but recipient never receive the mail.

I think you should ask administrators of upper MTA(mail server)s to allow mail relay from you OS/400. It is not possible for OS/400 SMTP to circumvent restrictions in other MTAs unless those MTAs have unexpected vulnerability.

Hope this helps.

uzaemon@Japan.

 
00416/00416 AAA00000  Trang            Re^4: SNDM (mail does not go outside)   
( 1)   02/06/13 05:12  00415へのコメント  コメント数：1
> Trang,
> 
> I still cannot figure out your mail system configuration.
> 
> > Thank you for quick respond. Here this is error message:
> > NOT ABLE TO DELIVER MAIL TO SOME/ALL RECIPIENTS.
> > REPLY CODES WITH FIRST DIGIT = '4' OR '5' ARE ERROR REPLIES.
> > ERRORS THAT DO NOT HAVE ERROR REPLY CODES MAY EXIST.
> > 
> > HOST HQW400 NOT ABLE TO DELIVER MAIL TO FOLLOWING RECIPIENT(S):
> > <TRANG@AUTUMNIX.COM>
> > MAIL REJECTED BY AUTUMNIX WITH THE MESSAGE:
> > 554 Relay rejected for policy reasons.
> > 
> > ** TEXT OF MAIL FOLLOWS **
> > Received: from PCNAIDCS.COM([205.139.80.36]) by HQW400.PCNAIDCS.COM (IBM OS/400 SMTP V04R03M00) with TCP; Tue, 11 Jun 2002 11:16:11 -0400
> > From: <TCAO@PORSCHECARS.COM>
> > To: <TRANG@AUTUMNIX.COM>
> ~~~~~~~~~~~~~snip~~~~~~~~~~~~~~~~~
> 
> Are are trying to send a mail from OS/400 (HQW400.PCNAIDCS.COM) to mail server at AUTUMNIX.COM via Domino server (PCNAIDCS.COM)? AUTUMNIX.COM seems to be rejecting relay mail (see message "318. Re: SNDDST works but SNDM does not?").
> 
> Go back to my first question. Where did you see the error message? Is it content of returned mail? Apparently SNDM does not produce such lengthy message.
> 
> > I used *LOCALHOST as mail server
> 
> Second question. You are using OS/400 as mail (SMTP/POP3) server, right?
> 
> > I can not setup Outlook Express (use our domino mail server) so I don't know it is work or not.
> 
> Do you know anybody who can setup Outlook Express as mail client of your AS/400 mail server? The configuration task should take less than 10 min.
> 
> Waiting for your reply.
> 
> uzaemon@Japan
Hi Uzaemon,

The error message is from QGATE send to my email address (the sender).
I tried to use command SNDDST to send the mail to outside but the result is the same, there is no errors but recipient never receive the mail.
Trang   
 
00415/00415 AAA00000  uzaemon          Re^3: SNDM (mail does not go outside)   
( 1)   02/06/12 22:22  00414へのコメント  コメント数：2
Trang,

I still cannot figure out your mail system configuration.

> Thank you for quick respond. Here this is error message:
> NOT ABLE TO DELIVER MAIL TO SOME/ALL RECIPIENTS.
> REPLY CODES WITH FIRST DIGIT = '4' OR '5' ARE ERROR REPLIES.
> ERRORS THAT DO NOT HAVE ERROR REPLY CODES MAY EXIST.
> 
> HOST HQW400 NOT ABLE TO DELIVER MAIL TO FOLLOWING RECIPIENT(S):
> <TRANG@AUTUMNIX.COM>
> MAIL REJECTED BY AUTUMNIX WITH THE MESSAGE:
> 554 Relay rejected for policy reasons.
> 
> ** TEXT OF MAIL FOLLOWS **
> Received: from PCNAIDCS.COM([205.139.80.36]) by HQW400.PCNAIDCS.COM (IBM OS/400 SMTP V04R03M00) with TCP; Tue, 11 Jun 2002 11:16:11 -0400
> From: <TCAO@PORSCHECARS.COM>
> To: <TRANG@AUTUMNIX.COM>
~~~~~~~~~~~~~snip~~~~~~~~~~~~~~~~~

Are are trying to send a mail from OS/400 (HQW400.PCNAIDCS.COM) to mail server at AUTUMNIX.COM via Domino server (PCNAIDCS.COM)? AUTUMNIX.COM seems to be rejecting relay mail (see message "318. Re: SNDDST works but SNDM does not?").

Go back to my first question. Where did you see the error message? Is it content of returned mail? Apparently SNDM does not produce such lengthy message.

> I used *LOCALHOST as mail server

Second question. You are using OS/400 as mail (SMTP/POP3) server, right?

> I can not setup Outlook Express (use our domino mail server) so I don't know it is work or not.

Do you know anybody who can setup Outlook Express as mail client of your AS/400 mail server? The configuration task should take less than 10 min.

Waiting for your reply.

uzaemon@Japan

 
00414/00414 AAA00000  Trang            Re^2: SNDM (mail does not go outside)   
( 1)   02/06/12 03:12  00413へのコメント  コメント数：3
> Trang,
> 
> > I use SNDM to send the mail to user inside the network, it is working. But I can not send the mail to the person outside the network. It give me error distribution to user identifier *UNKNOWN *ANYMAIL failed. Can you help?
> 
> Please investigate followings and let me know what you find.
> 
> - Where did you see the error message? SNDM should return more informative message with error code.
> 
> - Are you using OS/400 as mail (SMTP/POP3) server?
> 
> - Can you send mail to outside your network using the same mail server from PC based mailers (such as Outlook Express or Netscape Messenger)?
> 
> Waiting for your reply.
> 
> uzaemon@Japan
Hi uzaemon,
Thank you for quick respond. Here this is error message:
NOT ABLE TO DELIVER MAIL TO SOME/ALL RECIPIENTS.
REPLY CODES WITH FIRST DIGIT = '4' OR '5' ARE ERROR REPLIES.
ERRORS THAT DO NOT HAVE ERROR REPLY CODES MAY EXIST.

HOST HQW400 NOT ABLE TO DELIVER MAIL TO FOLLOWING RECIPIENT(S):
<TRANG@AUTUMNIX.COM>
MAIL REJECTED BY AUTUMNIX WITH THE MESSAGE:
554 Relay rejected for policy reasons.

** TEXT OF MAIL FOLLOWS **
Received: from PCNAIDCS.COM([205.139.80.36]) by HQW400.PCNAIDCS.COM (IBM OS/400 SMTP V04R03M00) with TCP; Tue, 11 Jun 2002 11:16:11 -0400
From: <TCAO@PORSCHECARS.COM>
To: <TRANG@AUTUMNIX.COM>
Reply-To: <TCAO@PORSCHECARS.COM>
Subject: TEST
Date: Tue, 11 Jun 2002 11:16:10 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
X-Mailer: SMTP Client for IBM AS400  version 1-34 2001-12-16

This is a test

I used *LOCALHOST as mail server
When I look into SMTP atrribute, the system is using domino server as mail router. 
I can not setup Outlook Express (use our domino mail server) so I don't know it is work or not.


 
00413/00413 AAA00000  uzaemon          Re: SNDM (mail does not go outside)     
( 1)   02/06/11 22:12  00412へのコメント  コメント数：4
Trang,

> I use SNDM to send the mail to user inside the network, it is working. But I can not send the mail to the person outside the network. It give me error distribution to user identifier *UNKNOWN *ANYMAIL failed. Can you help?

Please investigate followings and let me know what you find.

- Where did you see the error message? SNDM should return more informative message with error code.

- Are you using OS/400 as mail (SMTP/POP3) server?

- Can you send mail to outside your network using the same mail server from PC based mailers (such as Outlook Express or Netscape Messenger)?

Waiting for your reply.

uzaemon@Japan

 
00412/00412 AAA00000  Trang            SNDM                                    
( 1)   02/06/11 02:17

Hi Uzaemon,

I use SNDM to send the mail to user inside the network, it is working. But I can not send the mail to the person outside the network. It give me error distribution to user identifier *UNKNOWN *ANYMAIL failed. Can you help?

 
00410/00410 AAA00000  Bernd            Re^2: SNDM: Garbage in subject          
( 1)   02/06/09 17:41  00409へのコメント

Hello.

> The "Subject" can be interpreted as "SystemX  nicht erreichbar !! (AS/400)"
> 

WOW! 

> I recommend you to look for other mobile systems which better comply Internet mail standard.
> 
> Hope this helps.

Yes. Thank you!

Bernd
 
00409/00409 AAA00000  uzaemon          Re: SNDM: Garbage in subject            
( 1)   02/06/09 16:55  00408へのコメント  コメント数：1
Bernd,

SNDM is working as designed. 

> "Subject: =?US-ASCII?Q?SystemX__nicht_erreichbar_=21=21_=28AS=2F4?=
>  =?US-ASCII?Q?00=29?="

The "Subject" can be interpreted as "SystemX  nicht erreichbar !! (AS/400)"

If you use non-ASCII (or non-safe-ASCII) character set, SNMD encodes the field by "Q" encoding scheme. As I states in "SNDM ISO-8859-1 support" (http://homepage1.nifty.com/uzaemon/iso8859.html), EBCDIC CCSID 273 is converted to ASCII CCSID 819.  If you use 8 bit ASCII character in formatted fields such as "Subject", SNMD always use "Q" encoding. See related RFCs for more detail.

> Any suggestions how this can be fixed. Mind you, this is only happening when sending with SMS. Normal email is perfect.

As you have complete source code, you can modify the program as you like, e.g., you can comment out character code check routine though it leads to violation of Internet mail standard.

I recommend you to look for other mobile systems which better comply Internet mail standard.

Hope this helps.

uzaemon@Japan

 
00408/00408 AAA00000  Bernd            SNDM: Garbage in subject                
( 1)   02/06/09 02:38

Hello,

I'm getting the following on my mobile (mail send with SMS):
"Subject: =?US-ASCII?Q?SystemX__nicht_erreichbar_=21=21_=28AS=2F4?=
 =?US-ASCII?Q?00=29?="
The message body is okay incl. all the German characters (file tagged with CCSID 273). QCCSID=65535, Job CCSID=273.

Any suggestions how this can be fixed. Mind you, this is only happening when sending with SMS. Normal email is perfect.

Thanks
Bernd   


 
00407/00407 AAA00000  uzaemon          Re: CRTCSVFのスペックについて           
( 1)   02/05/25 00:10  00401へのコメント

ShiN-ICHIさん、

> マニュアルを見るとレコード長は1000
> フィールド数は100　複雑な定義はダメとありますが
> 複雑な定義とはどのような定義なのでしょうか？

ソースに書いてありますが、RPGの作業変数としてそれだけの領域が確保されているという意味です。「複雑な定義」とはファイル情報が32,000byteを超える場合を指します。ファイル情報(フィールド名、属性、COLHDGやその他の情報が含まれます)は可変長であり得るため、厳密にどれだけの定義であれば「複雑」(=32,000byteを超える)であるかは予測できません。

DEBUG(*YES)を指定するとデバッグ印刷出力にデータベースの定義が表示されますが、その中の項目「US_Offset」が32,000を越えていなければ問題ありません。1フィールド当り360byte前後の情報をもっていますので、90フィールド弱まで処理できると思います。フィールド数84は微妙なところですが、制限に達した場合は「File information too large. ??th and later fields are ignored.」という警告メッセージが表示されるはずですのでご確認ください。

> 関数 iconv_open() でエラー 
> EBCDIC CCSID は 00290 / ASCII CCSIDは00932となっています
> このエラーはスペックなのでしょうか？

CRTCSVFというよりはiconv(OS/400の提供する汎用文字コード変換ルーチン)のスペックに依存します。つまり、290(EBCDIC SBCSカナ)から932(ASCII DBCS[SJIS])へは変換できない(互換性が無い)とiconvがエラーを返しています。元のデータベースがDBCS(漢字)を含むのであれば290ではなく5026を、含まないのであれば932ではなく897を指定してCRTCSVFを実行してください。

上記をお試しの上、結果をお知らせください。

uzaemon@Japan

 
00406/00406 AAA00000  uzaemon          Re: CRTCSVFってすごいですね。           
( 1)   02/05/24 23:53  00400へのコメント

Masafumiさん、

> そしてＣＲＴＣＳＶＦで試してみたところ、見事クライアントアクセス
> と同様の動きをしました。とても感動して、書き込みした次第です。

ご感想有難うございます。CRTCSVFは「"」の処理やヘッダーの追加以外にも(漢字ブランクを含む)後続ブランク圧縮や明示的な変換コード指定、10進データエラーからのリカバリーなど、CPYTOIMPFに比べて機能が強化されています。さらに、パフォーマンス的にもCPYTOIMPFと同等程度にまでチューニングしてあります。

CRTCSVFはILE-RPGで記述されたオープンソースのプログラムです。必要があれば自分専用の強化版CRTCSVFを作成することも可能ですので、末永くご愛用いただければ幸いです。

uzaemon@Japan

 
00402/00402 AAA00000  uzaemon          Re: TIFF2PDF DOES NOT WORK... (Unable to
( 1)   02/05/24 23:05  00399へのコメント

Dave

>  TIFF2PDF TIFF('QDLS/UCAD1S/UCAD1S/DAFFA.TIF') PDF('QDLS/UCAD1S/UCAD1S/DAVE
>  .PDF')
>    1700 - SNDPGMMSG MSGID(CPF9897) MSGF(QCPFMSG) MSGDTA('Unable to open
>    input TIFF file.') MSGTYPE(*ESCAPE)
>  Unable to open input TIFF file.

The file names should start from '/', i.e. you should specify as '/QDLS/UCAD1S/UCAD1S/DAFFA.TIF'.

Or try root (/) file system because it's faster and flexible. /QDLS is obsolete and should not be used unless you have special reason.

Please let me know the result.

uzaemon@Japan

 
00401/00401 AAA00000  ShiN-ICHI        CRTCSVFのスペックについて               
( 1)   02/05/24 19:10

いつもCRTCSVFを使わせていただきありがとうございます
あるﾌｧｲﾙが変換できず困っています。
レコード長　368
フィールド数　84
のﾌｧｲﾙなのですが。
マニュアルを見るとレコード長は1000
フィールド数は100　複雑な定義はダメとありますが
複雑な定義とはどのような定義なのでしょうか？

ファイル の情報：  レコード長 - 368 フィールド数 - 84 
                  CCSID -290
関数 iconv_open() でエラー 
EBCDIC CCSID は 00290 / ASCII CCSIDは00932となっています
このエラーはスペックなのでしょうか？
宜しくお願いいたします。                        
 
00400/00400 AAA00000  Masafumi Kiuchi( CRTCSVFってすごいですね。               
( 1)   02/05/24 09:25

作者様
先日、ＣＲＴＣＳＶＦをダウンロードさせて頂きました。
あるファイルをＣＳＶ形式でダウンロードするためのテストを
行っていたのですが、ＣＰＹＴＯＩＭＰＦコマンドではどうしても
できないものがありました。それは、１つのフィールドの中に”が
入っているものなのです。ＣＳＶに変換すると、,"a"a",こんな感じ
になります。これだとエクセルがフィールドをご認識してしまいます。
クライアントアクセスでダウンロードすると、,"a""a",となり"を自動
的に付加しているようです。これだと、うまくエクセル上に展開されます。
そしてＣＲＴＣＳＶＦで試してみたところ、見事クライアントアクセス
と同様の動きをしました。とても感動して、書き込みした次第です。
個人的にヘッダー付きのＣＳＶＦを作成するコマンドは作っていたのですが、ベースがＣＰＹＴＯＩＭＰＦだけに限界を感じていました。
ＣＰＹＴＯＩＭＰＦもそうやって動いてくれるとうれしいのですが..

では、では。
 
00399/00399 AAA00000  DAVE             TIFF2PDF DOES NOT WORK...               
( 1)   02/05/23 23:17

for some reason, the tiff2pdf conversion does not work on my machine, i get an error message as listed below:

 TIFF2PDF TIFF('QDLS/UCAD1S/UCAD1S/DAFFA.TIF') PDF('QDLS/UCAD1S/UCAD1S/DAVE
 .PDF')                                                                    
   1700 - SNDPGMMSG MSGID(CPF9897) MSGF(QCPFMSG) MSGDTA('Unable to open    
   input TIFF file.') MSGTYPE(*ESCAPE)                                     
 Unable to open input TIFF file.  

I am running V4R4.  Any help in solving this problem would be much appreciated.                                         
 
00398/00398 AAA00000  mike winkle      Re^2: Analog ("OUTPUT COMPUTER")        
( 1)   02/05/17 04:09  00396へのコメント

thanks the COMPUTER output worked great.  i will post a message once i get the Report Magic part working under 
perl on the AS/400.  the reports are much nicer.  -mike


> mike,
> 
> > have you used Report Magic with Analog?  
> 
> No, I don't know anything about "Report Magic".
> 
> > how do i get the AS/400 version to use the OUTPUT COMPUTER, so Report Magic can read it?  
> 
> See message "321. Re: Analog Output" in this BBS. Below is sample operation.
> 
> > ADDLIBLE LIB(ANALOG)
>   Library ANALOG added to library list.
> > QSH CMD('touch -C 819 /tmp/computer.dat')
>   Command ended normally with exit status 0.
> > CALL PGM(ANALOG) PARM('+COUTPUT COMPUTER' '+COUTFILE /tmp/computer.dat')
> > EDTF STMF('/tmp/computer.dat')    
> 
> CMD ....+....1....+....2....+....3....+....4....+
> ___  ************Beginning of data**************
> ___ x VE analog 4.11(modified)
> ___ x HN AS/400 system
> ___ x PS 2002 05 16 21 29
> ___ x FR 2000 06 14 11 26
> ___ x LR 2002 05 16 19 10
> ___ x E7 2002 05 16 21 29
> ___ x SR 130297
> ___ x S7 3232
> ___ x PR 2048
> ___ x P7 60
> ___ x FL 8976
> ~~~~~~SNIP~~~~~~
> 
> Please let me know if it works well.
> 
> uzaemon@Japan

 
00397/00397 AAA00000  uzaemon          Re: Printing AS/400 spool file (IPDS) to
( 1)   02/05/16 21:51  00395へのコメント

Mohammed,

> can we Print spool file from AS/400 in IPDS to PCL/PS via TCP/IP. (snip)

I don't understand what you are asking... Do you want to convert *IPDS spooled file to PCL or Postscript by using SPL2STMF command?

If so, please read message "168. Re: Re. *IPDS on AS/400" in this BBS. I tried the same on my V5R1 with latest cum and got same result.

> OVRPRTF FILE(QPDSPSTS) DEVTYPE(*IPDS)
> WRKSYSSTS OUTPUT(*PRINT)
> ADDLIBLE LIB(HPT) POSITION(*LAST)
  Library HPT added to library list.
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/qpdspsts.tif') WSCST(QWPHPLSR5)
  Command failed. reason - API QwpzHostPrintTransform failed : CPF6DF8
    hptopt = 30

As far as I know, SPL2STMF (HPT) does not support conversion to Postscript. I recommend you to contact your support channel to search for other API or software product which meets your requirement.

uzaemon@Japan

 
00396/00396 AAA00000  uzaemon          Re: Analog ("OUTPUT COMPUTER")          
( 1)   02/05/16 21:37  00393へのコメント  コメント数：1
mike,

> have you used Report Magic with Analog?  

No, I don't know anything about "Report Magic".

> how do i get the AS/400 version to use the OUTPUT COMPUTER, so Report Magic can read it?  

See message "321. Re: Analog Output" in this BBS. Below is sample operation.

> ADDLIBLE LIB(ANALOG)
  Library ANALOG added to library list.
> QSH CMD('touch -C 819 /tmp/computer.dat')
  Command ended normally with exit status 0.
> CALL PGM(ANALOG) PARM('+COUTPUT COMPUTER' '+COUTFILE /tmp/computer.dat')
> EDTF STMF('/tmp/computer.dat')    

CMD ....+....1....+....2....+....3....+....4....+
___  ************Beginning of data**************
___ x VE analog 4.11(modified)
___ x HN AS/400 system
___ x PS 2002 05 16 21 29
___ x FR 2000 06 14 11 26
___ x LR 2002 05 16 19 10
___ x E7 2002 05 16 21 29
___ x SR 130297
___ x S7 3232
___ x PR 2048
___ x P7 60
___ x FL 8976
~~~~~~SNIP~~~~~~

Please let me know if it works well.

uzaemon@Japan

 
00395/00395 AAA00000  mohammed         Printing AS/400 spool file (IPDS) to PCL
( 1)   02/05/16 03:53

hello dear.

can we Print spool file from AS/400 in IPDS to PCL/PS via TCP/IP. I tried Application one point( it is working fine but we dont want this solution or any other application. do u know any method that will help us to print the above.

Highly appriciate yr efforts.

Thank You.

Mohammed
 
00394/00394 AAA00000  mike winkle      Analog p.s.                             
( 1)   02/05/15 23:04

p.s.  your instruction for getting Analog up and running on the AS/400 were great!  thanks.
 
00393/00393 AAA00000  mike winkle      Analog                                  
( 1)   02/05/15 23:01

hi uzaemon,

have you used Report Magic with Analog?  how do i get the AS/400 version to use the OUTPUT COMPUTER, so Report Magic can read it?  Will Report Magic even run on the AS/400?  thanks, mike
 
00392/00392 AAA00000  uzaemon          Re: call sndm from rpg-programm         
( 1)   02/05/04 12:40  00391へのコメント

Felix,

> May you give me an example how the toDS structure must look like when i call sndm from an rpg programm with parameters ?

As it is normal OS/400 function, you can use interactive debugger to look into contents of the DS. 

If you are not familiar to OS/400 and RPG, contact your support channel or study "9.4.3.1 Using CL or HLL for Lists within Lists" (http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AUO01/9.4.3.1?SHELF=QB3AYC02&DT=19971016213214) of "OS/400 CL Programming" manual for how to process paramters in HLL PGMs.

Anyway, I don't know why you need to call SNDM from RPG program.

uzaemon@Japan

 
00391/00391 AAA00000  Felix            call sndm from rpg-programm             
( 1)   02/05/02 23:26

May you give me an example how the toDS structure must look like when i call sndm from an rpg programm with parameters ?
 
00390/00390 AAA00000  uzaemon          Re: Procedure for recompiling MINIZIP   
( 1)   02/04/30 21:21  00389へのコメント

Tony,

> ... could you please advise me of the exact procedure you used to create the *PGM?

To recompile the distribution, use (or study) "MAKE" REXX procedure as described at installation document (http://homepage1.nifty.com/uzaemon/zlib_install.html).

> When I try CRTBNDC the compiler can't find direct.h or io.h and complains that various functions are not prototyped.

Make sure that you have installed library QSYSINC (header files) on your AS/400. The complie messages, "not prototyped" are warning and you can just ignore them.

uzaemon@Japan

 
00389/00389 AAA00000  Tony McNeil      Procedure for recompiling MINIZIP       
( 1)   02/04/30 19:59

You kindly supplied an executable *PGM for MINIZIP in your ZLIB download, which works. I need to be able to recompile it before making changes to the source, could you please advise me of the exact procedure you used to create the *PGM? When I try CRTBNDC the compiler can't find direct.h or io.h and complains that various functions are not prototyped. I'm running V4R5. Thanks in advance,

Tony
 
00388/00388 AAA00000  uzaemon          Re^3: About  "SPL2STMF" Utility         
( 1)   02/04/28 02:01  00387へのコメント

wencent,

> ... I can't find these "chinese word" in TIFF file.

Your problem looks smiliar to "339. Re^4: problems using SPL2STMF and TIFF2PDF".  Please confirm that you have "Chinese" AFP font and specify it correctly before create spool file.

Wainting for your reply.

uzaemon@Japan.

 
00387/00387 AAA00000  wencent          Re^2: About  "SPL2STMF" Utility         
( 1)   02/04/28 00:48  00386へのコメント  コメント数：1
Thanks for your help !
Sorry, I didn't express the problem clear. I can use this utility but if the spooled file have "chinese word", I can't find these "chinese word" in TIFF file. The TIFF file only have numbers, letters character and some Japanese word. 

* What is the version of your OS/400?
  V4R3M0 latest PTFs
* What version of SPL2STMF are you using?
  VERSION 0-03 00-03-18
* Did you modify the source code?
  NO
* Did you MAKE the utility by yourself?
  No
* If you have another AS/400, can you try to create your 
  problem?
  No
* Does the problem occur to all (SCS and AFPDS) spooled 
  files or only specific spooled file?
  Only specific spooled file (with "tradition chinese"   
  word)
* What kind of WSCST are you using? IBM supplied QWPTIFFG4 
  or anything else?
  QWPTIFFG4
* What happens if you convert simple spooled file, say, 
  created by "WRKSYSSTS *PRINT" command?
  WORKS
* What do you see in the last part of debug print output 
  of SPL2STMF command (specify DEBUG(*YES))?
  I had not tested !



 
00386/00386 AAA00000  uzaemon          Re: About  "SPL2STMF" Utility           
( 1)   02/04/27 23:09  00385へのコメント  コメント数：2
wencent,

> I can't use "SPL2STMF" utility to convert AS400  spooled file (Tranditional Chinese) to PC stream file (.Tiff). Can you tell me why ?

I need more information to determine your problem. Please see "324. Re^2: SPL2STMF error" and let me know answers to the questions in your case.

uzaemon@Japan

 
00385/00385 AAA00000  wencent          About  "SPL2STMF" Utility               
( 1)   02/04/27 17:15

I can't use "SPL2STMF" utility to convert AS400  spooled file (Tranditional Chinese) to PC stream file (.Tiff). Can you tell me why ? If you have any suggestions or answers,  I would really appreciate hearing about them.
 
00382/00382 AAA00000  uzaemon          Re^2: APWの不具合                       
( 1)   02/04/24 20:21

KEIさん、

> どうぞ宜しくお願い致します。

このページの冒頭にある断り書きのように、当BBSは http://homepage1.nifty.com/uzaemon/ で公開されているソフトウェア関連の話題に限定されています。

ご質問の内容がこれに該当するか再考ください。

uzaemon@Japan

 
00379/00379 AAA00000  uzaemon          Re^3: How can i be sure that the email w
( 1)   02/04/23 22:20  00378へのコメント

Heni,

> yes, the first thing. I use SNDM in a CL, an i want be sure that the email has been sent with no error.

OK, below is a code snippet I'm using.

-------------------------------------
/* Send mail */                                       
SNDM       FROM('webmaster@somewhere' 'from AS400') + 
             TO((&TOADDR)) FILE(&OBJLIB/&FILE) + 
             MBR(&MAILBODY) SUBJECT(&SUBJECT) +      
             ATTACHMENT(&PATH) SMTPHOST(&SMTPHOST)    
MONMSG     MSGID(CPF9800) EXEC(GOTO CMDLBL(ERROR))   
CHGVAR     VAR(&PSTR) VALUE(&HEADER |< '<BR><H2>Mail +
             sent.</H2>' |< &NULL)                    
CALLPRC    PRC('puts') PARM(&PSTR)                    
DEL        OBJLNK(&PATH)                              
GOTO       CMDLBL(EXIT)                               

ERROR:
RCVMSG     MSGTYPE(*EXCP) MSG(&SNDM_MSG)               
CHGVAR     VAR(&PSTR) VALUE(&HEADER |< '<H1>Failed to +
             send mail.</H1>message : ' || &SNDM_MSG + 
             || &TRAILER)                              
CALLPRC    PRC('puts') PARM(&PSTR)                     
GOTO       CMDLBL(EXIT)                                

EXIT:
-------------------------------------

Hope this helps.

uzaemon@Japan

 
00378/00378 AAA00000  Felix Heni       Re^2: How can i be sure that the email w
( 1)   02/04/23 17:34  00377へのコメント  コメント数：1
> Do you want to check if SNDM command completed without error? Or do you want to know if the mail have arrived and received by the recipient? Or anything else?

yes, the first thing. I use SNDM in a CL, an i want be sure that the email has been sent with no error.
 
00377/00377 AAA00000  uzaemon          Re: How can i be sure that the email was
( 1)   02/04/23 00:49  00376へのコメント  コメント数：2
Heni,

> Is the a CL-example who says me the my email was really sent ? Thanks for your help !

I don't understand what you really want to know...

Do you want to check if SNDM command completed without error? Or do you want to know if the mail have arrived and received by the recipient? Or anything else?

uzaemon@Japan

 
00376/00376 AAA00000  F. Heni          How can i be sure that the email was sen
( 1)   02/04/22 02:17

Is the a CL-example who says me the my email was really sent ? Thanks for your help !
 
00375/00375 AAA00000  Scott Andrews    Re^2: minizip and path                  
( 1)   02/04/17 01:12  00349へのコメント

> Scott,
> 
> If you want to create a ZIP file without path information, change current directory and run minizip as follows:
> 
> > addlible zlib
>   Library ZLIB added to library list.
> > CD DIR('/tmp')
>   Current directory changed.
> > CALL PGM(MINIZIP) PARM(JRN.ZIP JRN.TXT)
>    creating JRN.ZIP
> 
> The ZIPed file does not have path (directory) information. If you are using WINZIP, open the ZIP file, right-click the compressed file ("Jrn.txt" in this case) and select "File Properties" to confirm that "Path:" field is blank.
> 
> You can unzip to other directory on OS/400 as follows:
> 
> > CD DIR('/QOpenSys/tmp')
>   Current directory changed.
> > CALL PGM(MINIUNZ) PARM('/tmp/jrn.zip')
>    MiniUnz 0.15, demo of zLib + Unz package written by Gilles Vollant
>    more info at http://wwww.winimage/zLibDll/unzip.htm
> 
>    /tmp/jrn.zip opened
>     extracting: JRN.TXT
> 
> In above example, JRN.TXT will be stored in directory "/QOpenSys/tmp".
> 
> Is this what you want to do?
> 
> uzaemon@Japan


Your idea worked great....

Thanks for taking the time to respond, I really appreciate it.

Scott
 
00374/00374 AAA00000  Winnie Welton    Re^2: ZLIB utility (not compressed?)    
( 1)   02/04/13 01:00  00372へのコメント

> Please explain how you ran the ZIP utility more precisely. And how did you know it was not compressed?
 I just realized that I did NOT recompile the C modules, and we DON'T have a C compiler on our system either.  I guess I won't be able to use the utility afterall. 
 
00373/00373 AAA00000  Winnie Welton    Re^2: ZLIB utility (not compressed?)    
( 1)   02/04/13 00:27  00372へのコメント

> Winnie,
> 
> > It looked as if the file wasn't not compressed at all.  Do you have any idea why that happened?  
> 
> Please explain how you ran the ZIP utility more precisely. And how did you know it was not compressed?

I created a command for minizip with the replace option, zip to file name & zip from file name as parms, and then I just call the command on the command line & filled in the prompts.  There was no errors.  The new file has the zip extention at the end, but when I looked at the file sizes of the original and zipped file thru Windows Explorer, they were the same, and the ratio was zero for the zipped file when I tried to open it, and I could read the data when I opened it.  That was what made me believe the file wasn't compressed at all.   

Winnie
 
00372/00372 AAA00000  uzaemon          Re: ZLIB utility (not compressed?)      
( 1)   02/04/12 22:03  00371へのコメント  コメント数：2
Winnie,

> It looked as if the file wasn't not compressed at all.  Do you have any idea why that happened?  

Please explain how you ran the ZIP utility more precisely. And how did you know it was not compressed?

Waiting for your reply.

uzaemon@Japan

 
00371/00371 AAA00000  Winnie Welton    ZLIB utility                            
( 1)   02/04/12 07:36

I installed the ZLIB Utility and tried to use the minizip utility to zip a file.  It appeared it had worked, but when I checked the size of the zipped file, it was the same as the original. It looked as if the file wasn't not compressed at all.  Do you have any idea why that happened?  
 
00370/00370 AAA00000  Tim Swearingen   Re^2: AOL and Novell Clients            
( 1)   02/04/06 10:43  00369へのコメント

> Tim,
> 
> Thank you very much for your posts. I'll make following changes to next release of SNDM.
> 
> - Allow espacial characters in description paramteres
> - Remove spaces in boundary definition

Uzaemon,

You are welcome!  Thanks for what you have done.  It is a pleasure to be able to contribute.  The tools you have made available have helped me in what I do and have saved the company where I work a lot of money.

As for the weekend.... well I'll be taking care of 3 boys while my wife and her friend have a yard sale  ugh  grin :)

Tim
> - Replace single quotation to double quotation in boundary definition
> 
> Have a nice weekend!
> 
> uzaemon@Japan

 
00369/00369 AAA00000  uzaemon          Re: AOL and Novell Clients              
( 1)   02/04/05 23:36  00368へのコメント  コメント数：1
Tim,

Thank you very much for your posts. I'll make following changes to next release of SNDM.

- Allow espacial characters in description paramteres
- Remove spaces in boundary definition
- Replace single quotation to double quotation in boundary definition

Have a nice weekend!

uzaemon@Japan

 
00368/00368 AAA00000  Tim Swearingen   AOL and Novell Clients                  
( 1)   02/04/05 22:57

Uzaemon,

I have found and fixed the problem w/ AOL clients not being able to download attachments.  I have also tested this w/ Novell clients as well.

The problem is in the #GEN section where the "boundary" is built.  The string should have no spaces  ie..

Current version outputs like this  boundary = '--Next_Part'

It should be   boundary='--Next_Part'

I have changed my version and it works quite well.

Regards,
Tim Swearingen
 
00367/00367 AAA00000  Tim Swearingen   Re^2: SNDM - periods not accepted in Des
( 1)   02/04/05 22:53  00365へのコメント

> Tim,
> 
> > Can this issue be fixed.
> 
> You can fix any issue regarding SNDM by yourself because you have source code (assuming that you have enough time and knowledge).
> 
> Try comment out line 258 - 261 and 346 -349 in SMTP/QRPGLESRC(#PROC) and see how it works.
> 
> Waiting for your reply.
> 
> uzaemon@Japan
Uzaemon

I have worked out a solution and have changed the structured value to 0 for a description and then reset it back to 1

Thanks for your help
 
00366/00366 AAA00000  Tim Swearingen   Re^2: SNDM - periods not accepted in Des
( 1)   02/04/04 07:26  00365へのコメント

Thank you!
I'll try your suggestions.  By the way I'm also going to be working on the AOL and Novell Groupwise Mail Client issues that have been identified earlier.  If I get them figured out, I'll let you know.

Tim

> Tim,
> 
> > Can this issue be fixed.
> 
> You can fix any issue regarding SNDM by yourself because you have source code (assuming that you have enough time and knowledge).
> 
> Try comment out line 258 - 261 and 346 -349 in SMTP/QRPGLESRC(#PROC) and see how it works.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

 
00365/00365 AAA00000  uzaemon          Re: SNDM - periods not accepted in Descr
( 1)   02/04/02 21:36  00363へのコメント  コメント数：2
Tim,

> Can this issue be fixed.

You can fix any issue regarding SNDM by yourself because you have source code (assuming that you have enough time and knowledge).

Try comment out line 258 - 261 and 346 -349 in SMTP/QRPGLESRC(#PROC) and see how it works.

Waiting for your reply.

uzaemon@Japan

 
00364/00364 AAA00000  吉田　東洋       Re^4: SPL2STMFでＡ４横のＴＩＦＦを作る 
( 1)   02/04/02 09:30  00361へのコメント

吉田　東洋です。
> 結果として縦・横を意識する必要はない(というよりユーザー側で制御できない)と思われます。TIFF変換の際のHPTの仕様はほとんど公開されていませんでしたので、必要であれば制御が可能かどうか担当SEさんにお問い合わせすることをお勧めします。
> 
> 上記の内容でお答えになっているでしょうか?
ありがとうございます、いろいろと試してみたいと思います。ＳＥさんにも聞いてみようと思います、ありがとうございました。
 
00363/00363 AAA00000  Tim Swearingen   SNDM - periods not accepted in Descripti
( 1)   02/04/02 05:10

Periods are not allowed in Description portions of the sender or recipient parms on the SNDM command.  We will often use a period in a persons name for example  Tim P. Swearingen.  Can this issue be fixed.  SNDM returns a 135 error invalid character found in mail address.
 
00362/00362 AAA00000  uzaemon          Re: 補足:紙(出力)サイズとイメージサイズ 
( 1)   02/03/29 21:40  00358へのコメント

吉田さん、

元々のご質問の趣旨とは関連しないかも知れませんが、一般的に「A4横のTIFF」なるものを作成することは無いと思います。

「186. Re: spl2stmf (Paper size)」でも述べていますが、A4という特定のサイズ(ISO/JIS A4なら210x297mm。出力装置がプリンターであればマージンも考慮)にフィットする特定のサイズのイメージという概念は通常意味を持ちません。

イメージファイルは任意のDPI/ペルで作成することができるので、1200DPI、240DPI、72DPI、いずれのイメージでも出力デバイスの解像度によってたまたまA4サイズで出力/表示されることはありえます。しかし通常はデバイスに出力するアプリケーションが補完/間引きを行なう事によってA4サイズに合わせるでしょう。

一切アプリケーションがイメージのサイズ補正を行わない場合、イメージは特定のサイズにはなりません。同じXGA(1024x768)の画面でも14インチモニターと19インチモニターで表示すれば画像の大きさが変わることから容易に想像できると思います。

以上、ご参考まで。

uzaemon@Japan

 
00361/00361 AAA00000  uzaemon          Re^3: SPL2STMFでＡ４横のＴＩＦＦを作る 
( 1)   02/03/29 20:33  00360へのコメント  コメント数：1
吉田さん、

> これは以前に見てました。TIFF2PDFではなく、SPL2STMFでの話しのつもりだったのですが・・・PSL2STMFでのTIFFファイルへの変換は特に縦、横を意識しなくていいということなのでしょうか？

失礼、勘違いしておりました。

こちらで使っている限りでは、SPL2STMF(≒HPT)のTIFF変換は空白部分を生成しません。例えば60行の帳票で10行までしか使っていない(11行目以降に文字等のデータが存在しない)場合、イメージそのものが10行目までのサイズとなります。

結果として縦・横を意識する必要はない(というよりユーザー側で制御できない)と思われます。TIFF変換の際のHPTの仕様はほとんど公開されていませんでしたので、必要であれば制御が可能かどうか担当SEさんにお問い合わせすることをお勧めします。

上記の内容でお答えになっているでしょうか?

uzaemon@Japan

 
00360/00360 AAA00000  吉田　東洋       Re^2: SPL2STMFでＡ４横のＴＩＦＦを作る 
( 1)   02/03/29 09:22  00359へのコメント  コメント数：2
吉田　東洋です、早速のご回答ありがとうございます。
> かなり前の書き込みですが、同様の質問に対する返答がこのBBSの「90. Re: TIFF2PDFでの変換後Paper Size」にありますのでご参照ください。

これは以前に見てました。TIFF2PDFではなく、SPL2STMFでの話しのつもりだったのですが・・・PSL2STMFでのTIFFファイルへの変換は特に縦、横を意識しなくていいということなのでしょうか？
 
00359/00359 AAA00000  uzaemon          Re: SPL2STMFでＡ４横のＴＩＦＦを作る方法
( 1)   02/03/28 21:32  00358へのコメント  コメント数：3
吉田さん、

> サンプルを参考にしてSPL2STMFを使ってＴＩＦＦファイルを作っていますが、いずれもＡ４縦になります。Ａ４横にすることはできなのでしょうか？

かなり前の書き込みですが、同様の質問に対する返答がこのBBSの「90. Re: TIFF2PDFでの変換後Paper Size」にありますのでご参照ください。

uzaemon@Japan

 
00358/00358 AAA00000  吉田　東洋       SPL2STMFでＡ４横のＴＩＦＦを作る方法    
( 1)   02/03/28 18:58

サンプルを参考にしてSPL2STMFを使ってＴＩＦＦファイルを作っていますが、いずれもＡ４縦になります。Ａ４横にすることはできなのでしょうか？よろしくお願いします。
 
00357/00357 AAA00000  uzaemon          Re: SNDM- Error (conversion error, No.4)
( 1)   02/03/23 11:55  00356へのコメント

Nonna,

> I am using your utility SNDM on V4R4- this is an Error msg: 
> Message . . . . :   Command failed. reason -111 failed to initialize code  
>    conversion API ( CCSID 0000J->00819, 3021:The value specified for the    
>    argument is not correct.)           

See message "328. Re: SNDM (conversion error, No.3)" in this BBS. 

It seems like many people are using file that tagged to CCSID 65535... I may need to enhance SNDM to use default (system) EBCDIC CCSID for this situation as CRTCSVF command already has adopted this approach.

uzaemon@Japan

 
00356/00356 AAA00000  Nonna            SNDM- Error                             
( 1)   02/03/23 04:26

I am using your utility SNDM on V4R4- this is an Error msg: 
Message . . . . :   Command failed. reason -111 failed to initialize code  
   conversion API ( CCSID 0000J->00819, 3021:The value specified for the    
   argument is not correct.)           
 
00355/00355 AAA00000  uzaemon          Re: SNDM : Max text length              
( 1)   02/03/21 23:55  00353へのコメント

Gerlo, 

> Is it possible to send messages with a longer paragraph length than this ? (or a way to supress the CR-LF between two lines).

See message "247. Re^3: SNDM (why only 80 characters in one line?)" in this BBS.

uzaemon@Japan


 
00353/00353 AAA00000  Gerlo Hesselink  SNDM : Max text length                  
( 1)   02/03/21 23:46

SNDM is now only able to handle a PF with a recordlength of max 80 and a SRC-PF with a ecordlengths of max 92.
Is it possible to send messages with a longer paragraph length than this ? (or a way to supress the CR-LF between two lines).
Or has someone tried to change the programma so it accepts and handles longer recordlengths ?
Thanks,
Gerlo Hesselink
 
00351/00351 AAA00000  uzaemon          Re: Price for a comercial licenece      
( 1)   02/03/19 22:45  00350へのコメント

Ulrike,

Thank you very much for your interest on SNDM.

> Could you please send us information about the use of your SNDM by our customers.
> How would you calculate the charges for their use?

Basically, SNDM is free software, which means you can modify, distribute, bundle it under the terms of GPL. See message "72. Re: License price." in this BBS for more information.

uzaemon@Japan

 
00350/00350 AAA00000  ulrike roegle    Price for a comercial licenece          
( 1)   02/03/19 21:27

Dear UZEAEMON,

We are a software company in Germany with customers in the furniture and metal trade branches.
We have tested your SNDM internally here in our company and we have seen that your SNDM can be easily incorporated into our software packages.
We are considering encouraging our customers to also implement your SNDM.
Could you please send us information about the use of your SNDM by our customers.
How would you calculate the charges for their use?


With kindly regards,

Ulrike Roegle
 
00349/00349 AAA00000  uzaemon          Re: minizip and path                    
( 1)   02/03/16 01:23  00348へのコメント  コメント数：1
Scott,

If you want to create a ZIP file without path information, change current directory and run minizip as follows:

> addlible zlib
  Library ZLIB added to library list.
> CD DIR('/tmp')
  Current directory changed.
> CALL PGM(MINIZIP) PARM(JRN.ZIP JRN.TXT)
   creating JRN.ZIP

The ZIPed file does not have path (directory) information. If you are using WINZIP, open the ZIP file, right-click the compressed file ("Jrn.txt" in this case) and select "File Properties" to confirm that "Path:" field is blank.

You can unzip to other directory on OS/400 as follows:

> CD DIR('/QOpenSys/tmp')
  Current directory changed.
> CALL PGM(MINIUNZ) PARM('/tmp/jrn.zip')
   MiniUnz 0.15, demo of zLib + Unz package written by Gilles Vollant
   more info at http://wwww.winimage/zLibDll/unzip.htm

   /tmp/jrn.zip opened
    extracting: JRN.TXT

In above example, JRN.TXT will be stored in directory "/QOpenSys/tmp".

Is this what you want to do?

uzaemon@Japan

 
00348/00348 AAA00000  Scott Andrews    minizip and path                        
( 1)   02/03/15 04:49

I'm using the minizip utility and it's working great.  I do have one problem with it.  I need to create zip files that do not contain the orginal path in the zipped files properties.  I.E. \mega\storage\text.doc.  What happens when I restore the file it's building the directories from the orginal file location.  I tried using parm -P- (pkzip parm to not add path info) and it will not work.  Any thoughts?  Thanks,  Scott  ps. I tried numerous other parms without success.
 
00347/00347 AAA00000  David Mount      Re^4: SNDM attachment not readable      
( 1)   02/03/15 01:04  00346へのコメント

Thank you. This is working perfectly.

David

 
00346/00346 AAA00000  uzaemon          Re^3: SNDM attachment not readable      
( 1)   02/03/09 12:10  00345へのコメント  コメント数：1
David,

> I am using outlook express as a client. Documents created on my PC and uploaded to IFS vis FTP work OK. 
(SNIP)
> ... upload that document to the IFS, that new document works.

So your problem was solved, right?

> I must be doing something wrong with the CPYTOSTMF. For it I use:
> CPYTOSTMF FROMMBR('qsys.lib/mylib.lib/myfile.file/txt.mbr')
>  TOSTMF('/eml/abc.txt')
>  STMFOPT(*REPLACE) CVTDTA(*NONE)
> 
> I have also tried CVTDTA(*AUTO)

If you want to create ASCII data usng CPYTOSTMF, you should perform either of followings.

- create a stream file with ASCII CCSID before exec CPYTOSTMF with CVTDATA(*AUTO) option.

| > QSH CMD('touch -C 819 /tmp/testfile.txt')
| > CPYTOSTMF FROMMBR('/qsys.lib/yourlib.lib/yoursrc.file/test.mbr') TOSTMF(
|   '/tmp/testfile.txt') STMFOPT(*REPLACE)

- explicitly specify DBFCCSID and STMFCODPAG

| > CPYTOSTMF FROMMBR('/qsys.lib/yourlib.lib/yoursrc.file/test.mbr') TOSTMF(
|   '/tmp/testfile2.txt') STMFOPT(*REPLACE) DBFCCSID(37) STMFCODPAG(819)     

Use WRKLNK->option8 or EDTF(or DSPF)->F15 to confirm the CCSID of the stream file is tagged to ASCII CCSID (819 in this example).
 
> I don't know if it is important to note but I am using:
> 
> Datebase file CCSID  . . . . . . > *DFTJOBCCSID

The parameter has nothing to do with attachment files. SNDM always reads stream files in binary mode (no code conversion). ...ahh...I found misspelling..."Datebase"...

uzaemon@Japan

 
00345/00345 AAA00000  David Mount      Re^2: SNDM attachment not readable      
( 1)   02/03/09 00:03  00344へのコメント  コメント数：2
I'm sure this has to do with my inexperience with IFS.

I am using outlook express as a client. Documents created on my PC and uploaded to IFS vis FTP work OK. 

I create the attachment by copying the file to IFS with CPYTOSTMF command. I can view the file with an FTP Client and it looks fine. In fact, if I cut and paste it from the VIEW feature of the FTP client and paste it into a a new document on my PC and upload that document to the IFS, that new document works.

I must be doing something wrong with the CPYTOSTMF. For it I use:
CPYTOSTMF FROMMBR('qsys.lib/mylib.lib/myfile.file/txt.mbr')
 TOSTMF('/eml/abc.txt')
 STMFOPT(*REPLACE) CVTDTA(*NONE)

I have also tried CVTDTA(*AUTO)

I don't know if it is important to note but I am using:

Datebase file CCSID  . . . . . . > *DFTJOBCCSID

as an option with SNDM.

Thanks for your help.


 
00344/00344 AAA00000  uzaemon          Re: SNDM attachment not readable        
( 1)   02/03/08 22:59  00342へのコメント  コメント数：3
David,

> I'm using 1-33 of SNDM and V4R2. The data in the attachment text file from the IFS is being converted to garbage. This will be great when I can figure this out. The attachment is a simple text file named SZ.TXT in the EML directory. I specify /eml/sz.txt as the attachment.

I have a few questions :

- How did you create "sz.txt"? Can you open the file (via Netserver or FTP) by Notepad or any text editor on Windows?

- What kind of mail client are you using? Does the problem happen on any mail client (e.g. Outlook Express, Netscape Messenger)? (See message "307. Re^3: Attachment Files (SNDM)")

- If you send other file (e.g. Excel worksheet or PC binary file) as attachment, do they also become unusable?

Waiting for your reply.

uzaemon@Japan

 
00343/00343 AAA00000  uzaemon          Re: PCL TO PDF                          
( 1)   02/03/08 22:49  00341へのコメント

Laurent,

> Did you use or know a tool to convert PCL file into PDF files ?

Utilities at this site does not do the job. 

Consult your support channel or post your question to  newsgroup (e.g. comp.sys.ibm.as400.misc). Or you can easily find such product by yourself using the Web search engine such as "Google".

List below is what I found instantly, though I don't know if they meet your requirement.

- Netpbm (Free) http://netpbm.sourceforge.net/README
- EscapeE (PCL to TIFF, PDF, PNG, etc.) http://www.pclviewer.com/
- JetPCL (PCL to TIFF[FAX image]) http://www.techknowsystems.com/jetpcl/jetpcl.htm
- PCLTool SDK (PCL to PDF/TIFF) http://www.pcltools.com/pcl2pdf.htm

If it is one-time task, PCL Viewer with print function + Adobe Acrobat do what you want.

uzaemon@Japan

 
00342/00342 AAA00000  David Mount      SNDM attachment not readable            
( 1)   02/03/08 07:01

I'm using 1-33 of SNDM and V4R2. The data in the attachment text file from the IFS is being converted to garbage. This will be great when I can figure this out. The attachment is a simple text file named SZ.TXT in the EML directory. I specify /eml/sz.txt as the attachment.

Thanks,
David
  
 
00341/00341 AAA00000  Laurent          PCL TO PDF                              
( 1)   02/03/08 00:39

Hello,
Did you use or know a tool to convert PCL file into PDF files ?
Thank's
 
00340/00340 AAA00000  uzaemon          Re^5: problems using SPL2STMF and TIFF2P
( 1)   02/03/05 19:20  00339へのコメント

eugene,

> I understand anything
> it was a very funny reason....
> a very stupid man has removed the QFNTCPL library from system...

Thank you very much for your feedback. Other AS/400 shops that have uninstalled the library may encoutner the same problem.

uzaemon@Japan

 
00590/00590 AAA00000  uzaemon          Re^2: MIME Encoding Problem with SNDM   
( 1)   03/04/02 20:44  00589へのコメント

Tony,

SNDM works without problem on my machine (V5R2) and 
I believe that other people use SNDM without such problem.

Here is what I did to recreate your problem though it worked as designed.

> addlible smtp
  Library SMTP added to library list.
> SNDM FROM(FOO@BAR) TO((USER1@XXXXX.XXXXXXXX.XXX.COM)) FILE(QTXTSRC) SUBJE
  CT(TEST) ATTACHMENT('/tmp/wrkactjob.pdf') DEBUG(*YES)
  Mail sent.

As I specified DEBUG(*YES), SNDM records what it sent in 
temporary directory. The file name will be something like 
"SNDM_79048-XXXXX-QPADEV0005_2003-04-02-20.21.37.128.TXT".

I examined the file and it certainly complies MIME format 
as far as I know:

Mail starts here - - - - - - - - - - - - - - - - - - - - - -

From: <FOO@BAR>
To: <USER1@XXXXX.XXXXXXXX.XXX.COM>
Subject: TEST
Date: Wed, 2 Apr 2003 21:21:37 +0900
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="--=_Next_Part_02_Apr_2003_20.21.37"
X-Mailer: SMTP Client for IBM AS400  version 1-35 2002-05-06

This is a multi-part message in MIME format.

----=_Next_Part_02_Apr_2003_20.21.37
Content-Type: text/plain; charset="US-ASCII"

:WSCST DEVCLASS=TRANSFORM.

~~~~~~~~~~~~~~~~~~~~~~~~(SNIP)~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:EWSCST.

----=_Next_Part_02_Apr_2003_21.21.37
Content-Type: application/octet-stream; name="wrkactjob.pdf"
Content-Transfer-Encoding: base64

JVBERi0xLjEKJeLjz9MKMSAwIG9iago8PAovVHlwZSAvWE9iamVjdCAvU3VidHlwZSAvSW1hZ2Ug
L05hbWUgL0ltMQovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0NDSVRURmF4RGVjb2RlIF0gL1dp
~~~~~~~~~~~~~~~~~~~~~~~~(SNIP)~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
IAp0cmFpbGVyCjw8Ci9TaXplIDI1Ci9Sb290IDIyIDAgUgovSW5mbyAyNCAwIFIKPj4Kc3RhcnR4
cmVmCjM4MTYxOQolJUVPRgo=

----=_Next_Part_02_Apr_2003_20.21.37--

Mail ends here - - - - - - - - - - - - - - - - - - - - - - -


Please consider to do below to solve your problem.

- Try to send a mail without IronMail gateway for the purpose 
of problem determination.

- Ask CipherTrust that exactly what's wrong with the above
 (or your) mail. I don't know what they mean by "no footer".

Waiting for your reply.

uzaemon@Japan

 
00589/00589 AAA00000  Tony             Re: MIME Encoding Problem with SNDM     
( 1)   03/04/02 07:41  00588へのコメント  コメント数：1
> I am having a problem with the SNDM utility sending out an email with a PDF attachment, I am emailing it to a domain that is running IronMail and it is spitting it out with an error that the email was not created with proper MIME boundries. I am wondering what the problem is, I downloaded the latest version of the code and tried it and it is having the same problem. Does the MIME encoding in the SNDM conform to the standards?
> 
> Thanks,
> 
> Tony
Also, forgot to mention that IronMail told me that it looks like there is a MIME header but no footer? Don't know if this helps or not. 

Thanks,

Tony
 
00588/00588 AAA00000  Tony             MIME Encoding Problem with SNDM         
( 1)   03/04/02 07:21

I am having a problem with the SNDM utility sending out an email with a PDF attachment, I am emailing it to a domain that is running IronMail and it is spitting it out with an error that the email was not created with proper MIME boundries. I am wondering what the problem is, I downloaded the latest version of the code and tried it and it is having the same problem. Does the MIME encoding in the SNDM conform to the standards?

Thanks,

Tony
 
00587/00587 AAA00000  uzaemon          Re: SPL2STMF 16MB Limit                 
( 1)   03/03/19 22:59  00585へのコメント

Mike,

> Is there a way to override the 16MB size limitation?

Current SPL2STMF only handles single *USRSPC which has 16MB limitation. You can handle spooled file more than 16MB in size if you can modify the program to cope with multiple *USRSPC.

uzaemon@Japan

 
00585/00585 AAA00000  Mike             SPL2STMF 16MB Limit                     
( 1)   03/03/18 07:00

Is there a way to override the 16MB size limitation?
 
00584/00584 AAA00000  bigmoon          Re^2: TIFFの解像度変更                  
( 1)   03/03/13 10:48  00583へのコメント

uzaemonさん、
お調べいただいてありがとうございます。
ＡＳへの移植に関してはあまりやったことはないので、
試行錯誤しながらやってみようと思います。

QWPTIFFG4のソースは、InformationCenterの中の
「IBM AS/400 Printing V」の中に見つけました。
＊WSCSTのタグの中には、やはりTIFFの解像度に関するような
ものは見当たりませんでした。
仰るように、IBMさんの機能改善を待つしかないようですね。

ありがとうございました。
 
00583/00583 AAA00000  uzaemon          Re: TIFFの解像度変更                    
( 1)   03/03/12 00:29  00582へのコメント  コメント数：1
bigmoonさん、

> SPL2STMFを使用して解像度２００ｘ２００のTIFF形式ファイルを作成したいのですが、
> そのまま作成すると、３００ｘ３００で作成されます。
> （TIFFINFOプログラムで確認）
> WSCSTはQWPTIFFG4を使用しています。
> このWSCSTが参考になるかと、RTVWSCSTコマンドでソースを見ようと
> 思いましたが、それらしいパラメーター値が見つからず、
> 暗礁に乗り上げてしまいました。
> なにか心当たりかヒントをいただけるとありがたいのですが。

libtiffだけでは無理そうでしたので、調べればもっと見つかると
思いますが、Googleでざっとそれらしきものを検索しました。
バッチでなければいくつかUNIXのX Windowベース?のツールがあり
そうです。

- http://www.experts-exchange.com/Programming/Programming_Languages/C/Q_10158147.html
- http://www.linuxquestions.org/questions/history/43059
- http://www.astro.caltech.edu/cgi-bin/man.cgi?section=1&topic=convert

最後のconvertコマンドを移植すれば何となくできそうなのですが、
試した(移植した)わけではないので確証は全くありません。

解像度を低くしたいだけであればQWPGIF(うろ覚え)でGIFにすると
かなりDPI(≒画像品質)が落ちます。後はIBMさんにWSCSTの機能
拡張を製品改善要望として伝えるくらいでしょうか...

uzaemon@Japan

 
00582/00582 AAA00000  bigmoon          TIFFの解像度                            
( 1)   03/03/11 12:30

SPL2STMFを使用して解像度２００ｘ２００のTIFF形式ファイルを作成したいのですが、
そのまま作成すると、３００ｘ３００で作成されます。
（TIFFINFOプログラムで確認）
WSCSTはQWPTIFFG4を使用しています。
このWSCSTが参考になるかと、RTVWSCSTコマンドでソースを見ようと
思いましたが、それらしいパラメーター値が見つからず、
暗礁に乗り上げてしまいました。
なにか心当たりかヒントをいただけるとありがたいのですが。
 
00581/00581 AAA00000  Akihiro          Re^3: ありがとうございます！            
( 1)   03/03/11 09:59  00580へのコメント

お忙しいところ、ありがとうございました。
もう一度、テストをしてみて、状況を切り分けるようにしたいと
思います。
よろしくお願いいたします。

 
00580/00580 AAA00000  uzaemon          Re^2: 当方では再現しません              
( 1)   03/03/09 23:31  00576へのコメント  コメント数：1
Akihiroさん、

> > すべてのPDFファイルで発生するわけではないのですが、
> > SNDMコマンドを使用して、一部のPDFファイルを添付ファイルとして、
> > 送付した際、「ファイルが壊れています」というエラーが出て、
> > ファイルを開くことができません。
> > 
> > ネットサーバー経由などで、そのPDFファイルを開いた場合（ローカルのPCにコピーした場合）は、問題なく開けていることから、
> > どうやらSNDM転送した際に、壊れてしまうようです。
> 
> こちらで再現するか試してみますので、該当のPDFファイルを
> メールしていただけますか？

メール受け取りました。こちらで下記手順により試してみまし
たが、問題なく添付ファイルを開くことができました。

1. SNDMで送信、OS/400はV5R2
　> SNDM FROM(FOO@BAR 'test file corruption') TO((XXXXX@XXXXXXX.YYYYYYYY.ZZZZ
　　Z.QQQ.COM)) FILE(QDDSSRC) SUBJECT('Test file corruption') ATTACHMENT('/tm
　　p/94702414557.PDF') DEBUG(*YES)
　　Mail sent.
2. Outlook Express 6で受信
3. 添付ファイルを開く→Acrobat 5で問題なく表示される

念のため、他のソフト(Wincode 261)でbase64エンコードした
ものとSNDMのデバッグ出力の添付ファイル部分を比較しました
が、ファイル比較ツール(DF)で全く同一であることが確認でき
ました。

SNDMの添付ファイル部分(抜粋)→http://homepage1.nifty.com/uzaemon/SNDM_ATTACHMENT/base64.txt
Wincodeのbase64出力部分(抜粋)→http://homepage1.nifty.com/uzaemon/SNDM_ATTACHMENT/94702414557.b64

可能であれば常にDEBUF(*YES)を指定しておき、現象が再現
した場合にbase64(あるいはMIME)のどの部分に問題(差異)があるかを
上記でご紹介したツールなどによって判別してください。
その上で発生条件が特定できましたら再度お知らせください。

よろしくお願いいたします。


uzaemon@Japan
 
00576/00576 AAA00000  uzaemon          Re: SNDMを使用したPDFファイルの転送     
( 1)   03/03/03 22:08  00575へのコメント  コメント数：2
Akihiroさん、

> すべてのPDFファイルで発生するわけではないのですが、
> SNDMコマンドを使用して、一部のPDFファイルを添付ファイルとして、
> 送付した際、「ファイルが壊れています」というエラーが出て、
> ファイルを開くことができません。
> 
> ネットサーバー経由などで、そのPDFファイルを開いた場合（ローカルのPCにコピーした場合）は、問題なく開けていることから、
> どうやらSNDM転送した際に、壊れてしまうようです。

こちらで再現するか試してみますので、該当のPDFファイルを
メールしていただけますか？

> OS/400 V4R4で、以前のバージョンのSENDMコマンドでも同様の問題が発生していたのですが、SNDM（SENDM）を使用して、添付ファイルを
> 送信する際、何か制約はありますでしょうか？

使用法に記載されている事以外には特に制約はないはずです。
ただし、あまり大きなファイルを添付するとメールサーバーが
複数のメールに分割するなど、SNDMの外部で制約が発生すること
はあります。

> また、この問題に該当する事例は報告されておりますでしょうか？

該当する問題は報告されていません。

uzaemon@Japan

 
00575/00575 AAA00000  Akihiro          SNDMを使用したPDFファイルの転送         
( 1)   03/03/03 21:58

いつもお世話になっております。

現在、SNDM（OS/400 V5R2 Ver1.35）を
利用させていただいております。

すべてのPDFファイルで発生するわけではないのですが、
SNDMコマンドを使用して、一部のPDFファイルを添付ファイルとして、
送付した際、「ファイルが壊れています」というエラーが出て、
ファイルを開くことができません。

ネットサーバー経由などで、そのPDFファイルを開いた場合（ローカルのPCにコピーした場合）は、問題なく開けていることから、
どうやらSNDM転送した際に、壊れてしまうようです。

OS/400 V4R4で、以前のバージョンのSENDMコマンドでも同様の問題が発生していたのですが、SNDM（SENDM）を使用して、添付ファイルを
送信する際、何か制約はありますでしょうか？

また、この問題に該当する事例は報告されておりますでしょうか？
もし、ご存知でしたら、対応方法を教えていただけないでしょうか？

何卒よろしくお願いいたします。




 
00574/00574 AAA00000  Dave Payn        Re^2: Using SNDM on AS400 (French users 
( 1)   03/03/01 00:17  00573へのコメント

Hi many thanks for responding, after playing aroung we did notice that the user profile had FRA and FR as the language codes, we have changed them to the *SYSVAL and it all works OK now. Many thanks for your help.
Dave...............

> Dave.
> 
> > Hello, I currently have an AS400 V5R1M0 and I have loaded the SNDM command, this command works great most of the time, but I do have a problem that I hope you can help me with, We have a few french users who see OS/400 in French (we have Secondary Language 2928 French Loaded).
> > But this always gives us the following error.
> >  Command failed. reason -301 negative response from SMTP server ( RSPｰ501 Syntax error.  Special characters only permitted with escape character.｢#ｧ REQｰMAIL FROM:<DAVE.PAYN@TRIUMPH.CO.UK>｢#ｧ) can you help please.
> > The system value QCCSID is set to 65535. We have no problems with English users who do not use the Secondary Language, they only use the base OS/400 2924
> 
> I have some questions :
> 
> - Is "DAVE.PAYN@TRIUMPH.CO.UK" French user? Or just using SNDM with the mail address under French environment?
> 
> - How did you set up French environment? Just putting QSYSxxxx on the top of system library list is not enough, e.g. use 5250 emulator with French codepage, set French CCSID for those users, French CHRID for French 5250 devices, etc...
> 
> - What parameters did you specify when you ran SNDM command? Please describe exactly what you did.
> 
> - What version of SNDM are you using. You can specify DEGUB(*YES) and check it.
> 
> - What is CCSID of the job? (both CCSID and DFTCCSID in DSPJOB command)
> 
> - What kind of mail server are you using?
> 
> Waiting for your reply.
> 
> uzaemon@japan

 
00573/00573 AAA00000  uzaemon          Re: Using SNDM on AS400 (French users go
( 1)   03/02/23 02:01  00572へのコメント  コメント数：1
Dave.

> Hello, I currently have an AS400 V5R1M0 and I have loaded the SNDM command, this command works great most of the time, but I do have a problem that I hope you can help me with, We have a few french users who see OS/400 in French (we have Secondary Language 2928 French Loaded).
> But this always gives us the following error.
>  Command failed. reason -301 negative response from SMTP server ( RSPｰ501 Syntax error.  Special characters only permitted with escape character.｢#ｧ REQｰMAIL FROM:<DAVE.PAYN@TRIUMPH.CO.UK>｢#ｧ) can you help please.
> The system value QCCSID is set to 65535. We have no problems with English users who do not use the Secondary Language, they only use the base OS/400 2924

I have some questions :

- Is "DAVE.PAYN@TRIUMPH.CO.UK" French user? Or just using SNDM with the mail address under French environment?

- How did you set up French environment? Just putting QSYSxxxx on the top of system library list is not enough, e.g. use 5250 emulator with French codepage, set French CCSID for those users, French CHRID for French 5250 devices, etc...

- What parameters did you specify when you ran SNDM command? Please describe exactly what you did.

- What version of SNDM are you using. You can specify DEGUB(*YES) and check it.

- What is CCSID of the job? (both CCSID and DFTCCSID in DSPJOB command)

- What kind of mail server are you using?

Waiting for your reply.

uzaemon@japan

 
00572/00572 AAA00000  Dave Payn        Using SNDM on AS400                     
( 1)   03/02/22 00:28

Hello, I currently have an AS400 V5R1M0 and I have loaded the SNDM command, this command works great most of the time, but I do have a problem that I hope you can help me with, We have a few french users who see OS/400 in French (we have Secondary Language 2928 French Loaded).
But this always gives us the following error.
 Command failed. reason -301 negative response from SMTP server ( RSPｰ501 Syntax error.  Special characters only permitted with escape character.｢#ｧ REQｰMAIL FROM:<DAVE.PAYN@TRIUMPH.CO.UK>｢#ｧ) can you help please.
The system value QCCSID is set to 65535. We have no problems with English users who do not use the Secondary Language, they only use the base OS/400 2924

Many thanks for any Help that you can provide
Mr Dave Payn
dave.payn@triumph.co.uk Tel +44 (0) 1455 452115  
 
00571/00571 AAA00000  uzaemon          Re: SNDM and Groupwise Client (Patch)   
( 1)   03/02/21 23:42  00570へのコメント

Susan,

Thank you very much for your information! It will help people who are encountering the same problem.

uzaemon@Japan

 
00570/00570 AAA00000  Susan Andresen   SNDM and Groupwise Client               
( 1)   03/02/21 08:04

Just to let others know...I had some troubles getting SNDM to work with attachments with Groupwise clients.  I had seen the previous posts reading the boundary= issue but that didn't help with my problem...Groupwise just wasn't seeing the attachments.

What finally worked for me was to add a CRLF at the end of the boundary statement.  So the line in #GEN looked like:

EVAL      tmpfwb = 'Content-Type: multipart/mixed; ' + 
               'boundary="' + boundary + '"' + CRLF    

And now it works perfect!!
 
00569/00569 AAA00000  Jesus Olague     Re^2: SPL2STMF error in API QwpzHostPrin
( 1)   03/02/19 02:33  00566へのコメント

Thanks Uzaemon, I guess I've nothing to do but contact IBM.

Regards.

Jesus
 
00568/00568 AAA00000  uzaemon          Re: SNDM Requirements                   
( 1)   03/02/18 23:53  00567へのコメント

Todd,

> What are the SMTP sever requrements to make this work?

Your SMTP server should support minimum SMTP commands and not requires newer SMTP commands (e.g. AUTH) / functionalities (e.g. POP before SMTP). To make sure, run SNDM with DEBUG(*YES) and discuss with your SMTP server administrator.

I think most SMTP server can work with SNDM.

uzaemon@Japan

 
00567/00567 AAA00000  todd             SNDM Requirements                       
( 1)   03/02/18 02:29

What are the SMTP sever requrements to make this work?

 
00566/00566 AAA00000  uzaemon          Re: SPL2STMF error in API QwpzHostPrintT
( 1)   03/02/17 23:34  00564へのコメント  コメント数：1
Jesus,

> Hi Uzaemon, I've used SPL2STMF without any problem since 18 months ago, but recently we upgrade OS from V4R4M0 to V5R1M0 and since then when I convert some spooled files I get the following error:

As you had been able to use SPL2STMF on V4R4M0, I assume that your problem has been caused by version up of OS/400.

> Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt = 30

CPF3CF2 indicates "Error(s) occurred during running of &1 API". If you cannot find additional information in joblog, I have nothing to do because HPT can be fixed only by IBM.

> I will post you the debug print output in a reply to this message.

Unfortunately, the debug output does not show any useful information regarding your problem.

> I thought it was a problem with the user spaces' sizes ... 

I'm not sure but maximum size of USRSPC object is 16MB, I think. You can change the size of variables but I don't know if it resolves your problem.

> Can you help me?

As I mentioned earlier, I suspect that your problem is in OS/400(HPT API). I recommend you to consider followings :

- apply latest Cum and HPT-related PTFs.
- there is no logical reason but just try to recompile SPL2STMF on V5R1 with lower optimization option.
- if you have an access to another AS/400 or iSeries, run the same thing and see what happens. Or you may ask your business partner or friend to recreate your problem.
- if the problem occurs only for the specific spooled file, look for the difference.
- prepare the procedure to recreate your problem using OS/400 functions which use HPT, e.g. RMTOUTQ, LPR, Access for Web, Host on Demand, etc.
- contact your support channel to ask IBM to investigate (and fix) the problem.

Hope this helps.

uzaemon@Japan

 
00565/00565 AAA00000  Jesus Olague     Re: SPL2STMF error in API QwpzHostPrintT
( 1)   03/02/15 03:57  00564へのコメント

Here you have the debug print output I told you
________________________________________________
Debug mode.  2/14/2003                 
*** SPL2STMF version 0-03 00-03-18 ***

Input Parameters
 splf     : PAGOS
 stmf     : chscob0103.tif
 wscst    : *LIBL/QWPTIFFG4
 spl_job  : DINGABRIM1INGABYM
 spl_nbr  : -1
 replace  : *YES

Create User Space QTEMP/QSPGETSP
 API QUSCRTUS successful.
 API QUSPTRUS successful.

Create User Space QTEMP/QWPZHPT1
 API QUSCRTUS successful.
 API QUSPTRUS successful.

Retrieve spool file.
 API QSPOPNSP successful. spl_hdl = 2
 API QSPGETSP successful.
 generic header : level = V5R1M0 format = SPFR0200 complete = C sizeofUS = 149289 reqbuf = -1 retbuf = 37
 API QSPCLOSP successful.

Checking output stream file.
 file name = chscob0103.tif
 stream file already exists.
 unlink() successful.
Stream file opened.

hptopt = 10
 QUSBAVL = 0
hptopt = 20
 QUSBAVL = 0 splbuflen = 0 hptosolena = 44 hptxbuflena = 4
  Option specific input information / device = '*NONE' job = DINGABRIM1/INGABYM/
   spoolfile = 'PAGOS' spoolNo = -1 pages = 0 WSCST = '*LIBL/QWPTIFFG4' Mmodel = '*WSCST'
  Option specific output information / transform file = 1 pass data = 0
hptopt = 30
 buffer info : No = 1 len = 4136 numentry = 1 offset = 224 size = 4040 / page info : LastPageCont = Y
 QUSBAVL = 0 splbuflen = 4040 hptosolena = 44 hptxbuflena = 0 pages(OSI) = 0 done(OSO) = 0
hptopt = 30
 buffer info : No = 2 len = 4140 numentry = 1 offset = 4360 size = 4044 / page info : LastPageCont = Y
 QUSBAVL = 0 splbuflen = 4044 hptosolena = 44 hptxbuflena = 48936 pages(OSI) = 1 done(OSO) = 0

---> Previous message repeats until No = 14 and QUSBAVL = 27

** reset hpt - process option 50 **

Fatal error : API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 30
________________________________________________

Regards.

Jesus
 
00564/00564 AAA00000  Jesus Olague     SPL2STMF error in API QwpzHostPrintTrans
( 1)   03/02/15 03:52

Hi Uzaemon, I've used SPL2STMF without any problem since 18 months ago, but recently we upgrade OS from V4R4M0 to V5R1M0 and since then when I convert some spooled files I get the following error:

Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt = 30

I will post you the debug print output in a reply to this message.

What I try to convert is an *SCS spooled file with length of 20 pages and a file size of 180 KB, using 15CPI x 8LPI at 198 COLS and 88 ROWS per page.

I thought it was a problem with the user spaces' sizes and I changed them from 1024 to 2048 for QSPGETSP and 200000 to 400000 for QWPZHPT1, and increased value of hptxbuflen variable in D-spec initialization from 200000 to 400000. After this, the problem remains and most of the tiff files were generated empty.

Can you help me?

Regards.

Jesus
 
00563/00563 AAA00000  Enjoy AS400 Life Re^4: SPL2STMF(漢字)文字化け - APWの場 
( 1)   03/02/13 22:08  00562へのコメント

uzaemon様

レス有り難うございます。
何とかチャレンジしてみましたが、STRAPWの6のフォントの変換が
「コマンドが見つからない」でできませんでした。
やはり何か導入が足らないのだと思います。
幸い、貿易関係のシステムなのでまずは半角英数カナのみの帳票で
テストを続けたいと思います。好評ならＡＦＰフォントも購入しよう
かとおもいます。
では、では。

 
00562/00562 AAA00000  uzaemon          Re^3: SPL2STMF(漢字)文字化け - APWの場 
( 1)   03/02/11 19:16  00560へのコメント  コメント数：1

> ＡＦＰフォントが導入されていない場合は、漢字の変換はできないという理解でよろしいでしょうか？

思い出しましたが、APWでAPF出力をパラメーターで指定した場合、DBCSフォントにOS/400標準の24ドット・フォントを使っている可能性があります。詳細はこのBBSのメッセージ「120. ＡＰＷをつかった印刷物」のツリーをご覧ください。

uzaemon@Japan

 
00561/00561 AAA00000  uzaemon          Re^3: SPL2STMF(漢字)文字化け            
( 1)   03/02/09 13:14  00560へのコメント

Enjoy AS400 Life!さん、(長いハンドルですね :-) )

> ＡＦＰフォントが導入されていない場合は、漢字の変換はできないという理解でよろしいでしょうか？

基本的にはそうです。

より正確な言い方では、AS/400単独で、HPT機能を使い、DBCSフォントをビットマップイメージに変換するには「日本語」AFPフォントが必要です。

uzaemon@Japan

 
00560/00560 AAA00000  Enjoy AS400 Life Re^2: SPL2STMF(漢字)文字化け            
( 1)   03/02/09 12:02  00559へのコメント  コメント数：3
レス有り難うございます。
ＡＦＰフォントが導入されていない場合は、漢字の変換はできないという理解でよろしいでしょうか？

 
> > SPL2STMFを使用させて頂いています。
> > TIFFへ変換しようと思い、QSYS/QWPTIFFG4　もしくは　QSYS/QWPTIFFPB  を指定してみたのですが、漢字が文字化け
> > してしまいます。
> > 何か設定等ございますでしょうか？
> あります。プリンターファイル(またはシステム値)のIGCCDEFNTの設定、5769FN1(AFP DBCS フォント&#8722;日本語)が導入されていること、などを確認してください。

 
00559/00559 AAA00000  uzaemon          Re: SPL2STMF(漢字)文字化け              
( 1)   03/02/07 18:45  00558へのコメント  コメント数：4
Enjoy AS400 Life!さん、

> SPL2STMFを使用させて頂いています。
> TIFFへ変換しようと思い、QSYS/QWPTIFFG4　もしくは　QSYS/QWPTIFFPB  を指定してみたのですが、漢字が文字化け
> してしまいます。
> 何か設定等ございますでしょうか？

あります。プリンターファイル(またはシステム値)のIGCCDEFNTの設定、5769FN1(AFP DBCS フォント&#8722;日本語)が導入されていること、などを確認してください。

関連した質問がこのBBSの「309. SPL2STMFで漢字を使いたい」にあります。また、プログラム例も http://homepage1.nifty.com/uzaemon/afpprt.html にありますのでご参照ください。

uzaemon@Japan

 
00558/00558 AAA00000  Enjoy AS400 Life SPL2STMF文字化け                        
( 1)   03/02/06 19:07

SPL2STMFを使用させて頂いています。
TIFFへ変換しようと思い、QSYS/QWPTIFFG4　もしくは　QSYS/QWPTIFFPB  を指定してみたのですが、漢字が文字化け
してしまいます。
何か設定等ございますでしょうか？
 
00557/00557 AAA00000  uzaemon          Re^3: SNDM -301 authorization required  
( 1)   03/02/04 21:37  00556へのコメント

Eugene,

> Now i am sure the server requires authentication.
> i tried through EHLO and AUTH commands but i have no success.
> Is your tool able to talk with this kind of servers?

No, SNDM does not support those SMTP commands. You may use other mail server or modify source code of SNDM or look for other mail tool...

uzaemon@Japan

 
00556/00556 AAA00000  eugene           Re^2: SNDM -301 authorization required  
( 1)   03/02/03 22:59  00555へのコメント  コメント数：1
Now i am sure the server requires authentication.
i tried through EHLO and AUTH commands but i have no success.
Is your tool able to talk with this kind of servers?

thank you 
eugene
 
 
00555/00555 AAA00000  uzaemon          Re: SNDM -301 authorization required    
( 1)   03/02/03 22:06  00554へのコメント  コメント数：2
Eugene,

> when i try to use your utility with an esmtp lotus server the server at the helo statement send me this message :
> RSP[505 Authentication required] REQ[HELO sosdsea.com]) 

Possibilities are:

- Domain "sosdsea.com" is not allowed by your Domino server.
- Your Domino server has been set to use "POP before SMTP".
- You iSeries(AS/400) has not been authorized by the mail server.

You can try by other mail clients for problem determination but I recommend you to contact Domino administrator (if not you).

Let me know if you solved the problem.

uzaemon@Japan

 
00554/00554 AAA00000  eugene           SNDM -301 authorization required        
( 1)   03/02/03 20:09

hi, 
when i try to use your utility with an esmtp lotus server the server at the helo statement send me this message :
RSP[505 Authentication required] REQ[HELO sosdsea.com]) 

do you know this problem?

thank you in advance
Eugene   
 
00553/00553 AAA00000  Bob              Re^2: Convert file from AFP to TIFF, GIF
( 1)   03/02/01 02:42  00552へのコメント

> Bob,
> 
> > Do you have AS400 utility to convert a AS400 document in one of folders from AFP format to TIFF or any other graphic format.
> 
> Unfortunately, there are no such utility in this site. I don't know how you created AFP file in folder, but if you can print the file by some means, you can use SPL2STMF to convert to TIFF file.
> 
> uzaemon@Japan

The files are scanned on a PC and uploaded to AS 400

Thanks

 
00552/00552 AAA00000  uzaemon          Re: Convert file from AFP to TIFF, GIF o
( 1)   03/01/31 21:38  00551へのコメント  コメント数：1
Bob,

> Do you have AS400 utility to convert a AS400 document in one of folders from AFP format to TIFF or any other graphic format.

Unfortunately, there are no such utility in this site. I don't know how you created AFP file in folder, but if you can print the file by some means, you can use SPL2STMF to convert to TIFF file.

uzaemon@Japan

 
00551/00551 AAA00000  Bob              Convert file from AFP to TIFF, GIF or JP
( 1)   03/01/30 07:53

Do you have AS400 utility to convert a AS400 document in one of folders from AFP format to TIFF or any other graphic format. I know you have program that convert Spool files to TIFF or PDF. I am looking something like that convert other documents in the AS400 folder.

Thanks
 
00550/00550 AAA00000  Jaffa            Re: ZLib                                
( 1)   03/01/08 22:35  00549へのコメント

I've now been able to recompile with a new function that passes a negative windowBits (-15). But I'm still not able to produce a flate stream that works in PDF. The PDF works fine uncompressed. When compressing, I'm using a modified compress2 function that passes -15 to windowBits in deflateInit2 (other parameters set to default). I compress everything between stream and endstream, /Filter /FlateDecode is added and /Length is set to the length of compressed data between stream and endstream. Does anyone have an idea about what might be wrong? any help appriciated :)
 
00549/00549 AAA00000  Jaffa            ZLib                                    
( 1)   03/01/06 16:37

I'm using the ZLib serviceprogram, and need to set a different value for windowBits in deflateInit2_ in order to get a deflate stream without header and trailer. The compress/compress2 function in the serviceprogram uses the default value only. Has anyone made a new serviceprogram with a compress function that takes this (windowBits) as a parameter? I'm not able to this myself since our AS/400 doesn't have a C compiler installed..
 
00548/00548 AAA00000  uzaemon          Re^3: SNDM (V3R2 is not supported)      
( 1)   03/01/02 21:23  00546へのコメント

Will,

> Running OS Version V3R2M0 and I followed your install and installation instructions...

Carefully read my homepage again, "... SNDM and CRTCSVF MAY work on V3R7 or later". For more about version issue, see thread "158. SNDM compilation problem" in this BBS.

uzaemon@Japan

 
00547/00547 AAA00000  Will Burton      Re^3: SNDM (cannot compile)             
( 1)   03/01/02 12:55  00546へのコメント

> > Will,
> > 
> > > When I try to compile SNDM I get Name to long errors.  What can I do?
> > 
> > Two quick questions:
> > 
> > - What is the version of your OS/400?
> > - Are you using MAKE procedure?
> > 
> > Waiting for your reply.
> > 
> > uzaemon@Japan
> 
> Running OS Version V3R2M0 and I followed your install and installation instructions...

Here's a snip

 Start SNDM compilation.                                    
Change current library to "SMTP"...                        
   result-> 0                                               
                                                            
 Start creating modules for SNDM...                         
   creating module SNDM...                                  
result-> RNS9309                
creating module CDATE...        
<snip>
result-> RNS9309                                    
Creating main program (SNDM)...                       
result-> CPF3C50                                    
                                                      
Start creating command ...                            
  creating pnlgrp...                                  
  result-> 0                                          
  creating command...                                 
  result-> 0                                          
                                                      
Compile finished. Confirm error(s) if exists.         
                                                      
I have the QSYSINC library also..
 
00546/00546 AAA00000  Will Burton      Re^2: SNDM (cannot compile)             
( 1)   03/01/02 11:54  00545へのコメント  コメント数：2
> Will,
> 
> > When I try to compile SNDM I get Name to long errors.  What can I do?
> 
> Two quick questions:
> 
> - What is the version of your OS/400?
> - Are you using MAKE procedure?
> 
> Waiting for your reply.
> 
> uzaemon@Japan

Running OS Version V3R2M0 and I followed your install and installation instructions...

 
00545/00545 AAA00000  uzaemon          Re: SNDM (cannot compile)               
( 1)   02/12/28 17:04  00544へのコメント  コメント数：3
Will,

> When I try to compile SNDM I get Name to long errors.  What can I do?

Two quick questions:

- What is the version of your OS/400?
- Are you using MAKE procedure?

Waiting for your reply.

uzaemon@Japan

 
00544/00544 AAA00000  Will Burton      SNDM                                    
( 1)   02/12/28 12:23

When I try to compile SNDM I get Name to long errors.  What can I do?
 
00543/00543 AAA00000  uzaemon          Re: ＳＰＬ2ＳＴＭＦ(C drive?)           
( 1)   02/12/27 22:15  00542へのコメント

超超素人さん、

> 但し実行時間が0分0秒です。page=1で一致していますが、ＰＣで内容確認ができません。この意味はｃドライブのＴＥＭフォルダーにあるＰＲＩＮＴ.TXTに書き込みするということだと理解したのですがよろしいのでしょうか？

いいえ、違います。特殊な方法でOS/400のファイルシステムをPCのドライブにマップしていない限り、SPL2STMFが直接PC上のドライブにファイルを作成することはありません。

TOSTMF('/TEM/PRINT.TXT')と指定すると、OS/400のIFS上にストリーム・ファイル'/TEM/PRINT.TXT'が作成されます。IFS(統合ファイルシステム)についてはInformation Centerなどの情報を参照してください。

uzaemon@Japan

 
00542/00542 AAA00000  超超素人         ＳＰＬ2ＳＴＭＦ                         
( 1)   02/12/27 21:28

お世話になります。
ＴＯＳＴＭＦ('/TEM/PRINT.TXT')を指定してメッセージは成功です。
但し実行時間が0分0秒です。page=1で一致していますが、ＰＣで内容確認ができません。この意味はｃドライブのＴＥＭフォルダーにあるＰＲＩＮＴ.TXTに書き込みするということだと理解したのですがよろしいのでしょうか？そのファイルをみても空なんですがどこが問題なんでしょうかよろしくお願いいたします。


 
00541/00541 AAA00000  uzaemon          Re: commando SNDM Attached an file .PDF 
( 1)   02/12/20 11:09  00540へのコメント

Gustavo,

OK. Please perform some more testings.

- If you receive the mail (and the attachment file) using OutlookExpress or Netscape Messenger, do you see the same problem?

- What is the version of your Notes client?

- What version of SNDM are you using?

Waiting for your reply.

uzaemon@Japan

P.S. Please use "reply" link at the bottom of message so that we can track this thread easily.

 
00540/00540 AAA00000  Gustavo Vargas   commando SNDM Attached an file .PDF o .H
( 1)   02/12/20 02:14

The type of file is .PDF or .HTML 

The SNDM send in good the mail, but when attached him a file .PDF or .HTLM that is in the IFS of the AS/400. when receiving it the receiver arrives type text to him and not in formtao .PDF or .HTLM thus not can open by the ACROBAT or by Internet Explorer respectively 

The version of the AS/400 is 5.1 and the mail server is LOTUS NOTES

                             Send SMTP Mail (SNDM)                             
Teclee elecciones, pulse Intro.                                                
Sender:                                                       Mail address . . . . . . . . . > GUSTAVO.VARGAS@AVON.COM.CON                 
  Description  . . . . . . . . . > 'System Avon'                               
Recipient:                                                    Mail address . . . . . . . . . > JOSE.BEDOYA@AVON.COM.CO                     
  Description  . . . . . . . . . > 'System Avon'                               
  Recipient type . . . . . . . .   *TO           *TO, *CC, *BCC                
              + para m疽 valores                                               
Mail body file . . . . . . . . . > MAIL          Nombre                        
  Library  . . . . . . . . . . . >   TAVO        Nombre, *LIBL, *CURLIB        
Member . . . . . . . . . . . . .   *FIRST        Nombre, *FIRST        
 Subject  . . . . . . . . . . . . > 'test Mail with FILE TYPE .PDF'                  
Attachment . . . . . . . . . . .  '/INTAP/INF14.PDF'                       + para m疽 valores                                               
 Reply-to:                                                            Mail address . . . . . . . . .                                   Description  . . . . . . . . .                               Mail (SMTP) server name  . . . . > PREBELDOM3 

Thank you very much,

GUSTAVO      
                                                                                        
 
00539/00539 AAA00000  uzaemon          Re: commando SNDM enclosing a file PDF  
( 1)   02/12/19 18:24  00536へのコメント

Gustavo,

> As I can send a mail with commando SNDM enclosing a file PDF does not interpret me like text / flat file?

I'm not sure about your problem. Please explain your problem in detail and confirm followings.

- For plain text and other PC file types (e.g. .exe or .xls), SNDM works fine, right?

- How did run SNDM command? Please enumurate all parameters.

- What kind of mail client are you using? Does the problem happen on any mail client (e.g. Outlook Express, Netscape Messenger)?

- What is the version of your OS/400 and SNDM?

Waiting for your reply.

uzaemon@Japan

 
00538/00538 AAA00000  uzaemon          Re: .exe archives (Why not plain ZIP for
( 1)   02/12/19 13:01  00535へのコメント

Herbert,

> why do you distribute the programms as exe and not as zip?
> Makes it hard to install with Linux (or any other non windows os).

Because:

- Self-extracting "exe" file is more convenient for most people. More than 96% of total access to this site use WIN32 platform.

- You can create your own "zip" version of distribution because the programs are GPLed.

- WIN32 platforms (95, 98, 98SE, ME, NT, 2000, XP) are virtually available at almost anywhere. 

Does this answer to your question?

uzaemon@Japan

 
00537/00537 AAA00000  uzaemon          Re: SNDM (Thanks report)                
( 1)   02/12/19 12:14  00534へのコメント

Josef,

> Hello uzaemon,
> 
> I have installed SNDM this week, works fine.
> 
> SNDM is a great tool, Thank you very much,
> 
> Greetings from Germany,
> 
> Josef

Thank you very much for your post. I'm very glad to hear that my programs serve your need.

uzaemon@Japan

 
00536/00536 AAA00000  Gustavo Vargas   commando SNDM enclosing a file PDF      
( 1)   02/12/19 01:17

Hello uzaemon,

I have installed SNDM this week, 

I have a question

As I can send a mail with commando SNDM enclosing a file PDF does not interpret me like text / flat file?

Thank you very much,

Greetings from Colombia,

Gustavo 

 
00535/00535 AAA00000  Herbert          .exe archives                           
( 1)   02/12/18 21:21

Hi,

why do you distribute the programms as exe and not as zip?
Makes it hard to install with Linux (or any other non windows os).

Regards,
Herbert

 
00534/00534 AAA00000  Josef Mueller    SNDM                                    
( 1)   02/12/18 19:29

Hello uzaemon,

I have installed SNDM this week, works fine.

SNDM is a great tool, Thank you very much,

Greetings from Germany,

Josef
 
00533/00533 AAA00000  uzaemon          Re: SPL2STMF (Which WSCST to use?)      
( 1)   02/12/14 12:08  00532へのコメント

Cuong Le,

> What do I put in the WSCST field? I saw in your example TEXTJ, but don't know how to create it. I used QWPDEFAULT, the English text is OK. But the French (・・...) one is not (I am from Canada). Thanks.  

If you can read Japanes, there is exactly the same question at "524. WORKSTATION CUSTOMIZING OBJECT".

You can find the list of WSCSTs at URL below.

Printer Model Settings for Host Print Transform (HPT)
http://www-912.ibm.com/s_dir/slkbase.NSF/643d2723f2907f0b8625661300765a2a/a944982b85205c738625669700615ca3?OpenDocument

For more information about HPT and WSCST, see message "519. Re^3: SPL2STMF Chinese language".

Hope this helps.

uzaemon@Japan

 
00532/00532 AAA00000  Cuong Le         SPL2STMF                                
( 1)   02/12/14 02:40

What do I put in the WSCST field? I saw in your example TEXTJ, but don't know how to create it. I used QWPDEFAULT, the English text is OK. But the French (, ...) one is not (I am from Canada). Thanks.  
 
00531/00531 AAA00000  uzaemon          Re: SPL2STMF (Table QA3TBF437 not found)
( 1)   02/12/12 21:46  00528へのコメント

GANさん、

> データの移行はできるようになったのですが起動途中で
> プログラムエラーが出ます。
> このため文字化けが発生してしまいます。
> エラーは「テーブルファイルが見つからない」と言うもので
> 「QA3TBF437」と言うテーブルファイルがAS/400に存在しません｡
> どこかで入手できるのでしょうか？

このエラーはDBCSでCS1172/CP1027環境の印刷をする場合に出るようです。原因はIBM(OS/400)の提供するHPT機能の障害であり、(HPTの単なるフロントエンドである)SPL2STMFの問題ではありません。

お使いのOS/400のバージョンがV3R2～V4R3であればPTFが出ているはずです。詳細はAS/400の購入元、あるいは貴社の契約しているサポート窓口にお問い合わせされることをお勧めします。

uzaemon@Japan

 
00529/00529 AAA00000  uzaemon          Re: TIFF2PDF (no C compiler)            
( 1)   02/12/12 21:11  00527へのコメント

Thompson,

> Is there any way you could provide a compiled version of the TIFF2PDF converter?  We do not have C we are also on version v4r3.

Please read message "45. Re: Convert tiff file to PDF file" in this BBS.

uzaemon@Japan

 
00528/00528 AAA00000  GAN              SPL2STMF                                
( 1)   02/12/12 17:52

データの移行はできるようになったのですが起動途中で
プログラムエラーが出ます。
このため文字化けが発生してしまいます。
エラーは「テーブルファイルが見つからない」と言うもので
「QA3TBF437」と言うテーブルファイルがAS/400に存在しません｡
どこかで入手できるのでしょうか？
 
00527/00527 AAA00000  R. Thompson      TIFF2PDF                                
( 1)   02/12/12 03:13

Is there any way you could provide a compiled version of the TIFF2PDF converter?  We do not have C we are also on version v4r3.

Thanks

 
00526/00526 AAA00000  uzaemon          Re: WORKSTATION CUSTOMIZING OBJECT (SPL2
( 1)   02/12/05 21:07  00524へのコメント

GANさん、

> SPL2STMFのパラメータの「WORKSTATION CUSTOMIZING OBJECT」には何を入力したら良いか教えてください｡

下記のURLにWSCSTとプリンターの対応表があります。

Printer Model Settings for Host Print Transform (HPT)
http://www-912.ibm.com/s_dir/slkbase.NSF/643d2723f2907f0b8625661300765a2a/a944982b85205c738625669700615ca3?OpenDocument

その他HPTやWSCSTの詳細についてはこのBBSのメッセージ「519. Re^3: SPL2STMF Chinese language」の情報を参照してください。

uzaemon@Japan

 
00525/00525 AAA00000  uzaemon          Re: Error in install of SNDM            
( 1)   02/12/05 21:02  00523へのコメント

Marvin,

> RPGLESRC of library QSYSINC not included with download of sndm134 or 135. Modules and program could not compile. Can you help?

File "Q"RPGLESRC of library QSYSINC is IBM-supplied include file. Library QSYSINC is no charge program product shipped with OS/400.

Read message "66. Re: /COPY" in this BBS for which members are required.

uzaemon@Japan

 
00524/00524 AAA00000  GAN              WORKSTATION CUSTOMIZING OBJECT          
( 1)   02/12/05 16:55

SPL2STMFのパラメータの「WORKSTATION CUSTOMIZING OBJECT」には何を入力したら良いか教えてください｡
 
00523/00523 AAA00000  Marvin           Error in install of SNDM                
( 1)   02/12/05 08:00

RPGLESRC of library QSYSINC not included with download of sndm134 or 135. Modules and program could not compile. Can you help?
 
00521/00521 AAA00000  uzaemon          Re: Retrieve spool file in Postscript la
( 1)   02/12/02 21:19  00520へのコメント

Jordi,

As mentioned at the top of this page, this BBS is not for general Q&A and you should consult your support chennel.

Having that said, you can find information about Postscript printing on OS/400 at "Printing V" redbook or Web sites below (search "Postscript").

iSeries Information Center
http://publib.boulder.ibm.com/iseries/v5r2/ic2924/index.htm

comp.sys.ibm.as400.misc newsgroup
http://groups.google.com/groups?q=postscript+group:comp.sys.ibm.as400.misc&scoring=d

Good luck.

uzaemon@Japan

 
00520/00520 AAA00000  Jordi Carreras   Retrieve spool file in Postscript langua
( 1)   02/12/02 05:30

Hi Uzaemon,

Thanks for your information about *WSCST Guides.

Do you know how I can retrieve an spool file (*SCS, *AFPDS)to IFS file in Postscript language?

Is it possible to use any IBM API ?

Thanks again.

Jordi.

 
00519/00519 AAA00000  uzaemon          Re^3: SPL2STMF Chinese language         
( 1)   02/11/29 22:39  00518へのコメント

Jordi,

> Do you know any Guide where we look up into it more information about Workstation Customize Object (*WSCST) (not IBM Manual, I need more extensive) ?
> 
> I need more information about Double Byte customize in Raster Mode (*SCS only).

I'm referring following information. If you need more about WSCST, I think you need to consult your support channel to ask IBM about the specifications.

"iSeries Information Center"

Related information for printing 
http://publib.boulder.ibm.com/iseries/v5r2/ic2924/info/rzalu/rzalurelated.htm

"iSeries and AS/400 Technical Support"

Support for Various ASCII Printers
http://www-912.ibm.com/s_dir/slkbase.NSF/0888cc5d18fceca58625680b005dc690/b44a2cf4ba778d83862568250053649f?OpenDocument

Printer Model Settings for Host Print Transform (HPT)
http://www-912.ibm.com/s_dir/slkbase.NSF/643d2723f2907f0b8625661300765a2a/a944982b85205c738625669700615ca3?OpenDocument

IBM Knowledge Base
http://www-912.ibm.com/s_dir/slkbase.nsf/slkbase
Search -> HPT

"Manuals"

OS/400 Workstation Customization Programming V4R3, SC41-5605
http://publib.boulder.ibm.com/pubs/pdfs/as400/V4R3PDF/QB3AQ600.PDF

Printer Device Programming
http://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/c4157135.pdf

IBM AS/400 Printing V
http://publib.boulder.ibm.com/iseries/v5r2/ic2924/redbooks/sg242160.pdf

Hope this helps.

uzaemon@Japan

 
00518/00518 AAA00000  Jordi Carreras   Re^2: SPL2STMF Chinese language         
( 1)   02/11/28 21:28  00460へのコメント  コメント数：1
Hi Uzaemon,

When I wrote you last day about Simplified Chinese, I tryed with QSYS/QWPHPDBCS to generate DBCS PCL, but got bad.

Do you know any Guide where we look up into it more information about Workstation Customize Object (*WSCST) (not IBM Manual, I need more extensive) ?

I need more information about Double Byte customize in Raster Mode (*SCS only).

I'm looking forward to writing to you again.

Best regards,

Jordi

 
00517/00517 AAA00000  tomo             Re^4: 変換テーブルについて (CRTCSVF)    
( 1)   02/11/27 10:04  00516へのコメント

お知らせ頂いた内容により、問題を解決することが出来ました。
ありがとうございました。

 
00516/00516 AAA00000  uzaemon          Re^3: 変換テーブルについて (CRTCSVF)    
( 1)   02/11/25 21:24  00514へのコメント  コメント数：1
tomoさん、

> (1)「槙」の字の１６進コードは「6881」です。
> 
> (2)変換元ＤＢは５０３５です。
> 
> (3)パラメーター部分
> CRTCSVF FILE(QTEMP/SHHPTF) TOSTMF(#STRMFNM)

STMFCCSIDパラメーターに943を指定してお試しください。

- - - - - - - - - - - - - - - - - - - - - - -

以下説明ですが、興味があればご一読ください。

JISコードは不変ではなく、83年には「従来の字形を変更し、従来の字形を第２水準末尾に追加」するという変更(暴挙?)が行われました(詳細はGoogleなどで検索してみてください)。これらの文字(あるいは丸数字などのNEC拡張文字)を正しく変換するためには、対応したASCII-CCSIDを明示的に指定する必要があります。

CRTCSVFは変換先のASCII-CCSIDはSTMFCCSIDパラメーターで決定します。デフォルトではQLGRLNGIというAPIによってシステムの一次言語に対応するASCII-CCSIDを使用します。V5R2では一次言語が2962(日本語)の場合、システムの省略時のASCII-CCSIDは942となりました。932/942は旧JIS、943は新JIS(Javaで言うところのMS932エンコーダー)になります。

uzaemon@Japan

 
00514/00514 AAA00000  tomo             Re^2: 変換テーブルについて (CRTCSVF)    
( 1)   02/11/25 09:58  00513へのコメント  コメント数：2
ご連絡ありがとうございます。

追加の情報をお送り致します。

(1)「槙」の字の１６進コードは「6881」です。

(2)変換元ＤＢは５０３５です。

(3)パラメーター部分
CRTCSVF FILE(QTEMP/SHHPTF) TOSTMF(#STRMFNM)

以上です。
何か回避策があればお教え下さい。
 
00513/00513 AAA00000  uzaemon          Re: 変換テーブルについて (CRTCSVF)      
( 1)   02/11/21 21:00  00512へのコメント  コメント数：3
tomoさん、

> CRTCSVFを使用して、CSVへの書き出しを行うと「槙」という文字が、「槇」になって書き出されてしまいます。
> CSVへの書き出しをする際の変換テーブルの文字コードを修正すれば正常に書き出しが行われると思うのですが・・・
> CRTCSVFを使用する時に使用される変換テーブルを教えて下さい。

CRTCSVFは文字コード変換にiconv()というAPIを使用していますが、このAPIが使用するDBCS変換テーブルはユーザーが見たり変更したりできない内部的なものと思われます。次の点を確認の上お知らせください。

- 変換元DBの「槙」の内部コード(DSPPFMやCPYFの16進表示で確認)
- 変換元DBのCCSID(DSPFDで確認)
- CRTCSVFの実行時のパラメーター

uzaemon@Japan

 
00512/00512 AAA00000  tomo             変換テーブルについて                    
( 1)   02/11/21 17:59

CRTCSVFを使用して、CSVへの書き出しを行うと「槙」という文字が、「槇」になって書き出されてしまいます。
CSVへの書き出しをする際の変換テーブルの文字コードを修正すれば正常に書き出しが行われると思うのですが・・・
CRTCSVFを使用する時に使用される変換テーブルを教えて下さい。
 
00511/00511 AAA00000  uzaemon          Re^3: Error CZM0613 (tifflib)           
( 1)   02/11/20 21:15  00509へのコメント

Tommaso,

> - Do you have (working) ILE-C compiler? NO
> - Do you have library QSYSINC? YES
> - The compilation fails for all modules/programs? YES
> - Can you find any other error message in compile list? NO
> - What is version of your OS/400? V5R1

You need ILE-C compiler to MAKE tifflib... please carefully read my homepage again. As you are on V5R1, just install 5722-WDS, option 51(Compiler - ILE C).

uzaemon@Japan

 
00509/00509 AAA00000  Tommaso          Re^2: Error CZM0613 (tifflib)           
( 1)   02/11/20 03:29  00508へのコメント  コメント数：1
> Tommaso,
> 
> > During installation of TIFFLIB, when execute the command STRREXPRC SRCMBR(MAKE) SRCFILE(TIFFLIB/QREXSRC), it return the message CZM1613 and CZM0613. Where is the problem ?
> 
> Both CZM1613 and CZM0613 just indicate that compile has failed. Please answer to following questions.



 - Do you have (working) ILE-C compiler? NO
 - Do you have library QSYSINC? YES
 - The compilation fails for all modules/programs? YES
 - Can you find any other error message in compile list? NO
 - What is version of your OS/400? V5R1
 
Tanks.
tommaso.spalluto@sys-dat.it

 
00508/00508 AAA00000  uzaemon          Re: Error CZM0613 (tifflib)             
( 1)   02/11/19 21:24  00507へのコメント  コメント数：2
Tommaso,

> During installation of TIFFLIB, when execute the command STRREXPRC SRCMBR(MAKE) SRCFILE(TIFFLIB/QREXSRC), it return the message CZM1613 and CZM0613. Where is the problem ?

Both CZM1613 and CZM0613 just indicate that compile has failed. Please answer to following questions.

- Do you have (working) ILE-C compiler?
- Do you have library QSYSINC?
- The compilation fails for all modules/programs?
- Can you find any other error message in compile list?
- What is version of your OS/400?

Waiting for your reply.

uzaemon@Japan

 
00507/00507 AAA00000  Tommaso Spalluto Error CZM0613                           
( 1)   02/11/17 00:39

During installation of TIFFLIB, when execute the command STRREXPRC SRCMBR(MAKE) SRCFILE(TIFFLIB/QREXSRC), it return the message CZM1613 and CZM0613. Where is the problem ?
Thanks
 
00506/00506 AAA00000  Nicolas Machado  Re^2: Question about Header character pr
( 1)   02/11/14 01:12  00503へのコメント

> Nicolas,
> 
> > Hello, I want to know where I can find information abou some Constants that SNDM uses, a_s_c , a_c , especials.
> 
> Those constants are defined at file SMTP/H. Use option 25 of PDM to find the string.
> 
> > Because I want to know why I can't use "(" , "," in the header of the mail.
> 
> Which header? Latest SNDM (1.35) should allow those characters (especials、( ) < > @ , ; : " / [ ] ? . = ). I could use them as follows.
> 
> > SNDM FROM(AAA.BBB@NOWHERE.COM '(UZAEMON,NAME@JAPAN.COM)') TO((CCC.DDD@ANYW
>   HERE.COM '(SOMEBODY,ELSE@US.COM)')) FILE(QDDSSRC) SUBJECT('(This is a test
>   ,,,,.)') DEBUG(*YES)
>   Mail sent.
> 
> (Debug output, "￡" is CRLF)
> 
> S->[From: "=?US-ASCII?Q?=28UZAEMON=2CNAME=40JAPAN=2ECOM=29?=" <AAA.BBB@NOWHERE.COM>￡To: "=?US-ASCII?Q?=]
>    [28SOMEBODY=2CELSE=40US=2ECOM=29?=" <CCC.DDD@ANYWHERE.COM>￡Subject: =?US-ASCII?Q?=28This_is_a_test=2]
>    [C=2C=2C=2C=2E=29?=￡Date: Sat, 9 Nov 2002 23:34:23 +0900 ￡MIME-Version: 1.0￡Content-Type: text/pla]
>    [in; charset="ISO-2022-JP"￡X-Mailer: SMTP Client for IBM AS400  version 1-35 2002-05-06￡￡\(J     A]
> 
> uzaemon@Japan

Thanks, I' will try 1.35, I'm on 1.33 and I make some changes to allow HTML body messages.

Best Regards.

 
00505/00505 AAA00000  Nicolas Machado  Re^2: Limit of 30 To recipients         
( 1)   02/11/14 01:07  00504へのコメント

> Nicolas,
> 
> > Helo, is there any limit for the 30 Recipients, can I uprise that to 99???
> 
> Yes, assuming that you can modify the program by yourself and CPP allows the length of command string. See SNDM command help (Restrictions, 2) for the reason of the limitation.
> 
> uzaemon@Japan

Thank you.
 
00504/00504 AAA00000  uzaemon          Re: Limit of 30 To recipients           
( 1)   02/11/10 00:14  00502へのコメント  コメント数：1
Nicolas,

> Helo, is there any limit for the 30 Recipients, can I uprise that to 99???

Yes, assuming that you can modify the program by yourself and CPP allows the length of command string. See SNDM command help (Restrictions, 2) for the reason of the limitation.

uzaemon@Japan

 
00503/00503 AAA00000  uzaemon          Re: Question about Header character prob
( 1)   02/11/10 00:03  00501へのコメント  コメント数：1
Nicolas,

> Hello, I want to know where I can find information abou some Constants that SNDM uses, a_s_c , a_c , especials.

Those constants are defined at file SMTP/H. Use option 25 of PDM to find the string.

> Because I want to know why I can't use "(" , "," in the header of the mail.

Which header? Latest SNDM (1.35) should allow those characters (especials、( ) < > @ , ; : " / [ ] ? . = ). I could use them as follows.

> SNDM FROM(AAA.BBB@NOWHERE.COM '(UZAEMON,NAME@JAPAN.COM)') TO((CCC.DDD@ANYW
  HERE.COM '(SOMEBODY,ELSE@US.COM)')) FILE(QDDSSRC) SUBJECT('(This is a test
  ,,,,.)') DEBUG(*YES)
  Mail sent.

(Debug output, "￡" is CRLF)

S->[From: "=?US-ASCII?Q?=28UZAEMON=2CNAME=40JAPAN=2ECOM=29?=" <AAA.BBB@NOWHERE.COM>￡To: "=?US-ASCII?Q?=]
   [28SOMEBODY=2CELSE=40US=2ECOM=29?=" <CCC.DDD@ANYWHERE.COM>￡Subject: =?US-ASCII?Q?=28This_is_a_test=2]
   [C=2C=2C=2C=2E=29?=￡Date: Sat, 9 Nov 2002 23:34:23 +0900 ￡MIME-Version: 1.0￡Content-Type: text/pla]
   [in; charset="ISO-2022-JP"￡X-Mailer: SMTP Client for IBM AS400  version 1-35 2002-05-06￡￡\(J     A]

uzaemon@Japan

 
00502/00502 AAA00000  Nicolas Machado  Limit of 30 To recipients               
( 1)   02/11/09 02:22

Helo, is there any limit for the 30 Recipients, can I uprise that to 99???
Best Regards
 
00501/00501 AAA00000  Nicolas Machado  Question about Header character problem 
( 1)   02/11/08 23:21

Hello, I want to know where I can find information abou some Constants that SNDM uses, a_s_c , a_c , especials.
Because I want to know why I can't use "(" , "," in the header of the mail.
error 135 of SNDM.
Best regards
 
00500/00500 AAA00000  uzaemon          Re^10: Sndm speed                       
( 1)   02/11/07 21:16  00499へのコメント

Tam疽,

Thank you for your mail which shows the result of running the test program in your environment.

Below is comparison of API execution time. My system is iSeries 820, 2-way, 4GB memory, V5R2.

API name       |My System|Your System| Ratio 
---------------|---------|-----------|------
socket()       |       56|        112|   2.0
gethostbyname()|      224|     184904| 825.5
connect()      |      216|      17336|  80.3
read()         |     1648|     710112| 430.9
write() HELO   |      120|         96|   0.8
read()         |       16|     105128|6570.5
write() MAIL   |       64|        352|   5.5
read()         |     8776|    2871008| 327.1
write() RCPT   |       96|        168|   1.8
read()         |    10208|    1747184| 171.2
write() QUIT   |       40|        160|   4.0
read()         |        0|         16|   N/A
close()        |       64|        384|   6.0

I don't know the accuracy of software clock of ILE-C program, but generally, read() operations are much slower than other APIs (and my system), especially for "MAIL" and "RCPT" SMTP commands. 

Unfortunately, IBM does not support socket APIs' usage with ILE-RPG compiler which SNDM command utilizes extensively. Please contact your support channel and ask IBM if this is normal behavior.

uzaemon@Japan

 
00499/00499 AAA00000  uzaemon          Re^9: Sndm speed                        
( 1)   02/11/04 21:50  00498へのコメント  コメント数：1
Tam疽,

> > OK... one more question. Do you have ILE-C compiler?
> Yes, we have ILE-C compiler.

Good! Could you compile and run small ILE-C test program at http://homepage1.nifty.com/uzaemon/testsmtp.c as follows?

First, put the source code (by FTP, copy&paste, file transfer, etc.) to SMTP/QCSRC.TESTSMTP, compile the program using CRTBNDC command.

> CRTBNDC PGM(SMTP/TESTSMTP) SRCFILE(SMTP/QCSRC) OUTPUT(*print) DBGVIEW(*AL
  L)

Then, run the test program as follows. The first parameter is your SMTP server name and latter parameters are SMTP commnads. 

> CALL PGM(SMTP/TESTSMTP) PARM(ISERIES 'HELO FOO.COM' 'MAIL FROM:<BAR@NOWHE
  RE.COM>' 'RCPT TO:<SOMEBODY@ELSEWHERE.COM>' QUIT)

The test program prints its activities to 5250 screen.

  socket() opened. [56 microsec]
  gethostbyname() successful. [224 microsec]
  connection established. [216 microsec]
  R<-220 ISERIES.XXX.COM running IBM OS/400 SMTP V05R02M00 on Fri,  1 Nov 2002 22:33:38 +0900. [1648 microsec]
  S->HELO FOO.COM [120 microsec]
  R<-250 ISERIES.XXX.COM. [16 microsec]
  S->MAIL FROM:<BAR@NOWHERE.COM> [64 microsec]
  R<-250 OK. [8776 microsec]
  S->RCPT TO:<SOMEBODY@ELSEWHERE.COM> [96 microsec]
  R<-250 OK. [10208 microsec]
  S->QUIT [40 microsec]
  R<-221 ISERIES.XXX.COM running IBM OS/400 SMTP V05R02M00.  Connection closing. [0 microsec]
  socket() closed. [64 microsec]
  Press ENTER to end terminal session.

Please let me know above output from the test program in your environment.

uzaemon@Japan

 
00498/00498 AAA00000  Tam疽 Endrey     Re^8: Sndm speed                        
( 1)   02/11/04 18:38  00497へのコメント  コメント数：2
> Tam疽,
> 
> > I think they are correct. But I have a question. If I use AS/400 as SMTP gateway (no mail server, only gateway to route an e-mail to mail server) is the same that AS/400 is the local SMTP server? Maybe I use SndM wrongly?
> 
> INHO, SMTP "gateway" is actually normal SMTP server. SMTP server simply forwards (relays) mail to upper SMTP server if the mail recipient's domain is not the same.
> 
> > > - What is the version and PTF level of your OS/400?
> > V4R5M0 MF27767
> 
> MF27767 is dated 02/06/24 so it is not so obsolete.
> 
> > A question: why I don't compile source with ccsid(870). Before compiling, I need change job ccsid to 65535.
> 
> I18N of OS/400 sometimes causes annoying side-effect. Some special characters such as "[" might have been unexpectedly translated.
> 
> > I sent logs.
> 
> Thank you, and I confirmed that the slow-down always occurs at exactly the same point, where waiting response to "MAIL FROM:" and "RCPT TO:" SMTP commands...
> 
> OK... one more question. Do you have ILE-C compiler?
Yes, we have ILE-C compiler.

> 
> uzaemon@Japan

 
00497/00497 AAA00000  uzaemon          Re^7: Sndm speed                        
( 1)   02/10/31 22:45  00496へのコメント  コメント数：3
Tam疽,

> I think they are correct. But I have a question. If I use AS/400 as SMTP gateway (no mail server, only gateway to route an e-mail to mail server) is the same that AS/400 is the local SMTP server? Maybe I use SndM wrongly?

INHO, SMTP "gateway" is actually normal SMTP server. SMTP server simply forwards (relays) mail to upper SMTP server if the mail recipient's domain is not the same.

> > - What is the version and PTF level of your OS/400?
> V4R5M0 MF27767

MF27767 is dated 02/06/24 so it is not so obsolete.

> A question: why I don't compile source with ccsid(870). Before compiling, I need change job ccsid to 65535.

I18N of OS/400 sometimes causes annoying side-effect. Some special characters such as "[" might have been unexpectedly translated.

> I sent logs.

Thank you, and I confirmed that the slow-down always occurs at exactly the same point, where waiting response to "MAIL FROM:" and "RCPT TO:" SMTP commands...

OK... one more question. Do you have ILE-C compiler?

uzaemon@Japan

 
00496/00496 AAA00000  Tam疽 Endrey     Re^6: Sndm speed                        
( 1)   02/10/30 21:48  00495へのコメント  コメント数：4
> Tam疽,
> 
> According to your investigation, only combination of SNDM and "Local SMTP server" has problem.
>  SNDM -> Local SMTP server ...slow
>  SNDM -> Remote SMTP server ...fast
>  Other mailer -> Local SMTP server ...fast
>  SNDDST -> Local SMTP server ...fast
> 
> Assumptions:
> - "Local SMTP server" is your AS/400.
> - You are running SNDM and SNDDST on the same AS/400 (Local SMTP server). 
> - "Remote SMTP Server" is something else, may be UNIX or Windows or OS/400.
> - You are always specifying the same recipient.
> 
> >... but I don't understand, why it works slowly with SmtpHosT(*LocalHost) parameter.  
> 
> I also don't know why... Please answer to questions below:
> 
> - Are above assumptions correct?
I think they are correct. But I have a question. If I use AS/400 as SMTP gateway (no mail server, only gateway to route an e-mail to mail server) is the same that AS/400 is the local SMTP server? Maybe I use SndM wrongly?
Remote SMTP server is Windows (Microsoft Exchange).

> - What is the version and PTF level of your OS/400?
V4R5M0 MF27767

> - What happens if you change line 16 of SMTP/QREXSRC.MAKE from "OPTION = 0" to "OPTION = 1" and recompile the distribution.
The situation is the same.
A question: why I don't compile source with ccsid(870). Before compiling, I need change job ccsid to 65535.

> - If you have another AS/400, do you encounter the same slow-down?
Yes.

> - Does the slow-down occurs always, or occasionally?
Always.

> - If the slow-down always happens, please run the SNDM twice and send two debug logs to my mail address.
I sent logs.

> 
> I'm not sure but I believe most AS/400 shops use SNDM without such phenomenon, so this problem may be specific to your AS/400 system.
I think so, that problem is specific for me. I have not enough knowledge about tpc/ip, smtp, e-mail, so I'm not sure, that my use of Sndm is correct.

> 
> Waiting for your reply.
> 
> uzaemon@Japan

 
00495/00495 AAA00000  uzaemon          Re^5: Sndm speed                        
( 1)   02/10/29 21:11  00494へのコメント  コメント数：5
Tam疽,

According to your investigation, only combination of SNDM and "Local SMTP server" has problem.
 SNDM -> Local SMTP server ...slow
 SNDM -> Remote SMTP server ...fast
 Other mailer -> Local SMTP server ...fast
 SNDDST -> Local SMTP server ...fast

Assumptions:
- "Local SMTP server" is your AS/400.
- You are running SNDM and SNDDST on the same AS/400 (Local SMTP server). 
- "Remote SMTP Server" is something else, may be UNIX or Windows or OS/400.
- You are always specifying the same recipient.

>... but I don't understand, why it works slowly with SmtpHosT(*LocalHost) parameter.  

I also don't know why... Please answer to questions below:

- Are above assumptions correct?
- What is the version and PTF level of your OS/400?
- What happens if you change line 16 of SMTP/QREXSRC.MAKE from "OPTION = 0" to "OPTION = 1" and recompile the distribution.
- If you have another AS/400, do you encounter the same slow-down?
- Does the slow-down occurs always, or occasionally?
- If the slow-down always happens, please run the SNDM twice and send two debug logs to my mail address.

I'm not sure but I believe most AS/400 shops use SNDM without such phenomenon, so this problem may be specific to your AS/400 system.

Waiting for your reply.

uzaemon@Japan

 
00494/00494 AAA00000  Tam疽 Endrey     Re^4: Sndm speed                        
( 1)   02/10/28 17:57  00493へのコメント  コメント数：6

> I don't know why but it looks like socket read() operation is taking time. Can you try two more tests?
> 
> - Send a mail from the same AS/400 using SNDDST command.
> - Send a mail specifying other SMTP server (not your local mail server) using SNDM command.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

SndDst works correctly and fast.

If I used a Sndm with remote mail server (SmtpHost(RmtMailSvr) parameter) I found, that your program's speed is good, same as that SndDst. So I can use SndM in this mode, but I don't understand, why it works slowly with SmtpHosT(*LocalHost) parameter.  

Tam疽


 
00493/00493 AAA00000  uzaemon          Re^3: Sndm speed                        
( 1)   02/10/25 20:11  00492へのコメント  コメント数：7
Tam疽,

> > - Are you using local SMTP server or remote SMTP server?
> I'm using local SMTP server.
> > - Do other mail clients run faster than SNDM with the same SMTP server?
> Yes, they run faster.
> 
> There are some rows from debug log where the program runs very slow.
> 
> 15:54:15.864|S->[MAIL FROM:<VENUS@EBH.HU>肛]  
> 15:54:15.865|  wrote 26 bytes.                
> 15:54:44.081|R<-[250 OK.肛]                   
> 
> and the other part
> 
> 15:54:44.082|S->[RCPT TO:<ENDREYT@ERSTEBANK.COM>肛]  
> 15:54:44.082|  wrote 33 bytes.                       
> 15:55:12.288|R<-[250 OK.肛]                          

I don't know why but it looks like socket read() operation is taking time. Can you try two more tests?

- Send a mail from the same AS/400 using SNDDST command.
- Send a mail specifying other SMTP server (not your local mail server) using SNDM command.

Waiting for your reply.

uzaemon@Japan

 
00492/00492 AAA00000  Tam疽 Endrey     Re^2: Sndm speed                        
( 1)   02/10/24 18:13  00491へのコメント  コメント数：8
> Tam疽,
> 
> > I tried use your sndm utility. It works fine, but very slowly. The program sends one message during 55-60 seconds.
> > Can You tell me why?
> 
> In my experience, SNDM works fast enough.
> 
> - Are you using local SMTP server or remote SMTP server?
I'm using local SMTP server.
> - Do other mail clients run faster than SNDM with the same SMTP server?
Yes, they run faster.

There are some rows from debug log where the program runs very slow.

15:54:15.864|S->[MAIL FROM:<VENUS@EBH.HU>肛]  
15:54:15.865|  wrote 26 bytes.                
15:54:44.081|R<-[250 OK.肛]                   

and the other part

15:54:44.082|S->[RCPT TO:<ENDREYT@ERSTEBANK.COM>肛]  
15:54:44.082|  wrote 33 bytes.                       
15:55:12.288|R<-[250 OK.肛]                          


If you need I can send detail spool file.

> 
> Waiting for your reply.
> 
> uzaemon@Japan

 
00491/00491 AAA00000  uzaemon          Re: Sndm speed                          
( 1)   02/10/23 22:18  00490へのコメント  コメント数：9
Tam疽,

> I tried use your sndm utility. It works fine, but very slowly. The program sends one message during 55-60 seconds.
> Can You tell me why?

In my experience, SNDM works fast enough.

- Are you using local SMTP server or remote SMTP server?
- Do other mail clients run faster than SNDM with the same SMTP server?

Waiting for your reply.

uzaemon@Japan

 
00490/00490 AAA00000  Tam疽 Endrey     Sndm speed                              
( 1)   02/10/22 20:23

I tried use your sndm utility. It works fine, but very slowly. The program sends one message during 55-60 seconds.
Can You tell me why?
 
00489/00489 AAA00000  pedro            Re^2: SNDM - 301 negative response from 
( 1)   02/10/17 22:08  00488へのコメント

> pedro,
> 
> > S->[RCPT TO:<PEDERETE@OZU.ES>｢｣]               
> > wrote 27 bytes.                                         
> > 301 negative response from SMTP server ( RSP[550 5.7.1 Unable to relay for PEDERETE@OZU.ES｢｣] REQ[RCPT TO:<PEDER                                                 
> > Program detected fatal error.                             
> >   tried to close socket. rc=0.                            
> >                                                           
> > Program aborted.
> > Than happens?                                           
> 
> See message "300. Re: -301 negative........ ( RSP[554" in this BBS. Hope this helps.
> 
> uzaemon@Japan
Ok. thanks.
 
00488/00488 AAA00000  uzaemon          Re: SNDM - 301 negative response from SM
( 1)   02/10/17 20:47  00487へのコメント  コメント数：1
pedro,

> S->[RCPT TO:<PEDERETE@OZU.ES>｢｣]               
> wrote 27 bytes.                                         
> 301 negative response from SMTP server ( RSP[550 5.7.1 Unable to relay for PEDERETE@OZU.ES｢｣] REQ[RCPT TO:<PEDER                                                 
> Program detected fatal error.                             
>   tried to close socket. rc=0.                            
>                                                           
> Program aborted.
> Than happens?                                           

See message "300. Re: -301 negative........ ( RSP[554" in this BBS. Hope this helps.

uzaemon@Japan

 
00487/00487 AAA00000  pedro            301 negative response from SMTP         
( 1)   02/10/17 17:45

          
S->[RCPT TO:<PEDERETE@OZU.ES>｢｣]               
wrote 27 bytes.                                         
301 negative response from SMTP server ( RSP[550 5.7.1 Unable to relay for PEDERETE@OZU.ES｢｣] REQ[RCPT TO:<PEDER                                                 
Program detected fatal error.                             
  tried to close socket. rc=0.                            
                                                          
Program aborted.
Than happens?                                           
 
00486/00486 AAA00000  K. Sterrenburg   Re^2: SPL2STMF Error CPF6DF8 (*IPDS)    
( 1)   02/10/07 22:12  00485へのコメント

Thanks. I changed the docs into AFPDS and it worked immediately. I know this is the wrong place to ask, but is there someone who is able to explain the limitiations in this approach, from changing IPDS in AFPDS ?  
 
00485/00485 AAA00000  uzaemon          Re: SPL2STMF Error CPF6DF8 (*IPDS)      
( 1)   02/10/05 14:57  00484へのコメント  コメント数：1
Sterrenburg,

> When I try to SPL2STMF on a IPDS spoolfile containg barcodes, I get a CPF6DF8 error.
> I'm running on OS-400 5.1
> The debug option gives the following
> 
> 
> | QUSBAVL = 0 splbuflen = 0 hptosolena = 44 hptxbuflena = 0
> |  Option specific input information / device = '*NONE' job = QPADEV003Q/LOGAS
> |   spoolfile = 'PROCOP1$' spoolNo = -1 pages = 0 WSCST = '*LIBL/QWPTIFFPB' Mm
> |  Option specific output information / transform file = 0 pass data = 0
> |hptopt = 30
> | buffer info : No = 1 len = 1389 numentry = 1 offset = 224 size = 1293 / page
> | QUSBAVL = 66 splbuflen = 1293 hptosolena = 44 hptxbuflena = 0 pages(OSI) = 1
> |** reset hpt - process option 50 **
> |
> |Fatal error : API QwpzHostPrintTransform failed : CPF6DF8 hptopt = 30
> 
> Perhaps you know what I'm missing

You are missing previous messagess in this BBS. See "168. Re: Re. *IPDS on AS/400" and "397. Re: Printing AS/400 spool file (IPDS) to PCL/PS via TCP/IP".

uzaemon@Japan

 
00484/00484 AAA00000  Kornee Sterrenbu SPL2STMF Error CPF6DF8                  
( 1)   02/10/05 00:53

When I try to SPL2STMF on a IPDS spoolfile containg barcodes, I get a CPF6DF8 error.
I'm running on OS-400 5.1
The debug option gives the following


| QUSBAVL = 0 splbuflen = 0 hptosolena = 44 hptxbuflena = 0                   
|  Option specific input information / device = '*NONE' job = QPADEV003Q/LOGAS
|   spoolfile = 'PROCOP1$' spoolNo = -1 pages = 0 WSCST = '*LIBL/QWPTIFFPB' Mm
|  Option specific output information / transform file = 0 pass data = 0      
|hptopt = 30                                                                  
| buffer info : No = 1 len = 1389 numentry = 1 offset = 224 size = 1293 / page
| QUSBAVL = 66 splbuflen = 1293 hptosolena = 44 hptxbuflena = 0 pages(OSI) = 1
|** reset hpt - process option 50 **                                          
|                                                                             
|Fatal error : API QwpzHostPrintTransform failed : CPF6DF8 hptopt = 30    

Perhaps you know what I'm missing     
 
00483/00483 AAA00000  uzaemon          Re: sndm (PC local file as attachment)  
( 1)   02/09/27 21:32  00482へのコメント

Cristiano,

> I'm tryng to use your utility in subject, bat i have this
> problem: when i attach a file which is not on AS/400 (it's
> on a server pc) it gives me an error. Can i do this thing or i can attach only AS/400 files??
> 
> The error is: 
> Command failed. reason -107 failed to retrieve     
>   attachment-file information (PATH-\10.6.152.51\c:\lang.txt, 3025: This path doesn't exist.           

I'm not sure if you are using NetServer client or NFS client on OS/400... Have you configured your OS/400 to have an access to "\10.6.152.51\c:\lang.txt"? You may use WRKLNK or EDTF command to open the file.

Waiting for your reply.

uzaemon@Japan

 
00462/00462 AAA00000  Chuck Lewis      How do you check SNDM status on AS/400 ?
( 1)   02/08/16 03:58

Hello,

Downloaded the SNDM command today. VERY nice and the install directions are the best I've seen for stuff like this !

So I tried SNDM and it says it sent an email but I have yet to receive it. How/where do I check to see what is going on with this on the AS/400 ? I've looked and looked through all the TCP/IP stuff, etc, and cannot find anything. 

Thanks !

Chuck
 
00461/00461 AAA00000  uzaemon          Re^9: *Userascii AS/400 spools.         
( 1)   02/08/10 11:25  00458へのコメント

Feedback after 11 months! However, better than NO feedback.

See "460. Re: SPL2STMF Chinese language".

uzaemon@Japan

 
00460/00460 AAA00000  uzaemon          Re: SPL2STMF Chinese language           
( 1)   02/08/10 00:18  00459へのコメント  コメント数：2
Jordi,

> Is it possible to make a PCL with Chinese characters (Chinese traditional)?
> 
> And is it possible to make a PCL code without Double byte (for HP Laserjet3 printer) for Chinese language ?

As stated at "95. *IPDS spool files", SPL2STMF is just a front-end to IBM supplied API. Contact your support channel and ask if IBM provides WSCST for your specific purpose.

Possibilities are, you may try QSYS/QWPHPDBCS to generate DBCS PCL output though I don't know if it support Traditional Chainese.

uzaemon@Japan

 
00459/00459 AAA00000  Jordi Carreras   SPL2STMF Chinese language               
( 1)   02/08/09 16:45

Hi Uzaemon,

Sorry if I didn't say to you what kind of solution I done about SPL2STMF with *USERASCII spools. I decided for your first solution, I'm using a WSCSCT named NONE. It was a good decision.

Thanks for all, and sorry again.

But I have a question for you:

Is it possible to make a PCL with Chinese characters (Chinese traditional)?

And is it possible to make a PCL code without Double byte (for HP Laserjet3 printer) for Chinese language ?

I'm waiting for your news.

Best regards.


Jordi Carreras
Barcelona (Spain)

 
00458/00458 AAA00000  Jordi Carreras   Re^8: *Userascii AS/400 spools.         
( 1)   02/08/09 16:37  00240へのコメント  コメント数：1
Hi Uzaemons,

Sorry if I didn't say to you what kind of solution I done.

I decided for your first solution, I'm using a WSCSCT named NONE. It was a good decision.

Thanks for all.

But I have a question for you, very interesant:

- Is it possible to make a PCL with Chinese characters (Chinese traditional)?

I'm waiting for your news.

Best regards.

Jordi
 
00457/00457 AAA00000  uzaemon          Re: CRTCSVFについて (キー順)            
( 1)   02/08/06 20:51  00456へのコメント

Sudoさん、

> 論理ファイルをCSVファイルに変換する場合もキー順という事ではなく
> てレコードの追加順に作成されるのでしょうか？

実際に試せばすぐ分かりますが、アクセスパスは無視されます。事前にCPYFRMQRYFなどでワークファイルを作り、これを変換するようにしてはいかがでしょうか。

uzaemon@Japan

 
00456/00456 AAA00000  HiroyoshiSudo    CRTCSVFについて                         
( 1)   02/08/06 16:02

はじめまして。。大変お世話になっております。
WEB用の帳票を作る為にCSVファイルが必要に
なったので、利用させていただいているのですが、
論理ファイルをCSVファイルに変換する場合もキー順という事ではなく
てレコードの追加順に作成されるのでしょうか？
すみません、教えていただけませんでしょうか？
 
00455/00455 AAA00000  Rod Orr          Re^6: minizip in batch mode             
( 1)   02/08/05 08:55  00451へのコメント

Hi Uzaemon,

FYI - re possible error:
 
Member zlib/qcsrc minizip

0248.00  zi.tmz_date.tm_sec  = zi.tmz_date.tm_min
                             = zi.tmz_date.tm_hour =      
0249.00  zi.tmz_date.tm_mday = zi.tmz_date.tm_min 
                             = zi.tmz_date.tm_year = 0;  

I think the second zi.tmz_date.tm_min on stmt 0249.00
should be          zi.tmz_date.tm_mon ??

I have also being talking to Simon Coulter and he has a port of zlib which has been converted into a service program and wrappered into an os400 command and CPP. He has offered me a copy so I wont be proceeding with modifying minizip.

Regards Rod Orr

> Rod,
> 
> > ... Anyway, before I make any mods I thought it best to discuss and clear up these possible errors with you. 
> 
> Sorry but I'm so busy on my regular job that cannot spare my time to discuss about your specific project. Also, I need to upgrade zlib for OS/400 to 1.1.4  firstly if I had time.
> 
> > I don't know your email address.
> 
> My mail address is open at the subject line of each post of this BBS...
> 
> uzaemon@Japan

 
00482/00482 AAA00000  Cristiano Nicoli sndm                                    
( 1)   02/09/26 22:55

Hello, 

I'm tryng to use your utility in subject, bat i have this
problem: when i attach a file which is not on AS/400 (it's
on a server pc) it gives me an error. Can i do this thing or i can attach only AS/400 files??

The error is: 
Command failed. reason -107 failed to retrieve     
  attachment-file information (PATH-\10.6.152.51\c:\lang.txt, 3025: This path doesn't exist.           

Thanks in advance.

Cristiano.

 
00481/00481 AAA00000  uzaemon          Re: spl2stmf (Pointer not set for ...)  
( 1)   02/09/24 21:16  00480へのコメント

Bresciani,

> This is the error log:
> -Stream file /tmp/spl2stmfrp.tif removed. 
> -Pointer not set for reference position.
> -Error log updated.
> -Printer PRT01 not found. the out queue has been changed to QPRINT in QGPL library.
> -Out queue QSCAPAROQ already exist in QSC6633703 library.
> -File QAPDFCDP already exist in QSC6633703 library.
> -File QAPDFCDP has not been created in QSC6633703 library. 
> -Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
> hptopt = 30 

Please provide more information.

- What is the version of your OS/400?
- What version of SPL2STMF are you using?
- Did you modify the source code?
- Did you MAKE the utility by yourself?
- If you have another AS/400, can you try to recreate your problem?
- Does the problem occur to all (SCS and AFPDS) spooled files or only specific spooled file?
- What happens if you use other IBM supplied WSCSTs? 
- What happens if you convert simple spooled file, say, created by "WRKSYSSTS *PRINT" command?
- What do you see in the last part of debug print output of SPL2STMF command (specify DEBUG(*YES))?
- Can you configure and use LPR or RMTOUTQ (specifying problematic spooled file and QWPTIFFG4) to invoke HPT?

Waiting for your reply.

uzaemon@Japan

 
00480/00480 AAA00000  Ermanno Brescian spl2stmf                                
( 1)   02/09/24 02:59

hello, uzaemon
This is the error log:
-Stream file /tmp/spl2stmfrp.tif removed. 
-Pointer not set for reference position.
-Error log updated.
-Printer PRT01 not found. the out queue has been changed to QPRINT in QGPL library.
-Out queue QSCAPAROQ already exist in QSC6633703 library.
-File QAPDFCDP already exist in QSC6633703 library.
-File QAPDFCDP has not been created in QSC6633703 library. 
-Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
hptopt = 30 

The input file is *afpds format. the parameter *wscst is QWPTIFFG4
Thanks. 
 
00479/00479 AAA00000  uzaemon          Re: spl2stmf (unreadable language)      
( 1)   02/09/23 22:53  00478へのコメント

Bresciani,

Is this Italian? As stated at the top of this BBS, I don't understand Italian, so please translate the messages to English and post again (and provide message ID of each line).

> I have a problem whith creata tif file:
> 
> Stream file /tmp/spl2stmfrp.tif removed. 
> Puntatore non impostato per ubicazione di riferimento.
> Registrazione problemi aggiornata.
> Non ・stata trovata la stampante PRT01. La coda di emissione ・stata
>   modificata con QPRINT nella libreria QGPL.
> Esiste gi・la coda di emissione QSCAPAROQ nella libreria QSC6633703.
> Il file QAPDFCDP nella libreria QSC6633703 gi・esiste.
> Il file QAPDFCDP non ・stato creato nella libreria QSC6633703.
> Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
>   hptopt = 30 
> 
> Thanks.

Waiting for your reply.

uzaemon@Japan

 
00478/00478 AAA00000  Ermanno Brescian spl2stmf                                
( 1)   02/09/23 22:27

I have a problem whith creata tif file:

Stream file /tmp/spl2stmfrp.tif removed.                            
Puntatore non impostato per ubicazione di riferimento.              
Registrazione problemi aggiornata.                                  
Non  stata trovata la stampante PRT01. La coda di emissione  stata
  modificata con QPRINT nella libreria QGPL.                        
Esiste gi la coda di emissione QSCAPAROQ nella libreria QSC6633703.
Il file QAPDFCDP nella libreria QSC6633703 gi esiste.              
Il file QAPDFCDP non  stato creato nella libreria QSC6633703.      
Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
  hptopt = 30 

Thanks.                                                      
 
00477/00477 AAA00000  uzaemon          Re: zlibのインストールについて(ILE-Cコ 
( 1)   02/09/20 22:36  00476へのコメント

yunoさん、

> そもそも、カレントバージョンのＯＳで使える
> CRTCMODコマンドがないんです。Cのコンパイラが
> 必要なのでしょうか？

はい、zlibをコンパイルするにはILE-Cコンパイラが必要です。

Homepageに「Most utilites are distributed without executables. You need ILE compiler to use utilities.」とあり、かつzlibの「language」の部分に「ILE-C」と明示しています。

uzaemon@Japan

 
00476/00476 AAA00000  yuno             zlibのインストールについて              
( 1)   02/09/20 21:53

as400でzlibを使いたいのですが、うまくコンパイルできません。
STRREXPRC SRCMBR(MAKEORG)
そもそも、カレントバージョンのＯＳで使える
CRTCMODコマンドがないんです。Cのコンパイラが
必要なのでしょうか？
 
00475/00475 AAA00000  uzaemon          Re: spool not rotating when necessary   
( 1)   02/09/13 18:30  00474へのコメント

David,

> i'm generating pdf's from as400 spools with spl2stmf (creating a .tif) and tiff2pdf. When the spool is 198 columns it should rotate and print in landscape but it isn't... the text is reduced to fit a vertical page...

TIFF2PDF sets page width and height at line 107 and 108 of TIFFLIB/TIFF2PDF(TIFF2PDFC). Swapping these values would make landscape output, I guess.

0107.00 #define A4W 595.0
0108.00 #define A4H 842.0

Try it and let me know the result.

uzaemon@Japan

 
00474/00474 AAA00000  David            spool not rotating when necessary       
( 1)   02/09/13 00:01

Hello, uzaemon...

i'm generating pdf's from as400 spools with spl2stmf (creating a .tif) and tiff2pdf. When the spool is 198 columns it should rotate and print in landscape but it isn't... the text is reduced to fit a vertical page...

any idea?

Thanks!

David
 
00473/00473 AAA00000  uzaemon          Re: instead of sending message from file
( 1)   02/09/09 21:59  00472へのコメント

Rizwan,

> ... I went through the source it seems that it will take some time to digest the functionality.   
> Would appreicate if you could take the time to give me a outline..

I put outline of SNDM at  http://homepage1.nifty.com/uzaemon/SNDM.gif for you.

Hope this helps.

uzaemon@Japan

 
00472/00472 AAA00000  Rizwan           instead of sending message from file .. 
( 1)   02/09/08 22:28

Hello uzaemon
I just started to use SNDM quite a neat tool..
Currently SNDM sends messages from a source physical file or PF.
But i want SNDM to send message given as input (as in SENDMAIL utility if you know) or from an IFS instead of using a Source Physical file member .I went through the source it seems that it will take some time to digest the functionality.   
Would appreicate if you could take the time to give me a outline..
Thanks very much 
Rizwan
 
00471/00471 AAA00000  ys               Re^2: TIFF2PDFのサイズ制限について      
( 1)   02/08/22 14:46  00469へのコメント

そうでした。すみません。
でも、解決しました。
お騒がせしました。
 
00470/00470 AAA00000  Masafumi Kiuchi( Re^2: CRTCSVFのソースについて           
( 1)   02/08/21 22:37  00467へのコメント

uzaemon@Japan様

> なお、こちらのBBSではプログラミングのQ&Aはしていませんが、日本語でSTMFを扱う場合はいくつか考慮すべき点があるので十分配慮/テストすることをお勧めします。(例えばSTMF生成時のCHRID(V5R1から?はCCSID)の設定、テキストモードでのread/writeの制限、EBCDIC<->ASCII変換時の文字列長の変化など...)
> 

お陰様で何とかできるようになりました。
今回の対象ファイルは、１レコード２４０バイトで大体１００レコード程度のものです。
今回の目的は固定長テキストのファイルをＩＦＳへ作成することでした。CPYTOPCDなどの既存のコマンドでは固定長指定すると改行コードが入らず、改行コードを指定するとフランクを詰めてしまったりと用件にどうしてもあいませんでした。
エミュレータのデータ転送ではなくIFSにこだわったのはSNDDSTコマンドを使用してＡＳのみで添付ファイルのメール送信を行いたかったからです。今秋にもV5R1へのバージョンアップが控えていますので注意して望みたいと思います。
どうもありがとうございました。


 
00469/00469 AAA00000  uzaemon          Re: TIFF2PDFのサイズ制限について        
( 1)   02/08/21 18:53  00468へのコメント  コメント数：1
> はじめまして。
> 現在TIFF2PDF1.14を使用してソフト開発を行っています。
> 
> 最近あった現象なのですが、
> 変換前のTIFFファイルの中に2MB以上のファイルがあった場合、
> 変換後のPDFファイルを閲覧すると、そのファイルのページで
> 「ファイル情報が不足しています」
> といったようなメッセージが出ます。しかも、実際にそのファイル
> が途中までしか変換されていないのです。
> 
> そこで質問です。
> 変換前のTIFFファイルに対するサイズ制限ってあるんでしょうか？
> また、あるとすればそのサイズはいかほどでしょうか？
> 
> よろしくお願いします。

こちらのホームページにあるTIFF2PDFのバージョン(TIFFLIB/TIFF2PDF.TIFF2PDFCの40行目)は1.11ですが、http://www.fastio.com/tiff2pdf.html あたりのTIFF2PDFと混同されていませんでしょうか？

uzaemon@Japan

 
00468/00468 AAA00000  ys               TIFF2PDFのサイズ制限について            
( 1)   02/08/20 21:48

はじめまして。
現在TIFF2PDF1.14を使用してソフト開発を行っています。

最近あった現象なのですが、
変換前のTIFFファイルの中に2MB以上のファイルがあった場合、
変換後のPDFファイルを閲覧すると、そのファイルのページで
「ファイル情報が不足しています」
といったようなメッセージが出ます。しかも、実際にそのファイル
が途中までしか変換されていないのです。

そこで質問です。
変換前のTIFFファイルに対するサイズ制限ってあるんでしょうか？
また、あるとすればそのサイズはいかほどでしょうか？

よろしくお願いします。
 
00467/00467 AAA00000  uzaemon          Re: CRTCSVFのソースについて             
( 1)   02/08/18 00:02  00464へのコメント  コメント数：1
Masafumiさん、

> ...CRTCSVFコマンドのソースを調べています。この中に出てくる'open'や'write'はどのマニュアルにのっていますでしょうか？...

各APIの最新情報はInformation Center(http://publib.boulder.ibm.com/html/as400/infocenter.html)で検索すれば見つかると思います。

CRTCSVFを作った頃(V3R7)は、以下のマニュアルを参照しました。

- OS/400 UNIX-Type APIs V4R3 (SC41-5875-02)
http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AM402/CCONTENTS?SHELF=QB3AYC02&DN=SC41-5875-02&DT=19980903152644

- C/C++ Run-Time Library Reference (SC09-2715-00)
http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AT800/CCONTENTS?SHELF=QB3AYC02&DN=SC09-2715-00&DT=19980629163934

当時はほとんどサンプルが存在せず、下記のマニュアルが唯一RPGのサンプルを掲載していました。

- System API Programming V4R1 (SC41-5800-00)
http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AVC00/CCONTENTS?SHELF=QB3AYC02&DN=SC41-5800-00&DT=19970312110239

いずれも昔(V4R3くらいまで)のCD-ROM(BookMgr)に入っていますが、英語版のマニュアルをWeb(http://publib.boulder.ibm.com/pubs/html/as400/online/homeeng1.htm)で見る事ができます。日本語に翻訳されているものもあるかもしれませんので、どうしても日本語が必要な場合は探してみてください。

また、私自身はほとんど既知の内容だったため使っていませんが、次のRedBookも参考になるかもしれません。

- Who Knew You Could Do That with RPG IV? A Sorcerer's Guide to System Access and More
http://publib-b.boulder.ibm.com/Redbooks.nsf/RedbookAbstracts/sg245402.html?OpenDocument

なお、こちらのBBSではプログラミングのQ&Aはしていませんが、日本語でSTMFを扱う場合はいくつか考慮すべき点があるので十分配慮/テストすることをお勧めします。(例えばSTMF生成時のCHRID(V5R1から?はCCSID)の設定、テキストモードでのread/writeの制限、EBCDIC<->ASCII変換時の文字列長の変化など...)

uzaemon@Japan

 
00466/00466 AAA00000  uzaemon          Re: Analog Version                      
( 1)   02/08/17 23:23  00463へのコメント

Alex,

> Is there a plan to port an newer version of analog to the iSeries??

No plan so far, because I don't have time to work with and Analog 4.11 has been working more than enough for me.

This is a good opportunity for you (and other AS/400 and iSeries programmers) to contribute ;-)

uzaemon@Japan

 
00465/00465 AAA00000  uzaemon          Re: How do you check SNDM status on AS/4
( 1)   02/08/17 23:18  00462へのコメント

Chuck,

Thank you for using SNDM.

> So I tried SNDM and it says it sent an email but I have yet to receive it. How/where do I check to see what is going on with this on the AS/400 ? I've looked and looked through all the TCP/IP stuff, etc, and cannot find anything. 

If SNDM complete successfully, it indicates that the SMTP server accepts request (send a mail) from SNDM. Then your SMTP server try to deliver your mail to the recipient(s).

Please investigate followings and let me know what you find.

1. Do you see any error message in SNDM debug output? (specify DEBUG(*YES))

2. Are you using OS/400 as mail (SMTP/POP3) server? If so, can you send a mail to other OS/400 users (or yourself)?

3. Can you send a mail using the same mail server from PC based mailers (such as Outlook Express or Netscape Messenger)?

Waiting for your reply.

uzaemon@Japan

 
00464/00464 AAA00000  Masafumi Kiuchi( CRTCSVFのソースについて                 
( 1)   02/08/16 20:04

作者様
いつぞやは大変お世話になりました。
ちょっとやりたいことがあって、CRTCSVFコマンドのソースを調べています。この中に出てくる'open'や'write'はどのマニュアルにのっていますでしょうか？'inconv'あたりは何とか探せたのですが....ＲＰＧから直接STMFにデータを書き込みたいなと思い調べています。
ご存じでしたら教えて頂けないでしょうか？
 
00463/00463 AAA00000  Alex             Analog Version                          
( 1)   02/08/16 18:01

Is there a plan to port an newer version of analog to the iSeries??
 
00601/00601 AAA00000  Franz Koch       SNDM                                    
( 1)   03/05/21 15:23

I have download the freeware SNDM and have a problem with ATTACHMENT: 
I tried:     \root\tmp\file
the error-message ist always "commen failed - reason 107"??
Can you help me.
Thank you very much.
Franz Koch
 
00600/00600 AAA00000  Kevin Miller     CRTCSVF                                 
( 1)   03/05/20 06:37

I tried to install CRTCSVF.  After FTPing the save file to the AS400 and displaying the objects, I don't see QTXTSRC.  I only see the following objects:  LICENSE, SOURCE, CRTCSVF, CRTCSVFHLP.  Do I need QTXTSRC?
 
00599/00599 AAA00000  yy               Re^2: CRTCSVFのエラーについて教えて下さ 
( 1)   03/05/18 13:54  00597へのコメント

> yyさん、
> 
> > CRTCSVFを実行したところ、次のようなエラーになりました。
> > 申し訳ありませんが、対応策をご教授願います。
> > Program aborted. 0/1 records processed, 0 error(s) found.
> > reason - iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 00942 - 3021 :  引き数に指定された値が正しくない。
> 
> CCSID 65535は無変換(特定の文字コードにタグ付けされていない)を表しているため、どのようにコード変換をしたら良いのかプログラムが判断できません。おそらくDSPJOBで見たジョブCCSIDおよびDSPFDで見たCCSIDのいずれも65535になっているのでは無いでしょうか。
> 
> 対応としてはDBFCCSIDパラメーターにデータベースの中に入っている文字フィールドのCCSID(日本語環境であれば通常5026)を明示的に指定するか、CHGJOB CCSID(5026)を実行後にCRTCSVFを実行してください。
> 
> uzaemon@Japan

yyです。回答ありがとうございました。
CCSID:65535はそういう意味だったんですね。
IBMがセットアップしたまま運用しているもので、何も知りませんでした。
教えていただいたように、CRTCSVF実行時に5026を指定したところ、うまくいきました。

今後とも宜しくお願いします。
 
00598/00598 AAA00000  uzaemon          Re: free software                       
( 1)   03/05/17 11:08  00595へのコメント

Kevin,

> do you want a reciprocal link from/to http://www.freeas400software.com

This site is link-free, so if you want to add a link to my homepage at your site, you can do so without any prior notice.

uzaemon@Japan

 
00597/00597 AAA00000  uzaemon          Re: CRTCSVFのエラーについて教えて下さい 
( 1)   03/05/17 11:04  00596へのコメント  コメント数：1
yyさん、

> CRTCSVFを実行したところ、次のようなエラーになりました。
> 申し訳ありませんが、対応策をご教授願います。
> Program aborted. 0/1 records processed, 0 error(s) found.
> reason - iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 00942 - 3021 :  引き数に指定された値が正しくない。

CCSID 65535は無変換(特定の文字コードにタグ付けされていない)を表しているため、どのようにコード変換をしたら良いのかプログラムが判断できません。おそらくDSPJOBで見たジョブCCSIDおよびDSPFDで見たCCSIDのいずれも65535になっているのでは無いでしょうか。

対応としてはDBFCCSIDパラメーターにデータベースの中に入っている文字フィールドのCCSID(日本語環境であれば通常5026)を明示的に指定するか、CHGJOB CCSID(5026)を実行後にCRTCSVFを実行してください。

uzaemon@Japan

 
00595/00595 AAA00000  Kevin Passey     free software                           
( 1)   03/05/16 00:33

do you want a reciprocal link from/to http://www.freeas400software.com
 
00594/00594 AAA00000  uzaemon          Re: Compiled version of TIFF2PDF (reques
( 1)   03/05/13 22:41  00593へのコメント

Jan,

> I don't have a C-compiler. Would you be so kind to compile TIFF2PDF for me? We have OS/400 V4R5M0.

Please read "529. Re: TIFF2PDF (no C compiler)", "508. Re: Error CZM0613 (tifflib)" and "135. Re: Tifflib and no c compiler" in this BBS.

Regards.

uzaemon@Japan

 
00593/00593 AAA00000  Jan van de Weije Compiled version of TIFF2PDF            
( 1)   03/05/13 00:04

I don't have a C-compiler. Would you be so kind to compile TIFF2PDF for me? We have OS/400 V4R5M0.

Regards,

Jan
 
00592/00592 AAA00000  uzaemon          Re: SNDM -211 no response from remote se
( 1)   03/04/13 00:31  00591へのコメント

Younas,

> The product is cool and was working fine til this morning. When some one changed the password for ALL users, who had password and userid same.
> 
> When, I tried to send mail after that. I got this error message
> 
> -211 no response from remote server

Basically, SMTP server does not require userid and password unless the server limit access by "POP before SMTP" or such.

Please confirm followings to determine your problem.

- What is your mail server, OS/400 or other mail server?

- If you use OS/400 as mail server, is that working properly? (SMTP jobs (QTSM*) are running, QSNADS subsystem is up, MSF is running, etc.)

- If you try to send a mail to the same mail server by using other mail client (e.g. Outlook Express or Netscape Messenger), do you see the same (or similar) error?

Waiting for your reply.

uzaemon@Japan

 
00591/00591 AAA00000  Younas Khan      SNDM -211 no response from remote server
( 1)   03/04/11 03:44

Hi,

The product is cool and was working fine til this morning. When some one changed the password for ALL users, who had password and userid same.

When, I tried to send mail after that. I got this error message

-211 no response from remote server

Please reply

Thanks

Younas
 
00712/00712 AAA00000  Aad Bruintjes    RCVM: Name of Attchment                 
( 1)   03/10/23 05:18

Hi,

I need to know the name of the attachment which has been received with the RCVM. Is there anyway I can change the Rcvmail.java so that I can list it in the RCVMLOG file?

Thanks,
Aad
 
00711/00711 AAA00000  uzaemon          Re^3: miniunz & 2GB+ files              
( 1)   03/10/22 23:36  00710へのコメント

Alistair,

> Any chance this could the default or will that cause a problem in some way?

I don't know... I only have a plan to port forthcoming "zlib 1.2" to OS/400 if I can spare my time.

If you need to unzip "> 2GB" file on your OS/400, it's a good chance for you to contribute new code :-)

uzaemon@Japan

 
00710/00710 AAA00000  Alistair Moir    Re^2: miniunz & 2GB+ files              
( 1)   03/10/22 00:28  00702へのコメント  コメント数：1
> > It would appear that that miniunz is uable to handle
> > files greater than 2GB in size.  I recieve a pointer
> > not set error.
 
> It is limitation of IFS APIs. According to iSeries
> Information Center, "When you develop in C-based
> languages, the prototypes for the 64-bit APIs are
> normally hidden. To use the xxxx64() API and the
> xxx64_t data type, you must compile the source with 
> the _LARGE_FILE_API defined."

Any chance this could the default or will that cause a problem in some way?
 
00709/00709 AAA00000  uzaemon          Re:  QwpzHostPrintTransform failed : CPF
( 1)   03/10/21 21:48  00706へのコメント

Carmel,

> When we try to run command SPL2STMF from *AFPDS spooled file,we get  Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2     
> hptopt=20.
> Previous messagges provides error CPF333B (system name is not valid).We are at v5r2/ptf level TL03021. We have reported to IBM technical services tis error.                                              

Please let me know when you get feedback from IBM. If they ask you to determine your problem, see "708. Re^5: SPL2STMF gives error CPF24B4".

uzaemon@Japan

 
00708/00708 AAA00000  uzaemon          Re^5: SPL2STMF gives error CPF24B4      
( 1)   03/10/21 21:45  00707へのコメント

Bob,

> with 300.000 same problem appears to me: CPF24B4

CPF24B4 indicates "Severe error while addressing parameter list." I suspect that your problem is in OS/400(HPT API). I recommend you to consider followings :

- apply latest Cum and HPT-related PTFs.
- there is no logical reason but just try to recompile SPL2STMF with lower optimization option.
- if you have an access to another AS/400 or iSeries, run the same thing and see what happens. Or you may ask your business partner or friend to recreate your problem.
- if the problem occurs only for the specific spooled file, look for the difference.
- prepare the procedure to recreate your problem using OS/400 functions which use HPT, e.g. RMTOUTQ, LPR, Access for Web, Host on Demand, etc.
- contact your support channel to ask IBM to investigate (and fix) the problem.

Hope this helps.

uzaemon@Japan

 
00707/00707 AAA00000  Bob              Re^4: SPL2STMF gives error CPF6DF9      
( 1)   03/10/21 04:13  00705へのコメント  コメント数：1
uzuamon,

with 300.000 same problem appears to me: CPF24B4

Bob

> Bob,
> 
> > I tried it with 1.000.000 which produces an other error..
> > what is the limit?
> 
> What kind of error did you get? Can you try with more modest value (e.g. 300,000)?
> 
> > Other question: Is it possible to search within this BBS?
> 
> No, unfortunately this BBS (ISP) does not have such smart function.
> 
> > And is it possible to possition to a discussion referenced by you?
> 
> I can include URL link to the message. Is that what you want?
> 
> > ..it is heard to navigate form 700 to 89 by "previous..."
> 
> I agree... I hope I had time to create FAQ for my tools.
> 
> uzaemon@Japan

 
00706/00706 AAA00000  Carmel Bonet      QwpzHostPrintTransform failed : CPF3CF2
( 1)   03/10/20 17:56

When we try to run command SPL2STMF from *AFPDS spooled file,we get  Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2     
hptopt=20.
Previous messagges provides error CPF333B (system name is not valid).We are at v5r2/ptf level TL03021. We have reported to IBM technical services tis error.                                              
 
00705/00705 AAA00000  uzaemon          Re^3: SPL2STMF gives error CPF6DF9      
( 1)   03/10/18 22:34  00704へのコメント  コメント数：2
Bob,

> I tried it with 1.000.000 which produces an other error..
> what is the limit?

What kind of error did you get? Can you try with more modest value (e.g. 300,000)?

> Other question: Is it possible to search within this BBS?

No, unfortunately this BBS (ISP) does not have such smart function.

> And is it possible to possition to a discussion referenced by you?

I can include URL link to the message. Is that what you want?

> ..it is heard to navigate form 700 to 89 by "previous..."

I agree... I hope I had time to create FAQ for my tools.

uzaemon@Japan

 
00704/00704 AAA00000  Bob              Re^2: SPL2STMF gives error CPF6DF9      
( 1)   03/10/17 00:36  00703へのコメント  コメント数：3
uzaemon,

thanks.

I tried it with 1.000.000 which produces an other error..
what is the limit?

Other question: Is it possible to search within this BBS?
And is it possible to possition to a discussion referenced by you?
..it is heard to navigate form 700 to 89 by "previous..."

thanks for all
Bob
> Bob,
> 
> > I got an error CPF6DF9 for some spools trying to convert to TIF. This error means to extend memory for the job. How can this be done?
> 
> See message "89. Re: SPL2STMF" in this BBS.
> 
> uzaemon@Japan

 
00703/00703 AAA00000  uzaemon          Re: SPL2STMF gives error CPF6DF9        
( 1)   03/10/17 00:04  00701へのコメント  コメント数：4
Bob,

> I got an error CPF6DF9 for some spools trying to convert to TIF. This error means to extend memory for the job. How can this be done?

See message "89. Re: SPL2STMF" in this BBS.

uzaemon@Japan


 
00702/00702 AAA00000  uzaemon          Re: miniunz & 2GB+ files                
( 1)   03/10/16 23:49  00698へのコメント  コメント数：2
Alistair,

> It would appear that that miniunz is uable to handle files greater than 2GB in size.  I recieve a pointer not set error.

It is limitation of IFS APIs. According to iSeries Information Center, "When you develop in C-based languages, the prototypes for the 64-bit APIs are normally hidden. To use the xxxx64() API and the xxx64_t data type, you must compile the source with the _LARGE_FILE_API defined."

uzaemon@Japan

 
00701/00701 AAA00000  Bob              SPL2STMF gives error CPF6DF9            
( 1)   03/10/16 19:22

Hi,

I got an error CPF6DF9 for some spools trying to convert to TIF. This error means to extend memory for the job. How can this be done?

Thanks in advance

Bob
 
00698/00698 AAA00000  Alistair Moir    miniunz & 2GB+ files                    
( 1)   03/10/15 09:49

It would appear that that miniunz is uable to handle files greater than 2GB in size.  I recieve a pointer not set error.
 
00695/00695 AAA00000  uzaemon          Re: D (SPL2STMF, AFPDS->TEXT?)          
( 1)   03/10/11 12:03  00694へのコメント

Staacks,

> I need a WSCST for SPL2STMF. The WSCST should convert a
> AFP-spoole-file in a formatted TXT-file. Is that possible?
> If hey how can I do this?

I tried TEXTJ(sample WSCST introduced at my homepage which converts SCS to plain text file), QWPDEFAULT, QWPHP5SI on my V5R2 system and always got CPF6DF8(Data cannot be transformed). Also, CPYSPLF refused to convert AFPDS to PF.

As I have mentioned several times in this BBS, SPL2STMF is just a front-end to HPT API and I learned everything from IBM manuals and redbooks. Please ask IBM via your support channel if HPT has such capability.

uzaemon@Japan

 
00694/00694 AAA00000  Staacks          D                                       
( 1)   03/10/11 00:37

I need a WSCST for SPL2STMF. The WSCST should convert a
AFP-spoole-file in a formatted TXT-file. Is that possible?
If hey how can I do this?
Dieter Staacks
info@staacks-vie.de
 
00693/00693 AAA00000  uzaemon          Re: How many octets can support  CMD SND
( 1)   03/09/26 21:57  00692へのコメント

Suzie,

> I use SNDM i want to know the maximum of records or octets 
> the command works when i send files.

What do you mean by "records or octets"? Mail body or attachment file or anything else?

As SNDM does not limit the size of mail body (record number of Physical File) and attachment file, it depends on the specification of OS/400 (mainly POSIX APIs).

uzaemon@Japan

 
00692/00692 AAA00000  Suzie David      How many octets can support  CMD SNDM   
( 1)   03/09/25 21:14

I use SNDM i want to know the maximum of records or octets 
the command works when i send files.
Thanks in advance.


 
00691/00691 AAA00000  uzaemon          Re: Sending mail with SNDM command (Reci
( 1)   03/09/19 18:28  00690へのコメント

Suzie,

Thank you for using SNDM.

> I installed the command SNDM in our iseries V5R2 it's work fine but one thing important doesn't work : when the Recipient Mail address  doesn't exist i don't have any return message to say to me your have false address. i want to have return if the recipient mail address doesn't exist.
> Is it possible to check Valid Recipient Mail address.
> if i send my mail and the name the addrress mail doesn't exist i want to know that like every web site.
> When you do classic sending mail and you get message return when the mail address doesn't exist in the WWW.

It is not possible for most Internet mail client software (including SNDM) to check if a mail address is "valid". You can look for the Web to find the reason, e.g. http://www.perldoc.com/perl5.005_03/pod/perlfaq9.html#How-do-I-check-a-valid-mail-address- .

uzaemon@Japan


 
00690/00690 AAA00000  Suzie David      Sending mail with SNDM command          
( 1)   03/09/19 01:11

I installed the command SNDM in our iseries V5R2 it's work fine but one thing important doesn't work : when the Recipient Mail address  doesn't exist i don't have any return message to say to me your have false address. i want to have return if the recipient mail address doesn't exist.
Is it possible to check Valid Recipient Mail address.
if i send my mail and the name the addrress mail doesn't exist i want to know that like every web site.
When you do classic sending mail and you get message return when the mail address doesn't exist in the WWW.
Thanks in Advance
Suzie,

         



 
00689/00689 AAA00000  uzaemon          Re: SPL2STMF (USRASCII or IPDS support?)
( 1)   03/09/13 14:16  00687へのコメント

chris,

> Has support been added for USRASCII or IPDS types for SPL2STMF?  

SPL2STMF is just a frontend to IBM supplied API (Host Print Transform), so please ask IBM via your support channel.

uzaemon@Japan

 
00688/00688 AAA00000  uzaemon          Re: crtcsvf (cannot download?)          
( 1)   03/09/13 14:11  00686へのコメント

lode,

> When I click an CSV.EXE, I get the message 'NOT FOUND'

I did the same thing (access http://homepage1.nifty.com/uzaemon/CSV.EXE) and it worked just fine. Try other browser, download utility or your friend's machine.

uzaemon@Japan

 
00687/00687 AAA00000  chris wilson     SPL2STMF                                
( 1)   03/09/11 03:11

Hello-

Has support been added for USRASCII or IPDS types for SPL2STMF?  
 
00686/00686 AAA00000  lode vandendries crtcsvf                                 
( 1)   03/09/09 15:45

When I click an CSV.EXE, I get the message 'NOT FOUND'
 
00685/00685 AAA00000  uzaemon          Re: Regarding  SPL2STMF (long filename i
( 1)   03/08/22 06:12  00684へのコメント

Sriram,

> ... I was trying to this and was getting an error message Parm is too long. I am giving the path as /Qdls/Email/Spl2stmfrp.tiff.

You've already answered by yourself. QDLS only supports old 8.3 file name scheme. Either shorten the file name or use other file system, such as "/" (root).

Hope this helps.

uzaemon@Japan

 
00684/00684 AAA00000  Sriram           Regarding  SPL2STMF                     
( 1)   03/08/21 06:14

Hi,

I was trying to use the above utility but i was not successful.Is it possible for me to send the tiff image to a work folder in AS/400. I was trying to this and was getting an error message Parm is too long. I am giving the path as /Qdls/Email/Spl2stmfrp.tiff.

Please help me....

Regards,
Sriram

 
00682/00682 AAA00000  uzaemon          Re: RCVM problem compiling rcvmail.java 
( 1)   03/08/01 14:06  00681へのコメント

Dave,

> > javac -classpath .:./mail.jar:./mailapi.jar:./activation.jar:./jt400.jar:/QIBM/ProdData/Java400/jdk118/lib/classes.zip -deprecati
>   on rcvmail.java
>   rcvmail.java:8: Public class Rcvmail must be defined in a file called "Rcvmail.java".
>   public class Rcvmail                                                   
>   1 error
>   $       

Replace "rcvmail.java" with "Rcvmail.java". Here's my test on V4R5 (Japanese) machine.

> cd /JavaMail
  $
> ls
  Charsetconv.class       Rcvmail.java              mail.jar
  Charsetconv.java       activation.jar
  Rcvmail.class              jt400.jar
  $
> rm Rcvmail.class
  $
> javac -classpath .:./mail.jar:./mailapi.jar:./activation.jar:./jt400.jar:/QIB
  M/ProdData/Java400/jdk118/lib/classes.zip -deprecation rcvmail.java
  rcvmail.java:8: Public class Rcvmail must be defined in a file called "Rcvmai
  l.java".
  public class Rcvmail {
               ^
  1 error
  $
> javac -classpath .:./mail.jar:./mailapi.jar:./activation.jar:./jt400.jar:/QIB
  M/ProdData/Java400/jdk118/lib/classes.zip -deprecation Rcvmail.java
  Rcvmail.java:57: Note: The constructor java.io.PrintStream(java.io.OutputStre
  am) has been deprecated.
          PrintStream consoleout = new PrintStream(new FileOutputStream(debugfi
  le, true));
                                   ^
  Note: Rcvmail.java uses a deprecated API.  Please consult the documentation f
  or a better alternative.
  2 warnings

  $
> ls
  Charsetconv.class       Rcvmail.java              mail.jar
  Charsetconv.java       activation.jar
  Rcvmail.class              jt400.jar
  $


When I wrote the instruction, there were no ploblem so you may need Java PTF for your V4R5 machine. On V5R2, the same operation works just fine. Anyway, I'll correct the instruction for V4R5 JDK 1.1.8 in future.

Try again and let me know the result.

uzaemon@Japan

 
00681/00681 AAA00000  Dave Mahadevan   RCVM problem compiling rcvmail.java     
( 1)   03/07/31 02:34

Hi:

I followed the instructions on compililing RCVM modules.  Everything compiled except rcvmail.java.  Following is the QSH  session messages
> ls -la                                                                                                                           
  total: 59.724 megabytes                                                                                                          
<snip>
  -rwxrwxrwx   1 DAVE  0                 20748 Jul 24 14:15 Rcvmail.java                                                           
  $                                                                                                                                
> javac -classpath .:./mail.jar:./mailapi.jar:./activation.jar:./jt400.jar:/QIBM/ProdData/Java400/jdk118/lib/classes.zip -deprecati
  on rcvmail.java                                                                                                                  
  rcvmail.java:8: Public class Rcvmail must be defined in a file called "Rcvmail.java".                                            
  public class Rcvmail {                                                                                                           
               ^                                                                                                                   
  1 error                                                                                                                          
  $                                                                                                                                
                                                                                                                                   Can you tell me how to fix this (I am on V4R5)?

Thanks for the great SNDM program also.

Dave Mahadevan
mahadevan@fuse.net
 
00680/00680 AAA00000  Luigi Buzzi      Re^4: Problem (SNDM - AS/400 host and do
( 1)   03/07/30 00:11  00677へのコメント

Thanks! Thanks a lot !
Your suggestion solves my problem :-)
Luigi

> Luigi,
> 
> > Command failed. reason -214 failed to retrieve local domain name ('.'     
> >   missing. localhost =)                 
> 
> Have you configured hostname and domain name from Option 12 (I guess) of CFGTCP command ?
> 
> uzaemon@Japan

 
00679/00679 AAA00000  uzaemon          Re: Quoted-Printable, Base64, Diferences
( 1)   03/07/29 22:54  00674へのコメント

Nicolas,

> But I have a conceptual question, what is the diference between Quited-Printable and Base64??

Assuming that you are asking about mail body, quoted-printable is usually used for SBCS languages because the encoding scheme escapes only 8bit chars to "=XX" (XX is hexadecimal) representation, so that the mail is still readable even when your mailer does not support the encoding.

BASE64 is mostly used to encode binary file (e.g.
attachment file and inline image file) to safe text representation.

> So, where can I read soomething about Content-Transfer-
> Encoding:???

See RFC1521 (obsoletes RFC1341). For more information, see related RFCs and other good documents which you can easily search and find on the Web.

uzaemon@Japan

 
00677/00677 AAA00000  uzaemon          Re^3: Problem (SNDM - AS/400 host and do
( 1)   03/07/29 22:34  00676へのコメント  コメント数：1
Luigi,

> Command failed. reason -214 failed to retrieve local domain name ('.'     
>   missing. localhost =)                 

Have you configured hostname and domain name from Option 12 (I guess) of CFGTCP command ?

uzaemon@Japan

 
00676/00676 AAA00000  Luigi Buzzi      Re^2: Problems                          
( 1)   03/07/29 18:13  00675へのコメント  コメント数：2
Thank a lot,
i did your instructions, but... :-( teh same error.
Following my set up's and errors...

please, help me ! :-)


                   Mod.voce tab.sist.centr.TCP/IP (CHGTCPHTE)                   
                                                                                
 Immettere le scelte e premere Invio.                                           
                                                                                
 Indirizzo internet . . . . . . . > '10.0.0.2'    Valore carattere              
 Nomi sistema centr.:                                                           
   Nome . . . . . . . . . . . . .   'MAILER.AGOSTINISVETRO.IT'                     
               + per altri valori                                               
 Testo 'descriz.' . . . . . . . .   'SMTP server su NT'                         
                                                              PING OK!!!

Then ...

SNDM FROM('giorgio.a@agostinisvetro.it') TO(('lbuzzi@seimaitaliana.it')) F
ILE(ZWORKLIB/QDDSDSPF) SUBJECT('Test mailer smtp da as400') SMTPHOST(MAILE
R.AGOSTINISVETRO.IT)                                                      
Command failed. reason -214 failed to retrieve local domain name ('.'     
  missing. localhost =)                 


                  


> > Hi, I hope I'll sove my problem.
> > My smtp server is on Nt server (10.0.0.2)
> > My as400 doesen't have smtp server.
> > What I have to do on the as400 for use sndm for directly use smtp server on nt. 
> > sndm command give me always an error about smtp name.
> > Thanks in advance.
> 
> 1) With CFGTCP, then option 10
> You must catalog the Nt Smtp Server, with some name, eg: mailer.yourdomain.com
> 
> 2) ping your new entry, to check the connection.
> PING 'MAILER.YOURDOMAIN.COM' 
> 
> 3) in the sndm command you must specify SNDM ...
> SMTPHOST(MAILER.YOURDOMAIN.COM)
> 
> Good luck !!

 
00675/00675 AAA00000  Nicolas Machado  Re: Problems                            
( 1)   03/07/29 01:39  00673へのコメント  コメント数：3
> Hi, I hope I'll sove my problem.
> My smtp server is on Nt server (10.0.0.2)
> My as400 doesen't have smtp server.
> What I have to do on the as400 for use sndm for directly use smtp server on nt. 
> sndm command give me always an error about smtp name.
> Thanks in advance.

1) With CFGTCP, then option 10
You must catalog the Nt Smtp Server, with some name, eg: mailer.yourdomain.com

2) ping your new entry, to check the connection.
PING 'MAILER.YOURDOMAIN.COM' 

3) in the sndm command you must specify SNDM ...
SMTPHOST(MAILER.YOURDOMAIN.COM)

Good luck !!

 
00674/00674 AAA00000  Nicolas Machado  Quoted-Printable, Base64, Diferences, Cy
( 1)   03/07/29 01:35

Hy, me and the Cyryllic isue Again.
I change your code for Supporting Cyrillic, I use the ISO-8859-5 Charset Code, and the 1251 and 1025 CCSID's in the iconv routines.

But I have a conceptual question, what is the diference between Quited-Printable and Base64??

Is there any reation with the Charset of the mail.
I know that i have to "write" the source of the mail in a Charset that a server could Undestand, but the Subject, and all the "data" of the mail should go in the other languaje , in this case Cyrillic.

Now I'm going to change 2 things:
1) Replace iso-8859-5 by Windows-1251, the las one is the default for windows boxes.
2) Allow Content-Type: text/html; , 

The 1) issue have nothing to do with 2), just for your info.

So, where can I read soomething about Content-Transfer-Encoding:???

Best Regards
 
00673/00673 AAA00000  Luigi Buzzi      Problems                                
( 1)   03/07/29 01:09

Hi, I hope I'll sove my problem.
My smtp server is on Nt server (10.0.0.2)
My as400 doesen't have smtp server.
What I have to do on the as400 for use sndm for directly use smtp server on nt. 
sndm command give me always an error about smtp name.
Thanks in advance.

 
00672/00672 AAA00000  Nicolas Machado  Re^2: SNDM - More attachments           
( 1)   03/07/25 06:03  00659へのコメント

Hy peter, my name is Nicolas.

First you must change the CMD when it says
PARM KWD(ATTACHMENT) .... MAX(5)
by ...................... MAX(number < 30)

and it could be all!!!
Because the rpg program take care of the rest...

Be aware of the limitacion of space, and attachments in the SMTP protocol.

Best regards 


> Peter,
> 
> > But we need to have more then 5 attachments - is ther a way to change this. I've tried to look into the sourcecode but i can't find the trick.
> 
> The number had been determined by the limitation of CPP as described in help information. It depends on the total length of path name of attachment files. You have to determine length of path name and number of attachment files which does not exceed the limitation.
> 
> > Pleas give me a hint - maybe per mail?
> 
> Recently I'm very busy on my regular business and cannot spare much time on this. Please look into source code and post what you don't understand in this BBS (somebody may answer to your question... I hope).
> 
> uzaemon@Japan

 
00671/00671 AAA00000  uzaemon          Re: SPL2SMTFの用紙サイズの指定          
( 1)   03/07/13 14:11  00670へのコメント

msasakiさん、

> スプールではA4縦になっていますが,pdfファイルの結果が縮小されてしまいます。（tiffファイルの時点で縮小されているようです）

これはHPTの仕様によりますが、TIFFファイルは240DPIくらいで作成(QPWTIFFG4の場合)されたと思いますので、縮小されているとは考えにくいです。

> 用紙サイズの指定はどのようにすれば良いのでしょうか。

同様の質問が"88. TIFF2PDFでの変換後Paper Size"にありますので、ご参照ください。いずれTIFF2PDFで用紙サイズ/向きを指定できるようにしたいと思っているのですが、忙しくて時間がとれません...

uzaemon@Japan

 
00670/00670 AAA00000  msasaki          SPL2SMTFの用紙サイズの指定              
( 1)   03/07/13 14:02

SPL2SMTFでtiffファイルしてTIFF2PDFでpdfファイルを作成しようとしています。
スプールではA4縦になっていますが,pdfファイルの結果が縮小されてしまいます。（tiffファイルの時点で縮小されているようです）
用紙サイズの指定はどのようにすれば良いのでしょうか。
SPL2STMFコマンドは以下のように入力しています。
SPL2STMF FILE(QPSUPRTF) TOSTMF('/PDF/QQ.TIF') WSCST(QWPTIFFG4) 
よろしくお願い致します。
 
00669/00669 AAA00000  uzaemon          Re: CRTCSVF Utility (good ol' QSYSINC mi
( 1)   03/07/09 21:59  00666へのコメント

> I am trying to compile RPG program CRTCSVFRPG.
> It won't compile because of the statement  
> /COPY QSYSINC/QRPGLESRC,QUSEC.  This library or member does not exist on my system and was not included in the csv.savf save file.  Please advise.
>  

Please read "668. Re: QSYSINC (7th time, maybe)".

uzaemon@Japan

 
00668/00668 AAA00000  uzaemon          Re: QSYSINC (7th time, maybe)           
( 1)   03/07/09 21:53  00667へのコメント

Ron,

> How do I go about getting IBM library QSYSINC?
> I am at V5R2.

See message "626. Re: CRTCSVF (no QSYSINC library)" in this BBS. It points many messages which are same as your question.

| You have to install QSYSINC as I stated at my homepage ("! Read before you start !"). 
|
| See messages "268. Re: SNDM: Problem running STRREXPRC SRCMBR(MAKE) ", "159. Re: SNDM compilation problem", "129. Re: Library QSYSINC", "109. Re: CRTCSVFRPG compiling error", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information.
| 
| Hope this helps.

If they doesn't help, let me know.

uzaemon@Japan

 
00667/00667 AAA00000  Ron Katz         QSYSINC                                 
( 1)   03/07/09 01:47

How do I go about getting IBM library QSYSINC?
I am at V5R2.
 
00666/00666 AAA00000  Ron Katz         CRTCSVF Utility                         
( 1)   03/07/09 01:34

I am trying to compile RPG program CRTCSVFRPG.
It won't compile because of the statement  
/COPY QSYSINC/QRPGLESRC,QUSEC.  This library or member does not exist on my system and was not included in the csv.savf save file.  Please advise.
 
 
00665/00665 AAA00000  uzaemon          Re: rcvm utility (broken link?)         
( 1)   03/07/04 00:09  00663へのコメント

shahar,

> Recieve mail utility source code link is broken

Are you sure? I clicked "download" link (http://homepage1.nifty.com/uzaemon/pop3.exe) of "RCVM" and I could download the file without problem.

If clicking the link doesn't work, right click the mouse and select "save to file" or something by your Web browser. Or you may try other borwser or others' PC to download the file.

uzaemon@Japan

 
00664/00664 AAA00000  uzaemon          Re^3: SNDM: slow                        
( 1)   03/07/04 00:02  00662へのコメント

Trang,

> > I have a question. Does it take 10 minutes for the SNMD command to complete, or SNMD comlpetes immediately but it takes 10 minutes to be able to receive the mail?

> It takes 10 minutes to be able to receive email.

I assume that you've set "check mail message every (less than 10) min" in mail client property setting.

To determine your problem, consider followings and let me know the result of your investigation:

1. Do you see the same problem by sending a mail by other mail clients? (SNDDST, OutlookExpress, Netscape Messenger, Lotus Nots, etc.)

2. If you can use another mail server, does it still takes long time to receive a mail?

3. Are you sending a large mail (or attachments)?

4. In the mail header, you can check when mail gateway received the mail as follows. Does any of the gateway takes long time to forward the mail?

Received: from mail522.nifty.com (mail522.xxxxx.com [xxx.xxx.xxx.xxx])
    by ums518.xxxxx.ne.jp with ESMTP id PAA08787;
    Thu, 3 Jul 2003 15:09:43 +0900 (JST)
Received: from zpok.demon.co.uk ([210.218.146.54])by mail522.nifty.com with SMTP id h6369Mnw006422;
    Thu, 3 Jul 2003 15:09:34 +0900

5. Most mail server software has the capability to log the traffic. Is it possible to contact your mail server administrator (or support channel) to identify the problem?

Waiting for your reply.

uzaemon@Japan

 
00663/00663 AAA00000  shahar mor       rcvm utility                            
( 1)   03/07/03 18:13

Hi,

Recieve mail utility source code link is broken

Thanks
 
00662/00662 AAA00000  Trang            Re^2: SNDM: slow                        
( 1)   03/07/03 09:35  00635へのコメント  コメント数：1
> Trang,
> 
> >  The email that sending by SNDM is working perfect. But now it is slow, 7 to 10 minutes to get the mail.
> 
> I have a question. Does it take 10 minutes for the SNMD command to complete, or SNMD comlpetes immediately but it takes 10 minutes to be able to receive the mail?
> 
> Waiting for your reply.
> 
> uzaemon@Japan

Uzaemon,
It takes 10 minutes to be able to receive email.

 
00661/00661 AAA00000  Peter Feickert   Re^2: SNDM - More attachments - Alternat
( 1)   03/07/01 15:26  00660へのコメント

High!
at first: thank you for your quick reply!

Now to the problems:
We are sending mails to our salesmen every day with up to 60 attachments. These attachments are very small (only 100 Bytes) and are located in only one directory per salesman.
The attachments alre only links into an CRM-System, so the can easily lookup orders.
We use today an PC-located mail-programm but our iseries (mod. 810 with V5R2M0) waits till the mail is send. Yesterday i've dicoverd your superb tool, which does the same job much quicker.

Your hint to send serveral mails with max. 5 attachments may be useable, we will check, if we can change our iSeries-Pgm.

Again: Thank you for your help!

> Peter,
> 
> I have four questions.
> 
> 1. First of all, why do you have to attach more than 5 attachment files? In my experience, I've never received a mail with so many attachment files.
> 
> 2. Why don't you use zip utility on iSeries (or AS/400)? By archiving attachement files, you can reduce the size and circumvent the file number limitation.
> 
> 3. Do you need to send such mail everyday? If acceptable, you can send two or three or four or more mails with 5 attachment files each.
> 
> 4. If you are running HTTP server, why don't you send a mail with links to the files? It's smarter and may reduce network traffic. Also, it's much more secure than normal SMTP/POP3 protocols when used with SSL and basic authentication.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

 
00660/00660 AAA00000  uzaemon          Re: SNDM - More attachments - Alternativ
( 1)   03/07/01 00:47  00658へのコメント  コメント数：1
Peter,

I have four questions.

1. First of all, why do you have to attach more than 5 attachment files? In my experience, I've never received a mail with so many attachment files.

2. Why don't you use zip utility on iSeries (or AS/400)? By archiving attachement files, you can reduce the size and circumvent the file number limitation.

3. Do you need to send such mail everyday? If acceptable, you can send two or three or four or more mails with 5 attachment files each.

4. If you are running HTTP server, why don't you send a mail with links to the files? It's smarter and may reduce network traffic. Also, it's much more secure than normal SMTP/POP3 protocols when used with SSL and basic authentication.

Waiting for your reply.

uzaemon@Japan

 
00659/00659 AAA00000  uzaemon          Re: SNDM - More attachments             
( 1)   03/06/30 21:30  00658へのコメント  コメント数：1
Peter,

> But we need to have more then 5 attachments - is ther a way to change this. I've tried to look into the sourcecode but i can't find the trick.

The number had been determined by the limitation of CPP as described in help information. It depends on the total length of path name of attachment files. You have to determine length of path name and number of attachment files which does not exceed the limitation.

> Pleas give me a hint - maybe per mail?

Recently I'm very busy on my regular business and cannot spare much time on this. Please look into source code and post what you don't understand in this BBS (somebody may answer to your question... I hope).

uzaemon@Japan

 
00658/00658 AAA00000  Peter Feickert   SNDM - More attachments                 
( 1)   03/06/30 20:52

Hello!

The tool SNDM ist very usefull - we want to use it in our production enviroment!

But we need to have more then 5 attachments - is ther a way to change this. I've tried to look into the sourcecode but i can't find the trick.

Pleas give me a hint - maybe per mail?

Thanks
Peter Feickert

 
00657/00657 AAA00000  uzaemon          Re^5: SPL2STMF                          
( 1)   03/06/24 00:33  00654へのコメント

k,sさん、

> AFPって確かライセンスが必要だったと思うので、今回はあきらめ
> ます。

確か過去ログにありますが、AFP自体はOS/400の標準機能であり、AFPデザイナーなどの関連ソフトウェアやフォントが有料です。また、APWで出力先にAFPDSを指定すればAFPフォントは不要だったと思います(ただしAPWのAFPフィーチャーは有料ですが...)。

uzaemon@Japan

 
00656/00656 AAA00000  uzaemon          Re^7: RCVM  -Rcvmail message (invalid co
( 1)   03/06/24 00:29  00655へのコメント

Maurizio,

> I launched the program with a command line  exactly as you have described correctly. 
>  I didn't make a drag&drop copy of the command and when I retyped the line I missed some parameters in my post.
> In the copy I have substituted also the ip address of the gateway with the word "mailgateway".
> Is it correct to use the ip address for the parameter Pop3
> server name?

So you typed your mail account instead of "stucchi" and actual password for the account insterad of "xyz", right? And you still see error message?

I'm not sure if JavaMail accept IP address as mail(POP3)server name, so please try both (IP address and IP host name). F.Y.I I always use host name ("pop3.nifty.com", for exapmle).

uzaemon@Japan

 
00655/00655 AAA00000  Maurizio         Re^6: RCVM  -Rcvmail message (java.lang.
( 1)   03/06/23 23:52  00653へのコメント  コメント数：1
Hello,

I launched the program with a command line  exactly as you have described correctly. 
 I didn't make a drag&drop copy of the command and when I retyped the line I missed some parameters in my post.
In the copy I have substituted also the ip address of the gateway with the word "mailgateway".
Is it correct to use the ip address for the parameter Pop3
server name?

Thx 
maurizio


> Maurizio,
> 
> > "C:\Programmi\ibm\client access\jre\bin\java" -cp .mail.jar;activation;jt400.jar Rcvmail stucchi xyz mailgateway . false true file rcvlogfile.txt xx xx xx both rcvmdebug.txt
> 
> Assuming that you put "Rcvmail.class", "mail.jar", "activation.jar" and "jt400.jar" on the same directory, your should run the command as follows :
> 
> > "C:\Programmi\ibm\client access\jre\bin\java" -cp .;mail.jar;activation.jar;jt400.jar Rcvmail stucchi xyz mailgateway 10 . false true file rcvlogfile.txt xx xx xx both rcvmdebug.txt
> 
> Notice that :
> - you are missing ".;" in your classpath.
> - you should specify as "activation.jar".
> - you missed timeout parameter. 
> 
> And I'm wondering if "mailgateway" is valid POP3 server name...
> 
> Try again and let me know the result.
> 
> uzaemon@Japan

 
00654/00654 AAA00000  k,s              Re^4: SPL2STMF (don't know what is WSCST
( 1)   03/06/23 23:38  00649へのコメント  コメント数：1
レスありがとうございます。
>DBCS文字をTIFF画像に変換するにはAFPフォントが必要です。
納得しました。フォントが存在しない為、不可能ということで
すね。
AFPって確かライセンスが必要だったと思うので、今回はあきらめ
ます。
 
00653/00653 AAA00000  uzaemon          Re^5: RCVM  -Rcvmail message (java.lang.
( 1)   03/06/23 19:22  00651へのコメント  コメント数：2
Maurizio,

> "C:\Programmi\ibm\client access\jre\bin\java" -cp .mail.jar;activation;jt400.jar Rcvmail stucchi xyz mailgateway . false true file rcvlogfile.txt xx xx xx both rcvmdebug.txt

Assuming that you put "Rcvmail.class", "mail.jar", "activation.jar" and "jt400.jar" on the same directory, your should run the command as follows :

> "C:\Programmi\ibm\client access\jre\bin\java" -cp .;mail.jar;activation.jar;jt400.jar Rcvmail stucchi xyz mailgateway 10 . false true file rcvlogfile.txt xx xx xx both rcvmdebug.txt

Notice that :
- you are missing ".;" in your classpath.
- you should specify as "activation.jar".
- you missed timeout parameter. 

And I'm wondering if "mailgateway" is valid POP3 server name...

Try again and let me know the result.

uzaemon@Japan

 
00651/00651 AAA00000  Maurizio         Re^4: RCVM  -Rcvmail message (java.lang.
( 1)   03/06/23 18:02  00650へのコメント  コメント数：3
> Hello,

I tried to launch in the windows line the command but I was not able to run the programs.

I have installed JRE, found the correct path of java.exe,
shared rthe directory Javamail.

The test without parameters display all the elements of
the program... account password [mailserver] etc.  
  
I launched this command:

"C:\Programmi\ibm\client access\jre\bin\java" -cp .mail.jar;activation;jt400.jar Rcvmail stucchi xyz mailgateway . false true file rcvlogfile.txt xx xx xx both rcvmdebug.txt

The result was an error message: 
Exception in thread "main" java.lang.NoClassDefFoundError: rcvmail <wrong name : Rcvmail)
      at java.lang.Classloader.defineClass0(native Method)
      at java.lang.Classloader.defineClass(Classloader.java.496)
      .... 
Now if it is possible I would try with another mail server.

Ciao, maurizio

  
 

 
00650/00650 AAA00000  uzaemon          Re^3: RCVM  -Rcvmail message (java.lang.
( 1)   03/06/21 18:14  00645へのコメント  コメント数：4
Maurizio,

Thanks for you information. For the purpose of problem determination, please try followings.

3. Instead of using RCVM OS/400 command, call Java program (Rcvmail.class) directly by RUNJVA command or java command from Qshell interpreter. See section "Evoke from command line (Qshell or CMD.exe) interface" of http://homepage1.nifty.com/uzaemon/rcvm_usage.html for more information.

4. Run the Rcvmail java program from Windows command line interface.

5. If you have another mail server, try using the server.

Waiting for your reply.

uzaemon@Japan

 
00649/00649 AAA00000  uzaemon          Re^3: SPL2STMF (don't know what is WSCST
( 1)   03/06/21 18:11  00646へのコメント  コメント数：2
K,Sさん、

> ただ、目的がスプールファイルを画像化したいという
> ことなので、TIFFファイル化したいのですが、AS/400
> に最初から入っているWSCSTだとDBSSが表示できません。
> 半角カタカナはなんとか表示されます。

DBCS文字をTIFF画像に変換するにはAFPフォントが必要です。同様の質問がこのBBSの"558. SPL2STMF文字化け"にありますのでご一読ください。

> TIFF化するためには、WSCSTを自分でカスタマイズする必要
> があると思うのですが、そこらへんの情報とかお持ちでしたら、
> 是非教えていただきたいのですが。

HPTでTIFFを生成する目的でQWPTIFFG4などのIBM提供WSCSTがあり、通常はカスタマイズする必要はありません。また、RTVができませんのでカスタマイズをすることもできません。

私の知る限りIBM提供のWSCSTについて詳細な情報は公開されていないようです。QWPTIFFG4については前の回答でご紹介したRedbookに多少情報がありますので再読されると良いでしょう。

uzaemon@Japan

 
00646/00646 AAA00000  K,S              Re^2: SPL2STMF (don't know what is WSCST
( 1)   03/06/21 10:36  00636へのコメント  コメント数：3
ありがとうございます。教えていただいたサイトで、
WSCSTが何者なのか理解することができました。
サンプルのソースでWSCSTを作成したところ、スプール
をテキストファイルには落とせました。

ただ、目的がスプールファイルを画像化したいという
ことなので、TIFFファイル化したいのですが、AS/400
に最初から入っているWSCSTだとDBSSが表示できません。
半角カタカナはなんとか表示されます。

TIFF化するためには、WSCSTを自分でカスタマイズする必要
があると思うのですが、そこらへんの情報とかお持ちでしたら、
是非教えていただきたいのですが。
 
00645/00645 AAA00000  Maurizio         Re^2: RCVM  -Rcvmail message            
( 1)   03/06/21 01:15  00643へのコメント  コメント数：5
Hello, in answer to your questions:

1. Without modification I am not able to receive e-mail.
The program connect to the pop and give the return code 7.
I use as test my id userid 7 bytes long.

2. I modified only CMD RCVM and CLP RCVMAIL and don't make
changes to Rcvmail.java

I put the length of the variable &ACCOUNT 30 bytes long.
RCVM   CMD
        PARM       KWD(ACCOUNT) TYPE(*CHAR) LEN(30) MIN(1) 

RCVMAIL  CLP
         DCL        VAR(&ACCOUNT) TYPE(*CHAR) LEN 30)       
   ...

These are lines in the debug file with some messages:

DEBUG: JavaMail version 1.3.1ea
DEBUG: java.io.FileNotFoundException: Questo percorso o indirizzario non esiste/QIBM/ProdData/Java400/jdk13/lib/javamail.providers
DEBUG: !anyLoaded
DEBUG: not loading resource: /META-INF/javamail.providers
DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map
DEBUG: !anyLoaded
DEBUG: not loading resource: /META-INF/javamail.address.map
DEBUG: java.io.FileNotFoundException: Questo percorso o indirizzario non esiste. /QIBM/ProdData/Java400/jdk13/lib/javamail.address.map
...

This is the message with the return code:
[Fri Jun 20 16:33:57 UTC 2003] POP3 folder opened.
[Fri Jun 20 16:33:57 UTC 2003] 706 mail(s) waiting.
[Fri Jun 20 16:33:57 UTC 2003] Check if mail log file "rcvmlog" is empty or not.
[Fri Jun 20 16:33:57 UTC 2003] Mail log file "rcvmlog" is empty, will set UTF16-LE BOM.
[Fri Jun 20 16:33:57 UTC 2003] Mail log file "rcvmlog" opened.
[Fri Jun 20 16:33:57 UTC 2003] Receiving mail 1 of 706 ******************************************
java.lang.NullPointerException
      Rcvmail.main([Ljava/lang/String;)V+0 (rcvmail.java:17) 
[Fri Jun 20 16:33:57 UTC 2003] Exception occured. : java.lang.NullPointerException


Ciao, Maurizio



 
00644/00644 AAA00000  uzaemon          Re: 添付ファイル(SNDM)                  
( 1)   03/06/20 21:59  00642へのコメント

TOMOさん、

> sndmで添付ファイルを送る場合はライブラリーのファイルを指定しなければならないと思うのですが
> ライブラリの中に文書ファイルを作製するにはどのようにしたら良いのでしょうか？

いいえ、添付ファイルはIFS上のストリーム・ファイルを指定します。QSYS.LIBファイルシステムのファイルは(試していませんが)送信できないと思います。コマンドのヘルプにも下記のように記載しています。

Attachment (ATTACHMENT)

Specifies the name of the stream file that will be sent as
attachment file.  A maximum of 5 path names can be specified. DBCS
characters are not allowed.  For more information on specifying path
names, refer to Chapter 2 of the CL Reference, SC41-5722.

なお、bodyは任意のライブラリーのデータベースファイル(通常はソースファイル)を指定しますので、混同しないようもう一度よく使用方法をお読みください。

uzaemon@Japan

 
00643/00643 AAA00000  uzaemon          Re: RCVM  -Rcvmail message              
( 1)   03/06/20 21:54  00640へのコメント  コメント数：6
Maurizio,

> as you advised I changed the length of the user and the
> program connect to the mailgateway on the port 110.
> In the debug file I see that it releaves the total 
> number(old & new) of the messages and when it try 
> to receive the first mail display a message and quit
> the program.

Two questions.

1. Without modification to RCVM, were you able to receive mail(s) using another account (less than 10 chars)?

2. Please describe exactly how and which lines of codes did you modify? 

Waiting for your reply.

P.S. Please use "reply" link instead of creating new thread because it's easier to follow.

uzaemon@Japan

 
00642/00642 AAA00000  TOMO             添付ファイル(SNDM)                      
( 1)   03/06/20 17:52

お忙しいところ大変申し訳ありません。

ＳＮＤＭのコンパイルは上手く行ったのですが
メールを送る際の”Mail body file”と”library”の設定が上手く行きません。

snddstで添付ファイルを送る場合はフォルダの中に文書を設定すれば良いですが
sndmで添付ファイルを送る場合はライブラリーのファイルを指定しなければならないと思うのですが
ライブラリの中に文書ファイルを作製するにはどのようにしたら良いのでしょうか？

初歩的なことで大変お恥ずかしいのですが
ご返答をしていただければ幸いです。
よろしくお願い致します。
 
00641/00641 AAA00000  TOMO             Re^2: コンパイルがうまく行きません。(SND
( 1)   03/06/20 13:47  00639へのコメント

> TOMOさん、
> 
> > SNDMを使用したいのですがうまく作動しません。
> > コマンド”SNDM”でＦ４キーは使えるのですが”実行キー”を押すと
> > 「プログラム SNDM がライブラリー *LIBL に見つからない。」
> > とでてしまいます。
> > 一応自分でも調べてみたのですが分からないのです。
> > 大変申し訳ないのですが、原因を教えてください。
> 
> とりあえずライブラリーQSYSINCが存在するか教えていただけますでしょうか？

　ご返答ありがとうございます。
　確認したところ、QSYSINCがなかったため追加して、
　コンパイルしたところ無事コンパイルでき、またメールの送信も確認がとれました。
　ありがとうございました。

 
00640/00640 AAA00000  Maurizio         RCVM  -Rcvmail message                  
( 1)   03/06/20 04:15

Hello,
as you advised I changed the length of the user and the
program connect to the mailgateway on the port 110.
In the debug file I see that it releaves the total 
number(old & new) of the messages and when it try 
to receive the first mail display a message and quit
the program.
Thanks for your help.
Maurizio


POP3 folder opened.
691 mail(s) waiting.
Check ...
Mail ...
Receiving mail 1 of 691
*****************************
java.lang.NullPointerException
       Rcvmail.main([Ljava/lang/String;)V+0 (rcvmail.java:17)
[Thi Jun 19 13:27:11 UTC 2003] Exception occurred. : java.lang.NullPointerException




 
00639/00639 AAA00000  uzaemon          Re: コンパイルがうまく行きません。(SNDM)
( 1)   03/06/19 22:40  00638へのコメント  コメント数：1
TOMOさん、

> SNDMを使用したいのですがうまく作動しません。
> コマンド”SNDM”でＦ４キーは使えるのですが”実行キー”を押すと
> 「プログラム SNDM がライブラリー *LIBL に見つからない。」
> とでてしまいます。
> 一応自分でも調べてみたのですが分からないのです。
> 大変申し訳ないのですが、原因を教えてください。

とりあえずライブラリーQSYSINCが存在するか教えていただけますでしょうか？

uzaemon@Japan

 
00638/00638 AAA00000  TOMO             コンパイルがうまく行きません。          
( 1)   03/06/19 17:01

はじめまして。

SNDMを使用したいのですがうまく作動しません。
コマンド”SNDM”でＦ４キーは使えるのですが”実行キー”を押すと
「プログラム SNDM がライブラリー *LIBL に見つからない。」
とでてしまいます。
一応自分でも調べてみたのですが分からないのです。
大変申し訳ないのですが、原因を教えてください。
ちなみにAS400はバージョンはV4R5M0になります。

　「　コンパイル時のメッセージ　」

Change current library to "SMTP"... 
  result-> 0 
  
Start creating modules for SNDM... 
  creating module SNDM... 
  result-> 0 
  creating module CDATE... 
  result-> RNS9309 
  creating module FD_... 
  result-> 0 
  creating module GETERRINFO... 
  result-> 0 
  creating module GETFILENAM... 
  result-> 0 
  creating module GETJOBINFO... 
  result-> RNS9309 
  creating module GETPFINFO... 
  result-> RNS9309 
  creating module PREPAREUS... 
  result-> RNS9309 
  creating module SNDPM... 
  result-> RNS9309 
Creating main program (SNDM)... 
  result-> CPF3C50 
  
Start creating command ... 
  creating pnlgrp... 
   result-> 0 
   creating command... 
   result-> 0 
  
 Compile finished. Confirm error(s) if exists. 
  
  端末セッションを終了するためには，実行キーを押してください。 
  　　
 
00637/00637 AAA00000  uzaemon          Re: RCVM (need to input longer account n
( 1)   03/06/19 01:59  00634へのコメント

Maurizio,

> I have installed the utility RCVM but there is a problem 
> when the application try to connect to the POP3 server.
> In the Iseries is installed the version 5.1 and the Domino
> Pop3 is on a NT server. The return code was 7.
> Checking the debug file I find always the same messages:
> it try to connect to the pop3, it receive a positive  answer and always when the program pass the user name and the password gives an error message.
> I have tryed also to change the name of the user (only 10
> bytes?) replacing with my account but the resul was the
> same return code. 
> The length of the password is 128 bytes but how can the
> user account be only 10? Perhaps I'm wrong and I forgot
> to do something.... if you could help me....

If you are using POP3 account which is longer than 10 bytes (e.g. "mynameisuzaemon"), modify the source code (command definition and CL program which invokes Java class) so that RCVM accepts long account name as you wish.

uzaemon@Japan

 
00636/00636 AAA00000  uzaemon          Re: SPL2STMF (don't know what is WSCST) 
( 1)   03/06/19 01:49  00633へのコメント  コメント数：4
K,Sさん、

> SPL2STMFのWSCSTパラメータとは、何者ですか。

WSCST(Workstation customizing object)については例えば下記URLの情報をご覧ください。

- マニュアル「OS/400 Workstation Customization Programming V4R3」(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AQ600/CCONTENTS?SHELF=QB3AYC02&DN=SC41-5605-00&DT=19980512102401)

- RedBook「IBM AS/400 Printing V」Uhttp://www.redbooks.ibm.com/redbooks/pdfs/sg242160.pdf)の「Chapter 6. Host print transform」

- 「AS/400 V3 TCP/IP機能とインターネット」研修用資料 (http://www-6.ibm.com/jp/servers/eserver/iseries/techinfo/cgiprog/doc.htm)の「4　LPR/LPD」

> こちらのAS/400には、「TEXTJ」というオブジェクトが存在しな
> いので、それが原因だと思うのですが。

「TEXTJ」は私がサンプルとして作成したユーザー作成WSCSTで日本語の基本的なテキスト形式に変換するWSCSTです。作り方はホームページのSPL2STMFのusageのリンクに解説してありますのでご一読ください。

uzaemon@Japan

 
00635/00635 AAA00000  uzaemon          Re: SNDM: slow                          
( 1)   03/06/19 01:31  00632へのコメント  コメント数：2
Trang,

>  The email that sending by SNDM is working perfect. But now it is slow, 7 to 10 minutes to get the mail.

I have a question. Does it take 10 minutes for the SNMD command to complete, or SNMD comlpetes immediately but it takes 10 minutes to be able to receive the mail?

Waiting for your reply.

uzaemon@Japan

 
00634/00634 AAA00000  Maurizio         RCVM                                    
( 1)   03/06/18 06:22

Hello,
I have installed the utility RCVM but there is a problem 
when the application try to connect to the POP3 server.
In the Iseries is installed the version 5.1 and the Domino
Pop3 is on a NT server. The return code was 7.
Checking the debug file I find always the same messages:
it try to connect to the pop3, it receive a positive  answer and always when the program pass the user name and the password gives an error message.
I have tryed also to change the name of the user (only 10
bytes?) replacing with my account but the resul was the
same return code. 
The length of the password is 128 bytes but how can the
user account be only 10? Perhaps I'm wrong and I forgot
to do something.... if you could help me....
Thank you very much for your utilities.





 
00633/00633 AAA00000  K,S              SPL2STMF                                
( 1)   03/06/17 16:34

SPL2STMFのWSCSTパラメータとは、何者ですか。
とりあえず、「TEXTJ」を指定しているのですが、以下のような
エラーが発生します。
こちらのAS/400には、「TEXTJ」というオブジェクトが存在しな
いので、それが原因だと思うのですが。
Command failed. reason - API QwpzHostPrintTransform failed : CPF9801
hptopt=20                                                        
 
00632/00632 AAA00000  Trang            SNDM: slow                              
( 1)   03/06/17 02:02

Hello,
 The email that sending by SNDM is working perfect. But now it is slow, 7 to 10 minutes to get the mail. Can you tel me how to clean up to make it faster. Thank you for your help.

 
00630/00630 AAA00000  uzaemon          Re: tiff tag                            
( 1)   03/06/16 22:58  00629へのコメント

Keren,

> I've installed the tiff2pdf program on the ibm as400 computer, and i'm unable to convert tiff to pdf - i get this massege "unknown field with tag 32934 (0X80a6) ignored". maybe you can help me fix this problem.

What kind of TIFF are you trying to convert? You may use TIFFDUMP program to display the TIFF tag information.

TIFF2PDF does not convert any TIFF to PDF. I ported TIFF2PDF just to convert multipage, black and white, G4 format TIFF because HPT function of OS/400 creates such TIFF when used with "QWPTIFFG4" WSCST.

If you cannot convert TIFF which was generated by HPT, let me know how you created the file.

uzaemon@Japan

 
00629/00629 AAA00000  keren            tiff tag                                
( 1)   03/06/15 22:41

Hello,
I've installed the tiff2pdf program on the ibm as400 computer, and i'm unable to convert tiff to pdf - i get this massege "unknown field with tag 32934 (0X80a6) ignored". maybe you can help me fix this problem.
Thanks,
Keren
 
00628/00628 AAA00000  uzaemon          Re: SNDM : server-config                
( 1)   03/06/10 21:51  00627へのコメント

Kannengiesser,

> what do I have to enter at "SMTPHOST" ?!

You should enter host name of your mail server, not IP address.

> Nachricht . . . :   Command failed. reason -214 failed to retrieve local  
>   domain name ('.' missing. localhost =)                                  

Run CFGTCP command and confirm that you've configured host name and domain name of your AS/400 (or iSeries).

uzaemon@Japan

 
00627/00627 AAA00000  J.Kannengiesser  SNDM : server-config                    
( 1)   03/06/10 15:30

Hi,
what do I have to enter at "SMTPHOST" ?!
when entering our e-mail-server-ip / -name I always get the message:
Nachricht . . . :   Command failed. reason -214 failed to retrieve local  
  domain name ('.' missing. localhost =)                                  
Ursache . . . . :   Es ist kein zus舩zlicher Online-Hilfetext verfgbar.  
                                                                          
 
00626/00626 AAA00000  uzaemon          Re: CRTCSVF (no QSYSINC library)        
( 1)   03/06/09 22:07  00625へのコメント

Roby,

> I download your utility CRTCSVF from your site but when the REX pgm try to compile the source the RPGLE CRTCSVFRPG make errors. For exemple the line D/COPY QSYSINC/QRPGLESRC,QUSEC because in my AS (ver 5.1)  the lib QSYSINS does not exist.

You have to install QSYSINC as I stated at my homepage ("! Read before you start !"). 

See messages "268. Re: SNDM: Problem running STRREXPRC SRCMBR(MAKE) ", "159. Re: SNDM compilation problem", "129. Re: Library QSYSINC", "109. Re: CRTCSVFRPG compiling error", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information.

Hope this helps.

uzaemon@Japan

 
00625/00625 AAA00000  Roby             CRTCSVF                                 
( 1)   03/06/09 19:11

I download your utility CRTCSVF from your site but when the REX pgm try to compile the source the RPGLE CRTCSVFRPG make errors. For exemple the line D/COPY QSYSINC/QRPGLESRC,QUSEC because in my AS (ver 5.1)  the lib QSYSINS does not exist.
Can you help me?
Thank very much
Roby
 
00624/00624 AAA00000  uzaemon          Re^3: Supporting Cirilic...             
( 1)   03/06/02 23:13  00623へのコメント

Nicolas,

> ... but how did you code Qencode for translating un asterisc (*) into =2A ??.

By Q-encoding or quoted-printable encoding, non-safe characters are escaped to "=" + hex representaion.

> And that exactly what I see, but what do I have to do if I need:
> A=     0410    CYRILLIC CAPITAL LETTER A

If you are talking about x'0410', I suppose that it will be escaped to "=04=10".

uzaemon@Japan

 
00623/00623 AAA00000  Nicolas Machado  Re^2: Supporting Cirilic...             
( 1)   03/06/02 06:15  00622へのコメント  コメント数：1
Uzaemon,
> Nicolas,
> 
> > Hy I'm trying to change your source for supporting cirilic, all the secret is to translate from ccsid 1025 Or Job Ccsid, to the CCSID 1251.
> > The question is : can i use iconv_index ?? I think you use it for handle many iconv() instances, because of the Open, convert,close sequence of this treatment.
> 
> Just try. If iconv() does not support 1025 to 1251 conversion, SNDM (iconv_open()) will report error.
It works. I make some changes in the program, and It support 1025 to 1251.

> 
> > Another procedure that I must read carefully is QEncode, I think that I can use it without any change, I only need that the source string be a 1025 CCSID hexas stream.
> 
> I don't know if Q-encoding is appropriate for Cirilic because it depends on language you use, in other words, common sense works here.
> 
> To handle Japanese (DBCS), B-encoding is used for header, and ISO-2022-JP charset without special encoding is used for body part. To handle ASCII and ISO-8859-1 languages (SBCS), Q-encoding is used for header, and quoted-printable is used for body part when necessary.

> 
> > i'm mistaking something??
> 
> One suggestion. You should investigate and change header >information from "ISO-8859-1" to another charset which >supports Cirilic.

Yes, I'm reading, RFC1345, and I believe that I must Use ISO-8859-5 to handle Cyrillic, but how did you code Qencode for translating un asterisc (*) into =2A ??.
In the RFC the Character table said that:
*      002a    ASTERISK

and that:
E!     00c8    LATIN CAPITAL LETTER E WITH GRAVE

And that exactly what I see, but what do I have to do if I need:
A=     0410    CYRILLIC CAPITAL LETTER A

What must be write to the mime file, " =A= " ??



> 
> Hope this helps.
> 
> uzaemon@Japan

Best Regards.
Nicolas
 
00622/00622 AAA00000  uzaemon          Re: Supporting Cirilic...               
( 1)   03/05/31 22:31  00621へのコメント  コメント数：2
Nicolas,

> Hy I'm trying to change your source for supporting cirilic, all the secret is to translate from ccsid 1025 Or Job Ccsid, to the CCSID 1251.
> The question is : can i use iconv_index ?? I think you use it for handle many iconv() instances, because of the Open, convert,close sequence of this treatment.

Just try. If iconv() does not support 1025 to 1251 conversion, SNDM (iconv_open()) will report error.

> Another procedure that I must read carefully is QEncode, I think that I can use it without any change, I only need that the source string be a 1025 CCSID hexas stream.

I don't know if Q-encoding is appropriate for Cirilic because it depends on language you use, in other words, common sense works here.

To handle Japanese (DBCS), B-encoding is used for header, and ISO-2022-JP charset without special encoding is used for body part. To handle ASCII and ISO-8859-1 languages (SBCS), Q-encoding is used for header, and quoted-printable is used for body part when necessary.

> i'm mistaking something??

One suggestion. You should investigate and change header information from "ISO-8859-1" to another charset which supports Cirilic.

Hope this helps.

uzaemon@Japan

 
00621/00621 AAA00000  Nicolas Machado  Supporting Cirilic...                   
( 1)   03/05/31 05:41

Hy I'm trying to change your source for supporting cirilic, all the secret is to translate from ccsid 1025 Or Job Ccsid, to the CCSID 1251.
The question is : can i use iconv_index ?? I think you use it for handle many iconv() instances, because of the Open, convert,close sequence of this treatment.

Another procedure that I must read carefully is QEncode, I think that I can use it without any change, I only need that the source string be a 1025 CCSID hexas stream.

i'm mistaking something??

Best Regards.

 
00620/00620 AAA00000  uzaemon          Re^3: Cirilic Body and Attachment       
( 1)   03/05/28 23:06  00619へのコメント

Nicolas,

> Where canI read more of these RFC, and how can I implement that on your SNDM utility??

I don't know anything about Cirilic so I'm not able to answer to your question.

> Onother about CRTCSVF, do you plan to add a Command Parameter called "DECIMAL SEPARATOR", ...

No, I don't have plan to add such parameter to CRTCSVF so far.

uzaemon@Japan

 
00619/00619 AAA00000  Nicolas Machado  Re^2: Cirilic Body and Attachment       
( 1)   03/05/28 21:40  00610へのコメント  コメント数：1
Hi again, maybe my mistake was that after reading the RFC1345, I thought that SNDM use Ciryllic.

Where canI read more of these RFC, and how can I implement that on your SNDM utility??

Onother about CRTCSVF, do you plan to add a Command Parameter called "DECIMAL SEPARATOR", in some windows box Excel uses coma(,) as decimal separator, but in other it can use dot(.), it depends on the languaje of windows, in our case could be English, or Spanish.

Best regards

> Nicolas,
> 
> > Hi, I just want to know, if SNDM support Cyrillic (Russian) in the Body and the Attach.
> > The problem we have is that some characters are coverted to a Cyrillic letter but it doesen't make a readable Word.
> > And also invert tha case of the leters, I mean lower case to upper and viceversa.
> > 
> > Do I have to use 1025 as a CCSID?? in Header and Body??
> > If I create the STMF for the attachment, wich CCSID do I have to use? NOw I'm using 819.
> 
> As stated at "usage" section (http://homepage1.nifty.com/uzaemon/sndm_usage.html), SNDM supports plain ASCII, Japanese (ISO-2022-JP) and ISO-8859-1 as mail header and body. Languages supported by ISO-8859-1 are listed at http://homepage1.nifty.com/uzaemon/iso8859.html and I don't think Cyrillic is on the list.
> 
> On the other hand, you can use any language in attachment file regardless of CCSID of the stream file because SNDM treats it as a binary stream.
> 
> Hope this helps.
> 
> uzaemon@Japan

 
00618/00618 AAA00000  uzaemon          Re^7: SNDMで送信されるメールが文字化け 
( 1)   03/05/27 20:30  00614へのコメント

yyさん、

> > SNDM内での不変文字セット(invariant character set)の処理が特殊な文字セットである日本語290(≦5026)を考慮していないための副作用と思われます。
> > 
> 内部的なことがよくわかっていないので、この意味が分かりません。
> よろしければもう少し詳しく教えて下さい。

「Invariant Character Set」についてはIBMのマニュアル(http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/QB3AWC01/2.1.11?SHELF=QB3AYC02&DT=19971120215738 など)に説明があります。

290は他の言語では英小文字にあたる部分に(いわゆる)半角カタカナを割り振った特殊なコードであり、SNDMでは内部でハードコードしている部分がこれに特別な対応をしていないという意味です。これ以上の詳細にご関心があるようでしたらソースコードを読んでみて下さい。

なお、日本語(DBCS)対応一般については「137. Re: Conversion of RPG code to Japanese」でも紹介している http://www-919.ibm.com/servers/eserver/iseries/developer/dbcs/guide.html をご覧ください。

uzaemon@Japan

 
00617/00617 AAA00000  uzaemon          same question again?                    
( 1)   03/05/27 20:25  00615へのコメント

Franz,

> I find SNDM very good, but I find no way how to add an attachment.
> I tried "\root\tmp\test.xls" or different other versions.
> There is always der error 107 "wrong path"!!
> Can you help me in this case?

Have you read "604. Re: SNDM (file separater)" in this BBS?

uzaemon@Japan

 
00615/00615 AAA00000  Franz Koch       SNDM                                    
( 1)   03/05/27 19:35

I find SNDM very good, but I find no way how to add an attachment.
I tried "\root\tmp\test.xls" or different other versions.
There is always der error 107 "wrong path"!!
Can you help me in this case?
Thank you very much.
With greetings Franz Koch
 
00614/00614 AAA00000  yy               Re^6: SNDMで送信されるメールが文字化け 
( 1)   03/05/27 09:21  00613へのコメント  コメント数：1

> メール届きました。SNDM実行前にCHGJOB CCSID(5035)を実行してください。おそらくそれで正しく送信できると思います。
> 
上記対応にて正常に送信できました。
ありがとうございました。

> SNDM内での不変文字セット(invariant character set)の処理が特殊な文字セットである日本語290(≦5026)を考慮していないための副作用と思われます。
> 
内部的なことがよくわかっていないので、この意味が分かりません。
よろしければもう少し詳しく教えて下さい。
 
00613/00613 AAA00000  uzaemon          Re^5: SNDMで送信されるメールが文字化け 
( 1)   03/05/26 21:13  00612へのコメント  コメント数：2
yyさん、

> 月曜日出社後にメールさせていただきます。

メール届きました。SNDM実行前にCHGJOB CCSID(5035)を実行してください。おそらくそれで正しく送信できると思います。

SNDM内での不変文字セット(invariant character set)の処理が特殊な文字セットである日本語290(≦5026)を考慮していないための副作用と思われます。

uzaemon@Japan

 
00612/00612 AAA00000  yy               Re^4: SNDMで送信されるメールが文字化け 
( 1)   03/05/24 16:44  00611へのコメント  コメント数：3
> yyさん、
> 
> > メールにて回答させていただきます。
> 
> BBSのご利用にあたってはルールをご確認ください。冒頭に「Do not send your questions by mail until I ask to do so.」と記載しています。
> 
失礼いたしました。以後気をつけます。

> > 5. SNDMを実行した5250エミュレーターのコードページ
> 
> とは、例えばPCOMMで表示装置セッションを作成した際のコードページのことです。通常日本では930か939を指定していると思われます。
> 
> いくつかチェックしたい点や状況で不明な点がありますので、DEBUG(*YES)を指定して出力されたデバッグ印刷出力をメールして下さい。
> 
月曜日出社後にメールさせていただきます。
 
00611/00611 AAA00000  uzaemon          Re^3: SNDMで送信されるメールが文字化け 
( 1)   03/05/24 14:46  00608へのコメント  コメント数：4
yyさん、

> メールにて回答させていただきます。

BBSのご利用にあたってはルールをご確認ください。冒頭に「Do not send your questions by mail until I ask to do so.」と記載しています。

> 5. SNDMを実行した5250エミュレーターのコードページ

とは、例えばPCOMMで表示装置セッションを作成した際のコードページのことです。通常日本では930か939を指定していると思われます。

いくつかチェックしたい点や状況で不明な点がありますので、DEBUG(*YES)を指定して出力されたデバッグ印刷出力をメールして下さい。

uzaemon@Japan

 
00610/00610 AAA00000  uzaemon          Re: Cirilic Body and Attachment         
( 1)   03/05/24 14:39  00609へのコメント  コメント数：2
Nicolas,

> Hi, I just want to know, if SNDM support Cyrillic (Russian) in the Body and the Attach.
> The problem we have is that some characters are coverted to a Cyrillic letter but it doesen't make a readable Word.
> And also invert tha case of the leters, I mean lower case to upper and viceversa.
> 
> Do I have to use 1025 as a CCSID?? in Header and Body??
> If I create the STMF for the attachment, wich CCSID do I have to use? NOw I'm using 819.

As stated at "usage" section (http://homepage1.nifty.com/uzaemon/sndm_usage.html), SNDM supports plain ASCII, Japanese (ISO-2022-JP) and ISO-8859-1 as mail header and body. Languages supported by ISO-8859-1 are listed at http://homepage1.nifty.com/uzaemon/iso8859.html and I don't think Cyrillic is on the list.

On the other hand, you can use any language in attachment file regardless of CCSID of the stream file because SNDM treats it as a binary stream.

Hope this helps.

uzaemon@Japan

 
00609/00609 AAA00000  Nicolas Machado  Cirilic Body and Attachment             
( 1)   03/05/24 03:29

Hi, I just want to know, if SNDM support Cyrillic (Russian) in the Body and the Attach.
The problem we have is that some characters are coverted to a Cyrillic letter but it doesen't make a readable Word.
And also invert tha case of the leters, I mean lower case to upper and viceversa.

Do I have to use 1025 as a CCSID?? in Header and Body??
If I create the STMF for the attachment, wich CCSID do I have to use? NOw I'm using 819.

Thanks, and sorry if you don't understand something, I'm from Argentina.
 
00608/00608 AAA00000  yy               Re^2: SNDMで送信されるメールが文字化け 
( 1)   03/05/23 17:45  00607へのコメント  コメント数：5
> yyさん、
> 
> > SNDMを実行したところ、送信されたメールが以下のような状態でした。
> > どこに原因があるのでしょうか？
> > 　1.宛先、件名が表示されていない
> > 　2.本文の上部に文字化けした内容が表示される
> > 　3.本文の下部に文字化けした内容が表示される(添付ファイルの内容?)
> > Message header CCSIDとDatabase file CCSIDは初期値のままと5026を指定して実行してみましたが、同じ結果でした。
> 
> 次の点をチェックしてお知らせください。
> 
> 1. OS/400およびSNDMのバージョン
> 2. SNDMはご自分でMAKEプロシージャーで作成したか
> 3. メール・サーバーの機種とソフト
> 4. メールを受信したメールソフト、およびOutlook ExpressあるいはNetscape Messengerで受信したときの結果
> 5. SNDMを実行した5250エミュレーターのコードページ
> 
> ご返事お待ちしています。
> 
> uzaemon@Japan
メールにて回答させていただきます。
 
00607/00607 AAA00000  uzaemon          Re: SNDMで送信されるメールが文字化けし 
( 1)   03/05/22 21:17  00606へのコメント  コメント数：6
yyさん、

> SNDMを実行したところ、送信されたメールが以下のような状態でした。
> どこに原因があるのでしょうか？
> 　1.宛先、件名が表示されていない
> 　2.本文の上部に文字化けした内容が表示される
> 　3.本文の下部に文字化けした内容が表示される(添付ファイルの内容?)
> Message header CCSIDとDatabase file CCSIDは初期値のままと5026を指定して実行してみましたが、同じ結果でした。

次の点をチェックしてお知らせください。

1. OS/400およびSNDMのバージョン
2. SNDMはご自分でMAKEプロシージャーで作成したか
3. メール・サーバーの機種とソフト
4. メールを受信したメールソフト、およびOutlook ExpressあるいはNetscape Messengerで受信したときの結果
5. SNDMを実行した5250エミュレーターのコードページ

ご返事お待ちしています。

uzaemon@Japan

 
00606/00606 AAA00000  yy               SNDMで送信されるメールが文字化けします  
( 1)   03/05/22 12:56

SNDMを実行したところ、送信されたメールが以下のような状態でした。
どこに原因があるのでしょうか？
　1.宛先、件名が表示されていない
　2.本文の上部に文字化けした内容が表示される
　3.本文の下部に文字化けした内容が表示される(添付ファイルの内容?)
Message header CCSIDとDatabase file CCSIDは初期値のままと5026を指定して実行してみましたが、同じ結果でした。

宜しくお願いします。
 
00605/00605 AAA00000  uzaemon          Re: リストアするライブラリ名について    
( 1)   03/05/21 21:59  00602へのコメント

yyさん、

> CRTCSVFのリストア先ライブラリはCSV、SNDMはSMTPとなっていますが、別の名前のライブラリにリストア(または上記ライブラリにリストア後にライブラリ名を変更)しても問題ないのでしょうか？

REXXプロシージャー、"MAKE"でどのように指定しているかを見れば問題があるかないか判断できます。

例えばSNDMコマンドは「コマンドを処理するプログラム」が*LIBL/SNDM で「ヘルプ・パネル・グループ」がSMTP/SNDM となっています。つまり、例えばライブラリー名を変えるとプログラムは(*LIBLにSNDMプログラムがあれば)動きますが、ヘルプが表示されなくなります(CSVも同様)。

"MAKE"プロシージャーを編集するか、自分でコンパイルするか、あるいはCHGCMDでヘルプ・パネル・グループのライブラリーを変更すれば、普通のOS/400のプログラム同様に任意の名前のライブラリーに置くことは当然可能です。

uzaemon@Japan

 
00604/00604 AAA00000  uzaemon          Re: SNDM (file separater)               
( 1)   03/05/21 21:43  00601へのコメント

Franz,

> I have download the freeware SNDM and have a problem with ATTACHMENT: 
> I tried:     \root\tmp\file
> the error-message ist always "commen failed - reason 107"??

You should not use "\" as separater. If you want to send an attachment file "A.TXT" under the directory "/tmp" on IFS, you should specify as "/tmp/A.TXT".

uzaemon@Japan

 
00603/00603 AAA00000  uzaemon          Re: CRTCSVF (QTXTSRC?)                  
( 1)   03/05/21 21:37  00600へのコメント

Kevin,

> I tried to install CRTCSVF.  After FTPing the save file to the AS400 and displaying the objects, I don't see QTXTSRC.  I only see the following objects:  LICENSE, SOURCE, CRTCSVF, CRTCSVFHLP.  Do I need QTXTSRC?

No, it's documentation error and I've already corrected it. You need only "SOURCE" to compile the software. 

Thank you very much for your suggestion.

uzaemon@Japan

 
00602/00602 AAA00000  yy               リストアするライブラリ名について        
( 1)   03/05/21 17:15

CRTCSVFのリストア先ライブラリはCSV、SNDMはSMTPとなっていますが、別の名前のライブラリにリストア(または上記ライブラリにリストア後にライブラリ名を変更)しても問題ないのでしょうか？
 
00753/00753 AAA00000  Trevor           Re: problema con SPL2STMF               
( 1)   03/12/12 00:47  00751へのコメント  コメント数：6
Same thing for me. We're at V5R2 and the HPT appears to fail when hptopt = 20
Spool number has changed from 4 digits to six; but that doesn't seem to be the problem.

 
00752/00752 AAA00000  uzaemon          Re: QSYSINC                             
( 1)   03/12/10 21:52  00750へのコメント

Achille,

> In my AS400 V5R2M0 I do not have bookcase QSYSINC. Sapete dirmi as I make to create it. I do not succeed to compile SPL2STMFRP..........

As you posted "751. problema con SPL2STMF", this is not a problem now, right?

uzaemon@Japan

 
00751/00751 AAA00000  achille belardi  problema con SPL2STMF                   
( 1)   03/12/09 23:21

 Selezione o comando                                                            
 ===> SPL2STMF FILE(QPSUPRTF) TOSTMF('/TMP/SPL2STMFRP.TXT') WSCST(QWPTIFFPB)    
                                                                                
 F3=Fine   F4=Richiesta     F9=Duplicaz.   F12=Annullamento                     
 F13=Supporto informativo   F23=Impostazione menu iniziale                      
 Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2 hpto...   
 
00750/00750 AAA00000  Achille Belardi  QSYSINC                                 
( 1)   03/12/09 19:16

In my AS400 V5R2M0 I do not have bookcase QSYSINC. Sapete dirmi as I make to create it. I do not succeed to compile SPL2STMFRP..........
 
00749/00749 AAA00000  Peter Feickert   Re^3: SNDM: Compile Error because of CCS
( 1)   03/12/06 01:03  00748へのコメント

Hello Uzaemon!

This was a hard one!

But I found out, that after changing the CCSID to 65535 everything could be compiled correctly.

But I don't realy know if the country and character specifications was the problem because I have copied the sourcefiles to a new QRPGLESRC and H and LICENSE and QREXSRC with the ccsid 65535 and language id ENU.

Now everytinh is O.K. - as far as I have tested.

Peter
 
00748/00748 AAA00000  Peter Feickert   Re^2: SNDM: Compile Error because of CCS
( 1)   03/12/03 22:51  00747へのコメント  コメント数：1
 
> I don't think of why you see CCSID 5035 which is "Japanese Latin Extended", because I packaged SNDM using CCSID 37, "US English". What CCSID does your QRPGLESRC have? Is the source file original, or did you created the source file with CCSID 5035 by some reason? 
> 
> uzaemon@Japan

Uzaemon!

Thank you for your quick reply!

You gave me a hint. I have checked the filedescription of the file QRPGLESRC in the delivered SMTP lib.

There is something wrong  here is a printout of a part of the dspffd command:

   Max % deleted records allowed . . . . . . . : DLTPCT     *NONE         
   Coded character set identifier  . . . . . . : CCSID         37         
   Allow read operation  . . . . . . . . . . . :            Yes           
   Allow write operation . . . . . . . . . . . :            Yes           
   Allow update operation  . . . . . . . . . . : ALWUPD     *YES          
   Allow delete operation  . . . . . . . . . . : ALWDLT     *YES          
   Record format level check . . . . . . . . . : LVLCHK     *NO           
   Access path . . . . . . . . . . . . . . . . :            Arrival       
   Maximum record length . . . . . . . . . . . :               92         
   File is currently journaled . . . . . . . . :            No            
 Access Path Description                                                  
   Access path . . . . . . . . . . . . . . . . :            Arrival       
   Sort Sequence . . . . . . . . . . . . . . . : SRTSEQ     *HEX          
   Language identifier . . . . . . . . . . . . : LANGID     JPN           

As you can see, there is the language id set to JPN. As soon as I am able I will change this to US (or something similar). Maybe this will solve the problem.

I send you an answer if this works out.

Peter

 
00747/00747 AAA00000  uzaemon          Re: SNDM: Compile Error because of CCSID
( 1)   03/12/03 20:52  00746へのコメント  コメント数：2
Peter,

> After the perfect installation and implementation of SNDM on our german machine, I wouldt like to install the tool on our polish machine.

SNDM supports US-ASCII, ISO-8859-1 and ISO-2022-JP as stated at my homepage. See http://homepage1.nifty.com/uzaemon/iso8859.html for more information. Polish (ISO-8859-2?) and other languages have not been tested and will not work correctly.

> ID komunikatu  . . . . :   CPF325F       Wa･noｫ・ . . . . . . . :   40       
> Typ komunikatu . . . . :   Wyjｫcia                                           
> Data wysｪania. . . . . :   03/12/03      Godzina wysｪania . . . :   07:51:37 
>                                                                              
> Komunikat . . . :   Conversion of the text failed.                           
> Cause . . . . . :   The file or member definition for file QRPGLESRC member  
>   SNDM in library SMTP was being converted. However, the text for field *N   
>   could not be converted into the job default or requested CCSID. The        
>   conversion was from CCSID 5035 to CCSID 870.                               
> Recovery  . . . :   Specify a different CCSID for the job and try the request
>   again. A CCSID of 65535 can be specified if no conversion is desired.      

I don't think of why you see CCSID 5035 which is "Japanese Latin Extended", because I packaged SNDM using CCSID 37, "US English". What CCSID does your QRPGLESRC have? Is the source file original, or did you created the source file with CCSID 5035 by some reason? 

uzaemon@Japan

 
00746/00746 AAA00000  Peter Feickert   SNDM: Compile Error because of CCSID on 
( 1)   03/12/03 16:22

Hello Uzaemon!

After the perfect installation and implementation of SNDM on our german machine, I wouldt like to install the tool on our polish machine.

During compilation the following error appears on every source-compilation (with your original source and the modified ones):

------------------------------------------------------------
ID komunikatu  . . . . :   CPF325F       Wa･noｫ  . . . . . . . :   40       
Typ komunikatu . . . . :   Wyjｫcia                                           
Data wysｪania. . . . . :   03/12/03      Godzina wysｪania . . . :   07:51:37 
                                                                             
Komunikat . . . :   Conversion of the text failed.                           
Cause . . . . . :   The file or member definition for file QRPGLESRC member  
  SNDM in library SMTP was being converted. However, the text for field *N   
  could not be converted into the job default or requested CCSID. The        
  conversion was from CCSID 5035 to CCSID 870.                               
Recovery  . . . :   Specify a different CCSID for the job and try the request
  again. A CCSID of 65535 can be specified if no conversion is desired.      


------------------------------------------------------------


I believe it wont help to change the ccsid to 65535, because then the texconversion in SNDM for the polish chars will not work out because then the emailadresses are not put into "<" and ">" signs. Here is an example from the debug print:  

--------------------------------------------------------
To       : 1 recipient(s)                       
            ﾄp.feickert@perschmann.deﾜ ﾄﾜ ﾄ*TO ﾜ 
--------------------------------------------------------
Could you please give me a hint about this problem, i am not so familiar withe CCSID- and codepage problems.

Thanks
Peter
 
00745/00745 AAA00000  peco             Re^4: SNDMのSubject (64→128byteに)     
( 1)   03/11/27 19:17  00743へのコメント

uzaemon様

ありがとうございます。
アドバイス頂いた通りやっみます。

 
00744/00744 AAA00000  Peter Feickert   Re^4: Qty Attachments in SNDM and a BIG 
( 1)   03/11/27 18:54  00742へのコメント

> Peter,
> 
> > Curently we are developing further and want to crate a simple email with delivery notifications. For some reasons we want to send a printerfile as mailbody. Do do this efectively we need to use longer textlines in the mail body than 80.
> > I have bben searching the source code - but i cant find the trick to get longer textlines. Could you please give me a hint in which module i haver to do some changes.
> 
> I don't recommend the modification because if the recipient forward the mail, body text may be wrapped unexpectedly.
> 
> Still, if you need to do that, you may check out following source members:
> 
> - line 443 of member #GEN -> read from body file
> - line 202 of member #INIT -> check text length
> - several lines of member SNDM -> receive buffer definitions
> 
> Hope this helps.
> 
> uzaemon@Japan


Thank you very much for your help!
Everything is now up and running. Our emails are created correctly. 
You are absolutely right with the problem of the line wrap but this sould be a quick solution for special needs.

BTW: In your hints you have forgotten, that the member #PROC must be changed also because of the variable "ebcdic", which must be enlarged also.


Thanks for your quick response.

Peter
 
00743/00743 AAA00000  uzaemon          Re^3: SNDMのSubject (64→128byteに)     
( 1)   03/11/27 16:59  00741へのコメント  コメント数：1
pecoさん、

> Bエンコードによるメールヘッダーの文字列長の増加に配慮の部分がよく分かりません。
> QRPGSRCのメンバーSNDMのD仕様書に「'B' encode for DBCS mail header」と記述されている部分があったので、ascii。newbufの桁数を変更してみましたが、リコンパイル後、実行するとうまくうごきませんでした。
> 'B' encodeのロジック(?)がメンバー#PROCの中にもあったので、sndmと同様の長さに変更してみても変わりませんした。

メールヘッダーのBエンコードはRFC2047等を参照してください。例えば「これは長いメールヘッダーです。 test 送信されます。 2003/11/27」というテキストは下記の様に変換されます。

=?ISO-2022-JP?B?GyRCJDMkbCRPRDkkJCVhITwlayVYJUMlQCE8JEckOSEjGyhK?=
 =?ISO-2022-JP?B?dGVzdBskQkF3Py4kNSRsJF4kOSEjGyhKMjAwMy8xMS8yNxsoQg==?=

この様に元の文字列に対して変換後の文字列ははるかに長くなりますので、充分なバッファー長を取っておく必要があります。どう「うまくうご」かないのか記載されていませんが、Bエンコードの部分は複雑な処理をしていますので、最初は触らない方が良いでしょう。まずは単純にBエンコード前のメール・ヘッダーの長さ部分のみを長くして試してみてはいかがでしょうか。

uzaemon@Japan

 
00742/00742 AAA00000  uzaemon          Re^3: Qty Attachments in SNDM and a BIG 
( 1)   03/11/27 16:42  00739へのコメント  コメント数：1
Peter,

> Curently we are developing further and want to crate a simple email with delivery notifications. For some reasons we want to send a printerfile as mailbody. Do do this efectively we need to use longer textlines in the mail body than 80.
> I have bben searching the source code - but i cant find the trick to get longer textlines. Could you please give me a hint in which module i haver to do some changes.

I don't recommend the modification because if the recipient forward the mail, body text may be wrapped unexpectedly.

Still, if you need to do that, you may check out following source members:

- line 443 of member #GEN -> read from body file
- line 202 of member #INIT -> check text length
- several lines of member SNDM -> receive buffer definitions

Hope this helps.

uzaemon@Japan

 
00741/00741 AAA00000  peco             Re^2: SNDMのSubject (64→128byteに)     
( 1)   03/11/27 11:00  00738へのコメント  コメント数：2
uzaemon様

> ヘルプにあるCPPの制限と、Bエンコードによるメールヘッダーの文字列長の増加に配慮する必要がありますのでご注意を。

Bエンコードによるメールヘッダーの文字列長の増加に配慮の部分がよく分かりません。
QRPGSRCのメンバーSNDMのD仕様書に「'B' encode for DBCS mail header」と記述されている部分があったので、ascii。newbufの桁数を変更してみましたが、リコンパイル後、実行するとうまくうごきませんでした。
'B' encodeのロジック(?)がメンバー#PROCの中にもあったので、sndmと同様の長さに変更してみても変わりませんした。
大変申し訳ありませんが、アドバイスしていただけないでしょうか？

（コマンドとヘルプの修正箇所はわかりました。）


宜しくお願い致します。


 
00740/00740 AAA00000  yy               Re^5: SNDMとCRTCSVF(添付ファイルの文字 
( 1)   03/11/27 08:47  00737へのコメント

お世話になります。

> いずれにしても正しいASCII-EBCDICペアのCCSIDを指定すればファイルのCCSIDにかかわらず変換できるはずです。例えば日本語カナのDBなら5026を、出力先のASCII CCSIDには932/942/943のいずれかを明示的に指定します。それでも正常に変換できない場合はCHGJOBでジョブのCCSIDを65535に指定してみてください。

5026->942の変換を行ったところ、WRKLNKでは文字化けしてしまいました(CHGJOB 5026または5035すれば正しく表示されました)が、メールに添付してPCで見たところ、正しく表示されました。

これで何とか使うことが出来そうです。
これからも宜しくお願い致します。
ありがとうございました。
 
00739/00739 AAA00000  Peter Feickert   Re^2: Qty Attachments in SNDM and a BIG 
( 1)   03/11/27 00:20  00736へのコメント  コメント数：2
Uzaemon!

It is a real pleasure to use this tool, because it is (nearly) perfect - that's my real opinion.
But for special solutions some enhancements must be applied - as we solve for example the problems with the attachments.

Curently we are developing further and want to crate a simple email with delivery notifications. For some reasons we want to send a printerfile as mailbody. Do do this efectively we need to use longer textlines in the mail body than 80.
I have bben searching the source code - but i cant find the trick to get longer textlines. Could you please give me a hint in which module i haver to do some changes.

Thanks in advance.

Peter

 
00738/00738 AAA00000  uzaemon          Re: SNDMのSubject (64→128byteに)       
( 1)   03/11/26 21:07  00735へのコメント  コメント数：3
pecoさん、

> 現在Subjectは64byteまでした設定できませんが、128byteまで設定出来るようにコマンドを変更する事は可能でしょうか？

ソースコードを変更すれば可能です。ILE-RPGとコマンド定義を作成した事があればそれほど難しくはないでしょう。

ヘルプにあるCPPの制限と、Bエンコードによるメールヘッダーの文字列長の増加に配慮する必要がありますのでご注意を。

uzaemon@Japan

 
00737/00737 AAA00000  uzaemon          Re^4: SNDMとCRTCSVF(添付ファイルの文字 
( 1)   03/11/26 21:01  00733へのコメント  コメント数：1
yyさん、

一般にSBCSとDBCS、65535と他のCCSIDの変換はiconv(文字変換ルーチン)でエラーになります。DBCS間、SBCS間でも制限があります(例えばシフトJIS-932とJIS-5052の変換はサポートされない)。よって、下記の変換はいずれもエラーになるべくしてなっています。

EBCDIC CCSID - 65535 / ASCII CCSID - 00437
EBCDIC CCSID - 05026 / ASCII CCSID - 00437
EBCDIC CCSID - 00037 / ASCII CCSID - 00942

詳細は http://www-1.ibm.com/servers/eserver/iseries/software/globalization/ccsid.html をご覧ください。

いずれにしても正しいASCII-EBCDICペアのCCSIDを指定すればファイルのCCSIDにかかわらず変換できるはずです。例えば日本語カナのDBなら5026を、出力先のASCII CCSIDには932/942/943のいずれかを明示的に指定します。それでも正常に変換できない場合はCHGJOBでジョブのCCSIDを65535に指定してみてください。

不可解なのはCRTCSVFで37(EBCDIC US English)→437(ASCII US English)に変換しているにもかかわらず、WRKLNKコマンドで漢字が正しく表示されることです。EDTFコマンドでSTMFパラメーターにCSVファイルを指定しても正しく表示されるのでしょうか？ また、例えばFTPでバイナリーモードでPCに転送した場合でも正常に表示されますか？

ご返答をお待ちしています。

uzaemon@Japan

 
00736/00736 AAA00000  uzaemon          Re: Qty Attachments in SNDM and a BIG TH
( 1)   03/11/26 20:30  00734へのコメント  コメント数：3
Peter,

Thank you very much for your feedback. You've resolved your own requirement ("658. SNDM - More attachments" http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=658&log_no=658&msg_per_page=50&def=10) by yourself. In this case, it seems that "opensource" policy worked very well.

Good luck and have fun.

uzaemon@Japan

 
00735/00735 AAA00000  peco             SNDMのSubject                           
( 1)   03/11/26 19:29

SNDMコマンドを利用させて頂きたいと思っています。

現在Subjectは64byteまでした設定できませんが、128byteまで設定出来るようにコマンドを変更する事は可能でしょうか？

お手数をお掛けします。宜しくお願い致します。


 
00734/00734 AAA00000  Peter Feickert   Qty Attachments in SNDM and a BIG THANK 
( 1)   03/11/26 18:15

Hello uzaemon!

At first i would like to thank you again that you created the tool SNDM! It is very usefull four me and my company!

I just want to inform you, that it is possible to create an email with 199 smal attachments! 
I modified the sourcecode (CMD and SNDM-RPG) anf tested it with 199 attachments. Each attachment has a name with around 32 characters, so that i currently need a cmd-length that is around 7000 bytes and only these 199 attachments needs 6000 byte. 

In the RPG only the line "Dattachment_num   C                   199" was changed. 
In the CMD only the qty. of attachments was set to 199.

So - thanks again for your tool!

BTW: We work with an exchange server 5.5 and SNDM send the mail direct to the server (Parm SMTPHOST in cmd SMTP)

P. Feickert
 
00733/00733 AAA00000  yy               Re^3: SNDMとCRTCSVF(添付ファイルの文字 
( 1)   03/11/26 08:36  00732へのコメント  コメント数：2
> なぜ37で変換したかといいますと、日本側で実行している5026ではエラー(iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 00437 - 3021 : 引き数に指定された値が正しくない。)になってしまい、ジョブのCCSID：37を指定したところ、エラーにならなかったためです。

申し訳ありません。貼り付けたエラーメッセージが間違っていました。
上記は初期値のまま実行した場合で、5026で実行したときは「iconv_open failed. EBCDIC CCSID - 05026 / ASCII CCSID - 00437 - 3021 : 引き数に指定された値が正しくない。」になります。

宜しくお願い致します。
 
00732/00732 AAA00000  yy               Re^2: SNDMとCRTCSVF(添付ファイルの文字 
( 1)   03/11/26 08:32  00731へのコメント  コメント数：3
> CRTCSVFで作成したファイルを添付ファイルとしてSNDMで送信しようとしているのでしょうか？

その通りです。

> とすると、明らかに誤りと思われるのは「メールに添付されるファイル」に漢字が含まれているにもかかわらず「CRTCSVFコマンドのDatebase file CCSIDは37」とされている事です。37はUS Englishですので漢字を処理することはできません。WRKLNKで正しく表示されることがむしろ不可解なのですが、このファイル(ストリームファイル)のCCSIDはいくつになっているのでしょうか？

コード化文字セットID：437となっています。
なぜ37で変換したかといいますと、日本側で実行している5026ではエラー(iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 00437 - 3021 : 引き数に指定された値が正しくない。)になってしまい、ジョブのCCSID：37を指定したところ、エラーにならなかったためです。

> また、日本と中国にAS/400をお持ちのようですが、日本語環境でも同様のエラーになりますか？ また、それぞれのOS/400のバージョンはいくつでしょうか？

日本側ではDatebase file CCSIDに37を指定するとエラー(iconv_open failed. EBCDIC CCSID - 00037 / ASCII CCSID - 00942 - 3021 : 引き数に指定された値が正しくない)になりますが、5026を指定すればエラーになりません。そのときのストリームファイルのCCSIDは942になります。
また、OS/400のバージョンは日本/中国共に5.1です。

宜しくお願い致します。
 
00731/00731 AAA00000  uzaemon          Re: SNDMとCRTCSVF(添付ファイルの文字化 
( 1)   03/11/26 00:03  00730へのコメント  コメント数：4
yyさん、

> 添付ファイルの内容が文字化けしてしまいました。
> AS／400上(WRKLNKコマンド)では正しく表示されるのですが、
> メールに添付されるファイルを見ると、漢字が化けています。
> お手数ですが、解決方法をご教示ください。
> 
> 尚、このAS／400は中国にあり、日本のAS／400からパススルーで
> 接続しており、コード化文字セット識別コードは65535、省略時の
> コード化文字セット識別コードは37となっています。
> また、CRTCSVFコマンドのDatebase file CCSIDは37、SNDMコマンド
> のMessage header CCSIDとDatabase file CCSIDはともに
> *DFTJOBCCSIDで実行しています。

CRTCSVFで作成したファイルを添付ファイルとしてSNDMで送信しようとしているのでしょうか？

とすると、明らかに誤りと思われるのは「メールに添付されるファイル」に漢字が含まれているにもかかわらず「CRTCSVFコマンドのDatebase file CCSIDは37」とされている事です。37はUS Englishですので漢字を処理することはできません。WRKLNKで正しく表示されることがむしろ不可解なのですが、このファイル(ストリームファイル)のCCSIDはいくつになっているのでしょうか？

また、日本と中国にAS/400をお持ちのようですが、日本語環境でも同様のエラーになりますか？ また、それぞれのOS/400のバージョンはいくつでしょうか？

ご返答お待ちしています。

uzaemon@Japan

 
00730/00730 AAA00000  yy               SNDMとCRTCSVF                           
( 1)   03/11/25 18:09

uzaemon様。

SNDMとCRTCSVFコマンドを利用させていただいております。
この度、別のAS／400にこれらをインストールして実行したところ、
添付ファイルの内容が文字化けしてしまいました。
AS／400上(WRKLNKコマンド)では正しく表示されるのですが、
メールに添付されるファイルを見ると、漢字が化けています。
お手数ですが、解決方法をご教示ください。

尚、このAS／400は中国にあり、日本のAS／400からパススルーで
接続しており、コード化文字セット識別コードは65535、省略時の
コード化文字セット識別コードは37となっています。
また、CRTCSVFコマンドのDatebase file CCSIDは37、SNDMコマンド
のMessage header CCSIDとDatabase file CCSIDはともに
*DFTJOBCCSIDで実行しています。
ほかに必要な情報がありましたら指示ください。

宜しくお願い致します。

 
00729/00729 AAA00000  uzaemon          Re^6: SNDM utility (underlying technique
( 1)   03/11/13 19:55  00728へのコメント

Uday,

> Thanks for your prompt response. For me to talk to the Mail Server Administrator, could you tell me the underlying technique used in the SNDM. i.e, what API is used for this purpose? Or is it socket programming using TCP/IP? Your response is very much appreciated.

SNDM uses both BSD socket APIs and OS/400 unique APIs. See http://homepage1.nifty.com/uzaemon/SNDM_flowchart.gif for detail.

uzaemon@Japan

 
00728/00728 AAA00000  Uday Shankar     Re^5: SNDM utility (limit "delivery fail
( 1)   03/11/13 02:57  00727へのコメント  コメント数：1
Hi,
Thanks for your prompt response. For me to talk to the Mail Server Administrator, could you tell me the underlying technique used in the SNDM. i.e, what API is used for this purpose? Or is it socket programming using TCP/IP? Your response is very much appreciated.

Thanks,
Uday
 
00727/00727 AAA00000  uzaemon          Re^4: SNDM utility (limit "delivery fail
( 1)   03/11/12 08:27  00726へのコメント  コメント数：2
Uday,

> I got another question about SNDM utility. If we typed a wrong email address but in the right format (for example 123@345.com), though there is no CPF message generated at the time of using SNDM, the sender keeps getting the Delivery failure email from the Mail router. Infact, when I was testing the SNDM utility and entered a wrong recepient email address, I(as a sender) am getting delivery failure emails for the last 2-3 days, saying that the message is delayed and it is going to keep trying. Is there a way we could limit these emails/trials to a particular number?

There are no way for SNDM (and any MUAs) to limit such error-reply-mail. You should consult your mail server administrator (or ISP).

uzaemon@Japan

 
00726/00726 AAA00000  Uday Shankar     Re^3: SNDM utility (Is there a way to co
( 1)   03/11/12 02:22  00725へのコメント  コメント数：3
Hi,
I got another question about SNDM utility. If we typed a wrong email address but in the right format (for example 123@345.com), though there is no CPF message generated at the time of using SNDM, the sender keeps getting the Delivery failure email from the Mail router. Infact, when I was testing the SNDM utility and entered a wrong recepient email address, I(as a sender) am getting delivery failure emails for the last 2-3 days, saying that the message is delayed and it is going to keep trying. Is there a way we could limit these emails/trials to a particular number?

Thanks,
Uday
 
00725/00725 AAA00000  uday             Re^2: SNDM utility (Is there a way to co
( 1)   03/11/08 03:37  00724へのコメント  コメント数：4
Thanks a bunch. It was very helpful. 

Uday

> Uday,
> 
> > I downloaded the SNDM utility. I think it works great. Thanks for that. I got one question. Is there a way to confirm if the message was sent succesfully out of the AS/400? It would be very helpful if you could answer my question.
> 
> If SNDM completes without error, the mail has been accepted by your SMTP server successfully. There are no common method to check if the mail arrive to the recipient(s).
> 
> See message "379. Re^3: How can i be sure that the email was sent ?" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=379&log_no=379&msg_per_page=50&def=10) if you want to check the completion status of SNDM.
> 
> Hope this helps.
> 
> uzaemon@Japan

 
00724/00724 AAA00000  uzaemon          Re: SNDM utility (Is there a way to conf
( 1)   03/11/06 00:35  00723へのコメント  コメント数：5
Uday,

> I downloaded the SNDM utility. I think it works great. Thanks for that. I got one question. Is there a way to confirm if the message was sent succesfully out of the AS/400? It would be very helpful if you could answer my question.

If SNDM completes without error, the mail has been accepted by your SMTP server successfully. There are no common method to check if the mail arrive to the recipient(s).

See message "379. Re^3: How can i be sure that the email was sent ?" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=379&log_no=379&msg_per_page=50&def=10) if you want to check the completion status of SNDM.

Hope this helps.

uzaemon@Japan

 
00723/00723 AAA00000  Uday Shankar     SNDM utility                            
( 1)   03/11/05 06:11

Hi,
I downloaded the SNDM utility. I think it works great. Thanks for that. I got one question. Is there a way to confirm if the message was sent succesfully out of the AS/400? It would be very helpful if you could answer my question.
Thanks,
Uday
 
00720/00720 AAA00000  uzaemon          Re: SNDM, external mail, problem solved 
( 1)   03/10/31 12:35  00719へのコメント

Olivier,

> the problem is solved, the reason was that de "from" address must exists in the local domain, if it don't exists, no external email can be sent.
> This is probably a setting of the email server.
> But it could be interresting for others people on the as400 community to know that ...  So, everybody knows it now :-)

Thank you very much for your feedback! :-)

uzaemon@Japan

 
00719/00719 AAA00000  Olivier Waroquie SNDM, external mail, problem solved     
( 1)   03/10/31 00:32  00717へのコメント  コメント数：1
Hi,
the problem is solved, the reason was that de "from" address must exists in the local domain, if it don't exists, no external email can be sent.
This is probably a setting of the email server.
But it could be interresting for others people on the as400 community to know that ...  So, everybody knows it now :-)

Thanks 
Olivier
 
00718/00718 AAA00000  Olivier Waroquie Re^2: SNDM, external mail               
( 1)   03/10/30 23:09  00717へのコメント

Thanks for the quick answer ...

I have define the following things via CFGTCP (option 10) :
IP-adres         My_email_server     
                 My_email_server.My_companyname.BE   
                 SMTPMAIL            
                 My_companyname.BE            

In WRKDIRE : 

User ID/Address . . . . :   *ANY      SMTPMAIL            
Description . . . . . . :   Mail server                   
System name/Group . . . :   TCPIP                         
User profile  . . . . . :                                 
Network user ID . . . . :   *ANY     SMTPMAIL             

In CHGSMTPA : 
Parameter SYSNAME(TCPIP)
MAILROUTER(My_email_server)

Am I looking it too far, or is there something I still have to define ? 
I thank you ...
 
00717/00717 AAA00000  uzaemon          Re: SNDM, external mail                 
( 1)   03/10/30 22:53  00716へのコメント  コメント数：3
Olivier,

> I have installed SNDM, and I want to thank you, because it's a very good tool to send emails. 

My pleasure.

> I have one problem when I try to send emails outside the domain of my company, could you tell me what I have to define so that it would work ?
> The command and the setup of the as400 system is OK for emails inside the domain.

See message "300. Re: -301 negative........ ( RSP[554" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=300&log_no=300&msg_per_page=50&def=10) in this BBS and nice article in newsgroup (http://groups.google.com/groups?hl=nl&lr=&ie=UTF-8&oe=UTF-8&frame=right&th=ca0884a5231f0e1e&seekm=3f337fe3.2733437%40news.demon.co.uk#link1)

Hope this helps.

uzaemon@Japan

 
00716/00716 AAA00000  Olivier Waroquie SNDM, external mail                     
( 1)   03/10/30 22:33

I have installed SNDM, and I want to thank you, because it's a very good tool to send emails. 
I have one problem when I try to send emails outside the domain of my company, could you tell me what I have to define so that it would work ?
The command and the setup of the as400 system is OK for emails inside the domain.
Thanks for any tip ...

Olivier 
 
00715/00715 AAA00000  uzaemon          Re: hpt library (help file missing)     
( 1)   03/10/24 12:31  00714へのコメント

marco,

> in your source file in hpt.savf there is not a file called SPL2STMFHL and a compilation fail, then an execution of  SPL2STMF program fail with error cpf3cf2 hptopt=20 why?

See "11. Re: SNDMHLP missing from SMTP120.exe" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=11&log_no=11&msg_per_page=50&def=10). I have not been able to add help panel because I'm lazy guy :-)  It does not harm the functionality of SPL2STMF.

As for cpf3cf2, see "706. QwpzHostPrintTransform failed : CPF3CF2" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=706&log_no=706&msg_per_page=50&def=10) just below.

uzaemon@Japan

 
00714/00714 AAA00000  marco            hpt library                             
( 1)   03/10/24 01:10

in your source file in hpt.savf there is not a file called SPL2STMFHL and a compilation fail, then an execution of  SPL2STMF program fail with error cpf3cf2 hptopt=20 why?
thx

 
00713/00713 AAA00000  uzaemon          Re: RCVM: Name of Attchment             
( 1)   03/10/23 20:40  00712へのコメント

Aad,

> I need to know the name of the attachment which has been received with the RCVM. Is there anyway I can change the Rcvmail.java so that I can list it in the RCVMLOG file?

I developed RCVM mainly for B2B mail solution. In this case, I assume that the naming rule of attachment file must be pre-negotiated between companies.

Still, if you want to modify RCVM, you can find the attachment file by "disposition" attribute. Or you may create new program which looks for attachment files in the mail directory (available from RCVM log file) in some manner.

Hope this helps.

uzaemon@Japan

 
00870/00870 AAA00000  Josh             Re^2: Data Truncation (???)             
( 1)   04/12/18 00:32  00869へのコメント

Sorry,

Yes, I was asking about RCVM.  I was in a hurry when I asked the question and didn't explain the problem very well.

I seem to get the error when the "TO" part of the incoming emails contain more than one email address (such as an email list).

I'll check the debug log and see what I can figure out.

Thanks for your help

Josh





> Josh,
> 
> > Getting the following error:
> > java.DataTruncation: Data Truncation
> > 
> > What does this error mean?
> 
> I can't figure out why you are asking above question. If you are talking about RCVM command, it can provides more debug information...
> 
> Anyway, it means length of String variable is smaller than the value. You can find more information about Java errors by searching Google.
> 
> uzaemon@Japan

 
00869/00869 AAA00000  uzaemon          Re: Data Truncation (???)               
( 1)   04/12/17 22:56  00867へのコメント  コメント数：1
Josh,

> Getting the following error:
> java.DataTruncation: Data Truncation
> 
> What does this error mean?

I can't figure out why you are asking above question. If you are talking about RCVM command, it can provides more debug information...

Anyway, it means length of String variable is smaller than the value. You can find more information about Java errors by searching Google.

uzaemon@Japan

 
00868/00868 AAA00000  uzaemon          Re^3: minizip/miniunz: (CLP bug)        
( 1)   04/12/17 22:43  00866へのコメント

Fred,

> ... both the ZIP and UNZIPCLP (CPP for ZIP and UNZIP) have a bug in the code. The call to QCMDEXC has the 2nd parmeter set to 300, but it needs to be 3000.

Thank you very much for your suggestion. I'll correct them when I have time.

uzaemon@Japan

 
00867/00867 AAA00000  Josh             Data Truncation                         
( 1)   04/12/17 06:07

Getting the following error:
java.DataTruncation: Data Truncation

What does this error mean?

Thanks!
 
00866/00866 AAA00000  Fred Skinner     Re^2: minizip/miniunz: Support for STDIN
( 1)   04/12/17 00:03  00865へのコメント  コメント数：1
Thanks, I was pretty sure they did not. FYI - you may already know and have it listed on the BBS, but the both the ZIP and UNZIPCLP (CPP for ZIP and UNZIP) have a bug in the code. The call to QCMDEXC has the 2nd parmeter set to 300, but it needs to be 3000.

> Fred,
> 
> > Do minizip/miniunz QSHELL utilities support STDIN or redirection to a file for the file list like "ajar"?
> 
> I have not tried that but I think both minizip and miniunz don't support redirection.
> 
> uzaemon@Japan

 
00865/00865 AAA00000  uzaemon          Re: minizip/miniunz: Support for STDIN o
( 1)   04/12/16 23:28  00864へのコメント  コメント数：2
Fred,

> Do minizip/miniunz QSHELL utilities support STDIN or redirection to a file for the file list like "ajar"?

I have not tried that but I think both minizip and miniunz don't support redirection.

uzaemon@Japan

 
00864/00864 AAA00000  Fred Skinner     minizip/miniunz: Support for STDIN or re
( 1)   04/12/15 23:44

Do minizip/miniunz QSHELL utilities support STDIN or redirection to a file for the file list like "ajar"?
 
00863/00863 AAA00000  uzaemon          Re^3: RCVM (need only rcvlog)           
( 1)   04/12/15 23:11  00862へのコメント

Josh,

> ... One more question, is it possible to have the program only write to the RCVMLOG file and not download the mail to the user directories?

It is possible if you modify RCVM to do so.

Or create temporary directory, use RCVM as it is specifying the directory, then remove the temporary directory (by "rm" qshell command, for example). 

Otherwise you may look for another program which meets your special requirement.

Hope this helps.

uzaemon@Japan

 
00862/00862 AAA00000  Josh Mason       Re^2: RCVM (SQLException)               
( 1)   04/12/14 09:38  00861へのコメント  コメント数：1
Found the error in the WRKRDBDIRE so it's working fine now.  Thank you very much for your help.  One more question, is it possible to have the program only write to the RCVMLOG file and not download the mail to the user directories?

Thanks again,
Josh


> Josh,
> 
> > Keep getting this error when checking mail:
> > 
> > ava.sql.SQLException: The application requester cannot 
> > establish the connection.
> > 
> > Any ideas?
> 
> Chek out followings:
> 
> - Confirm that you have *LOCAL entry by using WRKRDBDIRE command
> - You have specified correct userid/password and table name for the command.
> - See "Troubleshooting JDBC" (http://www-1.ibm.com/servers/eserver/iseries/toolbox/troubleshooting.htm#JDBC).
> - Version of your OS/400, JDK and command line parameters.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

 
00861/00861 AAA00000  uzaemon          Re: RCVM (SQLException)                 
( 1)   04/12/12 10:16  00860へのコメント  コメント数：2
Josh,

> Keep getting this error when checking mail:
> 
> ava.sql.SQLException: The application requester cannot 
> establish the connection.
> 
> Any ideas?

Chek out followings:

- Confirm that you have *LOCAL entry by using WRKRDBDIRE command
- You have specified correct userid/password and table name for the command.
- See "Troubleshooting JDBC" (http://www-1.ibm.com/servers/eserver/iseries/toolbox/troubleshooting.htm#JDBC).
- Version of your OS/400, JDK and command line parameters.

Waiting for your reply.

uzaemon@Japan

 
00860/00860 AAA00000  Josh Mason       RCVM                                    
( 1)   04/12/10 04:51

Keep getting this error when checking mail:

ava.sql.SQLException: The application requester cannot 
establish the connection.

Any ideas?
 
00858/00858 AAA00000  uzaemon          Memo : Mail client software and RFC 2231
( 1)   04/11/22 14:25  00857へのコメント


"Why doesn't JavaMail properly encode and decode filenames in non-ASCII character sets?"
http://java.sun.com/products/javamail/FAQ.html#encodefilename

"A list of the known limitations, bugs, issues:"
http://java.sun.com/products/javamail/NOTES.txt

"MUAs for Windows - table 3: Japanese"
http://www.emaillab.org/win-mailer/table-japanese.html

 
00857/00857 AAA00000  uzaemon          Re^3: RCVM: What does RTNCDE = 8 mean?  
( 1)   04/11/22 14:06  00855へのコメント  コメント数：1
Fred,

> Thanks, that did help some. I had the developer get rid of special symbols in the attachment name and it is working now.

Thank you for your feedback. Name of attachment-file is defined by following RFCs.

- RFC 2183 (Content-Dispositon field)
- RFC 2045 (definition of parameter, value)
- RFC 2231 (non-ASCII, parameter longer or equal than 78 byte)

In reality, few MUA (Mail client software) supports RFC 2231, instead, they use other encodings (ex. MIME or clear text). So I have not determined RCVM should implement this.

For now, it is safe to use only ASCII characters as attachment-file name.

uzaemon@Japan

 
00855/00855 AAA00000  Fred Skinner     Re^2: RCVM: What does RTNCDE = 8 mean?  
( 1)   04/11/19 23:40  00853へのコメント  コメント数：2
Thanks, that did help some. I had the developer get rid of special symbols in the attachment name and it is working now.

> Fred,
> 
> > We are getting this error only on emails sent from a utility running on one of our WINDOWS 2003 servers. The joblog shows RTNCDE = 8 "Cannot save part" and rcvmdebug.txt shows java.io.IOException: Error in encoded stream, got 3. I am pretty new to Java, does this like a problem with the attachment in the email or a problem with RCVMAIL class? We are at OS400 V5R2M0 and pretty current on PTF Cum and Java Group PTF's.
> 
> Your problem looks similar to "784. RCVM dreate directory" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=784&log_no=784&msg_per_page=50&def=10). Please read the article and reinvestigate your problem.
> 
> uzaemon@Japan

 
00854/00854 AAA00000  Feliu Soler      Re^6: SPL2STMF gives error CPF24B4      
( 1)   04/11/16 18:52  00708へのコメント

> Bob,
> 
> > with 300.000 same problem appears to me: CPF24B4
> 
> CPF24B4 indicates "Severe error while addressing parameter list." I suspect that your problem is in OS/400(HPT API). I recommend you to consider followings :
> 
I have got the same problems and the solution are to increase the value of hptxbuflen:
0057.00    Dhptxbuflen  S  9B 0 INZ(600000)
and also spc_size parameter:
0233.00 C  PARM  600000 spc_size
(this to avoid the CPF24B4 error).
 
00853/00853 AAA00000  uzaemon          Re: RCVM: What does RTNCDE = 8 mean?    
( 1)   04/11/14 20:54  00852へのコメント  コメント数：3
Fred,

> We are getting this error only on emails sent from a utility running on one of our WINDOWS 2003 servers. The joblog shows RTNCDE = 8 "Cannot save part" and rcvmdebug.txt shows java.io.IOException: Error in encoded stream, got 3. I am pretty new to Java, does this like a problem with the attachment in the email or a problem with RCVMAIL class? We are at OS400 V5R2M0 and pretty current on PTF Cum and Java Group PTF's.

Your problem looks similar to "784. RCVM dreate directory" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=784&log_no=784&msg_per_page=50&def=10). Please read the article and reinvestigate your problem.

uzaemon@Japan

 
00852/00852 AAA00000  Fred Skinner     RCVM: What does RTNCDE = 8 mean?        
( 1)   04/11/12 23:43

We are getting this error only on emails sent from a utility running on one of our WINDOWS 2003 servers. The joblog shows RTNCDE = 8 "Cannot save part" and rcvmdebug.txt shows java.io.IOException: Error in encoded stream, got 3. I am pretty new to Java, does this like a problem with the attachment in the email or a problem with RCVMAIL class? We are at OS400 V5R2M0 and pretty current on PTF Cum and Java Group PTF's.

 
00851/00851 AAA00000  uzaemon          Re: Problems with SNDM command ('550 Rel
( 1)   04/10/26 20:26  00850へのコメント

Antonio,

> I'm trying to use your SNDM command, but I recive error from my smtp server, I'm not sure but I think that I need to send my user and password for autenticacion; where can I put this user and password in your command? 
> The error that I recive is '550 Relay not permited/No susch user'

Your problem looks similar to "716. SNDM, external mail" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=716&log_no=716&msg_per_page=50&def=10). See the article and contact administrator of your mail server.

Hope this helps.

uzaemon@Japan

 
00850/00850 AAA00000  Antonio Garcia   Problems with SNDM command              
( 1)   04/10/25 21:17

I'm trying to use your SNDM command, but I recive error from my smtp server, I'm not sure but I think that I need to send my user and password for autenticacion; where can I put this user and password in your command? 
The error that I recive is '550 Relay not permited/No susch user'
Could you please help me???
 
00849/00849 AAA00000  uzaemon          Re^4: unzip extracts gabage?            
( 1)   04/09/29 21:52  00848へのコメント

Mike,

> CPYSPLF    FILE(&SPLFILE) TOFILE(MMANAS/INVOICE98) +
>        JOB(&JOBN/&USER/&JOB) SPLNBR(&SPLNO) +
>            CTLCHAR(*NONE)     

> ZIP        +                                             
>              ZIPFILE('/QSYS.LIB/MMANAS.LIB/INVOICE.FILE/+
>              ZIP.MBR') +                                 
>              FILES('/QSYS.LIB/MMANAS.LIB/INVOICE98.FILE/+
>              INVOICE98.MBR') REPLACE(*REPLACE) COMPLVL(6)

> OVRDBF     FILE(INPUT) TOFILE(MMANAS/FTPINV98Z) +  
>              MBR(FTPINV98Z)                        
> OVRDBF     FILE(OUTPUT) TOFILE(FTPLOG) MBR(FTPLOG) 
> 
> FTP        RMTSYS('...                
> 
>   FTPINV98Z contains remote server ID, PASSWORD, BIN and
>   PUT command
> 
> I used to use PKZIP in the same manner and didn't have a problem
> with EBCDIC to ASCII translation and BIN transfer.

Most ZIP utilities (including zlib) don't have character code conversion function. You need to convert from EBCDIC to ASCII by yourself. Refer to sample operation below.

(create ZIP file on AS/400)

> wrkactjob *print
> crtpf qtemp/wrkactjob rcdlen(133)
  File WRKACTJOB created in library QTEMP.
  Member WRKACTJOB added to file WRKACTJOB in QTEMP.
> cpysplf qpdspajb qtemp/wrkactjob
  197 records copied to file WRKACTJOB in QTEMP.
> qsh cmd('touch -C 819 /tmp/wrkactjob.txt')
  Command ended normally with exit status 0.
> CPYTOSTMF FROMMBR('/qsys.lib/qtemp.lib/wrkactjob.file/wrkactjob.mbr') TOS
  TMF('/tmp/wrkactjob.txt') STMFOPT(*REPLACE)
  Object copied.
> addlible zlib
  Library ZLIB added to library list.
> ZIP ZIPFILE('/tmp/wrkactjob.zip') FILES('/tmp/wrkactjob.txt')
  Command completed.

(ftp from AS/400 to Windows in binary mode)

(Unzip using WinZip or other zip utility on Windows.)

If you have PKZIP for iSeries, I recommend to use whichever fits to your objective.

uzaemon@Japan

 
00848/00848 AAA00000  Mike Manas       Re^3: unzip extracts gabage?            
( 1)   04/09/29 05:41  00845へのコメント  コメント数：1
> Mike,
> 
> > > > Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> > > > Winzip recognizes the file and displays correct information about it but it extracts garbage.
> > > 
> > > Can you show step-by-step operation to recreate your problem?
> > > 
> > > uzaemon@Japn
> > 
> > First: I'm using cpysplf command to create a file. It is a simple text file, no control characters.  
> > 
> > second i'm using zip command to create a compressed file. this file appears to be OK because I can then extract the file back to it's original. I've also used MINIZIP in QShell interpretor and get the same results.
> > 
> > Third I'm using FTP command on my PC, Binary Transfer, to get the file. I recieve the file ok, Winzip recoginizes the file and the file information displayed is correct.
> > I use winzip 'TEST FILE' option and comes back 'FILE OK'.
> > 
> > Fourth I attempt to unzip the file and that works, however the information is jibberish, nothing is recognizable from the original document.
> > 
> > I can FTP the original file prior to compression and that file is OK. I don't use Binary Transfer for that however.
> 
> Do you want to see EBCDIC data on your PC? Please describe exactly what you did on your AS/400 (in command level).
> 
> Waiting for your reply.
> 
> uzaemon@Japan

OVRDBF     FILE(INPUT) TOFILE(MMANAS/FTPINV98Z) +  
             MBR(FTPINV98Z)                        
OVRDBF     FILE(OUTPUT) TOFILE(FTPLOG) MBR(FTPLOG) 

FTP        RMTSYS('...                

  FTPINV98Z contains remote server ID, PASSWORD, BIN and
  PUT command                 

I used to use PKZIP in the same manner and didn't have a problem
with EBCDIC to ASCII translation and BIN transfer.

 
00847/00847 AAA00000  Mike Manas       Re^3: unzip extracts gabage?            
( 1)   04/09/29 05:40  00845へのコメント

> Mike,
> 
> > > > Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> > > > Winzip recognizes the file and displays correct information about it but it extracts garbage.
> > > 
> > > Can you show step-by-step operation to recreate your problem?
> > > 
> > > uzaemon@Japn
> > 
> > First: I'm using cpysplf command to create a file. It is a simple text file, no control characters.  
> > 
> > second i'm using zip command to create a compressed file. this file appears to be OK because I can then extract the file back to it's original. I've also used MINIZIP in QShell interpretor and get the same results.
> > 
> > Third I'm using FTP command on my PC, Binary Transfer, to get the file. I recieve the file ok, Winzip recoginizes the file and the file information displayed is correct.
> > I use winzip 'TEST FILE' option and comes back 'FILE OK'.
> > 
> > Fourth I attempt to unzip the file and that works, however the information is jibberish, nothing is recognizable from the original document.
> > 
> > I can FTP the original file prior to compression and that file is OK. I don't use Binary Transfer for that however.
> 
> Do you want to see EBCDIC data on your PC? Please describe exactly what you did on your AS/400 (in command level).
> 
> Waiting for your reply.
> 
> uzaemon@Japan

ZIP        +                                             
             ZIPFILE('/QSYS.LIB/MMANAS.LIB/INVOICE.FILE/+
             ZIP.MBR') +                                 
             FILES('/QSYS.LIB/MMANAS.LIB/INVOICE98.FILE/+
             INVOICE98.MBR') REPLACE(*REPLACE) COMPLVL(6)
CONTINUED..


 
00846/00846 AAA00000  Mike Manas       Re^3: unzip extracts gabage?            
( 1)   04/09/29 05:24  00845へのコメント

> Mike,
> 
> > > > Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> > > > Winzip recognizes the file and displays correct information about it but it extracts garbage.
> > > 
> > > Can you show step-by-step operation to recreate your problem?
> > > 
> > > uzaemon@Japn
> > 
> > First: I'm using cpysplf command to create a file. It is a simple text file, no control characters.  
> > 
> > second i'm using zip command to create a compressed file. this file appears to be OK because I can then extract the file back to it's original. I've also used MINIZIP in QShell interpretor and get the same results.
> > 
> > Third I'm using FTP command on my PC, Binary Transfer, to get the file. I recieve the file ok, Winzip recoginizes the file and the file information displayed is correct.
> > I use winzip 'TEST FILE' option and comes back 'FILE OK'.
> > 
> > Fourth I attempt to unzip the file and that works, however the information is jibberish, nothing is recognizable from the original document.
> > 
> > I can FTP the original file prior to compression and that file is OK. I don't use Binary Transfer for that however.
> 
> Do you want to see EBCDIC data on your PC? Please describe exactly what you did on your AS/400 (in command level).
> 
> Waiting for your reply.
> 
> uzaemon@Japan

Part of a CL:

PGM        PARM(&SPLFILE &JOB &USER &JOBN &SPLNO)

DCL        VAR(&SPLFILE) TYPE(*CHAR) LEN(10)
DCL        VAR(&JOB)     TYPE(*CHAR) LEN(10)
DCL        VAR(&USER)    TYPE(*CHAR) LEN(10)
DCL        VAR(&JOBN)    TYPE(*CHAR) LEN(6) 
DCL        VAR(&SPLNO)   TYPE(*CHAR) LEN(3) 

CPYSPLF    FILE(&SPLFILE) TOFILE(MMANAS/INVOICE98) +
       JOB(&JOBN/&USER/&JOB) SPLNBR(&SPLNO) +
           CTLCHAR(*NONE)     
CONTINUED...



 
00845/00845 AAA00000  uzaemon          Re^2: unzip extracts gabage?            
( 1)   04/09/28 21:54  00844へのコメント  コメント数：4
Mike,

> > > Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> > > Winzip recognizes the file and displays correct information about it but it extracts garbage.
> > 
> > Can you show step-by-step operation to recreate your problem?
> > 
> > uzaemon@Japn
> 
> First: I'm using cpysplf command to create a file. It is a simple text file, no control characters.  
> 
> second i'm using zip command to create a compressed file. this file appears to be OK because I can then extract the file back to it's original. I've also used MINIZIP in QShell interpretor and get the same results.
> 
> Third I'm using FTP command on my PC, Binary Transfer, to get the file. I recieve the file ok, Winzip recoginizes the file and the file information displayed is correct.
> I use winzip 'TEST FILE' option and comes back 'FILE OK'.
> 
> Fourth I attempt to unzip the file and that works, however the information is jibberish, nothing is recognizable from the original document.
> 
> I can FTP the original file prior to compression and that file is OK. I don't use Binary Transfer for that however.

Do you want to see EBCDIC data on your PC? Please describe exactly what you did on your AS/400 (in command level).

Waiting for your reply.

uzaemon@Japan

 
00844/00844 AAA00000  Mike Manas       Re: unzip extracts gabage?              
( 1)   04/09/28 06:58  00843へのコメント  コメント数：5
> Mike,
> 
> > Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> > Winzip recognizes the file and displays correct information about it but it extracts garbage.
> 
> Can you show step-by-step operation to recreate your problem?
> 
> uzaemon@Japn

First: I'm using cpysplf command to create a file. It is a simple text file, no control characters.  

second i'm using zip command to create a compressed file. this file appears to be OK because I can then extract the file back to it's original. I've also used MINIZIP in QShell interpretor and get the same results.

Third I'm using FTP command on my PC, Binary Transfer, to get the file. I recieve the file ok, Winzip recoginizes the file and the file information displayed is correct.
I use winzip 'TEST FILE' option and comes back 'FILE OK'.

Fourth I attempt to unzip the file and that works, however the information is jibberish, nothing is recognizable from the original document.

I can FTP the original file prior to compression and that file is OK. I don't use Binary Transfer for that however.

Thanks
Mike  
 
00843/00843 AAA00000  uzaemon          unzip extracts gabage?                  
( 1)   04/09/25 15:10  00842へのコメント  コメント数：6
Mike,

> Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G・瑪@+・・獰z@===ｷ(=@'
> Winzip recognizes the file and displays correct information about it but it extracts garbage.

Can you show step-by-step operation to recreate your problem?

uzaemon@Japn

 
00842/00842 AAA00000  Mike Manas       Re^12: PGM ZIPCLP not created durring RE
( 1)   04/09/24 23:42  00841へのコメント  コメント数：7
> > Mike,
> > 
> > > I Am using the download from you site and the
> > > Make procedutre included does not in clude those lines.
> > > 'NEW' 1.2.1 -zlib121.savf
> > 
> > I downloaded zlib121.exe from my homepage and unpack, transfer, restored to my AS/400 again. The "MAKE" procedure DOES include those lines.
> > 
> > I don't know why your MAKE procedure is different, so please start over from scratch.
> > 
> > uzaemon@Japan
> 
> I don't know either, the package was the same the second time I downloaded it except for the MAKE procedure.
> 
> Everything looks fine now, I'm currently testing.
> 
> Mike

Everything is working fine on the as400 able to (zip and unzip) but having trouble extracting on pc using winzip and or pkunzip. Getting nothing but: '@@@@@@@@@@G+鈞ﾖz@===ｷ(=@'
Winzip recognizes the file and displays correct information about it but it extracts garbage.

Mike

 
00841/00841 AAA00000  Mike Manas       Re^11: PGM ZIPCLP not created durring RE
( 1)   04/09/21 07:07  00840へのコメント  コメント数：8
> Mike,
> 
> > I Am using the download from you site and the
> > Make procedutre included does not in clude those lines.
> > 'NEW' 1.2.1 -zlib121.savf
> 
> I downloaded zlib121.exe from my homepage and unpack, transfer, restored to my AS/400 again. The "MAKE" procedure DOES include those lines.
> 
> I don't know why your MAKE procedure is different, so please start over from scratch.
> 
> uzaemon@Japan

I don't know either, the package was the same the second time I downloaded it except for the MAKE procedure.

Everything looks fine now, I'm currently testing.

Mike

 
00840/00840 AAA00000  uzaemon          Re^10: PGM ZIPCLP not created durring RE
( 1)   04/09/19 11:05  00838へのコメント  コメント数：9
Mike,

> I Am using the download from you site and the
> Make procedutre included does not in clude those lines.
> 'NEW' 1.2.1 -zlib121.savf

I downloaded zlib121.exe from my homepage and unpack, transfer, restored to my AS/400 again. The "MAKE" procedure DOES include those lines.

I don't know why your MAKE procedure is different, so please start over from scratch.

uzaemon@Japan

 
00838/00838 AAA00000  Mike Manas       Re^9: PGM ZIPCLP not created durring REX
( 1)   04/09/19 06:02  00835へのコメント  コメント数：10
> Mike,
> 
> >Should I also modify to BNDSRVPGM(QHTTPSVR/QZHBCGI)considering problem encountered previously?
> 
> At your will. It is not necssary as long as I know. 
> 
> > Also there are no statments in 'MAKE' asto the creation of modules or PGMs for MINIZIP400, ZIP400, EBCDIC400.
> 
> Are you using zlib 1.2.1 downloaded from my site without modification? If so, lines below do the task (line number may vary).
> 
> 0048.00 /* minizip */
> 0049.00 MO.16 = 'miniunz'
> 0050.00 MO.17 = 'minizip'
> 0051.00 MO.18 = 'zip'
> 0052.00 MO.19 = 'unzip'
> 0053.00 MO.20 = 'ebcdic'
> ............................
> 0082.00 SAY 'Start creating program and modules miniunz/minizip for OS/400...'
> 0083.00 DO I = 16 TO 20
> 0084.00   SAY '  creating module 'MO.I'400...'
> 0085.00   'CRTCMOD MODULE(QTEMP/'MO.I'400) SRCFILE(&OLIB/QCSRC) SRCMBR('MO.I') ',
> 0086.00   'OUTPUT(&OUTPUT) OPTIMIZE(&OPTIMIZE) DBGVIEW(&DEBUG) ',
> 0087.00   'DEFINE(&D1 &D3 &D5 &D6 &D7) ',
> 0088.00   'SYSIFCOPT(&SYSIFCOPT) TGTRLS(&TGTRLS)'
> 0089.00   SAY "  result->" RC
> 0090.00 END
> 0091.00   SAY '  creating program MINIUNZ400...'
> 0092.00   'CRTPGM PGM(&OLIB/MINIUNZ400) ',
> 0093.00   'MODULE(QTEMP/MINIUNZ400 QTEMP/UNZIP400 QTEMP/EBCDIC400) ',
> 0094.00   'BNDSRVPGM(&OLIB/ZLIB) DETAIL(*BASIC) TGTRLS(&TGTRLS) ',
> 0095.00   "TEXT('miniunz for OS/400')"
> 0096.00   SAY "  result->" RC
> 0097.00   SAY '  creating program MINIZIP400...'
> 0098.00   'CRTPGM PGM(&OLIB/MINIZIP400) ',
> 0099.00   'MODULE(QTEMP/MINIZIP400 QTEMP/ZIP400 QTEMP/EBCDIC) ',
> 0100.00   'BNDSRVPGM(&OLIB/ZLIB) DETAIL(*BASIC) TGTRLS(&TGTRLS) ',
> 0101.00   "TEXT('minizip for OS/400')"
> 0102.00   SAY "  result->" RC
> 
> If the MAKE procedure doesn't work well and you are using European CCSID, try to exec "CHGJOB CCSID(65535)" or CHGJOB CCSID(037) before you run the procedure.
> 
> uzaemon@Japan
I Am using the download from you site and the
Make procedutre included does not in clude those lines.
'NEW' 1.2.1 -zlib121.savf
 
00837/00837 AAA00000  uzaemon          Re: Pgm SPL2STMF on AFPDS Overlayed Spoo
( 1)   04/09/17 18:43  00836へのコメント

Daniele,

> I'm trying to use your tool but when I try to transform the spool on wich I have done an overlay (for printing it on a Laser printer) the tiff result not the same of the printed on the laser (I think that the problem is due to the fonts that are different)

I suspect that your problem is in OS/400(HPT API). As SPL2STMF is just a front-end to HPT API, please ask IBM via your support channel when HPT doesn't work as expected.

Before contact your support, I recommend you to consider followings :

- apply latest Cum and HPT-related PTFs.
- if you have an access to another AS/400 or iSeries, run the same thing and see what happens. Or you may ask your business partner or friend to recreate your problem.
- if the problem occurs only for the specific spooled file, look for the difference.
- prepare the procedure to recreate your problem using OS/400 functions which use HPT, e.g. RMTOUTQ, LPR, Access for Web, etc.
- contact your support channel to ask IBM to investigate (and fix) the problem.

> I hope my english is clear and I wait for your aswer

Clear enough :-)

uzaemon@Japan

 
00836/00836 AAA00000  Daniele          Pgm SPL2STMF on AFPDS Overlayed Spool   
( 1)   04/09/17 00:18

Hi

I'm trying to use your tool but when I try to transform the spool on wich I have done an overlay (for printing it on a Laser printer) the tiff result not the same of the printed on the laser (I think that the problem is due to the fonts that are different)

I hope my english is clear and I wait for your aswer

Best Regards
 
00835/00835 AAA00000  uzaemon          Re^8: PGM ZIPCLP not created durring REX
( 1)   04/09/16 16:54  00834へのコメント  コメント数：11
Mike,

>Should I also modify to BNDSRVPGM(QHTTPSVR/QZHBCGI)considering problem encountered previously?

At your will. It is not necssary as long as I know. 

> Also there are no statments in 'MAKE' asto the creation of modules or PGMs for MINIZIP400, ZIP400, EBCDIC400.

Are you using zlib 1.2.1 downloaded from my site without modification? If so, lines below do the task (line number may vary).

0048.00 /* minizip */
0049.00 MO.16 = 'miniunz'
0050.00 MO.17 = 'minizip'
0051.00 MO.18 = 'zip'
0052.00 MO.19 = 'unzip'
0053.00 MO.20 = 'ebcdic'
............................
0082.00 SAY 'Start creating program and modules miniunz/minizip for OS/400...'
0083.00 DO I = 16 TO 20
0084.00   SAY '  creating module 'MO.I'400...'
0085.00   'CRTCMOD MODULE(QTEMP/'MO.I'400) SRCFILE(&OLIB/QCSRC) SRCMBR('MO.I') ',
0086.00   'OUTPUT(&OUTPUT) OPTIMIZE(&OPTIMIZE) DBGVIEW(&DEBUG) ',
0087.00   'DEFINE(&D1 &D3 &D5 &D6 &D7) ',
0088.00   'SYSIFCOPT(&SYSIFCOPT) TGTRLS(&TGTRLS)'
0089.00   SAY "  result->" RC
0090.00 END
0091.00   SAY '  creating program MINIUNZ400...'
0092.00   'CRTPGM PGM(&OLIB/MINIUNZ400) ',
0093.00   'MODULE(QTEMP/MINIUNZ400 QTEMP/UNZIP400 QTEMP/EBCDIC400) ',
0094.00   'BNDSRVPGM(&OLIB/ZLIB) DETAIL(*BASIC) TGTRLS(&TGTRLS) ',
0095.00   "TEXT('miniunz for OS/400')"
0096.00   SAY "  result->" RC
0097.00   SAY '  creating program MINIZIP400...'
0098.00   'CRTPGM PGM(&OLIB/MINIZIP400) ',
0099.00   'MODULE(QTEMP/MINIZIP400 QTEMP/ZIP400 QTEMP/EBCDIC) ',
0100.00   'BNDSRVPGM(&OLIB/ZLIB) DETAIL(*BASIC) TGTRLS(&TGTRLS) ',
0101.00   "TEXT('minizip for OS/400')"
0102.00   SAY "  result->" RC

If the MAKE procedure doesn't work well and you are using European CCSID, try to exec "CHGJOB CCSID(65535)" or CHGJOB CCSID(037) before you run the procedure.

uzaemon@Japan

 
00834/00834 AAA00000  Mike Manas       Re^7: PGM ZIPCLP not created durring REX
( 1)   04/09/16 05:41  00833へのコメント  コメント数：12
> > Mike,
> > 
> > > Yes, that worked for creating the ZIPCLP Pgm, now I'm getting an error that Program MINIZIP400 in library *LIBL not found. - There is no PGM by that name in source file.
> > > There is a minizip PGM in the ZLIB and scrfile. If its the same, Rename?
> > 
> > No, they are different. MINIZIP400 and minizip are compiled from the same source member with different compile option (DEFs). 
> > 
> > See http://homepage1.nifty.com/uzaemon/zlib_addendum.html for circumvention of the problem.
> > 
> > uzaemon@Japan
> 
> Should I also modify to BNDSRVPGM(QHTTPSVR/QZHBCGI)considering problem encountered previously?
> 
> MIke

Also there are no statments in 'MAKE' asto the creation of modules or PGMs for MINIZIP400, ZIP400, EBCDIC400.

 
00833/00833 AAA00000  Mike Manas       Re^6: PGM ZIPCLP not created durring REX
( 1)   04/09/16 04:35  00832へのコメント  コメント数：13
> Mike,
> 
> > Yes, that worked for creating the ZIPCLP Pgm, now I'm getting an error that Program MINIZIP400 in library *LIBL not found. - There is no PGM by that name in source file.
> > There is a minizip PGM in the ZLIB and scrfile. If its the same, Rename?
> 
> No, they are different. MINIZIP400 and minizip are compiled from the same source member with different compile option (DEFs). 
> 
> See http://homepage1.nifty.com/uzaemon/zlib_addendum.html for circumvention of the problem.
> 
> uzaemon@Japan

Should I also modify to BNDSRVPGM(QHTTPSVR/QZHBCGI)considering problem encountered previously?

MIke

 
00832/00832 AAA00000  uzaemon          Re^5: PGM ZIPCLP not created durring REX
( 1)   04/09/15 18:42  00831へのコメント  コメント数：14
Mike,

> Yes, that worked for creating the ZIPCLP Pgm, now I'm getting an error that Program MINIZIP400 in library *LIBL not found. - There is no PGM by that name in source file.
> There is a minizip PGM in the ZLIB and scrfile. If its the same, Rename?

No, they are different. MINIZIP400 and minizip are compiled from the same source member with different compile option (DEFs). 

See http://homepage1.nifty.com/uzaemon/zlib_addendum.html for circumvention of the problem.

uzaemon@Japan

 
00831/00831 AAA00000  Mike Manas       Re^4: PGM ZIPCLP not created durring REX
( 1)   04/09/15 04:17  00830へのコメント  コメント数：15
> > > Mike,
> > > 
> > > > OS/400 V5R2M0
> > > > 
> > > > PGM ZIPCLP missing from Qrexsrc SRCMBR(Make)
> > > > Recieved error when ZIP tried to call ZIPCLP.
> > > > Created CL MOD for zipclp- OK.
> > > > I got error (*Definition not found for symbol 'QtmhGetEnv')
> > > > when I Tried to create PGM. 
> > > 
> > > Confirm followings and let me know.
> > > 
> > > 1. Do you have 5722-DG1(IBM HTTP SERVER) on your OS/400? Use "GO LICPGM" and look for the product.
> > > 
> > > 2. Do you have service program QHTTPSVR/QZHBCGI on your OS/400? Exec "DSPSRVPGM SRVPGM(QHTTPSVR/QZHBCGI)" or "DSPOBJD OBJ(QHTTPSVR/QZHBCGI) OBJTYPE(*SRVPGM)".
> > > 
> > > Waiting for your reply.
> > > 
> > > uzaemon@Japan
> > 
> > 
> > Yes and Yes
> > 
> > Should also note tried creating pgm using CRTBNDCL - no go. (* CPD0726 10  Variable '&FILE      ' declared but not referred to.)  
> 
> Try to exec following commands:
> 
> > CRTCLMOD MODULE(QTEMP/ZIPCLP) SRCFILE(ZLIB/QCLSRC)
>   Module ZIPCLP created in library QTEMP.
> > CRTPGM PGM(ZLIB/ZIPCLP) MODULE(QTEMP/ZIPCLP) BNDSRVPGM(QHTTPSVR/QZHBCGI)
>   Program ZIPCLP created in library ZLIB.
> 
> Let me know how it works.
> 
> uzaemon@Japan

Yes, that worked for creating the ZIPCLP Pgm, now I'm getting an error that Program MINIZIP400 in library *LIBL not found. - There is no PGM by that name in source file.
There is a minizip PGM in the ZLIB and scrfile. If its the same, Rename?

Mike

 
00830/00830 AAA00000  uzaemon          Re^3: PGM ZIPCLP not created durring REX
( 1)   04/09/14 18:22  00829へのコメント  コメント数：16
> > Mike,
> > 
> > > OS/400 V5R2M0
> > > 
> > > PGM ZIPCLP missing from Qrexsrc SRCMBR(Make)
> > > Recieved error when ZIP tried to call ZIPCLP.
> > > Created CL MOD for zipclp- OK.
> > > I got error (*Definition not found for symbol 'QtmhGetEnv')
> > > when I Tried to create PGM. 
> > 
> > Confirm followings and let me know.
> > 
> > 1. Do you have 5722-DG1(IBM HTTP SERVER) on your OS/400? Use "GO LICPGM" and look for the product.
> > 
> > 2. Do you have service program QHTTPSVR/QZHBCGI on your OS/400? Exec "DSPSRVPGM SRVPGM(QHTTPSVR/QZHBCGI)" or "DSPOBJD OBJ(QHTTPSVR/QZHBCGI) OBJTYPE(*SRVPGM)".
> > 
> > Waiting for your reply.
> > 
> > uzaemon@Japan
> 
> 
> Yes and Yes
> 
> Should also note tried creating pgm using CRTBNDCL - no go. (* CPD0726 10  Variable '&FILE      ' declared but not referred to.)  

Try to exec following commands:

> CRTCLMOD MODULE(QTEMP/ZIPCLP) SRCFILE(ZLIB/QCLSRC)
  Module ZIPCLP created in library QTEMP.
> CRTPGM PGM(ZLIB/ZIPCLP) MODULE(QTEMP/ZIPCLP) BNDSRVPGM(QHTTPSVR/QZHBCGI)
  Program ZIPCLP created in library ZLIB.

Let me know how it works.

uzaemon@Japan

 
00829/00829 AAA00000  Mike Manas       Re^2: PGM ZIPCLP not created durring REX
( 1)   04/09/14 13:16  00828へのコメント  コメント数：17
> Mike,
> 
> > OS/400 V5R2M0
> > 
> > PGM ZIPCLP missing from Qrexsrc SRCMBR(Make)
> > Recieved error when ZIP tried to call ZIPCLP.
> > Created CL MOD for zipclp- OK.
> > I got error (*Definition not found for symbol 'QtmhGetEnv')
> > when I Tried to create PGM. 
> 
> Confirm followings and let me know.
> 
> 1. Do you have 5722-DG1(IBM HTTP SERVER) on your OS/400? Use "GO LICPGM" and look for the product.
> 
> 2. Do you have service program QHTTPSVR/QZHBCGI on your OS/400? Exec "DSPSRVPGM SRVPGM(QHTTPSVR/QZHBCGI)" or "DSPOBJD OBJ(QHTTPSVR/QZHBCGI) OBJTYPE(*SRVPGM)".
> 
> Waiting for your reply.
> 
> uzaemon@Japan


Yes and Yes

Should also note tried creating pgm using CRTBNDCL - no go. (* CPD0726 10  Variable '&FILE      ' declared but not referred to.)  

Mike
 
00828/00828 AAA00000  uzaemon          Re: PGM ZIPCLP not created durring REXX 
( 1)   04/09/14 12:56  00826へのコメント  コメント数：18
Mike,

> OS/400 V5R2M0
> 
> PGM ZIPCLP missing from Qrexsrc SRCMBR(Make)
> Recieved error when ZIP tried to call ZIPCLP.
> Created CL MOD for zipclp- OK.
> I got error (*Definition not found for symbol 'QtmhGetEnv')
> when I Tried to create PGM. 

Confirm followings and let me know.

1. Do you have 5722-DG1(IBM HTTP SERVER) on your OS/400? Use "GO LICPGM" and look for the product.

2. Do you have service program QHTTPSVR/QZHBCGI on your OS/400? Exec "DSPSRVPGM SRVPGM(QHTTPSVR/QZHBCGI)" or "DSPOBJD OBJ(QHTTPSVR/QZHBCGI) OBJTYPE(*SRVPGM)".

Waiting for your reply.

uzaemon@Japan

 
00827/00827 AAA00000  古野電気(株)情  コマンド SENDMの件(解決しました)        
( 1)   04/09/14 12:36

SYSVAL QUTCOFFSET +00:00 ==> +09:00を変更することにより、
正しく、日本時間の表示がされました。

ありがとうございました。
 
00826/00826 AAA00000  Mike Manas       PGM ZIPCLP not created durring REXX proc
( 1)   04/09/14 09:17

uzaemon
OS/400 V5R2M0

PGM ZIPCLP missing from Qrexsrc SRCMBR(Make)
Recieved error when ZIP tried to call ZIPCLP.
Created CL MOD for zipclp- OK.
I got error (*Definition not found for symbol 'QtmhGetEnv')
when I Tried to create PGM. 

Sugestions?
Mike
 


 
00825/00825 AAA00000  uzaemon          Re: コマンド SENDM に関しての質問(時刻 
( 1)   04/09/13 18:39  00823へのコメント

一村さん、

> AS/400システムにて、コマンド:SENDMを利用しています。
> その時、受信メールの「送信日時」が９時間ズレて(GMT時間)表示されます。
> 受信日時は正しく、日本時間で表示されます。
> 送信日時を正しく、日本時間に表示する方法についてお教え下さい。
> なお、メールソフトは「AL-Mail32 Version 1.10」を使用しています

SNDMコマンドのヘルプ(http://homepage1.nifty.com/uzaemon/sndm_usage.html)に下記のように記載されています。

o System date/time is referred when generating date filed in mail
header. Make sure that QDATE, QTIME, QUTCOFFSET system values
are set correctly.

システム値QUTCOFFSETが日本時間(+09:00)になっていること、およびSNDMが最新版であることを確認、再度お試しの上結果をお知らせください。

uzaemon@Japan

 
00823/00823 AAA00000  古野電気(株)情  コマンド SENDM に関しての質問           
( 1)   04/09/13 17:33

AS/400システムにて、コマンド:SENDMを利用しています。
その時、受信メールの「送信日時」が９時間ズレて(GMT時間)表示されます。
受信日時は正しく、日本時間で表示されます。
送信日時を正しく、日本時間に表示する方法についてお教え下さい。
なお、メールソフトは「AL-Mail32 Version 1.10」を使用しています
以上、よろしくお願いします。
 
00821/00821 AAA00000  uzaemon          Re: Error compiling crtcsvf             
( 1)   04/09/03 19:08  00820へのコメント

Jonathan,

> I get the following error:
> 
> Start creating CRTCSVF command...             
>   creating CL program CRTCSVFCLP...           
>   result-> 0                                  
>   creating main program module CRTCSVFRPG...  
>   result-> RNS9309                            
>   creating main program CRTCSVFRPG...         
>   result-> CPF3C50                            
>   creating pnlgrp...                          
>   result-> 0                                  
>   creating command...                         
>   result-> 0                                  
>                                               
> Compile finished. Confirm error(s) if exists. 
> 
> Help!

Usually, you cannot compile the software when :
- You are using OS/400 V3R2 or earlier.
- Library QSYSINC is missing.

Confirm above and let me know.

uzaemon@Japan

 
00820/00820 AAA00000  Jonathan         Error compiling crtcsvf                 
( 1)   04/09/03 00:26

I get the following error:

Start creating CRTCSVF command...             
  creating CL program CRTCSVFCLP...           
  result-> 0                                  
  creating main program module CRTCSVFRPG...  
  result-> RNS9309                            
  creating main program CRTCSVFRPG...         
  result-> CPF3C50                            
  creating pnlgrp...                          
  result-> 0                                  
  creating command...                         
  result-> 0                                  
                                              
Compile finished. Confirm error(s) if exists. 

Help!
 
00819/00819 AAA00000  uzaemon          Re: PDF for Acrobat 6                   
( 1)   04/07/24 14:59  00818へのコメント

Beppe,

> Hi,
> I found the problem and I have the fix to avoid the message that AR6 must rebuild the document because it is damaged.
> I've also rewritten the entire tool using the latest tifflib version and more.
> If you are interested I can send you privately all the sources (FREE) and you can update your site.

I'm interested in your problem because it did not happen on my environment. I would like you to send your update by mail so that I can investigate the problem when I have time. 

Please use "beppecosta@yahoo.it" mail account to bypass my SPAM filter and limit the size of attachment to less than 3MB (after encoding).

Thank you for your cooperation.

uzaemon@Japan

 
00818/00818 AAA00000  BeppeCosta       PDF for Acrobat 6                       
( 1)   04/07/22 00:38

Hi,
I found the problem and I have the fix to avoid the message that AR6 must rebuild the document because it is damaged.
I've also rewritten the entire tool using the latest tifflib version and more.
If you are interested I can send you privately all the sources (FREE) and you can update your site.
Beppe.
 
 
00815/00815 AAA00000  Francesco        Re^2: SPL2STMF  on Cisc V3.2            
( 1)   04/07/19 05:01  00814へのコメント

Ok

Bye
Francesco
 
00814/00814 AAA00000  uzaemon          Re: SPL2STMF  on Cisc V3.2              
( 1)   04/07/19 00:37  00813へのコメント  コメント数：1
Francesco,

> Have you any suggestion to resolve the problem ?

Carefully read my homepage again, "zlib, TIFF2PDF, SPL2STMF, SNDM and CRTCSVF MAY work on V3R7 or later". For more about version issue, read message "161. Re^3: SNDM compilation problem " (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=161&log_no=161&msg_per_page=50&def=10) in this BBS. 

uzaemon@Japan

 
00813/00813 AAA00000  Francesco        SPL2STMF  on Cisc V3.2                  
( 1)   04/07/18 22:44

Hello Uzaemon, 
Congratulations for your Tools!

I've tried Hpt and Pdf conversion:
- on V4.3 or V5.2 I can compile and execute all programs
- on V3.2 I cannot create RPGLE module SPL2STMFRP because I receive the following type of errors: (I include some line of compiler report hoping you have time to read them)

---------------------------------------
   477 C      EVAL      bufp = splspc_p + QSPOFB    
*RNF7421 
*RNF7416
-------------------------------------
   252 Dhptsplbuflen     
======> aaaaaaaaaaaa
*RNF0259 30 a     
---------------------------------------
   253 Dhptosolen    S     9B 0 INZ(%LEN(QWPPTOSO))  
======>                             aaaabccccccccde
*RNF3429 20 a     
*RNF0607 00 b           
*RNF3308 20 c      
*RNF0633 20 d    
*RNF0633 20 e                            
--------------------------------------
  524 C                    %TRIM(%EDITC(*DATE : 'Y')))   
======>                          aaaaaa       b ccce f
======>                                         ddd
*RNF0604 20 a   
*RNF0312 20 b     
*RNF0313 20 c     
*RNF0317 20 d      
*RNF0637 30 e     
*RNF5377 20 f      
-------------------------------------
    519 C             TIME     start_time          
*RNF7044
-------------------------------------

Have you any suggestion to resolve the problem ?

Tanks in advance
Francesco

 
00812/00812 AAA00000  uzaemon          Re: TIFF2PDF (No problem in my environme
( 1)   04/06/12 18:34  00790へのコメント

I opened http://homepage1.nifty.com/uzaemon/testprt.pdf from Windows 2000 English & Adobe Reader 6.0.1 11/3/2003 English and see no problem. I'm wondering if the problem Beppe reported may occur only under specific circumstance...

If people who enconter the same phenomenon, please let me know (with environment information, such as version of Windows, Adobe Reader, OS/400, TIFF2PDF, etc).

uzaemon@Japan

 
00811/00811 AAA00000  uzaemon          Re: SNDM command (message-id)           
( 1)   04/06/08 23:00  00810へのコメント

Lars,

> I have a problem using the SNDM command. Some firewalls reject our mails because the SNDM does not make a message-id. Is that correct? How can I solve the problem?

I don't know why those firewalls reject your mail. You may configure your MTA (mail server) to append message-id header to the mail. As far as I know, sendmail automatically append message-id (if not exist) and qmail has setting for that purpose.

Having that said, message-id header should be set by MUA (mail client, in this case, SNDM) according to RFC. You may modify SNDM to generate unique message-id.

I'll modify SNDM when I have time but I'm currently so busy on my regular job...

uzaemon@Japan

 
00810/00810 AAA00000  Lars Aerbo Hanse SNDM command                            
( 1)   04/06/07 20:34

Dear Uzaemon,

I have a problem using the SNDM command. Some firewalls reject our mails because the SNDM does not make a message-id. Is that correct? How can I solve the problem?

Kind Regards

Lars Aerbo Hansen
PJC Systemudvikling Aps
Strandvang 20
4000 Roskilde
DK 
Email: lh@pjc-corp.com 

 
 
00809/00809 AAA00000  BeppeCostagliola Re^8: TIFF2PDF "file is damaged but is b
( 1)   04/05/31 16:30  00808へのコメント

I have not fixed the problem, but I just know how the document should be.
My knowledge of C is not so good, but I will try.
Beppe.

 
00808/00808 AAA00000  uzaemon          Re^8: TIFF2PDF - problem fixed!         
( 1)   04/05/30 22:21  00806へのコメント  コメント数：1
Beppe,

> It seems that the offending instruction is the 
> /* stream-size object */
> 
> I have a fixed version of your testprt.pdf that does not contain this section and opens without repair message even at AR 6. Do you have time to take a look at it ? 
> 
> It would be nice if we can fix the program.

Great!

If you post how you fixed the problem on this BBS, I'll modify my distribution when I have time.

Thank you for your effort and I'm looking forward to hearing from you.

uzaemon@Japan

 
00806/00806 AAA00000  BeppeCostagliola Re^7: TIFF2PDF "file is damaged but is b
( 1)   04/05/28 00:23  00805へのコメント  コメント数：2
It seems that the offending instruction is the 
/* stream-size object */

I have a fixed version of your testprt.pdf that does not contain this section and opens without repair message even at AR 6. Do you have time to take a look at it ? 

It would be nice if we can fix the program.

Thanks.
Beppe. 

 
00805/00805 AAA00000  BeppeCostagliola Re^6: TIFF2PDF "file is damaged but is b
( 1)   04/05/24 19:22  00802へのコメント  コメント数：3
Hi,

I downloaded the new versions from your site and recompiled.

The problem still persists also with your original "testprt.pdf" but only with Reader 6 (std english or italian doesn't matters).

While the Reader 5 opens fine.

I will try to investigate with Adobe (because I also have a fully licensed Acrobat Writer) to see if it is possible do diagnose our pdf and see what's wrong.

Thanks for your time and your assistance.

Beppe.  


  
 
00804/00804 AAA00000  uzaemon          Re: TIFF2PDF "Can not read TIFF director
( 1)   04/05/23 15:54  00800へのコメント

Markus,

> Hello,
> i tried to use the TIFF2PDF Tool but i always receive an error message: Filename: Can not read TIFF directory count. 
> 
> How can i resolve this ??? I did everything which is mentioned in the docs but i donｴt have the QFNT61 library... so left this parms blank....

QFNT61 contains Japanese fonts and you don't need it unless you want to print Japanese characters. Instead, most western people use 5722SS1 option 8 "OS/400 - AFP Compatibility Fonts", I guess.

Before you run TIFF2PDF, confirm that TIFF file has been created successfully.

Waiting for your reply.

uzaemon@Japan.

 
00803/00803 AAA00000  uzaemon          Re^2: SPL2STMF recieves CPF333B         
( 1)   04/05/23 15:48  00798へのコメント

Tim,

I released new SPL2STMF for V5R2 (with lates PTF) users. try new hpt_520.exe and let me know how it works.

uzaemon@Japan

 
00802/00802 AAA00000  uzaemon          Re^5: TIFF2PDF "file is damaged but is b
( 1)   04/05/23 15:42  00799へのコメント  コメント数：4
Beppe,

I managed my time, modified hpt and tifflib, followed your procedure, and created PDF file.

> addlible hpt
  Library HPT added to library list.
> call hpt/testprt
> SPL2STMF FILE(QSYSPRT) TOSTMF('/tmp/testprt.tif') WSCST(QWPTIFFG4)
  Stream file generated. execution time 0 min 0 sec, total pages = 1
> addlible tifflib
  Library TIFFLIB added to library list.
> TIFF2PDF TIFF('/tmp/testprt.tif') PDF('/tmp/testprt.pdf')
  TIFF2PDF completed successfully.

Everything worked fine. You can compare 
http://homepage1.nifty.com/uzaemon/testprt.tif and http://homepage1.nifty.com/uzaemon/testprt.pdf with your files and check if there any differences.

My environment is OS/400 V5R2(TL03364  Temporarily applied), Windows XP SP1, Adobe Acrobat 5.0.5(JA).

Please let me know the result of your investigation.

uzaemon@Japan

 
00800/00800 AAA00000  Markus Litters   TIFF2PDF                                
( 1)   04/05/23 01:42

Hello,
i tried to use the TIFF2PDF Tool but i always receive an error message: Filename: Can not read TIFF directory count. 

How can i resolve this ??? I did everything which is mentioned in the docs but i donｴt have the QFNT61 library... so left this parms blank....

Thank you for any help.
Best regards
Markus
 
00799/00799 AAA00000  BeppeCostagliola Re^4: TIFF2PDF "file is damaged but is b
( 1)   04/05/20 01:38  00797へのコメント  コメント数：5
Sorry for misunderstanding: I would have write SPL2STMF.

The SPF2TIFF is the name of the corrected version that includes QWPJSN = '*CURRENT', QWPSCD = '*ONLY' and QWPSCT = ' ' to avoid some CPF33* messages.

As I told you I tried to create a tiff using your original   SPL2STMF as downloaded from hpt.exe and I get this message:
"Stream file generated sucessfully. execution time 0 min 1 sec, total pages = 1."

TIFF2PDF works fine too (it says "TIFF2PDF completed successfully.")

But when I open it with AR6 i get the warning .

Beppe.                                                                      


       
 
00798/00798 AAA00000  uzaemon          Re: SPL2STMF recieves CPF333B           
( 1)   04/05/20 00:57  00796へのコメント  コメント数：1
Tim,

> I'm having a little trouble getting your SPL2STMF command to work on my system.  The CPF333B error "Job system name is not valid." comes up but I'm not sure how to resolve it.  I've read the BBS entries from Trevor, and it appeared that you changed the SPL2STMF tool to handle V5R2 but it still doesn't work properly on my machine.  Can you point me in the right direction?
> 
> Thanks in advance,
> Tim
> 
> 
> SPL2STMF FILE(CR0310P2) TOSTMF('\home\spl2stmf') WSCST(QSYS/QWPDEFAULT) JOB(824886/TIMH/QPADEV0049) SPLNBR(2) DEBUG(*YES)                           
> 
> Stream file \home\spl2stmf removed.
> Job system name is not valid.
> Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 20 
> 
> I'm on a V5R2 system with up-to-date PTFs.

It looks like IBM has added a few new "required" fields to HPT interface (See iSeries information center). I gonna take a look when I have time, but it will take some time because I'm currently so busy for my regular job.

uzaemon@Japan

 
00797/00797 AAA00000  uzaemon          Re^3: TIFF2PDF "SPF2TIFF"?              
( 1)   04/05/20 00:39  00795へのコメント  コメント数：6
Beppe,

> I recompiled the original SPF2TIFF as extracted from hpt.exe e run TIFF2PDF against this tiff but the error is still present.

Again, what is "SPF2TIFF"?

uzaemon@Japan

 
00796/00796 AAA00000  Tim Hawkins, Cal SPL2STMF recieves CPF333B               
( 1)   04/05/19 02:59

Hello Uzaemon,

I'm having a little trouble getting your SPL2STMF command to work on my system.  The CPF333B error "Job system name is not valid." comes up but I'm not sure how to resolve it.  I've read the BBS entries from Trevor, and it appeared that you changed the SPL2STMF tool to handle V5R2 but it still doesn't work properly on my machine.  Can you point me in the right direction?

Thanks in advance,
Tim


SPL2STMF FILE(CR0310P2) TOSTMF('\home\spl2stmf') WSCST(QSYS/QWPDEFAULT) JOB(824886/TIMH/QPADEV0049) SPLNBR(2) DEBUG(*YES)                           

Stream file \home\spl2stmf removed.
Job system name is not valid.
Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 20 

I'm on a V5R2 system with up-to-date PTFs.


 
00795/00795 AAA00000  BeppeCostagliola Re^2: TIFF2PDF "file is damaged but is b
( 1)   04/05/19 01:20  00794へのコメント  コメント数：7
PS.
I recompiled the original SPF2TIFF as extracted from hpt.exe e run TIFF2PDF against this tiff but the error is still present.
Beppe.  
 
00794/00794 AAA00000  BeppeCostagliola Re: TIFF2PDF "file is damaged but is bei
( 1)   04/05/19 01:01  00793へのコメント  コメント数：8
I downloaded two savf : hpt and libtiff.

From hpt I rewrote part of the SPF2TIFFR in order to fix some errors when using generic job name *  using the HostPrintTransform at V5r2 and to force the A4 format in parameter QWPPS1 (Paper source 1).

(if you give me your mail I can send it and you can freely distribute it)

Then I compiled with the MAKE rexx the libtiff programs and the spl2pdfc with 037, 280 and 65535. 

Btw if you have the utility working fine you can generate a  
PDF from a spool and send it to me and I can compare with mine (or I can send my PDF and you can compare, if you prefer).

 This would allow to make sure that this is non a ccsid problem.

This is the simple program I used to print a spool to test:

Fqsysprt   o    f   80        printer                               
C                   except                                          
C                   seton                                        lr 
Oqsysprt   e                                                        
O                                              'BEPPE'                 

Thanks.
Beppe.
 
00793/00793 AAA00000  uzaemon          Re: TIFF2PDF "file is damaged but is bei
( 1)   04/05/19 00:42  00792へのコメント  コメント数：9
Beppe,

> > 1. Did you make the utility by yourself?
> R: I downloaded it from your site and followed your instruction. I've just modifified part of the SPL2TIFF to add system name, date and time to api call ・to allow job names with *  (I can send you this version if you want).  

SPL2TIFF? Do you mean TIFF2PDF, or are you using other program?

Assuming that you are using TIFF2PDF, do you encounter the same problem with original (no modification) code?

Waiting for your reply.

uzaemon@Japan

 
00792/00792 AAA00000  BeppeCostagliola TIFF2PDF                                
( 1)   04/05/18 01:46  00791へのコメント  コメント数：10
Hi, 
 
> 1. Did you make the utility by yourself?
R: I downloaded it from your site and followed your instruction. I've just modifified part of the SPL2TIFF to add system name, date and time to api call  to allow job names with *  (I can send you this version if you want).  

> 2. Do you see the message for all PDF file generated by SPL2STMF and TIFF2PDF?
R: Yes. Also with a very small one.  

> 3. What is the version of your OS/400?
R: V5R2

> 4. What version of PDF reader are you using? Are you using only specific version of PDF reader (or viewer)?
R: Acrobat reader 6. 
However I知 also using a spool converter with iText java classes and they open fine with AReader6.

> 5. What is the primary (or execution environment) language of your OS/400.
R: QCCSID is 65535 and language Italian. 

> 6. Which JOBCCSID are you using? If you create the PDF under JOBCCSID 65535, do you see any difference?
R:I've tried to create again the C/TIFF2PDFC many times with ccsid 037, 280 and 65535. I've also tried to rebuild the ebcdic2ascii table in C program with a 037->850 table obtained from api CDRCVRT but it still gives also the same message. 

Note that after this message the PDF looks fine also with AFP spools with many pages.   

Thanks.
Beppe. 

 
00791/00791 AAA00000  uzaemon          Re: TIFF2PDF "file is damaged but is bei
( 1)   04/05/17 23:55  00790へのコメント  コメント数：11
Beppe,

> I'm using the utility to convert Spool to Tiff and then to PDF. Everything is working, but when Pdf opens the document says "The file is damaged but is being repaired" and goes on. I've checked the Xref offsets and seem ok.
> Any idea on how it can be fixed to avoid this message ?

I have some questions.

1. Did you make the utility by yourself?
2. Do you see the message for all PDF file generated by SPL2STMF and TIFF2PDF?
3. What is the version of your OS/400?
4. What version of PDF reader are you using? Are you using only specific version of PDF reader (or viewer)?
5. What is the primary (or execution environment) language of your OS/400.
6. Which JOBCCSID are you using? If you create the PDF under JOBCCSID 65535, do you see any difference?

Waiting for you reply.

uzaemon@Japan

 
00790/00790 AAA00000  BeppeCostagliola TIFF2PDF                                
( 1)   04/05/13 23:31

Hi,
I'm using the utility to convert Spool to Tiff and then to PDF. Everything is working, but when Pdf opens the document says "The file is damaged but is being repaired" and goes on. I've checked the Xref offsets and seem ok.
Any idea on how it can be fixed to avoid this message ?
Thanks.
Beppe
 
00788/00788 AAA00000  uzaemon          Re: Analog Report about user and ip adre
( 1)   04/04/20 21:34  00787へのコメント

Enrico,

> At the end I have installed ANALOG on my AS/400 !!

You've found (or installed) C compiler, right?

> can I make a new report with ANALOG in witch I can see IP adress of the visitor or the user name ?

Try command below:

> CALL PGM(ANALOG/ANALOG) PARM('+COUTPUT HTML' '+CHOST ON' '+CHOSTSORTBY RE
  QUESTS' '+CLANGUAGE ITALIAN' '+COUTFILE /tmp/hostsreport.htm' '+CMONTHLY 
  OFF' '+CWEEKLY OFF' '+CFULLDAILY OFF' '+CDAILY OFF' '+CFULLHOURLY OFF' '+
  CHOURLY OFF' '+CQUARTER OFF' '+CFIVE OFF' '+CORGANISATION OFF' '+CDOMAIN 
  OFF' '+CREQUEST OFF' '+CDIRECTORY OFF' '+CFILETYPE OFF' '+CSIZE OFF' '+CP
  ROCTIME OFF' '+CREDIR OFF' '+CFAILURE OFF' '+CREFERRER OFF' '+CREFSITE OF
  F' '+CSEARCHQUERY OFF' '+CSEARCHWORD OFF' '+CREDIRREF OFF' '+CFAILREF OFF
  ' '+CFULLBROWSER OFF' '+CBROWSER OFF' '+COSREP OFF' '+CVHOST OFF' '+CUSER
   OFF' '+CFAILUSER OFF' '+CSTATUS OFF')

Output file "/tmp/hostsreport.htm" contains "Sommario generale" and "Resoconto host" (sorted by requests). For more information, study Analog help information which comes with the distribution.

uzaemon@Japan.

 
00787/00787 AAA00000  Enrico Amisano   Analog Report about user and ip adress  
( 1)   04/04/20 18:00

Hi from Enrico Italy
At the end I have installed ANALOG on my AS/400 !!

A question
can I make a new report with ANALOG in witch I can see IP adress of the visitor or the user name ?

Many thanks

 
00785/00785 AAA00000  uzaemon          Re: RCVM dreate directory               
( 1)   04/04/04 12:17  00784へのコメント

shahar,

> RCVM generates automatic directory name for the recieved mail. Sometimes it generates a name with slash (i.e xxwwwe5/zz4) then of course it fails to create the directory.
> 
> 1. How is the program makes the decision regarding directory name.
> 2. Can we influence it ?

Thank you for your report. The problem does not happen on my environment (UNIX and OS/400 mail servers), but I'd like to provide a clue for you.

1. Please read source coode of RCVM (file "Rcvmail.java", around line 202). You'll find a line shown below.

 maildir = homedir + "/" + pop3f.getUID(messages[i]) + "/";

2. Yes, of course. You can modify the source code freely under GPL. 

To prevent the error, you need to remove or replace special characters (e.g. "/", "*", ":") before RCVM creates new directory.

For more information about UID, see "UIDL" section of RFC1725(http://rfc.net/rfc1725.html) and other related RFCs (such as RFC1939, "Appendix A").

uzaemon@Japan

 
00784/00784 AAA00000  shahar           RCVM dreate directory                   
( 1)   04/04/04 04:39

RCVM generates automatic directory name for the recieved mail. Sometimes it generates a name with slash (i.e xxwwwe5/zz4) then of course it fails to create the directory.

1. How is the program makes the decision regarding directory name.
2. Can we influence it ?

Many thanks, this utility works very well for us.
 
00783/00783 AAA00000  uzaemon          Re: SNDM question for links...          
( 1)   04/04/04 00:42  00782へのコメント

Nikellis,

Thank you for using SNDM.

There are several ways to accomplish your requirement.

1. Reduce size of CSV file

I don't know what kind of tool you are using to create CSV file but you can reduce file size by following methods.

- If you are using CPYTOIMPF command, try CRTCSVF command (you can find it at my homepage) which generates much smaller CSV file.
- Use ZIP for OS/400 (also available at my HP) to compress CSV file.

2. Run FTP or HTTP server on your OS/400

If your OS/400 (on which CSV files reside) is accessible from mail users via TCP/IP protocol, configure FTP/HTTP server. For mail users to download CSV file, send link shown below:

- For FTP server, link format to the file will be something like "ftp://(user):(password)@(FQDN)/(path)".
- For HTTP server, link format to the file will be something like "http://(FQDN)/(path)".

See RFC 1630 and 1738 for more detail. You might able to use "file:///" if you configure NetServer (SMB server) on your OS/400.

3. Others

Investigate "iSeries Access for Web" because it has many nifty functions, e.g. users can create specific SQL request and download data as Excel format.

For better security, you should create CGI program which sends CSV file directly as HTTP response via secure connection (such as https).

I hope this answers to your question.

uzaemon@Japan

 
00782/00782 AAA00000  Kostas Nikellis  SNDM question for links...              
( 1)   04/04/02 18:42

Hello Uzaemon,

   First of all i'd like to thank and congratulate you for the fantastic SNDM utility of yours.

   The reason i'm writing this message is the following...
When i'm using an AS/400 text file as the mail body of the SNDM command and writing some web links there (http://...), everything works perfectly in my Lotus Notes or Outlook express. I'm using SNDM through a CL program that converts AS/400 files to .csv format and mail them to the users. This CL program is running after the update of some output AS/400 files directly from users without my involment. The problem is that my users are practically don't care for the size of their attachments...The results might be for example an e-mail of 15Mb size...

   I'm thinking of using again SNDM, but this time with links to my network. I can transfer As/400 program's outfiles (with .CSV format) to the local network, but i'm having troubles to create the links...
For example:
"F:/Files/kostas/outfile.csv" is of course not recognized as a link from Lotus Notes 5.01 or Outlook express 6.
I have tried several different ways (i even tried with html commands, even if i have read here that the SNDM body file can only be plain text.
For example "file:///files/kostas/outfile.csv", or with the domain name after the "file:///" and then the whole path, but...

   I understand that this is not an SNDM problem, but if you can suggest something i'd really appreciate.

Thanks in advance.


Kind regards


Kostas Nikellis
Athens - Greece
 
00781/00781 AAA00000  uzaemon          Re^3: SNDM ask confirmation             
( 1)   04/04/01 21:22  00780へのコメント

Jesus,
 
> > What do you mean by "confirmation status"? Do you want to know whether the mail is opend by recipient, or want to confirm the mail has been successfully deliverd to the recipient?
> 
> Well... The second one will fit, but being able to choose either one will be great!   O:-)

First, you can request to send "message opened" mail to recipient by using "Disposition-Notification-To" header. For example, Outlook Express (5.5 or later, I guess) uses this field if the recipient has checked "Tool" -> "Option" -> "Receipts" tab -> "Request read receipt for all sent messages" checkbox. I suppose most users set this option to OFF to prevent sending unexpected mail (to spammers).

Second. Normally, MTA (mail server) returns delivery failure message when it fails to send a mail to recipient. It is also possible to set a header to confirm delivery.

Be warned that there is no reliable mechanism for Internet mail to confirm it to be delivered and opened.

See RFC2298 (ftp://ftp.rfc-editor.org/in-notes/rfc2298.txt), "2. Requesting Message Disposition Notifications" and RFC2821 (ftp://ftp.rfc-editor.org/in-notes/rfc2821.txt), "4.4 Trace Information" for detail.

Hope this helps.

uzaemon@Japan

 
00780/00780 AAA00000  Jesus Busquets   Re^2: SNDM ask confirmation             
( 1)   04/03/30 19:15  00777へのコメント  コメント数：1
> Jesus,
> 
> > Is it possible to send messages with ask confirmation status?
> 
> What do you mean by "confirmation status"? Do you want to know whether the mail is opend by recipient, or want to confirm the mail has been successfully deliverd to the recipient?

Well... The second one will fit, but being able to choose either one will be great!   O:-)
 
00777/00777 AAA00000  uzaemon          Re: SNDM ask confirmation               
( 1)   04/03/26 22:44  00775へのコメント  コメント数：2
Jesus,

> Is it possible to send messages with ask confirmation status?

What do you mean by "confirmation status"? Do you want to know whether the mail is opend by recipient, or want to confirm the mail has been successfully deliverd to the recipient?

uzaemon@Japan

 
00776/00776 AAA00000  uzaemon          Re: SNDM Spanish translation            
( 1)   04/03/26 22:41  00774へのコメント

Jesus,

> I have just downloaded and checked SNDM. Is Great!.

My pleasure :-)

> For our users I need the command translated, so that I did it. If you want the translated command an panel sources, simply ask

As the translated command and panel are derivatives you created, please make it available from (your) Web site.

I will put a link to (your) Web site on my homepage if you want me to do so.

Thank you for your contribution.

uzaemon@Japan

 
00775/00775 AAA00000  Jesus Busquets   SNDM ask confirmation                   
( 1)   04/03/12 20:50

Is it possible to send messages with ask confirmation status?
 
00774/00774 AAA00000  Jesus Busquets   SNDM Spanish translation                
( 1)   04/03/12 20:49

I have just downloaded and checked SNDM. Is Great!.
For our users I need the command translated, so that I did it. If you want the translated command an panel sources, simply ask
 
 
00773/00773 AAA00000  Alistair Moir    Re^3: ZLIB121.SAVF (Yet another "no C co
( 1)   04/02/28 10:27  00772へのコメント

For V5R2

SYSIFCOPT(*IFS64IO) & DEFINE('_LARGE_FILES') seems to work.    Considering I do not know C it's a bloody miracle to get this far.


On V5R2 compiling for V4R5

DEFINE('__OS400__') seems to cause a problem, removing it appears not to affect the compiles but then the pgms cannot find any files when run :-(

I'll keep trying but do feel free to chime in with any helpful comments!!!


> I've run into the 2GB file limit, again.  We've discussed this before.  Where/how do I need to define these large file apis?
> 
> 
> > Alistair,
> > > > > I just downloaded the ZLIB save file and there are no compiled pgms in the save file? I'm without a C compiler on my AS/400 so am unable to compile from source.
> > > > I don't distribute executables. See "! Read before you start !" at my homepage. Also, there are similar quiestions in this BBS.
> > > > uzaemon@Japan.

 
00772/00772 AAA00000  Alistair Moir    Re^2: ZLIB121.SAVF (Yet another "no C co
( 1)   04/02/26 09:18  00769へのコメント  コメント数：1
I've run into the 2GB file limit, again.  We've discussed this before.  Where/how do I need to define these large file apis?


> Alistair,
> 
> > I just downloaded the ZLIB save file and there are no compiled pgms in the save file? I'm without a C compiler on my AS/400 so am unable to compile from source.
> 
> I don't distribute executables. See "! Read before you start !" at my homepage. Also, there are similar quiestions in this BBS.
> 
> uzaemon@Japan.

 
00769/00769 AAA00000  uzaemon          Re: ZLIB121.SAVF (Yet another "no C comp
( 1)   04/02/19 21:39  00767へのコメント  コメント数：2
Alistair,

> I just downloaded the ZLIB save file and there are no compiled pgms in the save file? I'm without a C compiler on my AS/400 so am unable to compile from source.

I don't distribute executables. See "! Read before you start !" at my homepage. Also, there are similar quiestions in this BBS.

uzaemon@Japan.

 
00767/00767 AAA00000  Alistair Moir    ZLIB121.SAVF                            
( 1)   04/02/19 09:56

Hi,

I just downloaded the ZLIB save file and there are no compiled pgms in the save file?  I'm without a C compiler on my AS/400 so am unable to compile from source.
 
00766/00766 AAA00000  uzaemon          Re^7: CPF333B - SPL2STMF                
( 1)   04/02/12 10:06  00765へのコメント

Trevor,

> The changes for V5R2 have been working now for a couple of months, so its time to send you the code. let me know where to post/send it.

Sorry for late response.

I have changed my SPAM filter so you can send your code to "uzaemon@nifty.com" from your mail address.

uzaemon@Japan

 
00765/00765 AAA00000  Trevor           Re^6: CPF333B - SPL2STMF                
( 1)   04/02/03 23:23  00760へのコメント  コメント数：1
The changes for V5R2 have been working now for a couple of months, so its time to send you the code. let me know where to post/send it.
Trevor
 
00764/00764 AAA00000  uzaemon          Re^3: SNDM CODE PAGE (Polish)           
( 1)   04/01/05 22:24  00763へのコメント

Grzegorz,

> J'am just asking about suggestions how to make the changes in the quickest, easiest way, in which module? which place? 

You should check out character code check/conversion statements such as,

member "#INIT" -> line 54-55, line 79-82, line 93-99
member "#PROC" -> line 171-172, line 196-204
member "#GEN" -> line 40-45, line 70-75, line 216-221, line 249-254, line 478-480, line 556-558
member "USER" -> variable "a_c" and "a_x"

Furthermore, SNDM uses both BSD socket APIs and OS/400 unique APIs. See http://homepage1.nifty.com/uzaemon/SNDM_flowchart.gif for detail.

> I'am not so experienced with RPG, maybe the best way for me will be to modify any existing part of program, but please help me with Your experience.    

Sending canonical Internet mail is not so easy. I recommend you to consult Internet Mail/ILE-RPG/socket programming expert.

Hope this helps.

uzamon@Japan

 
00763/00763 AAA00000  Grzegorz Tabaczy Re^2: SNDM CODE PAGE (Polish)           
( 1)   04/01/01 23:46  00762へのコメント  コメント数：1
J'am just asking about suggestions how to make the changes in the quickest, easiest way, in which module? which place? I'am not so experienced with RPG, maybe the best way for me will be to modify any existing part of program, but please help me with Your experience.    


> Grzegorz,
> 
> > may J ask You for help in using EBSDIC code page 870 in program SNDM, J tried in several configuration but never J've got polish characters in email, maybe we need to do any changes in source code? We use 870 code page in EBSDIC and 1250 ANSI Windows code. The best is to use translation table in SMTP parameters, but... it do not work. Can You help me with any suggestions?
> 
> See message "747. Re: SNDM: Compile Error because of CCSID on polish system" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=747&log_no=747&msg_per_page=50&def=10) in this BBS.
> 
> SNDM supports US-ASCII, ISO-8859-1 and ISO-2022-JP. To send Polish mail, you need to modify SNDM by yourself.
> 
> uz

 
00762/00762 AAA00000  uzaemon          Re: SNDM CODE PAGE (Polish)             
( 1)   03/12/31 18:50  00761へのコメント  コメント数：2
Grzegorz,

> may J ask You for help in using EBSDIC code page 870 in program SNDM, J tried in several configuration but never J've got polish characters in email, maybe we need to do any changes in source code? We use 870 code page in EBSDIC and 1250 ANSI Windows code. The best is to use translation table in SMTP parameters, but... it do not work. Can You help me with any suggestions?

See message "747. Re: SNDM: Compile Error because of CCSID on polish system" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=747&log_no=747&msg_per_page=50&def=10) in this BBS.

SNDM supports US-ASCII, ISO-8859-1 and ISO-2022-JP. To send Polish mail, you need to modify SNDM by yourself.

uzaemon@Japan

 
00761/00761 AAA00000  Grzegorz Tabaczy SNDM CODE PAGE                          
( 1)   03/12/30 20:04

Hello
may J ask You for help in using EBSDIC code page 870 in program SNDM, J tried in several configuration but never J've got polish characters in email, maybe we need to do any changes in source code? We use 870 code page in EBSDIC and 1250 ANSI Windows code. The best is to use translation table in SMTP parameters, but... it do not work. Can You help me with any suggestions?
 
00760/00760 AAA00000  Trevor           Re^5: CPF333B - SPL2STMF                
( 1)   03/12/17 04:34  00759へのコメント  コメント数：2
> You mean you've modified SPL2STMF to use new V5R2 >parameters in "Option Specific Input Information" >described at ..QWPZHPTR.htm ?

Not modified yet. Just put the original code in debug and changed the values of QWPJSN, QWPSCD, QWPSCT. The option specific input data structure QWPPTOSI has changed for V5R2 and these additional fields (above) seem to need populating.
Trevor
 
00759/00759 AAA00000  uzaemon          Re^4: CPF333B - SPL2STMF                
( 1)   03/12/17 00:14  00758へのコメント  コメント数：3
Trevor,

> I've found the problem: the new parameter values: job system name QWPJSN; Splf Create date QWPSCD; Splf create time QWPSCT are not set, so blank values produce the CPF333* messages.

You mean you've modified SPL2STMF to use new V5R2 parameters in "Option Specific Input Information" described at http://publib.boulder.ibm.com/iseries/v5r2/ic2924/info/apis/QWPZHPTR.htm ?

uzaemon@Japan

 
00758/00758 AAA00000  Trevor           Re^3: CPF333B - SPL2STMF                
( 1)   03/12/16 22:59  00754へのコメント  コメント数：4
Thanks for the reply Uzaemon,
My error is CPF333B Job system name is not valid. No value is returned in the message. The version compiled @ V4R4 (7/27/00) works fine, but not compiling it now. The spool file is *AFPDS, and *SCS doesn稚 convert either.
========= 
I've found the problem: the new parameter values: job system name QWPJSN; Splf Create date QWPSCD; Splf create time QWPSCT are not set, so blank values produce the CPF333* messages.
Trevor
 
00756/00756 AAA00000  uzaemon          Re: SPL2STMF another CPF3CF2)           
( 1)   03/12/13 23:09  00755へのコメント

Uday,

> I downloaded the SPL2STMF utility. When I tried to use the command:
> 
> SPL2STMF FILE(SPL2STMF) TOSTMF(test) WSCST(QWPCPQPM20) JOB(172309/USHANKA/QPADEV000R), it failed with the following error,
> Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt = 20.
> When I checked QUSEC in debug, it had the following values:
> 
> QUSBPRV OF QUSEC = 000000016.
> QUSBAVL OF QUSEC = 000000027.
> QUSEI OF QUSEC = 'CPF3CF2'   
> QUSERVED OF QUSEC = '0'      
> 
> Is there anything I am missing? The reason why I tried to use this utility is that when I am sending a spool file via email, the page breaks and any control characters are missing. Alternately, is there any other way I could avoid the problem I am facing? Please advise.

I don't know what version (and level) of OS/400 you are using, but it works without problem on my iSeries (V5R2, TL02211).

> CHGJOB CCSID(37)
> WRKSYSSTS OUTPUT(*PRINT)
> ADDLIBLE LIB(HPT)
  Library HPT added to library list.
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/wrksyssts.txt') WSCST(QWPCPQPM20)
  Stream file generated. execution time 0 min 1 sec, total pages = 1
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/wrksyssts2.txt') WSCST(QWPDEFAULT)
  Stream file generated. execution time 0 min 0 sec, total pages = 1
> EDTF STMF('/tmp/wrksyssts2.txt')

CPF3CF2 indeicates:

> Message . . . . :   Error(s) occurred during running of &1 API.
> Cause . . . . . :   Call your service organization and report the problem.
>   Materials to accompany the problem are:
>     -- Job log of the failing API.
>     -- Actual parameters specified on the API.

To determine your problem, see "708. Re^5: SPL2STMF gives error CPF24B4" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=708&log_no=708&msg_per_page=50&def=10).

uzaemon@Japan

 
00755/00755 AAA00000  Uday             SPL2STMF                                
( 1)   03/12/13 04:53

Hi,
I downloaded the SPL2STMF utility. When I tried to use the command:

SPL2STMF FILE(SPL2STMF) TOSTMF(test) WSCST(QWPCPQPM20) JOB(172309/USHANKA/QPADEV000R), it failed with the following error,
Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2  hptopt = 20.
When I checked QUSEC in debug, it had the following values:

QUSBPRV OF QUSEC = 000000016.
QUSBAVL OF QUSEC = 000000027.
QUSEI OF QUSEC = 'CPF3CF2'   
QUSERVED OF QUSEC = '0'      

Is there anything I am missing? The reason why I tried to use this utility is that when I am sending a spool file via email, the page breaks and any control characters are missing. Alternately, is there any other way I could avoid the problem I am facing? Please advise.

Thanks,
Uday
                                                                                           
                                                                                
 
00754/00754 AAA00000  uzaemon          Re^2: problema con SPL2STMF             
( 1)   03/12/12 12:31  00753へのコメント  コメント数：5
Trevor,

> Same thing for me. We're at V5R2 and the HPT appears to fail when hptopt = 20
> Spool number has changed from 4 digits to six; but that doesn't seem to be the problem.

It works fine on my system (V5R2, TL02211).

> CHGJOB CCSID(37)
> WRKSYSSTS OUTPUT(*PRINT)
> ADDLIBLE LIB(HPT)
  Library HPT added to library list.
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/wrksyssts.tif') WSCST(QWPTIFFPB)
  Stream file generated. execution time 0 min 2 sec, total pages = 1

To determine your problem, see "708. Re^5: SPL2STMF gives error CPF24B4" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=708&log_no=708&msg_per_page=50&def=10). Also confirm that you have installed AFP font.

uzaemon@Japan

 
00913/00913 AAA00000  uzaemon          Re^5: small PDF file                    
( 1)   05/07/02 23:32  00912へのコメント

> Ermanno

> I tried to convert AFPDS spool files with a coloured overlay using SPL2STMF (both QWPTIFFG4 than QWPTIFFPB) but it seems impossible to create a TIFF coloured file. Also AFPTOOL doesn't create coloured TIF file. Is SPL2STMF working only with black & white overlays ?

SPL2STMF is just a frontend to IBM supplied API (Host Print Transform), so please ask IBM via your support channel.

uzaemon@Japan

 
00912/00912 AAA00000  Ermanno          Re^4: small PDF file                    
( 1)   05/06/30 02:30  00910へのコメント  コメント数：1
Hi Uzaemon
I tried to convert AFPDS spool files with a coloured overlay using SPL2STMF (both QWPTIFFG4 than QWPTIFFPB) but it seems impossible to create a TIFF coloured file. Also AFPTOOL doesn't create coloured TIF file. Is SPL2STMF working only with black & white overlays ?

Ermanno

 
00910/00910 AAA00000  uzaemon          Re^3: small PDF file                    
( 1)   05/06/28 07:22  00908へのコメント  コメント数：2
Ermanno｡｢

> Wonderful. I changed my PRTF reducing line size from 132 to 81 characters and now TIF file is correct (that is A4 format).
>
> In this way I can create PDF files at no charge.

Good :-)

> Now I need only to create a coloured overlay using, if possible, a simple tool. 

I suppose HPT (QWPTIFFG4) does not generate color image. QWPTIFFPB may support color but I haven't tried TIFF2PDF with PackBit TIF file...

> An AFPDS spool file from AS400 with this overlay can be viewed (with Operation Navigator ｨ､ AFP viewer) but when you｡ｯll try to use it to generate a TIF file using  SPL2STMF you will receive this error :
> 
> ｡ｰCommand failed. reason - API QwpzHostPrintTransform failed : CPF6DF9  hptopt = 30｡ｱ.
> 
> CPF6DF9 say that buffer of converted data is too small.

See message "701. SPL2STMF gives error CPF6DF9" and "89. Re: SPL2STMF" in this BBS.

> Finally, if you use a good free program or tool to create overlays I kindly ask you to tell me his name.

Sorry, I don't know of such free overlay tool...

uzaemon@Japan

 
00908/00908 AAA00000  uzaemon          Re^2: small PDF file                    
( 1)   05/06/26 17:25  00907へのコメント  コメント数：3
Ermanno、

Thank you for your mail. I looked into the TIF file "FATT5.TIF" and I think TIFF2PDF is working as expected.

Size of "FATT5.TIF" is Width: 3968, Length: 3298 in pixel and there is "white space" area in right part of the file. You may use TIFFINFO program to confirm the information of the file.

> ADDLIBLE LIB(TIFFLIB)                    
  Library TIFFLIB added to library list.   
> CALL PGM(TIFFINFO) PARM('/tmp/fatt5.tif')

  TIFF Directory at offset 0x1841e           
    Subfile Type: (0 = 0x0)                  
    Image Width: 3968 Image Length: 3298     
    Resolution: 300, 300 pixels/inch         
    Bits/Sample: 1                           
    Compression Scheme: CCITT Group 4        
    Photometric Interpretation: min-is-white 
    Orientation: row 0 top, col 0 lhs        
    Samples/Pixel: 1                         
    Rows/Strip: 3298                         
    Planar Configuration: single image plane 
  Press ENTER to end terminal session.       

TIFF2PDF scales the TIFF includeing the "white space", thus, you see small image in generated PDF file. See http://homepage1.nifty.com/uzaemon/tiff2pdf_scale.gif for detail.

Please confirm followings:

- Why the "white space" exists? Is that what you specified by overlay, DDS keyword or printer file definition?

- Try generating other image format, for example using QWPGIF. Does that also have same "white space" area?

Waiting for your reply.

uzaemon@Japan

 
00907/00907 AAA00000  uzaemon          Re: small PDF file                      
( 1)   05/06/22 22:01  00906へのコメント  コメント数：4
Ermanno、

> TIFF2PDF with A4 parameter create a PDF file smaller than A4 even if starting TIFF file is in A4 format. In fact using AFPTOOL I got a correct PDF file 
> Only using these parameters :
> TIFF2PDFOK TIFF('/home/fatt5.tif') PDF('/home/fatt80.pdf') PAPERSIZE(*USRDFN) USRSIZE(340 580) ORIENTAT(*V) MARGIN(0)
> I can print an A4 but as part of a 340x580 PDF paper size.
> Do you know the reason why the generated PDF file in not in A4 format ?
> Can you help me ?

Can you send "fatt5.tif" to uzaemon@nifty.com from e.allegri@minitransport.it?

uzaemon@Japan

 
00906/00906 AAA00000  Ermanno          small PDF file                          
( 1)   05/06/22 03:03

TIFF2PDF with A4 parameter create a PDF file smaller than A4 even if starting TIFF file is in A4 format. In fact using AFPTOOL I got a correct PDF file 
Only using these parameters :
TIFF2PDFOK TIFF('/home/fatt5.tif') PDF('/home/fatt80.pdf') PAPERSIZE(*USRDFN) USRSIZE(340 580) ORIENTAT(*V) MARGIN(0)
I can print an A4 but as part of a 340x580 PDF paper size.
Do you know the reason why the generated PDF file in not in A4 format ?
Can you help me ?

Thanks
Ermanno
 
00905/00905 AAA00000  uzaemon          Re: zlib121 (on V5R3)                   
( 1)   05/06/09 20:45  00904へのコメント

Karl,

> I have installed zlib121 on an i5 at V5R3. To be able to do the MAKE in QREXSRC I had to change __OS400__ to __iseries__. Actually it can be anything else since __OS400__ is a reserved name. I also had to rename BYFOUR to something like BY4.
> Also I had to comment out the second WRITEBUFFERSIZE in MINIZIP of H.
> Once all that was done, everything 'compiled' fine and everything ran well.

Thank you very much for your information! Unfortunately, I don't have access to V5R3, so your report is very precious.

By the way, I think IBM should pay a little more attention to release to relase compatibilities...

uzaemon@Japan

 
00904/00904 AAA00000  Karl             zlib121                                 
( 1)   05/06/09 11:47

I have installed zlib121 on an i5 at V5R3. To be able to do the MAKE in QREXSRC I had to change __OS400__ to __iseries__. Actually it can be anything else since __OS400__ is a reserved name. I also had to rename BYFOUR to something like BY4.
Also I had to comment out the second WRITEBUFFERSIZE in MINIZIP of H.
Once all that was done, everything 'compiled' fine and everything ran well.
Thanks
Karl
 
00903/00903 AAA00000  AKIRA            Re^2: CRTCSVFの限界レコード数は？       
( 1)   05/05/16 10:37  00902へのコメント

確認しましたところV5R2なので256Gまでのようですね。
但しそこまで書き出すためには改修が必要ということですね。
2Gでも十分だと思いますので、設計中の機能には耐えうるかと
思います。

ご回答ありがとうございました。

 
00902/00902 AAA00000  uzaemon          Re: CRTCSVFの限界レコード数は？         
( 1)   05/05/13 21:16  00901へのコメント  コメント数：1
AKIRAさん、

> CRTCSVFを利用させて頂いております。
> HELPにも記述がないかと思い質問させて頂きます。
> 件名通りCRTCSVFでの限界レコード数を知りたいのですが、
> あるだけ全部変換してくれるのでしょうか？
> ディレクトリの限界に依存するのでしょうかね？

特にプログラム上では何も考えていません。普通のStream file APIを使っていますので、おそらく最大2GB(32bit符号付整数の最大値)になると思います。システム上は2G(V4R2)～1TB(V5R3)までサポートされるようですが、Cのようなlarge file supportマクロが使えませんので、64bit I/Oにするには結構な書き直しが必要です。

なお、バージョンごとのStream fileの最大サイズは http://publib.boulder.ibm.com/iseries/v5r1/ic2924/tstudio/tech_ref/syslimit/ (～V5R1), http://publib-b.boulder.ibm.com/Redbooks.nsf/RedbookAbstracts/redp0204.html?Open (V5R2), http://publib.boulder.ibm.com/infocenter/iseries/v5r3/ic2924/index.htm?info/rzamp/rzampoverview.htm (V5R3)に記載されています。

uzaemon@Japan

 
00901/00901 AAA00000  AKIRA            CRTCSVFの限界レコード数は？             
( 1)   05/05/13 19:12

お世話になります。

CRTCSVFを利用させて頂いております。
HELPにも記述がないかと思い質問させて頂きます。
件名通りCRTCSVFでの限界レコード数を知りたいのですが、
あるだけ全部変換してくれるのでしょうか？
ディレクトリの限界に依存するのでしょうかね？

 
00900/00900 AAA00000  uzaemon          Re: CRTCSVF (limitations)               
( 1)   05/05/05 08:27  00899へのコメント

Debra,

> I have downloaded and tested your CRTCSVF utility and found it to be exactly what I need ... with two exceptions. 
> 1.  I have a file that is 105 fields and you state that your utility will only work with 100 field.
> 2.  Your utility will not add to a stream file, only replace.
> 
> I am writing to confirm that these two points are still correct and have not been changed.  

Yes, you are correct.

For limitation 1 (100 fields), it can be doubled by increasing buffer size from 32767 to 65535. For limitation 2, you may use QSHELL cat command to concat stream files, for example,

> cat /tmp/a.csv
  1st a.csv
  2nd b.csv
  $
> cat /tmp/b.csv
  3rd b.csv
  4th b.csv
  $
> touch -C 819 /tmp/c.csv
  $
> cat /tmp/a.csv /tmp/b.csv > /tmp/c.csv
  $
> cat /tmp/c.csv
  1st a.csv
  2nd b.csv
  3rd b.csv
  4th b.csv
  $

Hope this helps.

uzaemon@Japan

 
00899/00899 AAA00000  Debra Martin     CRTCSVF                                 
( 1)   05/05/05 00:28

I have downloaded and tested your CRTCSVF utility and found it to be exactly what I need ... with two exceptions. 
1.  I have a file that is 105 fields and you state that your utility will only work with 100 field.
2.  Your utility will not add to a stream file, only replace.

I am writing to confirm that these two points are still correct and have not been changed.  

Thanks very much for your time.

Debra Martin
 
00898/00898 AAA00000  elton            Re^4: font size (SNDM 80 char limitation
( 1)   05/05/04 03:42  00897へのコメント

> elton,
> 
> > Last Question,  I'm limited to 92 character's per line is it posible i can go larger than 92 character's.  I have some reports that are 132 and would like to email.
> 
> See message "247. Re^3: SNDM (why only 80 characters in one line?)" in this BBS.
> 
> uzaemon@Japan

Ok, Thanks for all your help.


 
00897/00897 AAA00000  uzaemon          Re^3: font size (SNDM 80 char limitation
( 1)   05/05/03 10:38  00896へのコメント  コメント数：1
elton,

> Last Question,  I'm limited to 92 character's per line is it posible i can go larger than 92 character's.  I have some reports that are 132 and would like to email.

See message "247. Re^3: SNDM (why only 80 characters in one line?)" in this BBS.

uzaemon@Japan

 
00896/00896 AAA00000  elton            Re^2: font size (SNDM)                  
( 1)   05/05/03 02:20  00895へのコメント  コメント数：2
> elton,
> 
> > I have downloaded sndm application.  I there a way to send email in a smaller font size???
> 
> SNDM generates plain text mail, in other words, there are no way to specify font size.
> 
> I don't know exact your requirement and environment, but you may consider followings:
> 
> - Modify SNDM to generate HTML mail. See message "874. Re: SNDM: HTML Body" for more information.
> 
> - Create PDF file (or any file which is capable to use small font) and send the file as attachment.
> 
> - Ask mail recipients to view the mail using small font. This option depends on their MUA (Mail client software).
> 
> - Prepare HTML page which uses small font and send only link to the HTML page using SNDM.
> 
> uzaemon@Japan

Last Question,  I'm limited to 92 character's per line is it posible i can go larger than 92 character's.  I have some reports that are 132 and would like to email.

Thank you.

 
00895/00895 AAA00000  uzaemon          Re: font size (SNDM)                    
( 1)   05/04/30 12:50  00894へのコメント  コメント数：3
elton,

> I have downloaded sndm application.  I there a way to send email in a smaller font size???

SNDM generates plain text mail, in other words, there are no way to specify font size.

I don't know exact your requirement and environment, but you may consider followings:

- Modify SNDM to generate HTML mail. See message "874. Re: SNDM: HTML Body" for more information.

- Create PDF file (or any file which is capable to use small font) and send the file as attachment.

- Ask mail recipients to view the mail using small font. This option depends on their MUA (Mail client software).

- Prepare HTML page which uses small font and send only link to the HTML page using SNDM.

uzaemon@Japan

 
00894/00894 AAA00000  elton            font size                               
( 1)   05/04/30 02:27

Hello,

I have downloaded sndm application.  I there a way to send email in a smaller font size???

Thank you.

 
00893/00893 AAA00000  daniele          Re^2: tifflib 3.4 (no C compiler)       
( 1)   05/04/28 00:41  00891へのコメント

> daniele,
> 
> > Where to find tifflib 3.4 already compiled (a don't hace C compiler o my as/400)
> 
> As stated at my homepage, I don't distribute compiled binaries. I'm not sure but you might be able to get compiled binary from 'http://www.recursos-as400.com/utilidades12.shtml'.
> 
> uzaemon@Japan


Thank you so much 

Daniele
 
00892/00892 AAA00000  uzaemon          Re: Thank you                           
( 1)   05/04/27 22:05  00889へのコメント

elton,

> Thank you i have downloaded the code to send email from the as400.

My pleasure. ;-)

uzaemon@Japan

 
00891/00891 AAA00000  uzaemon          Re: tifflib 3.4 (no C compiler)         
( 1)   05/04/27 22:03  00890へのコメント  コメント数：1
daniele,

> Where to find tifflib 3.4 already compiled (a don't hace C compiler o my as/400)

As stated at my homepage, I don't distribute compiled binaries. I'm not sure but you might be able to get compiled binary from 'http://www.recursos-as400.com/utilidades12.shtml'.

uzaemon@Japan

 
00890/00890 AAA00000  daniele          tifflib 3.4                             
( 1)   05/04/27 19:04

Where to find tifflib 3.4 already compiled (a don't hace C compiler o my as/400)
 
00889/00889 AAA00000  elton            Thank you                               
( 1)   05/04/27 01:04

Thank you i have downloaded the code to send email from the as400.
 
00888/00888 AAA00000  eugene           Re^2: CPF6DF9 on SPL2STMF               
( 1)   05/04/27 00:57  00887へのコメント

Thanks, Uzaemon 
all is right now.


 
00887/00887 AAA00000  uzaemon          Re: CPF6DF9 on SPL2STMF                 
( 1)   05/04/23 23:43  00886へのコメント  コメント数：1
eugene,

> I receive this error during the SPL2STMF run.
> On a previuos post you indicate to refer the 89 post but unfortunately it is deleted.

Below is message 89:

| > I get the following error when I try the SPL2STMF command:
| > "Fatal error : API QwpzHostPrintTransform failed : CPF6DF9 hptopt = 30"
| 
| According to DSPMSGD command, CPF6DF9 indicates:
| 
| Message . . . . :   Transformed data buffer too small.
| Cause . . . . . :   The transformed data buffer of &2 bytes 
| is too small to hold the &1 bytes of transformed data that 
| is available.  Only &2 bytes of data have been copied to the 
| transformed data buffer.  The remaining transformed data is lost.
| 
| That means you should increase buffer size (200,000) 
| which is defined at line 57 and 233. You can try DEBUG(*YES) 
| to determine the buffer size.

Hope this circumvention works as before.

uzaemon@Japan

 
00886/00886 AAA00000  eugene           CPF6DF9 on SPL2STMF                     
( 1)   05/04/22 22:59

Dear Uzaemon, 
I receive this error during the SPL2STMF run.
On a previuos post you indicate to refer the 89 post but unfortunately it is deleted.
can you help me?

thank you in advance.
 
00884/00884 AAA00000  uzaemon          Re: zlib (ZIPCLP bug)                   
( 1)   05/04/13 19:08  00883へのコメント

Dave,

> zlib121: The *Replace is getting truncated in the CLP in the ZIP command. The CLP variable is defined as char(7) instead of char(8). As such, replace is not working.

Thank you very much for your suggestion. I updated addendum (http://homepage1.nifty.com/uzaemon/zlib_addendum.html) section of ZLIB.

I'll include the correction to the next major update of zlib for OS/400.

uzaemon@Japan

 
00883/00883 AAA00000  Dave             zlib                                    
( 1)   05/04/13 02:57

zlib121: The *Replace is getting truncated in the CLP in the ZIP command. The CLP variable is defined as char(7) instead of char(8). As such, replace is not working.
 
00882/00882 AAA00000  uzaemon          Re^3: RCVM dreate directory             
( 1)   05/03/21 20:17  00881へのコメント

maurizio,

> > To prevent the error, you need to remove or replace special characters (e.g. "/", "*", ":") before RCVM creates new directory.
> 
> How can I replace these special characters in the string?
> I'm not experienced with java programming, could someone help me?

I would use String.replaceAll or URLEncode. Search Google using those words and you'll find tons of examples (e.g. http://webxadmin.free.fr/article.php?i=40).

uzaemon@Japan

 
00881/00881 AAA00000  maurizio         Re^2: RCVM dreate directory             
( 1)   05/03/19 01:36  00785へのコメント  コメント数：1
> To prevent the error, you need to remove or replace special characters (e.g. "/", "*", ":") before RCVM creates new directory.

How can I replace these special characters in the string?
I'm not experienced with java programming, could someone help me?
 
00880/00880 AAA00000  maurizio         Re: Data Truncation                     
( 1)   05/03/19 01:33  00867へのコメント

> Getting the following error:
> java.DataTruncation: Data Truncation
> 
> What does this error mean?
> 
> Thanks!

probably the field TOADDR is too short for all the reipents. I solved the problem increasing the length of the field.
 
00877/00877 AAA00000  TACHIBANA        Re^2: SNDMで質問(JIS外字)               
( 1)   05/01/27 15:06  00876へのコメント

UZAEMON 様 

> 漢字一文字の「No.」(ナンバー)や「(株)」(カッコ株)を
> インターネットで使用する事は規約に違反しています。
> このため、SNDM内部でチェックをしてこれらの文字を
> 「〓」に置き換えています。
> 詳細はGoogleで「メール 使ってはいけない 文字」などの
> キーワードで検索してみてください。

知識不足で申し訳けありません
C/A400等のファイル転送では上手くPC側で
受け取れるので、何か方法があるかなと思っておりました

添付ファイルを使用する方向で考え直します

早急にご教示頂きありがとうございました

 
00876/00876 AAA00000  uzaemon          Re: SNDMで質問(JIS外字)                 
( 1)   05/01/27 12:55  00875へのコメント  コメント数：1
TACHIBANAさん,

> SNDMを利用したいのですが、テストを行っていたところ
> AS400側のデータに『№』(X'446E)が含まれていると
> 『Mail sent, non-JIS character(s) replaced. 』となり
> 受信したメールでは『№』が『〓』に変換されています

漢字一文字の「No.」(ナンバー)や「(株)」(カッコ株)を
インターネットで使用する事は規約に違反しています。
このため、SNDM内部でチェックをしてこれらの文字を
「〓」に置き換えています。
詳細はGoogleで「メール 使ってはいけない 文字」などの
キーワードで検索してみてください。

> 正しく変換する方法はありますでしょうか

SNDMは設計通りに正しく動作しており、当方でこれを
変更する(規約違反を助長する)ことは考えておりません。

上記を了解の上でJIS外字を送信したいという要求が
あるのであれば、SNDMを変更してチェック
(SMTP/QRPGLESRC.#PROCの567行あたり)を外すことは
可能ですが、上記理由により推奨しません。

JIS外字を含むメッセージは、別途添付ファイルとして
送信することをお勧めします。

uzaemon@Japan

 
00875/00875 AAA00000  TACHIBANA        SNDMで質問                              
( 1)   05/01/26 22:01

uzaemon様

SNDMを利用したいのですが、テストを行っていたところ
AS400側のデータに『№』(X'446E)が含まれていると
『Mail sent, non-JIS character(s) replaced. 』となり
受信したメールでは『№』が『〓』に変換されています
正しく変換する方法はありますでしょうか

環境は
SMTP client for AS/400 version 1-36を
5035でコンパイル
5035で実行
実行時のパラメータは
HDRCCSID(5035)
DBFCCSID(*FILE) 『5026』

DEBUGLISTでは
Debug mode.  1/26/2005                                
*** SMTP client for AS/400 version 1-36 2003-05-05 ***

non-ascii character found at record 1, column 1.     
text-[ 請求書№  12345678]

となっております

解決方法がございましたらご教示下さい。
以上　宜しくお願い申し上げます



 
00874/00874 AAA00000  uzaemon          Re: SNDM: HTML Body                     
( 1)   05/01/24 22:31  00871へのコメント

Aad,

> Would it be difficult to change the SNDM program to sent a HTML-body or does only the 輟ntent-type' parameter need to be changed.

As always, it depends on your requirement.

If you want to send HTML format mail, you have to change the header (and may need to use "related" parts). Also, to send both HTML and TEXT at a time (in the same mail), you may consider to use "alternative" header.

HTML mail is very effective to distribute rich contents. On the other hand, lots of people (including me) disable HTML mail for security reason. To satisfy both requirements, you should consider to use "Content-Type: multipart/alternative" implementation. See RFC 1766, 2045, 2046 and other RFCs for more information.

Hope this helps.

uzaemon@Japan

 
00871/00871 AAA00000  Aad Bruintjes    SNDM: HTML Body                         
( 1)   05/01/23 03:26

Would it be difficult to change the SNDM program to sent a HTML-body or does only the 輟ntent-type' parameter need to be changed.

Thanks,
Aad
 
00302/00302 AAA00000  uzaemon          Re^5: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/30 22:05  00301へのコメント

Jesus,

> In fact, I think these aren't PCL WSCSTs, they're HPT WSCSTs.

There are WSCSTs which convert SCS/AFPDS to PCL. Run "WRKOBJPDM LIB(QSYS) OBJ(QWPHP*) OBJTYPE(*WSCST)" and you can find more than 10 WSCST which support HP printers.

If you are still not sure, try followings and open the output file with any PCL viewer.

| > WRKACTJOB OUTPUT(*PRINT)
| > ADDLIBLE LIB(HPT)
|   Library HPT added to library list.
| > SPL2STMF FILE(QPDSPAJB) TOSTMF('/tmp/qpdspajb.pcl') WSCST(QWPHPLSR2)
|   Stream file generated. execution time 0 min 0 sec, total pages = 6

> I retrieved the sources for these WSCSTs using:

You can find a line similar to "DATASTREAM = HPPCL5" in your source. 

>   Then I appended a translation table for EBCDIC (CP=37) to ASCII (CP=437), in order to convert some not commonlly used character (ｬ) to <esc> (1B HEX). This way the printer knows the following report's data is PCL code, i.e.: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

Those strings are simply translated from EBCDIC to ASCII by your WSCST and sent to HP printers. Only HP (or PCL-capable) printers can interpret the string as meaningful data.

> I tried SPL2STMF using my WSCSTs and both QWPTIFFxx and the result is allways the same, I can read the escape codes as text, overlapped with report's data and overlay.

Yes, of course. QWPTIFFxx is designed to convert SCS/AFPDS to TIFF (I assume). Your "escape codes" are neither of them so should be interpreted as plain text.

Please read documents at http://publib.boulder.ibm.com/html/as400/v5r1/ic2924/info/rzahgicprinting.htm to understand how HPT and WSCST works.  Also, see "296. Re^3: SPL2STMF (AFP to PCL/TIFF?)" again and take appropriate solution for you.

uzaemon@Japan



 
00301/00301 AAA00000  Jesus Olague     Re^4: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/30 02:07  00296へのコメント  コメント数：1
Uzaemon,

In fact, I think these aren't PCL WSCSTs, they're HPT WSCSTs. I retrieved the sources for these WSCSTs using:
    RTVWSCST DEVTYPE(*TRANSFORM)
        MFRTYPMDL(*HP5SI)                          
        SRCMBR(HP5SI)                              
        SRCFILE(PRTFLIB/QTXTSRC)                   
        TEXT('Modified WSCST for HPLJ 5Si printer')

  Then I appended a translation table for EBCDIC (CP=37) to ASCII (CP=437), in order to convert some not commonlly used character (ｬ) to <esc> (1B HEX). This way the printer knows the following report's data is PCL code, i.e.: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

My printers are PC attached and AS/400 emulated with Rally! (an AS/400's device emulator like CA) or Lan printers using HP JetDirect ethernet adapters.

I tried SPL2STMF using my WSCSTs and both QWPTIFFxx and the result is allways the same, I can read the escape codes as text, overlapped with report's data and overlay.

I'm using AFPDS device type, with OVRPRTF .. DEVTYPE(*AFPDS) .. , to print overlays.

Regards.

Jesus.
 
00300/00300 AAA00000  uzaemon          Re: -301 negative........ ( RSP[554     
( 1)   01/11/23 23:53  00299へのコメント

leve,

> I am trying to use sndm in a CL and it returns with followig message:
>  Command failed. reason -301 negative response from SMTP server ( RSP[554 
>    Relay rejected for policy reasons.璢] REQ[RCPT TO:<to>璢])             

It looks like the SMTP server you specified does not allow mail relay (perhaps to prevent SPAM mail). Contact SMTP server administrator to allow your AS/400 to send mail to external users.

uzaemon@Japan

 
00299/00299 AAA00000  leve             -301 negative........ ( RSP[554         
( 1)   01/11/23 20:22

I am trying to use sndm in a CL and it returns with followig message:
 Command failed. reason -301 negative response from SMTP server ( RSP[554 
   Relay rejected for policy reasons.璢] REQ[RCPT TO:<to>璢])             

any advices?
 
00298/00298 AAA00000  uzaemon          Re: CRTCSVF Error (iconv_open error)    
( 1)   01/11/22 21:09  00297へのコメント

Laurent,

> I have this error when i use CRTCSVF with *FILE and *SYSTEM
> PROGRAM ABORTED 0/7199 records processed, 0 errors
> iconv_open failed. EBCDIC CCSID - 0000J / ASCII CCSID 00850 - 3021 the value specified for the argument is not correct
> In my file the CCSID is 65535, is this the problem ?

Yes. CCSID 65535 indicates "no conversion", hence CRTCSVF cannot open code conversion routine.

> Is it possible to change this value ?

Yes, but I don't recommend it unless you are familiar to CCSID related matters.

Just specify valid EBCDIC CCSID for DBFCCSID parameter of CRTCSVF command.

Try out and let me know the result.

uzaemon@Japan

 
00297/00297 AAA00000  Laurent          CRTCSVF Error                           
( 1)   01/11/22 18:53

I have this error when i use CRTCSVF with *FILE and *SYSTEM
PROGRAM ABORTED 0/7199 records processed, 0 errors
iconv_open failed. EBCDIC CCSID - 0000J / ASCII CCSID 00850 - 3021 the value specified for the argument is not correct
In my file the CCSID is 65535, is this the problem ?
Is it possible to change this value ?
Thank's
 
00296/00296 AAA00000  uzaemon          Re^3: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/22 18:41  00292へのコメント  コメント数：2
Jesus,

> Before I used SPL2STMF I created several WSCSTs where I changed some HEX codes to translate the escape code to ｬ, the following is an example of my escape codes: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

So you are using customized WSCSTs based on IBM supplied PCL WSCSTs, right?
 
> SPL2STMF don't converts these codes so I can see them in the image, overlapped with the data of the report.

SPL2STMF does not perform any conversion but HPT does. If you are using exactly same PCL WSCST for SPL2STMF and LPR(or remote writer?), they should produce same result because both utilize HPT.

> What I want to do is, using SPL2STMF, convert this formatted reports to TIFF to send them via e-mail;

You should use QWPTIFFG4 (or QWPTIFFPB if you want) to produce TIFF file from AS/400 spooled file. In other words, you cannot produce TIFF using PCL-based WSCST.

You may consider followings.

- Use APFDS to format your reports. SPL2STMF can convert the spooled file to TIFF file by QWPTIFFG4.

- Look for a software which converts PCL to TIFF. You can find some commercial products on the Web.

Hope this helps.

uzaemon@Japan

 
00295/00295 AAA00000  uzaemon          Re: ＳＮＤＭの利用について              
( 1)   01/11/22 18:18  00294へのコメント

big_moonさん、

> ＳＮＤＭの商用の利用についてお伺いしたいのですが・・
> メールいただけたら幸いです。

SNDMの商利用については「72. Re: License price.」や「133. Re^2: 掲載されたソフトのライセンスの考え方」をご参照ください。

その上で不明な点がありましたら、まずはこちらのBBSに書き込みお願いします。内容が公開できないものであれば uzaemon@nifty.com 宛にメールをお送りください。

uzaemon@Japan

 
00294/00294 AAA00000  big_moon         ＳＮＤＭの利用について                  
( 1)   01/11/22 11:46

ＳＮＤＭの商用の利用についてお伺いしたいのですが・・
メールいただけたら幸いです。
 
00293/00293 AAA00000  Masaaki Yamada   Re^4: SPL2STMF について(カナ文字化け)   
( 1)   01/11/22 10:09  00291へのコメント

お手数おかけします
 
ジョブのCCSIDを5026にしたところ、うまく表示されました。

有難うございました。

 
00292/00292 AAA00000  Jesus Olague     Re^2: SPL2STMF (AFP to PCL/TIFF?)       
( 1)   01/11/22 02:20  00289へのコメント  コメント数：3
Hi Uzaemon,

> > 3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.
> 
> I don't understand what you want to do. Are you trying to create a TIFF file using WSCST for PCL data stream?
> 
-----------------------------------------------------

Before I used SPL2STMF I created several WSCSTs where I changed some HEX codes to translate the escape code to ｬ, the following is an example of my escape codes: ｬ&l2a1o1e88f0Lｬ*p0x0Yｬ&l1e8Dｬ(12Uｬ(s0p20h6v0s1b6Tｬ&k6Hｬ&l6.4C

I'm using these WSCSTs to print formatted reports (with overlays and escape secuences) in diferent HP printers such as models 4, 5M, 5Si, 8000, 1100 and 1200.

SPL2STMF don't converts these codes so I can see them in the image, overlapped with the data of the report.

What I want to do is, using SPL2STMF, convert this formatted reports to TIFF to send them via e-mail; I know TIF2PDF (or STMF2PDF?) could be usefull, but many of aour contacts don't have Acrobat Reader nor any other tool to view PDFs.

Regards.

Jesus
 
00291/00291 AAA00000  uzaemon          Re^3: SPL2STMF について(カナ文字化け)   
( 1)   01/11/21 19:43  00290へのコメント  コメント数：1
Yamadaさん、

当方のiSeries(V4R5およびV5R1)で試したのですが、特別な指定をしなくても正常に半角カタカナに変換されました。

> addlible hpt                                                      
   ライブラリー HPT がライブラリー・リストに追加された。            
> wrksyssts *print                                                  
> SPL2STMF FILE(QPDSPSTS) TOSTMF('/tmp/dspsts.txt') WSCST(TEXTJ)    
  Stream file generated. execution time 0 min 0 sec, total pages = 1

ジョブのCCSIDは5035、印刷装置ファイルQPDSPSTSの文字識別コード(CHRID)は*CHRIDCTLです。

Yamadaさんの実行環境(OS/400のバージョン、JOBのCCSID、印刷装置ファイルのCHRID)はどのように設定されていますか? また、印刷出力の作成前にCHGJOB CCSID(5026) および、OVRPRTF 印刷装置ファイル名 CHRID(*JOBCCSID or *CHRIDCTL)を実行しても化けますか?

uzaemon@Japan

 
00290/00290 AAA00000  Masaaki Yamada   Re^2: SPL2STMF について(カナ文字化け)   
( 1)   01/11/21 10:55  00288へのコメント  コメント数：2
有難うございます。

> また、問題判別には次のような情報が必要になります。
> 
> - どのようにして作成したか(ユーザー・プログラム or システ
>   ムコマンドによる出力)

両方で試してみたのですが、いずれも半角ｶﾅ文字が化けてしまいます。

> - スプールファイルのタイプ(SCS or AFPDS?)

SCS です。

> - 指定したWSCST(自作WSCST or IBM supplied?)

http://homepage1.nifty.com/uzaemon/hpt_usage.htmlの末尾で紹介して頂いたのを、そのまま使っております。

初歩的なことのようで恐縮してしまうのですが、宜しくお願い致します。
 
00289/00289 AAA00000  uzaemon          Re: SPL2STMF (AFP to PCL/TIFF?)         
( 1)   01/11/20 20:31  00287へのコメント  コメント数：4
Olague,

> 1. I don't know what WSCST object I must use, after several attempts I'd found QSYS/QWPTIFFG4 and QSYS/QWPTIFFPB but I don't know if there are other objects more recomended.

I don't know either (it depends). As stated at "95. *IPDS spool files" SPL2STMF is just a front-end to IBM supplied API. Contact your support channel and ask IBM about "recommended" WSCST for your specific purpose.

As far as I know, QWPTIFFG4 should be used to generate a TIFF file for TIFF2PDF command.

> 2. When the spooled file to convert has overlays, the data falls down around one line in the format.

SPL2STMF has nothing to do with contents. To determine the problem and report to IBM, try LPR on your AS/400. Use LPD software for PC or UNIX to store stream file. Some LPD softwares have capability to store the printer output as stream file instead of send it to the printer. 

> 3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.

I don't understand what you want to do. Are you trying to create a TIFF file using WSCST for PCL data stream?

uzaemon@Japan

 
00288/00288 AAA00000  uzaemon          Re: SPL2STMF について(カナ文字化け)     
( 1)   01/11/20 20:08  00286へのコメント  コメント数：3
Yamadaさん、

> 『SPL2STMF』をダウンロードして試しているのですが、ｶﾅ文字が化けてしまってうまく表示されません。コード等はどう設定すればよろしいでしょうか？宜しくお願い致します。

まずはこのBBSの「78. Re: SPL2STMFでの漢字変換」をご一読ください。

また、問題判別には次のような情報が必要になります。

- どのようにして作成したか(ユーザー・プログラム or システムコマンドによる出力)
- スプールファイルのタイプ(SCS or AFPDS?)
- 指定したWSCST(自作WSCST or IBM supplied?)

uzaemon@Japan

 
00287/00287 AAA00000  Jesus Olague     SPL2STMF                                
( 1)   01/11/20 08:57

Hi, I've downloaded SPL2STMF early and it's working fine when is used to convert text-only spooled files to TIFF images; but I've some problems:

1. I don't know what WSCST object I must use, after several attempts I'd found QSYS/QWPTIFFG4 and QSYS/QWPTIFFPB but I don't know if there are other objects more recomended.

2. When the spooled file to convert has overlays, the data falls down around one line in the format.

3. When I use PCL escape secuences those commands are not converted, and I can read them as a part of the data. Some time ago I created WSCSTs to print reports with escape secuences in HP printers if I use any of these customizing objects the TIFF file generated is 'Invalid file or type not supported'.

Regards.

Jesus Olague
 
00286/00286 AAA00000  Masaaki Yamada   SPL2STMF について                       
( 1)   01/11/19 17:00

『SPL2STMF』をダウンロードして試しているのですが、ｶﾅ文字が化けてしまってうまく表示されません。コード等はどう設定すればよろしいでしょうか？宜しくお願い致します。
 
00285/00285 AAA00000  uzaemon          Re: 日本語でお願いできませんか？        
( 1)   01/11/07 17:46  00284へのコメント

t_abeさん、

> なんか使ってみたいものが、たくさんありそうなんですが
> 日本語の説明は無いんでしょうか（^^;

残念ながら今のところ日本語の説明はありません。英語と日本語の両方を作成・維持する時間が取れませんので...

このBBSは日本語も通りますので、ツールに関して不明な点があればこちらに書き込みしてください。

uzaemon@Japan

 
00284/00284 AAA00000  t_abe            日本語でお願いできませんか？            
( 1)   01/11/07 16:15

なんか使ってみたいものが、たくさんありそうなんですが
日本語の説明は無いんでしょうか（^^;

 
00283/00283 AAA00000  uzaemon          Re: French caracter codepage            
( 1)   01/11/01 12:55  00281へのコメント

Milk,

> I'm french and I've got a problem with the output file.
> Some caracters like "・#34; or "・#34; are replaced by "," or other special caracters.

First of all, which tool are you using? And exactly what CCSID did you specify for JOB, FILE and command parameters?

Waiting for your reply.

uzaemon@Japan

 
00282/00282 AAA00000  Milk             Re: sndm                                
( 1)   01/11/01 01:04  00279へのコメント

You just have to specify *FILE instead of *JOB in the Database file CCSID field. 
 
00281/00281 AAA00000  Milk             French caracter codepage                
( 1)   01/11/01 01:02

Hi,

I'm french and I've got a problem with the output file.
Some caracters like "" or "" are replaced by "," or other special caracters.

I've tried to modify the codepage in the program but without any result.

Thank's for helping me,

Me
 
00280/00280 AAA00000  uzaemon          Re: sndm (Another "failed to initialize 
( 1)   01/10/31 15:35  00279へのコメント

Christian,

> We use V4R4M0. We get the following Message:
> Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
> The next Entry is File CCSID -1 may not valid, trying anyway.
> In Germany we have CCSID 65535.

CCSID 65535 indicates the contents is not tagged to any language thus no conversion will take place.

Have you read a message "272.  Re^3: SNDM: failed to initialize code conversion"? If so, you should know that there are circumventions.

1. Specify DBFCCSID(*DFTJOBCCSID) or DBFCCSID(valid EBCDIC CCSID).
2. Create source physical file with vaild CCSID (not 65535) and specify the file for FILE parameter.

In German, I assume that you are using 273 as default job CCSID.

Try them and let me know the result.

uzaemon@Japan

 
00279/00279 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/30 23:07

I didnt found a solution to the following problem (Alfred Adjei didnt answer to my mail):
We use V4R4M0. We get the following Message:
Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
The next Entry is File CCSID -1 may not valid, trying anyway.
In Germany we have CCSID 65535.
Whats wrong ?
What CCSID should I use for the Source File ? Did I create a file from the source-File ? 
Thanks for your Help.
Best Regards.
Christian

 
00278/00278 AAA00000  uzaemon          Re: SPL2STMF (can't save for earlier rel
( 1)   01/10/25 18:27  00277へのコメント

Chris,

> Is there any way that I can get a compiled version of the two programs TIFFLIB and all it's objects and HPT and all it's objects??

For binary distribution issue, please read message "45. Re: Convert tiff file to PDF file" in this BBS.

> The problem is that I can't save it a a earlier release...  The machine I want it on is on V4R4..

What is your problem?

If you are using V4R5 or V5R1, you can modify the "MAKE" procedure to specify TGTRLS(V4R4M0) for CRTBNDC, CRTPGM, CRTCMOD, CRTSRVPGM commands so that you can save objects for V4R4.

If you are using V4R4 or earlier, you should be able to restore objects compiled on the release to V4R4.

Hope this helps.

uzaemon@Japan

 
00277/00277 AAA00000  Chris            SPL2STMF                                
( 1)   01/10/25 05:18

Is there any way that I can get a compiled version of the two programs TIFFLIB and all it's objects and HPT and all it's objects?? I have a machine that has all the compilers I need... The problem is that I can't save it a a earlier release...  The machine I want it on is on V4R4..  :(   Can you help me out?? :)  Thanks...

Chris
 
00276/00276 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/23 19:45

Sorry, I didnt read the message from Alfred Adjej.
Christian
 
00275/00275 AAA00000  Christian Schwar sndm                                    
( 1)   01/10/23 19:38

We use V4R4M0. We get the following Message:
Command failed. reason -111 failed to initialize code conversion APi (CCSID 0000J->00819, 3021: The Argument for the value is not correct. We have CCSID 65535 and in the body_file information there is an Entry : File CCSID: -1 
The next Entry is File CCSID -1 may not valid, trying anyway.
In Germany we have CCSID 65535.
Whats wrong ?
Thanks for your Help.
Best Regards.
Christian
 
00274/00274 AAA00000  Wolfgang Kaufman tiff2                                   
( 1)   01/10/22 21:46

Thank you very much for your help. it works no very well
regards 
wolfgang
 
00273/00273 AAA00000  Wolfgang Kaufman Tiff2                                   
( 1)   01/10/22 18:52

Please tell me did yopu get my question
regards 
Wolfgang
 
00272/00272 AAA00000  uzaemon          Re^3: SNDM: failed to initialize code co
( 1)   01/10/20 18:53  00271へのコメント

Alfred,

> Problem: When I try to send a Physical database file of record length 80, I get the following error message ...
> 
> Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40      
> Message type . . . . . :   Information                                      
> Date sent  . . . . . . :   10/19/01      Time sent  . . . . . . :   12:03:10
>                                                                             
> [ Message . . . . :   Command failed. reason -111 failed to initialize code   
>   conversion API ( CCSID 0000J->00819, 3021:The value specified for the     
>   argument is not correct.)                                                 
> Cause . . . . . :   No additional online help information is available. ]

It looks like the database file is not tagged to valid CCSID. Try followings:

1. Specify DBFCCSID(*DFTJOBCCSID) or DBFCCSID(valid EBCDIC CCSID).
2. Create source physical file with vaild CCSID (not 65535) and specify the file for FILE parameter.

Waiting for your reply.

uzaemon@Japan

 
00271/00271 AAA00000  Alfred Adjei     Re^2: SNDM: Problem running STRREXPRC SR
( 1)   01/10/20 03:30  00268へのコメント  コメント数：1
> Alfred,
> 
> > When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.
> 
> Please confirm that you have library QSYSINC.
> 
> See messages "159. Re: SNDM compilation problem", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information. Try again and let me know the result.
> 
> uzaemon@Japan

======================================
Thank you. I installed QSYSINC and SNDM runs.
Problem: When I try to send a Physical database file of record length 80, I get the following error message ...

Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40      
Message type . . . . . :   Information                                      
Date sent  . . . . . . :   10/19/01      Time sent  . . . . . . :   12:03:10
                                                                            
[ Message . . . . :   Command failed. reason -111 failed to initialize code   
  conversion API ( CCSID 0000J->00819, 3021:The value specified for the     
  argument is not correct.)                                                 
Cause . . . . . :   No additional online help information is available. ]

Please help.   
                                                                            






 
00269/00269 AAA00000  uzaemon          Re: Tiff2 (Not a TIFF file, bad magic nu
( 1)   01/10/19 22:15  00267へのコメント

Wolfgang,

> SPL2STMF FILES(QPSUPRTF) TOSTMF('tmp/stmf.tif') 
> WSCST(DEFAULT)
> TIFF2PDF TIFF('/tmp/stmf.tif'                                         
>                     PDF('/tmp/stmf.pdf')            
> i got a error message:
> /tmp/stmf.tif: Not a TIFF file, bad magic number 32 (0x20). 

As the name implies, TIFF2PDF converts TIFF (more precise, TIFF, G4 compression, multipage image format) file to PDF. Clearly, the file (/tmp/stmf.tif) is not valid TIFF file.

To generate a TIFF-G4 file using SPL2STMF, you should :

1. Create *AFPDS spooled file.
2. Specify WSCST(QWPTIFFG4) for SPL2STMF command. (What is "WSCST(DEFAULT)"?)

See http://homepage1.nifty.com/uzaemon/hpt_usage.html for sample operation (remember to specify correct font for CDEFNT parameter).

Waiting for your feedback.

uzaemon@Japan

 
00268/00268 AAA00000  uzaemon          Re: SNDM: Problem running STRREXPRC SRCM
( 1)   01/10/19 21:57  00265へのコメント  コメント数：2
Alfred,

> When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.

Please confirm that you have library QSYSINC.

See messages "159. Re: SNDM compilation problem", "66. Re: /COPY" and "49. Re: SMTP" in this BBS for more information. Try again and let me know the result.

uzaemon@Japan

 
00267/00267 AAA00000  Wolfgang Kaufman Tiff2                                   
( 1)   01/10/19 21:53

Hi uzaemon,
while running proc:
.....
SPL2STMF FILES(QPSUPRTF) TOSTMF('tmp/stmf.tif') 
WSCST(DEFAULT)
TIFF2PDF TIFF('/tmp/stmf.tif'                                         
                    PDF('/tmp/stmf.pdf')            
i got a error message:
/tmp/stmf.tif: Not a TIFF file, bad magic number 32 (0x20). 
but i don't know where is the reason. can you help me., cause i like to use this tool in my company 
thanks a lot                 
 
00265/00265 AAA00000  Alfred Adjei     SNDM: Problem running STRREXPRC SRCMBR(M
( 1)   01/10/19 06:18

When I try to Install SNDM, I get the foolowing messages on screen. Apparently, the error messages are related to the line that says /COPY QSYSINC/QRPGLESRC,QUSEC. Please help.

Start creating modules for SNDM...
  creating module SNDM...         
  result-> 0                      
  creating module CDATE...        
  result-> RNS9309                
  creating module FD_...          
  result-> 0                      
  creating module GETERRINFO...   
  result-> 0                      
  creating module GETFILENAM...   
  result-> 0                      
  creating module GETJOBINFO...   
  result-> RNS9309
  creating module GETPFINFO...               
  result-> RNS9309                           
  creating module PREPAREUS...               
  result-> RNS9309                           
  creating module SNDPM...                   
  result-> RNS9309                           
Creating main program (SNDM)...              
  result-> CPF3C50                           
                                             
Start creating command ...                   
  creating pnlgrp...                         
  result-> 0                                 
  creating command...                        
  result-> 0                                 
                                             
Compile finished. Confirm error(s) if exists.
                                             
Press ENTER to end terminal session.         
 
00264/00264 AAA00000  Chris            Re^4: SPL2STMF (cannot find output file)
( 1)   01/10/12 01:46  00261へのコメント

I'm on hold on getting it to work.  I have one AS400 which has a C and RPG compiler on it. I have a second machine with AFP installed and the fonts.  The first machine is on V4R5 and the second is on V4R4.  I have a mix match...  I'm upgrading my second machine from V4R4 to V4R5 so that I can bing back the compiled vesion's.  I want to be able to convert AFP's to PDF's..   I tried what you have said and it seems to be great.. I just have to wait and see if I can get it work with AFP's... 

Thanks
Chris
 
00263/00263 AAA00000  uzaemon          Re: SNDM (*DSTMF as attachment file)    
( 1)   01/10/11 19:37  00262へのコメント

Mark,

> BTW, adding '*DSTMF' to the checking in the #INIT module also allows attachements to be taken from the QNTC file system.

Thank you very much for your suggestion.

It's a similar situation to message "82. SNDM Attachment-File" in this BBS. You can add any valid object type as attachment file in the same manner. 

uzaemon@Japan

 
00262/00262 AAA00000  Mark             SNDM                                    
( 1)   01/10/11 19:16

What an excellent utility...

BTW, adding '*DSTMF' to the checking in the #INIT module also allows attachements to be taken from the QNTC file system.
 
00261/00261 AAA00000  uzaemon          Re^3: SPL2STMF (cannot find output file)
( 1)   01/10/11 17:31  00260へのコメント  コメント数：1
Chris,

> File TIFF2PDF in library TIFFLIB with member TIFF2PDFHL not found. 
> Panel group TIFF2PDFHL not created in library TIFFLIB.
> AUT parameter ignored.

I have not created the panel group yet as I'm busy working for other things. That compile-time error message has nothing to do with your problem because SPL2STMF should run without the panel group (command help).

Have you examined the debug output? Didn't you find any message (such as "file opened" or so on) in it?

Waiting for your reply.

uzaemon@Japan

 
00260/00260 AAA00000  Chris            Re^2: SPL2STMF (cannot find output file)
( 1)   01/10/11 04:59  00259へのコメント  コメント数：2
After I start the REX Procedure to compile the second half of TIFF2PDF I get the following:    

                                         
  Start creating TIFF2PDF command...       
    Creating ILE-C module TIFF2PDF...      
    module result-> 0                      
    Creating ILE-CL module TIFF2PDFCL...   
    module result-> 0                      
    Creating program TIFF2PDF...           
    program result-> 0                     
    creating PNLGRP...                     
    result-> CPF5A02                       
    creating command...                    
    result-> 0 


In the DSPJOBLOG I get the following due to the above error.   

File TIFF2PDF in library TIFFLIB with member TIFF2PDFHL not found. 
Panel group TIFF2PDFHL not created in library TIFFLIB.
AUT parameter ignored.

Help!! :(

Chris

                                                                       
                                           
 
00259/00259 AAA00000  uzaemon          Re: SPL2STMF (cannot find output file)  
( 1)   01/10/05 21:12  00257へのコメント  コメント数：3
Chris,

> After using the program I don't know where the output is placed... 

The output file will be placed at the directory you specified in TOSTMF parameter. For instance, if you run the command as follows, you'll find the file "qpdspajb.txt" at directory "/tmp" on OS/400. Notice that the directory should present before you run SPL2STMF command.

| > WRKACTJOB OUTPUT(*PRINT)
| > SPL2STMF FILE(QPDSPAJB) TOSTMF('/tmp/qpdspajb.txt') WSCST(TEXTJ)
|   Stream file generated. execution time 0 min 1 sec, total pages = 4

Use WRKLNK OBJ('/tmp/*') or EDTF command to look for the output file.

> Where do I look for the PDF file after I issue the command...

SPL2STMF does not directly generate PDF file. Please read the "usage" section of the utility again.

> If the program comes back to say the it took 0 min and 0 seconds.  Does this mean that it did not work???

You can specify DEBUG(*YES) for SPL2STMF and examine spooled file QPRINT to confirm the process of the command,

Try above and let me know what you find.

uzaemon@Japan

 
00258/00258 AAA00000  Chris            Re: SPL2STMF                            
( 1)   01/10/05 03:08  00232へのコメント

> STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)
> after this this line i tryed to use the command spl2stmf and it dosen't work what i'm doing wrong? the version of the os is v4r4.
> Thanks en adavance.
> 
> Regards.


I noticed that you are using this program too.. Did you get it to work by chance?? I just need to figure out where the file is put?? Do you know??

Chris
> 
> Jose.

 
00257/00257 AAA00000  Chris            SPL2STMF                                
( 1)   01/10/05 03:02

I only have one stupid question.. After using the program I don't know where the output is placed... Where do I look for the PDF file after I issue the command...  If the program comes back to say the it took 0 min and 0 seconds.  Does this mean that it did not work???

Help

Chris
 
00256/00256 AAA00000  uzaemon          Re^3: Thank you for your feedback       
( 1)   01/10/02 18:48  00253へのコメント

Dominique,

> ... the end-result is that the program is now working fine.

Good news. Thank you for using my utility.

uzaemon@Japan

 
00255/00255 AAA00000  uzaemon          Re^3: SNDM (error using 30 *CCs)        
( 1)   01/10/02 18:41  00252へのコメント

MY_KATOHさん、

> SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
> とコーディングします。 
> この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
> 存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。

解説有難うございます。状況は理解しました。

これにSNDM側で対応するには、SMTP/QRPGLESRC.#GENの109行あたり、SMTP/QRPGLESRC.#SENDの86行辺り、SMTP/QRPGLESRC.#INITの107行目あたりなどの処理を見直す必要があります。宛先が全てブランクだった場合などのエラー処理も考えるとかなりの修正量になりますので、修正は難しいでしょう。

また、このようなエラーの発生はOS/400コマンドの一般的な動作であるため、ユーザーがコーディングで回避するのが通常の対応と考えます。例えば次のようなプログラムも同様のエラー(&PARM2がブランクであるため「CPD0078 パラメーター INCREL の値 '          ' が有効な名前でない」)を起こします。

| PGM                                                       
| DCL        VAR(&PARM1) TYPE(*CHAR) LEN(10) VALUE('TKBANG')
| DCL        VAR(&PARM2) TYPE(*CHAR) LEN(10)                
| CPYF       FROMFILE(TOKMSP) TOFILE(QGPL/TOKMSP) +         
|              CRTFILE(*YES) INCREL((*IF &PARM1 *EQ +       
|              '01010') (*AND &PARM2 *EQ '02020'))          
| ENDPGM                                                    

この現象を回避するにはCL(?)プログラムの修正が必要と思われます。*CCの数を固定にするか、あらかじめダミーのメールアドレスを全ての変数に初期値として指定しておくか(サーバーに余分な負荷をかけるため推奨しませんが)、SNDMコマンド部分を文字列として組み立ててQCMDEXCで呼び出すなどの方法で回避されてはいかがでしょうか。

uzaemon@Japan

 
00254/00254 AAA00000  MY_KATOH         Re^3: SNDM (error using 30 *CCs)        
( 1)   01/10/02 18:35  00252へのコメント

> > MY_KATOHさん、こんにちは。
> > 
> > > ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。
> > 
> > 状況が良く把握できないのですが、下記について情報をいただけますでしょうか。
> > 
> > - 「結果的にCCが必要なく」とはどのような意味でしょうか
> > - 具体的なエラーの内容(エラーコード、メッセージIDなど)
> > - DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容
> > 
> > よろしくお願いします。
> > 
> > uzaemon@Japan
> 早速ありがとうございます。詳細に説明させていただきます。
> SNDMを使うプログラムPROGRAM_AでTOのパラメーター用に&TO,&CC01,
> &CC02,.....(30個というのはあまり意味がありませんでした。すいません）と変数を用意します。
> SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
> とコーディングします。 
> この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
> 存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。
> これと同じく、&CC01にユーザーが任意で入れさせるようなプログラムからPROGRAM_Aを呼ぶ場合、ユーザーが入力せず（必要ないと判断した場合）、結果的に&CC01に*CHARのブランク(X'404040...')が入ってしまい、User Unknownという（考えてみればあたりまえなのですが）事になってしまいます。これを、コーディングで回避する以外になにか良い手が無いかというご質問です。
> わがままな質問ですが、よろしくお願いいたします。
申し訳ありません。これはSNDMに限ったことではないですね。CLプログラムの書き方の質問でした。こちらでがんばってみます。ありがとうございました。

 
00253/00253 AAA00000  Dominique        Re^2: SNDM in batch mode                
( 1)   01/10/02 15:25  00249へのコメント  コメント数：1
Uzaemon,

thank you for your reply. I followed you instructions & looked at the debug information. Effectively, the parameters had 'garbage' information when the CL is submitted in batch. After looking at an As400 FAQ which explains issues when submitting jobs in batch and when parameters are > 32 in length, the problem is now solved. I have learned this lesson the hard way but the end-result is that the program is now working fine.
Again, many thanks for this excellent SNDM utility.


Regards
 
00252/00252 AAA00000  MY_KATOH         Re^2: SNDM (error using 30 *CCs)        
( 1)   01/10/02 09:41  00251へのコメント  コメント数：2
> MY_KATOHさん、こんにちは。
> 
> > ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。
> 
> 状況が良く把握できないのですが、下記について情報をいただけますでしょうか。
> 
> - 「結果的にCCが必要なく」とはどのような意味でしょうか
> - 具体的なエラーの内容(エラーコード、メッセージIDなど)
> - DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容
> 
> よろしくお願いします。
> 
> uzaemon@Japan
早速ありがとうございます。詳細に説明させていただきます。
SNDMを使うプログラムPROGRAM_AでTOのパラメーター用に&TO,&CC01,
&CC02,.....(30個というのはあまり意味がありませんでした。すいません）と変数を用意します。
SNDM FROM(&SENDER) TO((&TO) (&CC01 *N *CC))
とコーディングします。 
この用意した変数に全て存在するアドレスが入る場合はメールが送信されます。
存在しないアドレスが入るとCPA0702でfailed. reason -301 negative response from SMTP server ( RSP[550 5.1.1 User unknown｣･] REQ[RCPT TO:<>｣･])で落ちてしまいます。
これと同じく、&CC01にユーザーが任意で入れさせるようなプログラムからPROGRAM_Aを呼ぶ場合、ユーザーが入力せず（必要ないと判断した場合）、結果的に&CC01に*CHARのブランク(X'404040...')が入ってしまい、User Unknownという（考えてみればあたりまえなのですが）事になってしまいます。これを、コーディングで回避する以外になにか良い手が無いかというご質問です。
わがままな質問ですが、よろしくお願いいたします。
 
00251/00251 AAA00000  uzaemon          Re: SNDM (error using 30 *CCs)          
( 1)   01/10/01 18:28  00250へのコメント  コメント数：3
MY_KATOHさん、こんにちは。

> ...CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。

状況が良く把握できないのですが、下記について情報をいただけますでしょうか。

- 「結果的にCCが必要なく」とはどのような意味でしょうか
- 具体的なエラーの内容(エラーコード、メッセージIDなど)
- DEBUG(*YES)を指定して出力されるスプールファイルのパラメーター部分の内容

よろしくお願いします。

uzaemon@Japan

 
00250/00250 AAA00000  MY_KATOH         SNDM                                    
( 1)   01/10/01 14:09

お世話になります。SNDMを利用させて頂いています。CLプログラムからこのコマンドを利用する場合の質問です。CLプログラムにてCCでの送り先用に３０個のフィールドを用意してこのコマンドを使うと、結果的にCCが必要なく、SNDMのCCパラメーターに*CHARのブランクが入ってしまいコマンドがエラーになってしまいます。回避する方法がありますでしょうか。よろしくお願いいたします。

MY_KATOH

 
00249/00249 AAA00000  uzaemon          Re: SNDM in batch mode                  
( 1)   01/09/30 13:08  00248へのコメント  コメント数：2
Dominique,

Command help information states that you cannot use some special characters in "Description" parameter (do not confound with "Mail address" parameter).

| Description                                              
|     Specify mail user information such as sender name or 
|     organization name.  DBCS and special characters are  
|     allowed except following SBCS characters.   ( ) < > @
|     , ; : " / [ ] ? . =                                  

> I cannot find any invalid character here and cannot understand why when called interactively, SNDM works file but when the CL that contains the SNDM call is submitted (same parameters, parm lengths etc), I get the above error.

Please confirm followings and let me know.

1. Don't you use "@" or any other invalid character(s) in "Description" field?

2. Specify DEBUG(*YES) to generate interactive and batch debug print outputs and look for the difference.

Waiting for your reply.

uzaemon@Japan

 
00248/00248 AAA00000  Dominique        SNDM in batch mode                      
( 1)   01/09/28 20:02

Hi,
I am having a problem when executing the SNDM utility in batch mode this way:
When, within a CL program CL1,  I call another CL program CL2 that itself invokes SNDM , SNDM works fine. However if the first CL program  does a SBMJOB of CL2 (instead of a CALL CL2). I get an error message. Have you already experienced this error while using SNDM and know what I am overlooking here?
The error msg is as follows:
Message . . . . :   Command failed. reason -135 invalid character found in
  mail address description (FROM-[DOMINIQUE
  DAHKOW@IBL.INTNET.MU])

(This is the output of the dump)
I cannot find any invalid character here and cannot understand why when called interactively, SNDM works file but when the CL that contains the SNDM call is submitted (same parameters, parm lengths etc), I get the above error.

Any hint?

Regards
 
00247/00247 AAA00000  uzaemon          Re^3: SNDM (why only 80 characters in on
( 1)   01/09/24 01:56  00245へのコメント

Eduard,

> P.S.: it would be nice, if i could send more than 92 characters in one line...

RFC 821 allows to send 1000 octets in one line. I limited the SNDM to allow only 80 bytes by following reasons.

1. After some encodings, 80 characters would be translated to much longer string.

2. Some mailers may unexpectedly fold the text line which exceeds about 80 characters.

3. You can send any data as attachment file.

On balance, 80 characters in one line is the safest value for most users in my opinion. If you really want to extend it by some reason which I cannot think of, you can modify the source code at your will.

uzaemon@Japan

 
00245/00245 AAA00000  Eduard Weinknech Re^2: SNDM (missing. localhost)         
( 1)   01/09/23 20:12  00244へのコメント  コメント数：1
Hi uzaemon,

that fixed my problem and SNDM is working!

thx a lot

P.S.: it would be nice, if i could send more than 92 characters in one line...
 
00244/00244 AAA00000  uzaemon          Re: SNDM (missing. localhost)           
( 1)   01/09/22 11:21  00242へのコメント  コメント数：2
Eduard,

> When I start SNDM, I allways will get the error:
> 214 failed to retrieve local domain name ('.' missing. localhost =) 

Have you defined domain name of your AS/400 by CHGTCPDMN command (or CFGTCP -> option "12. Change TCP/IP domain information")?

Please let me know what you've found.

uzaemon@Japan

 
00242/00242 AAA00000  Eduard Weinknech SNDM                                    
( 1)   01/09/22 00:20

Hi, i've installed your SNDM and added our SMTP-Server in the HOST-TABLE-ENTRY.
When I start SNDM, I allways will get the error:
214 failed to retrieve local domain name ('.' missing. localhost =)  
Please can you help me, thx 
 
00241/00241 AAA00000  uzaemon          Re^5: SPL2STMF                          
( 1)   01/09/18 11:22  00236へのコメント

Jose,

Have your resolved the problem?

uzaemon@Japan

 
00240/00240 AAA00000  uzaemon          Re^7: *Userascii AS/400 spools.         
( 1)   01/09/18 11:19  00239へのコメント

Jordi,

> Thanks for your request.

I would like to hear your feedback. Please let me know your decision.

Thanks in advance.

uzaemon@Japan

 
00239/00239 AAA00000  jordi carreras   Re^6: *Userascii AS/400 spools.         
( 1)   01/09/17 15:49  00231へのコメント  コメント数：1
Uzaemons,

Thanks for your request.

Best regards.

Jordi.

 
00238/00238 AAA00000  uzaemon          Re: Client FTP.                         
( 1)   01/09/14 21:44  00237へのコメント

Nicolas,

> Do you know why?

I don't know how you control the FTP but control part of FTP connection should be same as telnet according to RFC 959.

Another person posted FTP-related question to this BBS and you may refer to message "198. Re: Question Aboute Socket".

For more help, please contact your support channel.

uzaemon@Japan

 
00237/00237 AAA00000  Nicolas Machado  Client FTP.                             
( 1)   01/09/13 03:30

Hello, I want to know where to begin for creating a Client FTP program, in RPG/le.

I wish to control the sentences that I send to the server.
Testing I surprise my self very much, because the commands that I can send to the server are diferent if I use a FTP client o the telnet client with port 21.
Do you know why?

Thanks
 
00979/00979 AAA00000  uzaemon          Re: SNDM using authenticated SMTP server
( 1)   05/11/06 22:00  00978へのコメント

Raymond,

Thank you for using SNDM.

> Would like to suggest if you could add "Authenticated SMTP"...

I don't have a plan to implement SMTP AUTH, because:
- My mail server does not require authentication.
- It is not so easy to implement "SMTP Authentication" defined by RFC2554, the full auth mechanism (AUTH-LOGIN, AUTH PLAIN, AUTH CRAM-MD5, etc).
- I'm very busy on my regular work and private things.

> It will be great if you can do that, thanks.

So it is a very good chance for you to contribute to the community!

uzaemon@Japan

 

00978/00978 AAA00000  raymond          SNDM using authenticated SMTP server    
( 1)   05/11/05 14:26

Hi, I like your SNDM utility, it is very easy to use and very effective. Good job. Would like to suggest if you could add "Authenticated SMTP" (i.e. UserID and Password to signon to the SMTP server before the email is relayed which is supported in the Java Mail API) to your utility. It will be great if you can do that, thanks.


 

00977/00977 AAA00000  uzaemon          Re^5: SNDM: Compile Error because of CCS
( 1)   05/10/27 22:33  00975へのコメント

Christian,

> I had the same problem on our German i5, running V5R3. Could not compile due to a codepage conversion conflict (we do not have any DBCS codepages installed).
> 
> Changing my JOB CCSID to 65535 fixed that, everything compiled fine. I am still wondering, though, where my iSeries picks up that codepage 5035? I cannot find it anywhere in/on the sourcefiles! Anyone has an idea?

The only source of 5035 I think of is "LANGID", which can be confirmed by DSPFD command but cannot be specified in CRTSRCPF command. On my system, the value for "LANGID" is "JP".

As I have only Japanese system, please try following procedure if possible:

- RNMOBJ OBJ(SMTP/QRPGLESRC) OBJTYPE(*FILE) NEWOBJ(QRPGLESRCX)
- CRTSRCPF FILE(SMTP/QRPGLESRC)
- CPYF FROMFILE(SMTP/QRPGLESRCX) TOFILE(SMTP/QRPGLESRC) FROMMBR(*ALL) TOMBR(*FROMMBR) MBROPT(*REPLACE) FMTOPT(*NOCHK)
- Change current library to SMTP and run MAKE procedure

uzaemon@Japan

 

00975/00975 AAA00000  Christian Vitrol Re^4: SNDM: Compile Error because of CCS
( 1)   05/10/27 18:27  00749へのコメント  コメント数：1
Hello everyone,

I had the same problem on our German i5, running V5R3. Could not compile due to a codepage conversion conflict (we do not have any DBCS codepages installed).

Changing my JOB CCSID to 65535 fixed that, everything compiled fine. I am still wondering, though, where my iSeries picks up that codepage 5035? I cannot find it anywhere in/on the sourcefiles! Anyone has an idea?
 

00974/00974 AAA00000  uzaemon          Re: commercial license (SNDM)           
( 1)   05/10/27 12:53  00973へのコメント

Sent a mail to Christian and below is excerpt from the mail.

--------------------------------
> I wonder what's the point with GPL on an iSeries?
In my understanding, it is possible to use GPLed software for commercial use.
There are some issues regarding "dynamically links". I don't think programs 
which call SNDM are not "derivative work". For more information, refer to 
http://en.wikipedia.org/wiki/GPL, for instance.
 
SNDM is subject to the dual-license which means you can use whichever you want.
You need commercial license when you want to "SELL" SNDM. I assume most 
people prefer GPL and I don't want to receive lengthy legal documents to sign.

> I prefer to walk the proper way! 
So it depends. If you are planning to use SNDM just for your commercial application,
you can use SNDM under GPL.
--------------------------------

uzaemon@Japan

 

00973/00973 AAA00000  Christian Vitrol commercial license                      
( 1)   05/10/25 19:05

Dear Yahagi-san,

we'd like to discuss the matter of a commercial license with you. Please email me at the address given, thank you.

Kind regards,
Christian Vitroler
 

00972/00972 AAA00000  uzaemon          Re: spl2stmf for V4R3M0                 
( 1)   05/10/23 15:15  00969へのコメント

> Have you the utilites SPL2SMTF for OS/400 at versione V4R3M0 ?

Yes. Read "! Read before you start !" section at my homepage.
---------------
zlib, TIFF2PDF, SPL2STMF, SNDM and CRTCSVF MAY work on V3R7 or later. 
...........
"htp_520.exe"has been saved specifying V4R5 as target release. If you are using V5R2 (with latest PTF level), you need to use "htp_520.exe". "hpt_510.exe" has been saved specifying V3R2 as target release. 
---------------

uzaemon@Japan

 

00971/00971 AAA00000  uzaemon          Re: SNDM - UNDELIVERABLE MAIL           
( 1)   05/10/23 15:13  00968へのコメント

Michael,

> NOT ABLE TO DELIVER MAIL TO SOME/ALL RECIPIENTS.
> REPLY CODES WITH FIRST DIGIT = '4' OR '5' ARE ERROR REPLIES.
> ERRORS THAT DO NOT HAVE ERROR REPLY CODES MAY EXIST.
> 
> HOST CHFACT01 NOT ABLE TO DELIVER MAIL TO FOLLOWING RECIPIENT(S):
> <MICHAEL.SCHAAD@BLUEWIN.CH>
> MAIL REJECTED BY BLUEWIN WITH THE MESSAGE:
> 550 5.7.1 Unable to relay for MICHAEL.SCHAAD@BLUEWIN.CH
> 
> ** TEXT OF MAIL FOLLOWS **
> Received: from ZUERICH.FACTORS(chfact01.factors.tpp.ubs.ch[193.1.9.7]) by CHFACT01 (IBM OS/400 SMTP V05R03M00) with TCP; Fri, 21 Oct 2005 09:30:04 +0200
> From: "=?US-ASCII?Q?IT_Department_=28=22ECG=5FSETUP=22=29?="
> <SCH@FACTORS.CH>
> To: "Michael Schaad" <SCH@FACTORS.CH>
> Reply-To: "=?US-ASCII?Q?IT_Department_=28=22ECG=5FSETUP=22=29?="
> <SCH@FACTORS.CH>
> Subject: =?US-ASCII?Q?ECG=3A_Test_e-Mail_Datum=3A_21=2E10=2E2005_?=
> =?US-ASCII?Q?=2F_Zeit=3A_09=2E30=2E00?=
> Date: Fri, 21 Oct 2005 09:30:02 +0200
> MIME-Version: 1.0
> Content-Type: text/plain; charset="US-ASCII"
> X-Mailer: SMTP Client for IBM OS400 version 1-36 2003-05-05
> 
> Test e-Mail

~~~~~~~ SNIP ~~~~~~~

> I am using your tool SNDM; it works great. But i am having from time to time a problem. Even Mail's sent to one or several users are - somteimes - not received by all recipients. The sender gets the message i added at the end of this mail. The happen not always to the same recepiants. The mailbox do have space to receive the mails. There seems not to be a rule when it happens. Could it be wehn we do sent mails at the same time from different jobs? Thanks a lo for your support?
> Michael 
> **************
> Created & sent to you by FACTORS AG - "i5 Server" (CHFACT01)
> ECG99999R / 21.10.2005 / ECG: Test e-Mail

It looks like some of the mail servers reject your mail as "relayed". I think your should contact the mail servers' administrator. See "948. Re: SndMail (SNDM - Relaying blocked)" for more information.

uzaemon@Japan

 

00969/00969 AAA00000  Giovanni Arisi   spl2stmf for V4R3M0                     
( 1)   05/10/21 20:16

Have you the utilites SPL2SMTF for OS/400 at versione V4R3M0 ?
Thanks.
Giovanni
 

00968/00968 AAA00000  Michael Schaad   SNDM - UNDELIVERABLE MAIL               
( 1)   05/10/21 19:34

NOT ABLE TO DELIVER MAIL TO SOME/ALL RECIPIENTS.
REPLY CODES WITH FIRST DIGIT = '4' OR '5' ARE ERROR REPLIES.
ERRORS THAT DO NOT HAVE ERROR REPLY CODES MAY EXIST.

HOST CHFACT01 NOT ABLE TO DELIVER MAIL TO FOLLOWING RECIPIENT(S):
   <MICHAEL.SCHAAD@BLUEWIN.CH>
MAIL REJECTED BY BLUEWIN WITH THE MESSAGE:
   550 5.7.1 Unable to relay for MICHAEL.SCHAAD@BLUEWIN.CH

             ** TEXT OF MAIL FOLLOWS **
Received: from ZUERICH.FACTORS(chfact01.factors.tpp.ubs.ch[193.1.9.7]) by CHFACT01 (IBM OS/400 SMTP V05R03M00) with TCP; Fri, 21 Oct 2005 09:30:04 +0200
From: "=?US-ASCII?Q?IT_Department_=28=22ECG=5FSETUP=22=29?="
 <SCH@FACTORS.CH>
To: "Michael Schaad" <SCH@FACTORS.CH>
Reply-To: "=?US-ASCII?Q?IT_Department_=28=22ECG=5FSETUP=22=29?="
 <SCH@FACTORS.CH>
Subject: =?US-ASCII?Q?ECG=3A_Test_e-Mail_Datum=3A_21=2E10=2E2005_?=
 =?US-ASCII?Q?=2F_Zeit=3A_09=2E30=2E00?=
Date: Fri, 21 Oct 2005 09:30:02 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
X-Mailer: SMTP Client for IBM OS400  version 1-36 2003-05-05

Test e-Mail
***********

    JJ  UU  UU  PPPPP  II
    JJ  UU  UU  PP  P  II
JJ  JJ  UU  UU  PPPPP  II
 JJJJ    UUUU   PP     II


Datum: 21.10.2005 / Zeit: 09.30.00










  ************************************************************Hello

I am using your tool SNDM; it works great. But i am having from time to time a problem. Even Mail's sent to one or several users are - somteimes - not received by all recipients. The sender gets the message i added at the end of this mail. The happen not always to the same recepiants. The mailbox do have space to receive the mails. There seems not to be a rule when it happens. Could it be wehn we do sent mails at the same time from different jobs? Thanks a lo for your support?
Michael 
**************
         Created & sent to you by FACTORS AG - "i5 Server" (CHFACT01)
                  ECG99999R / 21.10.2005 / ECG: Test e-Mail
  **************************************************************************
 

00967/00967 AAA00000  uzaemon          Re^3: SNDM (under restricted? mode)     
( 1)   05/10/17 20:31  00966へのコメント

Alan,

> I ran the test lat night and I received the folowing error message...
> 
> Message . . . . :   Command failed. reason -201 failed to start TCP/IP           
>   communication (socket(), 3448:The protocol required to support the specified   
>   address family is not available at this time.)       
> 
> Therefore I checked the subsystems and I assume that TCP/IP runs in both QSERVER and QSYSWRK and as these were ended so would TCP/IP even though it was none as a ENDTCP command. This would be done to ensure a full save.
> I guess I will have to try and find another way round this problem unless you know of one.

I checked the iSeries Information Center and found below:

| >>When the STRTCP command is issued and the iSeries is not
| in restricted state, <<the QTCPIP job in the QSYSWRK 
| subsystem is started. The QTCPIP job is used for activating 
| and deactivating TCP/IP interfaces.

After all, it seems like you need to start at least the QTCPIP job to activate TCP/IP. 

uzaemon@Japan

 

00966/00966 AAA00000  Alan Medows      Re^2: SNDM (under restricted? mode)     
( 1)   05/10/16 17:15  00965へのコメント  コメント数：1
> Alan,
> 
> > I have been testing SNDDST in batch and interactively and has worked OK.  However, I have tried to do this with my overnight back up and have not been receiving email from the job.  I shutdown the subsystems QSNADS, QSERVER and QSYSWRK and I don't know if this is affecting the SNDDST command.  Then I found your utility SNDM and I wondered if this would overcome this problem by writing directly to the SMTP server.  Does this utility in terms of subsystems and AS400 services running?
> 
> SNDM just requires TCP/IP connection between the mail srever. It does not rely on any IBM-supplied subsystems.
> 
> Please try and let me know the result.
> 
> uzaemon@Japan
I ran the test lat night and I received the folowing error message...

Message . . . . :   Command failed. reason -201 failed to start TCP/IP           
  communication (socket(), 3448:The protocol required to support the specified   
  address family is not available at this time.)       

Therefore I checked the subsystems and I assume that TCP/IP runs in both QSERVER and QSYSWRK and as these were ended so would TCP/IP even though it was none as a ENDTCP command. This would be done to ensure a full save.
I guess I will have to try and find another way round this problem unless you know of one.

Regards,

Alan                          
 

00965/00965 AAA00000  uzaemon          Re: SNDM (under restricted? mode)       
( 1)   05/10/15 20:29  00964へのコメント  コメント数：2
Alan,

> I have been testing SNDDST in batch and interactively and has worked OK.  However, I have tried to do this with my overnight back up and have not been receiving email from the job.  I shutdown the subsystems QSNADS, QSERVER and QSYSWRK and I don't know if this is affecting the SNDDST command.  Then I found your utility SNDM and I wondered if this would overcome this problem by writing directly to the SMTP server.  Does this utility in terms of subsystems and AS400 services running?

SNDM just requires TCP/IP connection between the mail srever. It does not rely on any IBM-supplied subsystems.

Please try and let me know the result.

uzaemon@Japan

 

00964/00964 AAA00000  Alan Medows      SNDM                                    
( 1)   05/10/15 17:31

I have been testing SNDDST in batch and interactively and has worked OK.  However, I have tried to do this with my overnight back up and have not been receiving email from the job.  I shutdown the subsystems QSNADS, QSERVER and QSYSWRK and I don't know if this is affecting the SNDDST command.  Then I found your utility SNDM and I wondered if this would overcome this problem by writing directly to the SMTP server.  Does this utility in terms of subsystems and AS400 services running?

Any help would be appreciated.

Regards

Alan Medows 
 

00963/00963 AAA00000  uzaemon          Re: CRTCSVF (yet another CCSID question)
( 1)   05/10/09 19:42  00962へのコメント

Jake,

> I tried to run CRTCSVF on an AS/400 External file (V5.3) & received an error, but I can not use CSSID 65535. Please Help.
> Message ID . . . . . . :   CPF9897
> Message . . . . :   Program aborted. 0/51330 records processed, 0 error(s)
>   found. reason - iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 
>   00437 - 3021 : The value specified for the argument is not correct.

You cannot use CSSID 65535. If you are using US-English characters for DB2/400, specify 37 for DBFCCSID parameter.
Also, see message "938. Re: CSV (What codes should I use for AS400 and ASCII?)" in this BBS. 

Waiting for your reply.

uzaemon@Japan

 

00962/00962 AAA00000  Jake             CRTCSVF                                 
( 1)   05/10/07 14:01

I tried to run CRTCSVF on an AS/400 External file (V5.3) & received an error, but I can not use CSSID 65535. Please Help.
Message ID . . . . . . :   CPF9897
Message . . . . :   Program aborted. 0/51330 records processed, 0 error(s)
  found. reason - iconv_open failed. EBCDIC CCSID - 65535 / ASCII CCSID - 
  00437 - 3021 : The value specified for the argument is not correct.     
 

00961/00961 AAA00000  uzaemon          Re^4: CRTCSVF (limitations)             
( 1)   05/09/27 19:30  00960へのコメント

I forgot to mention that this modification works on V4R5 or later. See "ILE RPG for AS/400 Reference" -> "Appendix A. RPG IV Restrictions" -> "Character field length".

uzaemon@Japan

 

00960/00960 AAA00000  uzaemon          Re^3: CRTCSVF (limitations)             
( 1)   05/09/26 21:25  00959へのコメント  コメント数：1
John,

> Which field(s) should be changed from 32767 to 65535 so that the buffer would be doubled?  These are all the references to 32767 that I found.

I made simple modification and http://homepage1.nifty.com/uzaemon/CRTCSVF_65535.txt is output from CMPPFM command. I confirmed it to work until 178th field under V5R3. If you need more, use user space instead of char variable.

Hope this helps.

uzaemon@Japan

 

00959/00959 AAA00000  John Buying      Re^2: CRTCSVF (limitations)             
( 1)   05/09/22 02:44  00900へのコメント  コメント数：2
Greetings,
Which field(s) should be changed from 32767 to 65535 so that the buffer would be doubled?  These are all the references to 32767 that I found.

Dibuf             S          32767 
Dobuf             S          32767
Drtvbuf           S          32767    BASED(spc_ptr) 
C                   PARM      32767         spc_size 

tia,



> Debra,
> 
> > I have downloaded and tested your CRTCSVF utility and found it to be exactly what I need ... with two exceptions. 
> > 1.  I have a file that is 105 fields and you state that your utility will only work with 100 field.
> > 2.  Your utility will not add to a stream file, only replace.
> > 
> > I am writing to confirm that these two points are still correct and have not been changed.  
> 
> Yes, you are correct.
> 
> For limitation 1 (100 fields), it can be doubled by increasing buffer size from 32767 to 65535. For limitation 2, you may use QSHELL cat command to concat stream files, for example,
> 
> > cat /tmp/a.csv
>   1st a.csv
>   2nd b.csv
>   $
> > cat /tmp/b.csv
>   3rd b.csv
>   4th b.csv
>   $
> > touch -C 819 /tmp/c.csv
>   $
> > cat /tmp/a.csv /tmp/b.csv > /tmp/c.csv
>   $
> > cat /tmp/c.csv
>   1st a.csv
>   2nd b.csv
>   3rd b.csv
>   4th b.csv
>   $
> 
> Hope this helps.
> 
> uzaemon@Japan

 

00958/00958 AAA00000  John Buying      Re^2: CSV (What codes should I use for A
( 1)   05/09/12 22:35  00938へのコメント

Greetings,
I tried 37 for DBFCCSID and this seemed to work just fine.  Thank you very much for a great utility!
John

> John,
> 
> > If I try to use 65535 I do indeed get an error and it will not process.  What codes should I use for AS400 and ASCII?
> 
> I believe default setting works for most cases (DBFCCSID for DB2/400 and STMFCODPAG for STMF).
> 
> For DB2/400, use DSPFD command to determine CCSID of the file. For CSV file, it depends. See "iSeries Globalization" page (http://www-1.ibm.com/servers/eserver/iseries/software/globalization/ccsid.html) and try 819 (International Latin-1) or 437 (US-PC) or 1208 (UTF-8) if you are using US-English environment.
> 
> uzaemon@Japan

 

00957/00957 AAA00000  uzaemon          Re^5: RCVM errors                       
( 1)   05/08/31 23:43  00956へのコメント

Simone,

> I'm testing the RCVM with all my know how.
> 
> Now I understand my problem. It was about the connection with *RDB. The receive mail is functioning.

Thank you for your report. Have fun!

uzaemon@Japan

 

00956/00956 AAA00000  Simone           Re^4: RCVM errors                       
( 1)   05/08/31 17:22  00955へのコメント  コメント数：1
Hi,

I'm testing the RCVM with all my know how.

Now I understand my problem. It was about the connection with *RDB. The receive mail is functioning.

Well done uzaemon.

Thank you very much for your utilities.

Simone
 

00955/00955 AAA00000  Simone           Re^3: RCVM errors                       
( 1)   05/08/31 01:48  00954へのコメント  コメント数：2
I want only add a new information. I tried with others mail servers. The first time I didn't get any error. Starting from there I always get the error of user unknow. It seems a error with the provider. Or I sent from AS400 something wrong.

Thanks
Simone
 

00954/00954 AAA00000  Simone           Re^2: RCVM errors                       
( 1)   05/08/31 01:29  00953へのコメント  コメント数：3
> Simone,
> 
> > I don't understand the parameters about RDB. Could you explain to me please ?
> > 
> > I try to receive email with a command like this:
> > RCVM ACCOUNT('saresin.s@inrete.it') PASSWORD() MAILSERVER(mailer.inrete.it)
> > 
> > I'm using that server with SNDM utility.
> > 
> > 
> > 
> > I receive this two kinds of errors.
> > javax.mail.MessagingException: Connect failed;                                                                                    
> >   nested exception is:                                                                                                            
> >  java.net.ConnectException: connection to MAIL.AGESTORINO.IT timed out                                                            
                                                
> > --------------
> > javax.mail.AuthenticationFailedException: Login failed.                                            
> >       java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                        
> >       java/lang/Exception.<init>(Ljava/lang/String;)V+1 (Exception.java:38)                        
> >       javax/mail/MessagingException.<init>(Ljava/lang/String;)V+0 (MessagingException.java:42)     
> 
> Are you sure that your mail account is "saresin.s@inrete.it"? It looks like mail address, not POP3 account name.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

That's true. It's only a alias. The real account is dayco323@inrete.it   I checked in the outlook account.

But: after a first good contact when I receive "No mail.."

Now I continue to got the same error "Exception in main().." running the same command. I look in the print and the new error is:

java.sql.SQLException: The application server rejected the connection.(User ID is not known.)     
      java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                       
      java/lang/Exception.<init>(Ljava/lang/String;)V+1 (Exception.java:38)                              
 

00953/00953 AAA00000  uzaemon          Re: RCVM errors                         
( 1)   05/08/31 00:48  00950へのコメント  コメント数：4
Simone,

> I don't understand the parameters about RDB. Could you explain to me please ?
> 
> I try to receive email with a command like this:
> RCVM ACCOUNT('saresin.s@inrete.it') PASSWORD() MAILSERVER(mailer.inrete.it)
> 
> I'm using that server with SNDM utility.
> 
> 
> 
> I receive this two kinds of errors.
> javax.mail.MessagingException: Connect failed;                                                                                    
>   nested exception is:                                                                                                            
>  java.net.ConnectException: connection to MAIL.AGESTORINO.IT timed out                                                            
>       java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                                                       
> --------------
> javax.mail.AuthenticationFailedException: Login failed.                                            
>       java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                        
>       java/lang/Exception.<init>(Ljava/lang/String;)V+1 (Exception.java:38)                        
>       javax/mail/MessagingException.<init>(Ljava/lang/String;)V+0 (MessagingException.java:42)     

Are you sure that your mail account is "saresin.s@inrete.it"? It looks like mail address, not POP3 account name.

Waiting for your reply.

uzaemon@Japan

 

00952/00952 AAA00000  uzaemon          Re: CRTCSVF (using CL var)              
( 1)   05/08/31 00:42  00949へのコメント

Robert,

> Does this utility allow substitution parameters for file names? Example:
> 
> CRTCSVF FILE(&FILENAME) + 
> TOSTMF('/QDLS/TEMP/&FILENAME.CSV') + 
> DBFCCSID(*FILE) ADDINF(*COLHDG) 

If you are going to use CRTCSVF in CL program, you can use normal formula, e.g.

PGM
DCL VAR(&STMF) TYPE(*CHAR) LEN(8) VALUE('test') 
CRTCSVF FILE(TOKMSP) TOSTMF('/qdls/temp/' |< &STMF |< '.csv')
ENDPGM

Hope this helps.

uzaemon@Japan

 

00950/00950 AAA00000  Simone           RCVM errors                             
( 1)   05/08/31 00:24

Hi,

I found the utility RCVM, I think that is very interesting.

I don't understand the parameters about RDB. Could you explain to me please ?

I try to receive email with a command like this:
RCVM ACCOUNT('saresin.s@inrete.it') PASSWORD() MAILSERVER(mailer.inrete.it)

I'm using that server with SNDM utility.



I receive this two kinds of errors.
javax.mail.MessagingException: Connect failed;                                                                                    
  nested exception is:                                                                                                            
 java.net.ConnectException: connection to MAIL.AGESTORINO.IT timed out                                                            
      java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                                                       
--------------
javax.mail.AuthenticationFailedException: Login failed.                                            
      java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:90)                        
      java/lang/Exception.<init>(Ljava/lang/String;)V+1 (Exception.java:38)                        
      javax/mail/MessagingException.<init>(Ljava/lang/String;)V+0 (MessagingException.java:42)     

Thanks for your help.
Simone
 

00949/00949 AAA00000  Robert N. Voltz  CRTCSVF                                 
( 1)   05/08/30 23:39

Does this utility allow substitution parameters for file names?  Example:

CRTCSVF    FILE(&FILENAME) +                      
             TOSTMF('/QDLS/TEMP/&FILENAME.CSV') + 
             DBFCCSID(*FILE) ADDINF(*COLHDG)      
 

00948/00948 AAA00000  uzaemon          Re: SndMail (SNDM - Relaying blocked)   
( 1)   05/08/28 22:24  00947へのコメント

Elton,

> Error Msg:  Command failed. reason - 301 negative response from SMTP server.  Relaying blocked at this site.
> 
> Is there setting in the AS400 I could change to eliminate the error msg???

Read messages 299, 412, 487, 716 and 850 in this BBS.

Hope you'll find useful information and let me know the result.

uzaemon@Japan

 

00947/00947 AAA00000  Elton            SndMail                                 
( 1)   05/08/27 06:16

Error Msg:  Command failed. reason - 301 negative response from SMTP server.  Relaying blocked at this site.

Is there setting in the AS400 I could change to eliminate the error msg???
 

00946/00946 AAA00000  Loz              Re^6: Compile error (zlib)              
( 1)   05/08/23 18:41  00945へのコメント

uzaemon

thanks very much for sorting this out, compiles fine now. i changed the target release; 

>  0020.00 TGTRLS = 'V5R2M0'

> Or you may try Karl's circumvention described at message 904 in this BBS.
> 

Sorry, i missed Karls's message when i looked through past messages. 

thanks again, best regards

loz
 

00945/00945 AAA00000  uzaemon          Re^5: Compile error (zlib)              
( 1)   05/08/23 08:54  00944へのコメント  コメント数：1
Loz,

> I have done as you asked, without sucess. I can confirm the following:
> 
> > - Are you using zlib "1.2.1" downloaded from my HP?
> 
> Yes
> 
> > - Delete library "ZLIB" and start over from scratch.
> 
> Done (deleted lib and all save and pc files). 
> 
> > - Did you make any modification? (other than "__OS400__" macro)
> 
> Only the changes detailed by yourself:
> line 99 'MODULE(QTEMP/MINIZIP400 QTEMP/ZIP400 QTEMP/EBCDIC400) ',      
> size of REPLACE from 7 to 8 in ZIPCLP
> 
> > - If you have another iSeries or i5, try compiling on the machine.
> 
> Will try. will take a little longer to arrange.
> 
> > - Before start "MAKE" REXX procedure, exec "CHGJOB CCSID(37)".
> 
> Done.  I did the following;
> 
> CHGJOB CCSID(37)
> CHGCURLIB CURLIB(ZLIB) 
> STRREXPRC SRCMBR(MAKE) SRCFILE(ZLIB/QREXSRC)
> 
> Run under a profile with *allobj authority.
> 
> Still get the same errors e.g. 
> 
> CRC32
> CZM0213  Macro name BYFOUR cannot be redefined.

As a quick circumvention, edit MAKE procedure as follows. It worked on V5R3 machine (not mine).

 0019.00 /* TGTRLS = '*CURRENT' */
 0020.00 TGTRLS = 'V5R2M0'

Or you may try Karl's circumvention described at message 904 in this BBS.

> A V5R3 compatability issue?

Maybe... It seems like a bug or undocumented spec change.

uzaemon@Japan

 

00944/00944 AAA00000  Loz              Re^4: Compile error (zlib)              
( 1)   05/08/22 07:06  00943へのコメント  コメント数：2
Uzaemon

I have done as you asked, without sucess. I can confirm the following:

> - Are you using zlib "1.2.1" downloaded from my HP?

Yes

> - Delete library "ZLIB" and start over from scratch.

Done (deleted lib and all save and pc files). 

> - Did you make any modification? (other than "__OS400__" macro)

Only the changes detailed by yourself:
line 99 'MODULE(QTEMP/MINIZIP400 QTEMP/ZIP400 QTEMP/EBCDIC400) ',      
size of REPLACE from 7 to 8 in ZIPCLP

> - If you have another iSeries or i5, try compiling on the machine.

Will try. will take a little longer to arrange.

> - Before start "MAKE" REXX procedure, exec "CHGJOB CCSID(37)".

Done.  I did the following;

CHGJOB CCSID(37)
CHGCURLIB CURLIB(ZLIB) 
STRREXPRC SRCMBR(MAKE) SRCFILE(ZLIB/QREXSRC)

Run under a profile with *allobj authority.

Still get the same errors e.g. 

CRC32
CZM0213  Macro name BYFOUR cannot be redefined.

A V5R3 compatability issue?

thanks

Loz
 

00943/00943 AAA00000  uzaemon          Re^3: Compile error (zlib)              
( 1)   05/08/19 19:47  00942へのコメント  コメント数：3
Loz,

> thanks uzaemon, that has fixed that, but i am now left with the following...
> 
> CRC32
> CZM0213  Macro name BYFOUR cannot be redefined.
> 
> MINZIP400 and MINIZIP (module)
> CZM0213  Macro name WRITEBUFFERSIZE cannot be redefined.                    
> CZM0358  "WRITEBUFFERSIZE" is defined on line 25 of ZLIB/QCSRC(MINIZIP).    
> 
> also, I do not know if it matters or not, should I remove reference to D4 in the REXX to avoid the compile showing:
> 
> Define names  . . . . . . . . . :  AS400                  
>                                    HAVE_MEMCPY            
>                                    D4                     
>                                    BYFOUR                  
> 

Please confirm followings:

- Are you using zlib "1.2.1" downloaded from my HP?
- Delete library "ZLIB" and start over from scratch.
- Did you make any modification? (other than "__OS400__" macro)
- If you have another iSeries or i5, try compiling on the machine.
- Before start "MAKE" REXX procedure, exec "CHGJOB CCSID(37)".

Waiting for your reply.

uzaemon@Japan

 

00942/00942 AAA00000  Loz              Re^2: Compile error (zlib)              
( 1)   05/08/19 17:43  00941へのコメント  コメント数：4
thanks uzaemon, that has fixed that, but i am now left with the following...

CRC32
CZM0213  Macro name BYFOUR cannot be redefined.

MINZIP400 and MINIZIP (module)
CZM0213  Macro name WRITEBUFFERSIZE cannot be redefined.                    
CZM0358  "WRITEBUFFERSIZE" is defined on line 25 of ZLIB/QCSRC(MINIZIP).    

also, I do not know if it matters or not, should I remove reference to D4 in the REXX to avoid the compile showing:

Define names  . . . . . . . . . :  AS400                  
                                   HAVE_MEMCPY            
                                   D4                     
                                   BYFOUR                  

(i have tried systran, it won't process your pages directly for me.  I cannot get the Japanese language pack on my PC, so cannot cut and paste either) 

Thanks for your quick response. 

regards

loz

> Loz,
> 
> > I tried to follow Lado threads (925-933), I think I have the same problem with compiles of C modules in zlib, can you translate please!  
> > 
> > The error i have is:
> > 
> > ADLER32
> > CZM0188  Reserved name __OS400__ cannot be defined as a macro name.    
> > 
> > I am on V5R3
> 
> Just comment out following line.
> 
> (before)
> 
> 0026.00 D4 = '__OS400__'
> 
> (after)
> 
> 0026.00 /* D4 = '__OS400__' */
> 
> For your information, you can translate Web page from Japanese to English at SYSTRAN (http://www.systransoft.com/index.html).
> Hope this helps.
> 
> uzaemon@Japan

 

00941/00941 AAA00000  uzaemon          Re: Compile error (zlib)                
( 1)   05/08/18 23:21  00940へのコメント  コメント数：5
Loz,

> I tried to follow Lado threads (925-933), I think I have the same problem with compiles of C modules in zlib, can you translate please!  
> 
> The error i have is:
> 
> ADLER32
> CZM0188  Reserved name __OS400__ cannot be defined as a macro name.    
> 
> I am on V5R3

Just comment out following line.

(before)

0026.00 D4 = '__OS400__'

(after)

0026.00 /* D4 = '__OS400__' */

For your information, you can translate Web page from Japanese to English at SYSTRAN (http://www.systransoft.com/index.html).
Hope this helps.

uzaemon@Japan

 

00940/00940 AAA00000  Loz              Compile error (zlib)                    
( 1)   05/08/18 21:51

hi uzaemon

I tried to follow Lado threads (925-933), I think I have the same problem with compiles of C modules in zlib, can you translate please!  

The error i have is:

ADLER32
CZM0188  Reserved name __OS400__ cannot be defined as a macro name.    

I am on V5R3

many thanks

Loz
 

00939/00939 AAA00000  uzaemon          Re^3: HPT (overlay does not align)      
( 1)   05/08/17 21:02  00936へのコメント

alan,

> I contacted IBM, they said I should have two print files, 1 for printing and 1 for converting to TIF. This was not the resolution I was looking for. So I decided to keep working at it and after several hours I finally got the text to align with the overlay.  The overlay is defined in my PRTF, so I changed the positioning on the OVERLAY keyword to move the overlay to align with the text.  
> 
> A  R PRTOVL                                            
> A                OVERLAY(OVLNAME .2 .25) 
> 
> 
>   This allowed the transform to TIF to work correctly without causing the overlay to be misaligned when I printed the spooled file.

Thanks for your information. Your circumvention may help other people who are getting the same problem.

uzaemon@Japan

 

00938/00938 AAA00000  uzaemon          Re: CSV (What codes should I use for AS4
( 1)   05/08/17 21:00  00937へのコメント  コメント数：1
John,

> If I try to use 65535 I do indeed get an error and it will not process.  What codes should I use for AS400 and ASCII?

I believe default setting works for most cases (DBFCCSID for DB2/400 and STMFCODPAG for STMF).

For DB2/400, use DSPFD command to determine CCSID of the file. For CSV file, it depends. See "iSeries Globalization" page (http://www-1.ibm.com/servers/eserver/iseries/software/globalization/ccsid.html) and try 819 (International Latin-1) or 437 (US-PC) or 1208 (UTF-8) if you are using US-English environment.

uzaemon@Japan

 

00937/00937 AAA00000  John Buying      CSV                                     
( 1)   05/08/16 23:18

If I try to use 65535 I do indeed get an error and it will not process.  What codes should I use for AS400 and ASCII?
 

00936/00936 AAA00000  alan             Re^2: HPT (overlay does not align)      
( 1)   05/08/11 23:07  00935へのコメント  コメント数：1
I contacted IBM, they said I should have two print files, 1 for printing and 1 for converting to TIF. This was not the resolution I was looking for. So I decided to keep working at it and after several hours I finally got the text to align with the overlay.  The overlay is defined in my PRTF, so I changed the positioning on the OVERLAY keyword to move the overlay to align with the text.  

A  R PRTOVL                                            
A                OVERLAY(OVLNAME .2 .25) 


  This allowed the transform to TIF to work correctly without causing the overlay to be misaligned when I printed the spooled file.
 

00935/00935 AAA00000  uzaemon          Re: HPT (overlay does not align)        
( 1)   05/08/10 09:17  00934へのコメント  コメント数：2
alan,

> I am using the spl2stmf command to convert an overlay to tif.  Once converted, the overlay does not align with the text that I have printed in the spool file.

See "837. Re: Pgm SPL2STMF on AFPDS Overlayed Spool".

uzaemon@Japan

 

00934/00934 AAA00000  alan             HPT                                     
( 1)   05/08/10 05:37

I am using the spl2stmf command to convert an overlay to tif.  Once converted, the overlay does not align with the text that I have printed in the spool file.
 

00933/00933 AAA00000  uzaemon          Re^6: Compile Error (zlib V5R2->V4R5)   
( 1)   05/08/04 09:31  00931へのコメント

Ladoさん、

> V4R5M0用に正常にコンパイルできました。ありがとうございます。
> ただ、SAVLIB LIB(ZLIB) DEV(*SAVF)...を実行したとき
> ”ライブラリー ZLIB から 20 個のオブジェクトが保管された。0 個のオブジェクトは含まれていませ。”と出ました。SavfファイルをV4R5M0に入れてRSTLIB後ZIP、UNZIPのテストをしました。正常に動きました。DSPSAVFでSavfファイルを見たとき以下のオブジェクトが入っています。何か足りないオブジェクトがありますでしょうか？

判りにくいメッセージですが、これは正常終了を示しています。
実行に必要なオブジェクトは http://homepage1.nifty.com/uzaemon/zlib_install.html の
最下部に一覧があります(ソースを除く)のでご確認ください。

なお、QSHELLからzipを使用する場合はMAKEプロシージャーの
内容を確認してリンクを作成してください。
(QSH CMD('ln -s /qsys.lib/zlib.lib/minizip.pgm /usr/bin/minizip')など)

uzaemon@Japan

 

00931/00931 AAA00000  Lado             Re^5: Compile Error (zlib V5R2->V4R5)   
( 1)   05/08/03 18:37  00929へのコメント  コメント数：1
Uzaemonさん、

V4R5M0用に正常にコンパイルできました。ありがとうございます。
ただ、SAVLIB LIB(ZLIB) DEV(*SAVF)...を実行したとき
”ライブラリー ZLIB から 20 個のオブジェクトが保管された。0 個のオブジェクトは含まれていませ。”と出ました。SavfファイルをV4R5M0に入れてRSTLIB後ZIP、UNZIPのテストをしました。正常に動きました。DSPSAVFでSavfファイルを見たとき以下のオブジェクトが入っています。何か足りないオブジェクトがありますでしょうか？

ｵﾌﾞｼﾞｪｸﾄ           ﾀｲﾌﾟ
ZLIB               *LIB
DSPZIPCLP          *PGM
MINIUNZ            *PGM
MINIUNZ400         *PGM
MINIZIP            *PGM
MINIZIP400         *PGM
UNZIPCLP           *PGM
ZIPCLP             *PGM
ZLIB               *SRVPGM
DSPZIP             *CMD
UNZIP              *CMD
ZIP                *CMD
DSPZIPHLP          *PNLGRP
UNZIPHLP           *PNLGRP
ZIPHLP             *PNLGRP
H                  *FILE
QCLSRC             *FILE
QCMDSRC            *FILE
QCSRC              *FILE
QREXSRC            *FILE

宜しくお願いします。
Lado

> こちらのV5R2で試してみました。下記手順で試してみてください。
> 
> ソースファイルZLIB/QREXSRCのメンバーMAKEを下記のように
> 変更してから実行してください。
> 
> (変更前)
> 
>  0020.00 TGTRLS = '*CURRENT'
>  ～～～～～～～～～～～～～～
>  0026.00 D4 = '__OS400__'
> 
> (変更後)
> 
>  0020.00 TGTRLS = 'V4R5M0'
>  ～～～～～～～～～～～～～～
>  0026.00 /* D4 = '__OS400__' */
> 
> コンパイルが正常に終了したらV4R5用に保管します。
> 
> > SAVLIB LIB(ZLIB) DEV(*SAVF) SAVF(QTEMP/SAVF) TGTRLS(V4R5M0)
>   21 objects saved from library ZLIB; 0 objects not included.
> 
> > UzaemonさんはV5R2M0以前では動作が分かりませんとはっきり書いてありましたが何かのヒントをいただけないでしょうと思って。。。宜しくお願いします。   
> 
> こちらにV4R5のiSeriesが無いため復元および稼動確認までは
> できません。結果のご連絡をお待ちしています。
> 
> uzaemon@Japan

 

00929/00929 AAA00000  uzaemon          Re^4: Compile Error (zlib V5R2->V4R5)   
( 1)   05/08/02 20:40  00928へのコメント  コメント数：2
Ladoさん、

> HTTPサーバー(5722DG1)を導入してからすべて正常にできました。ありがとうございます。ついでに会社のもう一台As400（V4R5M0）でもzlibを使いたいと思いまして、ZLIB/QREXSRC(MAKE)のTGTRLS='V4R5M0'にしてCompile（V5R2M0で）したところいくつのオブジェクトができませんでした。
> 
> Start creating modules for ZLIB...
>    creating module adler32...  
> から
> creating module zutil... 
> まで    
> result-> CZM0613
> 
>  Creating service program ZLIB... 
>    result-> CPF5D05  
> 他はresult-> 0でした。
> 
> いろいろ調べまして、 5722SS1のオプション9を導入しました。
> V4R5M0のマシンではCコンパイラーの環境を導入することができないようになっていますのでV5R2M0でV4R5M0用にコンパイルしたいと思っていますが、何か足りない手順がありますでしょうか？

こちらのV5R2で試してみました。下記手順で試してみてください。

ソースファイルZLIB/QREXSRCのメンバーMAKEを下記のように
変更してから実行してください。

(変更前)

 0020.00 TGTRLS = '*CURRENT'
 ～～～～～～～～～～～～～～
 0026.00 D4 = '__OS400__'

(変更後)

 0020.00 TGTRLS = 'V4R5M0'
 ～～～～～～～～～～～～～～
 0026.00 /* D4 = '__OS400__' */

コンパイルが正常に終了したらV4R5用に保管します。

> SAVLIB LIB(ZLIB) DEV(*SAVF) SAVF(QTEMP/SAVF) TGTRLS(V4R5M0)
  21 objects saved from library ZLIB; 0 objects not included.

> UzaemonさんはV5R2M0以前では動作が分かりませんとはっきり書いてありましたが何かのヒントをいただけないでしょうと思って。。。宜しくお願いします。   

こちらにV4R5のiSeriesが無いため復元および稼動確認までは
できません。結果のご連絡をお待ちしています。

uzaemon@Japan

 

00928/00928 AAA00000  Lado             Re^3: Compile Error (zlib)              
( 1)   05/08/02 11:44  00927へのコメント  コメント数：3
Uzaemonさん、こんにちは。

HTTPサーバー(5722DG1)を導入してからすべて正常にできました。ありがとうございます。ついでに会社のもう一台As400（V4R5M0）でもzlibを使いたいと思いまして、ZLIB/QREXSRC(MAKE)のTGTRLS='V4R5M0'にしてCompile（V5R2M0で）したところいくつのオブジェクトができませんでした。

Start creating modules for ZLIB...
   creating module adler32...  
から
creating module zutil... 
まで    
result-> CZM0613

 Creating service program ZLIB... 
   result-> CPF5D05  
他はresult-> 0でした。

いろいろ調べまして、 5722SS1のオプション9を導入しました。
V4R5M0のマシンではCコンパイラーの環境を導入することができないようになっていますのでV5R2M0でV4R5M0用にコンパイルしたいと思っていますが、何か足りない手順がありますでしょうか？

UzaemonさんはV5R2M0以前では動作が分かりませんとはっきり書いてありましたが何かのヒントをいただけないでしょうと思って。。。宜しくお願いします。   
          

> ご返事ありがとうございます。
> 
> ライセンスプログラムを調べて見ました。HTTPサーバー(5722DG1)は導入されていませんでした。来週ぐらいにライセンスプログラムを導入してからその後の結果またご報告します。
> お忙しいところありがとうございます。
> 
> ラド
> 
> > ラドさん、
> > 
> > > 日本で働いている外国のラドと申します。As400 V5R2（日本語のOS）でzlib121を使いたいと思います。
> > > zlib121をDLして説明とおりしました。また、追加で”Addendum”の修正もしました。
> > > STRREXPRC SRCMBR....を実行したとき以下の３件以外全部正常にできました。
> > > 
> > > できなかったオブジェクトは
> > > UNZIPCLP、ZIPCLP、DSPZIPCLP　３つもResult->CPF3C50でした。
> > 
> > CLだけコンパイルができないようですので、HTTPサーバー(5722DG1)
> > がインストールされている事をGO LICPGMコマンドのオプション10
> > で確認してください。
> > 
> > CPF3C50は"Program &1 not created."とコンパイル時にエラーが
> > 発生したことを示しています。WRKSPLFコマンドなどで
> > コンパイル・リストを調べ、エラーの原因をお知らせください。
> > 
> > もしコンパイル・リストが見つからない場合はDSPJOBLOGコマンド
> > でMAKE実行時にエラーが発生していないか調べてください。
> > 
> > uzaemon@Japan

 

00927/00927 AAA00000  Lado             Re^2: Compile Error (zlib)              
( 1)   05/07/28 18:25  00926へのコメント  コメント数：4
ご返事ありがとうございます。

ライセンスプログラムを調べて見ました。HTTPサーバー(5722DG1)は導入されていませんでした。来週ぐらいにライセンスプログラムを導入してからその後の結果またご報告します。
お忙しいところありがとうございます。

ラド

> ラドさん、
> 
> > 日本で働いている外国のラドと申します。As400 V5R2（日本語のOS）でzlib121を使いたいと思います。
> > zlib121をDLして説明とおりしました。また、追加で”Addendum”の修正もしました。
> > STRREXPRC SRCMBR....を実行したとき以下の３件以外全部正常にできました。
> > 
> > できなかったオブジェクトは
> > UNZIPCLP、ZIPCLP、DSPZIPCLP　３つもResult->CPF3C50でした。
> 
> CLだけコンパイルができないようですので、HTTPサーバー(5722DG1)
> がインストールされている事をGO LICPGMコマンドのオプション10
> で確認してください。
> 
> CPF3C50は"Program &1 not created."とコンパイル時にエラーが
> 発生したことを示しています。WRKSPLFコマンドなどで
> コンパイル・リストを調べ、エラーの原因をお知らせください。
> 
> もしコンパイル・リストが見つからない場合はDSPJOBLOGコマンド
> でMAKE実行時にエラーが発生していないか調べてください。
> 
> uzaemon@Japan

 

00926/00926 AAA00000  uzaemon          Re: Compile Error (zlib)                
( 1)   05/07/28 00:08  00925へのコメント  コメント数：5
ラドさん、

> 日本で働いている外国のラドと申します。As400 V5R2（日本語のOS）でzlib121を使いたいと思います。
> zlib121をDLして説明とおりしました。また、追加で”Addendum”の修正もしました。
> STRREXPRC SRCMBR....を実行したとき以下の３件以外全部正常にできました。
> 
> できなかったオブジェクトは
> UNZIPCLP、ZIPCLP、DSPZIPCLP　３つもResult->CPF3C50でした。

CLだけコンパイルができないようですので、HTTPサーバー(5722DG1)
がインストールされている事をGO LICPGMコマンドのオプション10
で確認してください。

CPF3C50は"Program &1 not created."とコンパイル時にエラーが
発生したことを示しています。WRKSPLFコマンドなどで
コンパイル・リストを調べ、エラーの原因をお知らせください。

もしコンパイル・リストが見つからない場合はDSPJOBLOGコマンド
でMAKE実行時にエラーが発生していないか調べてください。

uzaemon@Japan

 

00925/00925 AAA00000  Lado             Compile Error                           
( 1)   05/07/27 17:33

日本で働いている外国のラドと申します。As400 V5R2（日本語のOS）でzlib121を使いたいと思います。
zlib121をDLして説明とおりしました。また、追加で”Addendum”の修正もしました。
STRREXPRC SRCMBR....を実行したとき以下の３件以外全部正常にできました。

できなかったオブジェクトは
UNZIPCLP、ZIPCLP、DSPZIPCLP　３つもResult->CPF3C50でした。

As400あまり詳しくないものですのでどうしたらいいのかおしえていただけないでしょうか？
 


00924/00924 AAA00000  Stijn Theunis    Re^3: SPLTOPDF CPF3CF2 hptopt = 30      
( 1)   05/07/26 21:47  00922へのコメント

Hello uzaemon

Thanks for the quick Replay

It's indeed a user defined WSCST.
1) Indeed SCS to PCL5
2) Yes (tested it with QWPDEFAULT)
3) No surely not on all spoolfiles ... for now, only on this example (a spoolfile of 767 pages)

But I've changed now the program (see also other message I send: 

Possible solution:
added code:
C Eval QSPLPC = 'Y' 
in subroutine: #HPT 
Between line 361 and line 362

Now it doesn't crash anymore
and the results looks OK

But I'm of course not sure of it's allright what I'm doing now.

Kind Regards,
Stijn



> Stijn,
> 
> I have some questions.
> 
> 1. What is "LEXOPTRAN"? Is this a WSCST you created? If so, how do you want to convert? (e.g. SCS to PCL)
> 2. Does this problem happen with IBM supplied WSCSTs?
> 3. Does this problem happen on any spooled files? (Try to convert WRKACTJOB *PRINT, for example.)
> 
> Message CPF3CF2 means:
> 
> Message . . . . :   Error(s) occurred during running of &1 API.
> Cause . . . . . :   Call your service organization and report the problem.
>   Materials to accompany the problem are:     
>     -- Job log of the failing API.            
>     -- Actual parameters specified on the API.
> 
> As user-defined WSCST is not supported by IBM, you'd better try other WSCSTs in QSYS.
> 
> Waiting for your reply.
> 
> uzaemon@Japan

 

00923/00923 AAA00000  Stijn Theunis    Re: SPLTOPDF CPF3CF2 hptopt = 30        
( 1)   05/07/26 21:39  00920へのコメント

Possible solution:
added code:
C                   Eval      QSPLPC  = 'Y'              
in subroutine: #HPT 
Between line 361 and line 362

Now it doesn't crash anymore
and the results looks OK

But I'm of course not sure of it's allright what I'm doing now
 

00922/00922 AAA00000  uzaemon          Re^2: SPLTOPDF CPF3CF2 hptopt = 30      
( 1)   05/07/26 21:17  00921へのコメント  コメント数：1
Stijn,

I have some questions.

1. What is "LEXOPTRAN"? Is this a WSCST you created? If so, how do you want to convert? (e.g. SCS to PCL)
2. Does this problem happen with IBM supplied WSCSTs?
3. Does this problem happen on any spooled files? (Try to convert WRKACTJOB *PRINT, for example.)

Message CPF3CF2 means:

Message . . . . :   Error(s) occurred during running of &1 API.
Cause . . . . . :   Call your service organization and report the problem.
  Materials to accompany the problem are:     
    -- Job log of the failing API.            
    -- Actual parameters specified on the API.

As user-defined WSCST is not supported by IBM, you'd better try other WSCSTs in QSYS.

Waiting for your reply.

uzaemon@Japan

 

00921/00921 AAA00000  Stijn Theunis    Re: SPLTOPDF CPF3CF2 hptopt = 30        
( 1)   05/07/26 18:49  00920へのコメント  コメント数：2
Logging:
Debug mode. 7/26/2005 
*** SPL2STMF version 0-04 04-05-23 *** 
Input Parameters 
 splf : OPO401 
stmf : /test.pcl7 
wscst : *LIBL/LEXOPTRAN 
spl_job : OPO401 ST 464944 
spl_nbr : 2 
replace : *YES
Create User Space QTEMP/QSPGETSP
User Space QTEMP/QSPGETSP already exists. 
API QUSPTRUS successful.
Create User Space QTEMP/QWPZHPT1
User Space QTEMP/QWPZHPT1 already exists.
API QUSPTRUS successful.
Retrieve spool file.
API QSPOPNSP successful. spl_hdl = 1
API QSPGETSP successful.
generic header : level = V5R2M0 format = SPFR0200 complete = C sizeofUS = 4891139 reqbuf = -1 retbuf = 1183 
API QSPCLOSP successful.
Checking output stream file.
file name = /test.pcl7
stream file not found.
Stream file opened.
 
hptopt = 10 
QUSBAVL = 0 
hptopt = 20 
QUSBAVL = 0 splbuflen = 0 hptosolena = 44 hptxbuflena = 155 
Option specific input information / device = '*NONE' job = OPO401/ST/464944 
spoolfile = 'OPO401' spoolNo = 2 pages = 0 WSCST = '*LIBL/LEXOPTRAN' Mmodel = '*WSCST' 
Option specific output information / transform file = 1 pass data = 0 
hptopt = 30  buffer info : No = 1 len = 4142 numentry = 2 offset = 236 size = 4034 / page info : LastPageCont = Y 
QUSBAVL = 0 splbuflen = 4034 hptosolena = 44 hptxbuflena = 2502 pages(OSI) = 1 done(OSO) = 0 
hptopt = 30 
buffer info : No = 2 len = 4138 numentry = 0 offset = 4354 size = 4054 / page info : LastPageCont = Y 
QUSBAVL = 0 splbuflen = 4054 hptosolena = 44 hptxbuflena = 0 pages(OSI) = 0 done(OSO) = 0 
hptopt = 30 .... this go to buffer 150/151 .....
buffer info : No = 150 len = 4108 numentry = 0 offset = 616473 size = 4024 / page info : LastPageCont = N 
QUSBAVL = 0 splbuflen = 4024 hptosolena = 44 hptxbuflena = 8481 pages(OSI) = 1 done(OSO) = 0 
hptopt = 30 
buffer info : No = 151 len = 4121 numentry = 1 offset = 620593 size = 4025 / page info : LastPageCont = Y 
QUSBAVL = 27 splbuflen = 4025 hptosolena = 44 hptxbuflena = 4324 pages(OSI) = 1 done(OSO) = 0 
** reset hpt - process option 50 ** 

Fatal error : API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 30 
 

00920/00920 AAA00000  Stijn Theunis    SPLTOPDF CPF3CF2 hptopt = 30            
( 1)   05/07/26 18:46

SPLTOPDF
--------
returns:!Fatal error : API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 30 

Machine version V5R2M0
Used command: ===> HPT/SPL2STMF FILE(OPO401) TOSTMF('/test.pcl7') WSCST(LEXOPTRAN) JOB(464944
/ST/OPO401) SPLNBR(2) DEBUG(*YES) 

logging in following post

All helps welcome,
Stijn
 


01043/01043 AAA00000  Philippa         Re^4: SPLTOPDF CPF3CF2 hptopt = 30      
( 1)   06/04/05 23:05  00924へのコメント

Hello uzaemon
I have encountered the same problem.  I tried the fix that was suggested but it still does not work.  The document that is failing is only 16 pages yet other (much larger) splfs convert to TIF just fine.  Any other suggestions?

 
01042/01042 AAA00000  FT               Re^2: SNDM Content-Type of attachments  
( 1)   06/03/29 21:06  01041へのコメント

> FT,
> 
> > Anyway, I wish to know if it is possible to send out attachment other than in:
> > 
> > "Content-Type: application/octet-stream"
> > 
> > type.
> > 
> > because unfortunately this creates problem with some EDI procedures that doesn't automatically recognize the proper format and I really do not want to leave SNDM tool only for such a little problem.
> > 
> > Maybe is the only fast and viable solution is to recompile all - forcing in the rpg source "text/plain" instead of "application/octet-stream"? Maybe creating two command sndm ( your default ) and sndmp ( for plain text attachments )?
> > 
> > Do I need to change only the sndm rpg source relaunching the whole compiling procedure?
> > 
> > thanks you much for your support, let me know if this is possible and any advices for recompilation.
> 
> Thank you for using SNDM.
> 
> As there are so many "Content Types and Subtypes" (see http://www.iana.org/assignments/media-types/index.html), I decided to use "application/octet-stream".
> 
> You may hard-code your specific Content-Type, or add new parameter to specify Content-Type for each attachement. Just run REXX procedure to recompile the distribution.
> 
> Hope this helps.
> 
> uzaemon@Japan



thanks you much for the fast answer
 
01041/01041 AAA00000  uzaemon          Re: SNDM Content-Type of attachments    
( 1)   06/03/29 20:24  01040へのコメント  コメント数：1
FT,

> Anyway, I wish to know if it is possible to send out attachment other than in:
> 
> "Content-Type: application/octet-stream"
> 
> type.
> 
> because unfortunately this creates problem with some EDI procedures that doesn't automatically recognize the proper format and I really do not want to leave SNDM tool only for such a little problem.
> 
> Maybe is the only fast and viable solution is to recompile all - forcing in the rpg source "text/plain" instead of "application/octet-stream"? Maybe creating two command sndm ( your default ) and sndmp ( for plain text attachments )?
> 
> Do I need to change only the sndm rpg source relaunching the whole compiling procedure?
> 
> thanks you much for your support, let me know if this is possible and any advices for recompilation.

Thank you for using SNDM.

As there are so many "Content Types and Subtypes" (see http://www.iana.org/assignments/media-types/index.html), I decided to use "application/octet-stream".

You may hard-code your specific Content-Type, or add new parameter to specify Content-Type for each attachement. Just run REXX procedure to recompile the distribution.

Hope this helps.

uzaemon@Japan

 
01040/01040 AAA00000  FT               SNDM Content-Type of attachments        
( 1)   06/03/29 17:01

Thanks for developing such a great utility like SNDM.

Anyway, I wish to know if it is possible to send out attachment other than in:

"Content-Type: application/octet-stream"

type.

because unfortunately this creates problem with some EDI procedures that doesn't automatically recognize the proper format and I really do not want to leave SNDM tool only for such a little problem.

Maybe is the only fast and viable solution is to recompile all - forcing in the rpg source "text/plain" instead of "application/octet-stream"? Maybe creating two command sndm ( your default ) and sndmp ( for plain text attachments )?

Do I need to change only the sndm rpg source relaunching the whole compiling procedure?

thanks you much for your support, let me know if this is possible and any advices for recompilation.

thanks!



 
01039/01039 AAA00000  uzaemon          Re: Overlays and HPT (SPL2STMF?)        
( 1)   06/03/25 12:40  01037へのコメント

Leonhardt,

> we made OVL using IBMs newest AFP drivers WITH color images.
> The result was fine using IBMs AFPViewer. But if we try to use this OVL in a PrinterFile as AFPDS-Overlay the results
> ar only black areas - in all cases at paper and also in a tiff.
> What's about color printing?
> Note: We have absolutely no problems with b/w-overlays, whether in OVLs nor in TIFFs or PDFs.

Are you talking about TIFF file generated by SPL2STMF command?

uzaemon@Japan

 
01038/01038 AAA00000  uzaemon          Re: SNDM (':' in subject adds extra blan
( 1)   06/03/25 12:37  01036へのコメント

Philippe,

> First I would like mention that the tool works great. 
> But I found a small bug. When I use the character ':' in the SUBJECT, a blank is generated at the 42th position in the mail-title. 

Thank you for using SNDM and your report.

I tested on my machine (V5R2, SNDM136, JOBCCSID 5035) and counld not recreate your proble.

[CASE-1]

> SNDM FROM(xxxxx@xxxx.xxxxxxx.xxx.com 'Tcpip') TO((MAILUSER1@xxxx.xxxxxxx
  X.XXX.XXX 'MailUser1')) FILE(QCLSRC) SUBJECT('Colon:test')
  Mail sent.

(received mail header)
Subject: =?US-ASCII?Q?Colon=3Atest?=

[CASE-2]

> SNDM FROM(xxxxx@xxxx.xxxxxxx.xxx.com 'Tcpip') TO((MAILUSER1@xxxx.xxxxxxx
  X.XXX.XXX 'MailUser1')) FILE(QCLSRC) SUBJECT('''Colon:test!"#$%&''()''')
  Mail sent.

(received mail header)
Subject: =?US-ASCII?Q?'Colon=3Atest=21=22=23=24%&'=28=29'?=

I don't see any problem here. How can I recreate your problem?

Waiting for your reply.

uzaemon@Japan

 
01037/01037 AAA00000  Leonhardt        Overlays and HPT                        
( 1)   06/03/25 03:28

Hi,
we made OVL using IBMs newest AFP drivers WITH color images.
The result was fine using IBMs AFPViewer. But if we try to use this OVL in a PrinterFile as AFPDS-Overlay the results
ar only black areas - in all cases at paper and also in a tiff.
What's about color printing?
Note: We have absolutely no problems with b/w-overlays, whether in OVLs nor in TIFFs or PDFs.
Thanks for your answer.

 
01036/01036 AAA00000  Philippe Verplae SNDM                                    
( 1)   06/03/23 17:57

Hello,

First I would like mention that the tool works great. 
But I found a small bug. When I use the character ':' in the SUBJECT, a blank is generated at the 42th position in the mail-title. 

Regards,
Philippe Verplaetse
 
01034/01034 AAA00000  Stij  Theunis    Re^4: Using command SPL2STMF (CPF3CF2, y
( 1)   06/03/09 23:13  01033へのコメント

Hello,

I had the same problem (a year ago)
and I solved them to add an extra source line 
see
http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=924&log_no=924&msg_per_page=50&def=10

I don't know If this could be perhaps the problem/solution??

kind regards,
Stijn

 
01033/01033 AAA00000  uzaemon          Re^3: Using command SPL2STMF (CPF3CF2, y
( 1)   06/03/01 22:26  01032へのコメント  コメント数：1
George,

> I made the changes wich You mentioned but nothing has changed. I guess ist is the messures of the printfile:
> 48 lines vertical und 120 character horizontal. The size of the spoolfile ist only 50 KB
> Here the command:
> SPL2STMF FILE(LOHNABR) TOSTMF'/lghdta/lohnabr/lohnabr.tif') WSCST(QWPTIFFG4) JOB(642067/SFBPGMR/LGMXUPRCL) SPLNBR(*ONLY) DEBUG*YES)                     
> Thank You for the help
> > Geroge,
> > 
> > > Using Command: SPL2STMF
> > > I get the Error Message CPF3CF2 hptopt=30 while converting a spoolfile into a TIFF-File. Size of page horizontal 120 character. Does somebody has a solution for this problem?
> > 
> > If you need help, I would recommend you to provide more information. Also messages in this BBS might help, such as "920. SPLTOPDF CPF3CF2 hptopt = 30", "755. SPL2STMF", and more.

I have some questions;

- Does SPL2STMF work against system output (e.g. WRKSYSSTS *PRINT)?
- Does SPL2STMF work with other WSCSTs?
- What is the version of your OS/400?
- Do you have an access to another OS/400 for problem determination? You may ask your support channel to recreate your problem.
- Did you run the MAKE procedure by yourself?

Waiting for your reply.

uzaemon@Japan

 
01032/01032 AAA00000  George           Re^2: Using command SPL2STMF (CPF3CF2, y
( 1)   06/03/01 21:28  01031へのコメント  コメント数：2
Dear Uzaemon

I made the changes wich You mentioned but nothing has changed. I guess ist is the messures of the printfile:
48 lines vertical und 120 character horizontal. The size of the spoolfile ist only 50 KB
Here the command:
SPL2STMF FILE(LOHNABR) TOSTMF'/lghdta/lohnabr/lohnabr.tif') WSCST(QWPTIFFG4) JOB(642067/SFBPGMR/LGMXUPRCL) SPLNBR(*ONLY) DEBUG*YES)                     
Thank You for the help
> Geroge,
> 
> > Using Command: SPL2STMF
> > I get the Error Message CPF3CF2 hptopt=30 while converting a spoolfile into a TIFF-File. Size of page horizontal 120 character. Does somebody has a solution for this problem?
> 
> If you need help, I would recommend you to provide more information. Also messages in this BBS might help, such as "920. SPLTOPDF CPF3CF2 hptopt = 30", "755. SPL2STMF", and more.
> 
> uzaemon@Japan

 
01031/01031 AAA00000  uzaemon          Re: Using command SPL2STMF (CPF3CF2, yet
( 1)   06/02/28 23:26  01030へのコメント  コメント数：3
Geroge,

> Using Command: SPL2STMF
> I get the Error Message CPF3CF2 hptopt=30 while converting a spoolfile into a TIFF-File. Size of page horizontal 120 character. Does somebody has a solution for this problem?

If you need help, I would recommend you to provide more information. Also messages in this BBS might help, such as "920. SPLTOPDF CPF3CF2 hptopt = 30", "755. SPL2STMF", and more.

uzaemon@Japan

 
01030/01030 AAA00000  Geroge Schneider Using command SPL2STMF                  
( 1)   06/02/28 00:48

Using Command: SPL2STMF
I get the Error Message CPF3CF2 hptopt=30 while converting a spoolfile into a TIFF-File. Size of page horizontal 120 character. Does somebody has a solution for this problem?
Thank You
 
01029/01029 AAA00000  uzaemon          Re: RFID (socket progamming)            
( 1)   06/02/24 21:05  01027へのコメント

Daniel,

> Request: Any samples program to use for socket programming?
> 
> Purpose: we have an RFID reader software, installed on PC. AS/400 need to access data after every tag is read.

Please read the head line, which states that "Do not add messages to this BBS about anything that is not related to utilities at my homepage".

Having that said, you can write socket program using Java, ILE-C/C++ and ILE-RPG. Sample codes will be available in around six months, I hope.

uzaemon@Japan

 
01028/01028 AAA00000  uzaemon          Re^6: ZLIB/MiniZip                      
( 1)   06/02/24 20:57  01026へのコメント

James,

> > . . . so please let me know the result.
> 
> Dear Uzaemon:
> 
> No change.

If you want to pursuit your problem, please consider followings.

- How do you use zlib? (e.g. qshell or command interface, single job or parallel job, one file at a time or multiple files...)

- Size of the zip file. (See http://publib.boulder.ibm.com/iseries/v5r1/ic2924/tstudio/tech_ref/syslimit/ for maximum stream file size)

- Ask your support channel to perform the same operation on newer OS/400. (e.g. V5R3)

- email me the joblog. (I added your mail address to my "accept" list)

Waiting for your reply.

uzaemon@Japan

 
01027/01027 AAA00000  Daniel           RFID                                    
( 1)   06/02/24 04:42

Request: Any samples program to use for socket programming?

Purpose: we have an RFID reader software, installed on PC. AS/400 need to access data after every tag is read.

 
01026/01026 AAA00000  James Lampert    Re^5: ZLIB/MiniZip (zlib 1.2.3 test vers
( 1)   06/02/22 11:11  01020へのコメント  コメント数：1
> . . . so please let me know the result.

Dear Uzaemon:

No change.

--
JHHL
 
01025/01025 AAA00000  James Lampert    DUH, Re: ZLIB/MiniZip (QZHBCGI)         
( 1)   06/02/22 03:33  01024へのコメント

I finally remembered how I got ZLIB's CL programs to compile under V4R2: QTMHCGI, rather than QZHBCGI. On our V5R2 box, there's even a QTMHCGI in both libraries.

I suspect that at some point, QTMHCGI was reduced to some sort of stub front-end for QZHBCGI.
 
01024/01024 AAA00000  James Lampert    Re^8: ZLIB/MiniZip (QZHBCGI)            
( 1)   06/02/22 02:03  01023へのコメント  コメント数：1
> If my memory is correct, QZHBCGI (also called "CGI mode-2") has been avaialble since V4R2 via PTF. At V4R3, it was moved from QTCP to QHTTPSVR.

Yes. What I'm wondering is how, when it's specifically bound to QTCP/QZHBCGI at creation time, it's somehow successfully finding QHTTPSVR/QZHBCGI at run time. By contrast, if a program is bound to ZLIB/ZLIB at creation time, it's unable to find ZLIB anywhere else, even if it's in the library list. I'm not looking a gift horse in the mouth about QZHBCGI here; I'm just puzzled.
 
01023/01023 AAA00000  uzaemon          Re^7: ZLIB/MiniZip (QZHBCGI)            
( 1)   06/02/21 22:14  01022へのコメント  コメント数：2
James,

> Something weird I just noticed, recompiling:
> 
> It seems that on V4R2, the QZHBCGI *SRVPGM is in QTCP, whereas the QHTTPSRV library doesn't exist, and so the REXX script has to be altered accordingly.
> 
> On V4R4 and later, the *SRVPGM is in QHTTPSRV, and NOT in QTCP.
> 
> Yet the CL programs compiled under V4R2, and bound to the *SRVPGM in QTCP are somehow finding it in QHTTPSRV. Not being all that familiar with service program binding, I'm not entirely sure what to make of this.
> 
> I'm also posting this query to MIDRANGE-L.

If my memory is correct, QZHBCGI (also called "CGI mode-2") has been avaialble since V4R2 via PTF. At V4R3, it was moved from QTCP to QHTTPSVR.

uzaemon@Japan

 
01022/01022 AAA00000  James Lampert    Re^6: ZLIB/MiniZip (zlib 1.2.3 test vers
( 1)   06/02/21 04:36  01021へのコメント  コメント数：3
Something weird I just noticed, recompiling:

It seems that on V4R2, the QZHBCGI *SRVPGM is in QTCP, whereas the QHTTPSRV library doesn't exist, and so the REXX script has to be altered accordingly.

On V4R4 and later, the *SRVPGM is in QHTTPSRV, and NOT in QTCP.

Yet the CL programs compiled under V4R2, and bound to the *SRVPGM in QTCP are somehow finding it in QHTTPSRV. Not being all that familiar with service program binding, I'm not entirely sure what to make of this.

I'm also posting this query to MIDRANGE-L.
 
01021/01021 AAA00000  James Lampert    Re^5: ZLIB/MiniZip (zlib 1.2.3 test vers
( 1)   06/02/21 02:14  01020へのコメント  コメント数：4
>. . . I re-ported 1.2.3. Download the new file from http://homepage1.nifty.com/uzaemon/zlib123.exe and see how it works. I don't have time to perform thorough test, so please let me know the result.


Thanks. It's taking me a few steps to walk the library down to our only box with a fully operational C compiler (our V4R2 box), and as I recall, compilation is a bit troublesome, so it may be a while before I have any results.

The ZLIB we have is the 1.2.1 version.

And it's possible that the problem has nothing directly to do with ZLIB: maybe after a few hundred IFS file opens and closes, I'm hitting some sort of brick wall in the operating system, or maybe I have some sort of memory leak in my own code. At this point, I'm not ruling anything out.

--
James H. H. Lampert
Touchtone Corporation
 
01020/01020 AAA00000  uzaemon          Re^4: ZLIB/MiniZip (zlib 1.2.3 test vers
( 1)   06/02/19 00:45  01019へのコメント  コメント数：7
James,

As the zlib home site (http://www.zlib.net/) states "potential security vulnerabilities", I re-ported 1.2.3. Download the new file from http://homepage1.nifty.com/uzaemon/zlib123.exe and see how it works. I don't have time to perform thorough test, so please let me know the result.

uzaemon@Japan

 
01019/01019 AAA00000  uzaemon          Re^3: ZLIB/MiniZip                      
( 1)   06/02/18 11:17  01018へのコメント  コメント数：8
James,

> Oh, and our ZLIB is dated 17 NOV 2003.

What version of zlib are you using, 1.1.3 or 1.2.1?

uzaemon@Japan

 
01018/01018 AAA00000  James Lampert    Re^2: ZLIB/MiniZip                      
( 1)   06/02/18 09:46  01017へのコメント  コメント数：9
Oh, and our ZLIB is dated 17 NOV 2003.

--
JHHL
 
01017/01017 AAA00000  James Lampert    Re: ZLIB/MiniZip                        
( 1)   06/02/18 09:43  01016へのコメント  コメント数：10
Additional information:

The first time, MiniZip was successfully called 296 times before it stopped working. The second time, it was only successfully called 123 times. The third time, only 118 times.

I can privately email you an excerpt from the joblog of the second run. (Believe me, you don't want the whole thing, with its thousand odd pages of the same error message)
 
01016/01016 AAA00000  James Lampert    ZLIB/MiniZip                            
( 1)   06/02/18 08:35

We've been using your ZLIB port for some time now, and while it's generally quite stable, we've recently found a problem.

It seems that if MiniZIP gets called too many times within a single batch job (turning a large number of IFS directories into ZIP archives of their contents), it stops working, and (since the batch job in question keeps trying to apply it to the remaining subdirectories of the directory it's working in) just sits there producing a few hundred pages of the same error message. Any idea why this would happen?

--
James H. H. Lampert
Touchtone Corporation
 
01015/01015 AAA00000  uzaemon          Re: libtiff 3.8.0                       
( 1)   06/02/17 21:18  01014へのコメント

Davis,

> The libtiff download is version 3.4.0. Current libtiff is 3.8.0. Do you have any plans to release a more current version? If not, am I correct in presuming that what you have done is plug values in the header files? Could you tell me what you changed so that I can compile 3.8.0 on my iSeries?

I ported libtiff to convert TIFF file generated by HPT to PDF using TIFF2PDF command. As it is working fine so far, I have no reason to update libtiff. I don't know why you need 3.8.0, but if you want to examine what I did, search string "AS400" by using option 25 of PDM. You may need to modify MAKE procedure if new modules has been added to libtiff.

Hope this helps.

uzaemon@Japan

 
01014/01014 AAA00000  Davis Yokana     libtiff 3.8.0                           
( 1)   06/02/17 19:50

The libtiff download is version 3.4.0. Current libtiff is 3.8.0. Do you have any plans to release a more current version? If not, am I correct in presuming that what you have done is plug values in the header files? Could you tell me what you changed so that I can compile 3.8.0 on my iSeries?
 
01013/01013 AAA00000  uzaemon          Re: HPT - Image size                    
( 1)   06/02/07 16:44  01011へのコメント

Simone,

> in the tiff image, the overlay is all on the right side, and the image created is bigger then A4. 
 
TIFF2PDF scales the original TIFF image to fit to sepcified image, which means if the image size of the first page is small, the scale ratio is set to higher value.

You may:

- modify TIFF2PDF program to fix the scaling ratio.
- adjust the image size of the first page by adding extra AFP resource (dummy text, line, etc.) to the first page.

uzaemon@Japan

 
01012/01012 AAA00000  uzaemon          Re: HPT - Problem about Overlay position
( 1)   06/02/07 01:23  01011へのコメント

Simone,

> I'm printing a spool file *AFPDS with an overlay on my laser printers without problems in A4 paper. When I transform it with the command 
> SPL2STMF FILE(AFPTEST) TOSTMF('/docs/afptest.tif') WSCST(QWPTIFFG4) JOB(number/user/jobname) SPLNBR(n)    
> in the tiff image, the overlay is all on the right side, and the image created is bigger then A4. 

It seems similar to message "934. HPT" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=934&log_no=934&msg_per_page=50&def=10) in this BBS. Please read the thread and get back.

uzaemon@Japan

 
01011/01011 AAA00000  Simone           HPT - Problem about Overlay position    
( 1)   06/02/06 20:01

Hi uzaemon,

I'm printing a spool file *AFPDS with an overlay on my laser printers without problems in A4 paper. When I transform it with the command 
SPL2STMF FILE(AFPTEST) TOSTMF('/docs/afptest.tif') WSCST(QWPTIFFG4) JOB(number/user/jobname) SPLNBR(n)    
in the tiff image, the overlay is all on the right side, and the image created is bigger then A4. 

Thanks for your help
Simone 
 
01010/01010 AAA00000  uzaemon          Re: tiff2pdf - "The file is damaged but 
( 1)   06/02/03 21:44  01009へのコメント

Luciano,

> I'm using the utility to convert Spool to Tiff and then to PDF. Everything is working fine, but when Pdf opens the document says "The file is damaged but is being repaired" and goes on. I've using last tools version from your site, 
> my OS is V5R1M0, pcs with WindowsXP sp2, AcrobatReader 6 and 7 too.I've tried to do the same on V5R2M0 and V4R5M0 systems but the error still appear.
> Any idea on how it can be fixed to avoid this message ?
> I'll apreciate any help Thanks in advances.

Below is a solution found by Beppe (in reply to "819. Re: PDF for Acrobat 6").

>The problem originates from spaces inserted in places where there are non expected to be, or not present where they should be, like in xref.
> 
>Example: 
>[ /ASCII85Decode /CCITTFaxDecode ]
>should be:
>[/ASCII85Decode /CCITTFaxDecode]

Please examine the circumvention and let me know the result.

uzaemon@Japan

 
01009/01009 AAA00000  luciano          tiff2pdf                                
( 1)   06/02/03 18:22

Hi Uzaemon,
I'm using the utility to convert Spool to Tiff and then to PDF. Everything is working fine, but when Pdf opens the document says "The file is damaged but is being repaired" and goes on. I've using last tools version from your site, 
my OS is V5R1M0, pcs with WindowsXP sp2, AcrobatReader 6 and 7 too.I've tried to do the same on V5R2M0 and V4R5M0 systems but the error still appear.
Any idea on how it can be fixed to avoid this message ?
I'll apreciate any help Thanks in advances.

Luciano.
 
01006/01006 AAA00000  uzaemon          Re^6: SPL2STMF - corrupted TIFF         
( 1)   06/01/27 09:42  01005へのコメント

> now it's ALL OK !  I installed 5722SS1 opt(8)QFNTCPL and SPL2STMF work correctly !

Your case seems like the same problem as message "804. Re: TIFF2PDF "Can not read TIFF directory count"".

Thank you for your report and have fun.

uzaemon@Japan

 
01005/01005 AAA00000  giancarlo sartor Re^5: SPL2STMF - corrupted TIFF         
( 1)   06/01/26 00:58  01004へのコメント  コメント数：1
> Giancarlo,
> 
> For problem determination:
> 
> 1. Exec SPL2STMF command specifying "QWPGIF" as WSCST and confirm that the output file is generated without problem (can be opened by Windows image viewer).
> 
> 2. Try the same operation on other machine.
> 
> Waiting for your reply.
> 
> uzaemon@Japan
Hi uzaemon,
now it's ALL OK !  I installed 5722SS1 opt(8)QFNTCPL and SPL2STMF work correctly !
Thanks.

Giancarlo

 
01004/01004 AAA00000  uzaemon          Re^4: SPL2STMF - corrupted TIFF         
( 1)   06/01/25 20:57  01003へのコメント  コメント数：2
Giancarlo,

For problem determination:

1. Exec SPL2STMF command specifying "QWPGIF" as WSCST and confirm that the output file is generated without problem (can be opened by Windows image viewer).

2. Try the same operation on other machine.

Waiting for your reply.

uzaemon@Japan

 
01003/01003 AAA00000  giancarlo sartor Re^3: problem with TIFF2PDF - CPF9897   
( 1)   06/01/25 19:48  01001へのコメント  コメント数：3
> One question.
> 
> > Stream file generated. execution time 0 min 0 sec, total pages = 14 
> 
> I think "0 min 0 sec" to create TIFF file is too fast. Was the TIFF file created successfully? Try to open the file using Windows graphics software.
> 
> If the TIFF file is broken by some reason, create new WSCST for TIFF-G4 from source shown below:
> 
> 0001.00       :WSCST DEVCLASS=TRANSFORM.   
> 0002.00                 :TRNSFRMTBL.       
> 0003.00                 :PRTDTASTRM        
> 0004.00                 DATASTREAM=TIFF_G4.
> 0005.00                 :INITPRT           
> 0006.00                 DATA ='4D4D002A'X. 
> 0007.00                 :RESETPRT          
> 0008.00                 DATA ='00000000'X. 
> 0009.00                 :EWSCST.           
> 
> uzaemon@Japan
Hi uzaemon,
I recompiled the distribution as QSECOFR and  I confirmed the autority:
/tmp/spl2stmfrp.tif
QSECOFR     *RWX          X         X         X       X
/tmp
QSECOFR     *RWX          X         X         X       X
It's impossible to open spl2stmfrp.tif with Microsoft Office Document Imaging because file TIF is corrupted.
TIFF2PDF say me :
"/tmp/spl2stmfrp.tif: Can not read TIFF directory count."
I suppose for the same reason. Also, I created WSCST TIFF_G4 from your source  but spl2stmfrp.tif is  yet corrupted.  
My default job ccsid is 280.
Thanks.
Giancarlo

 
01002/01002 AAA00000  Simone           Re^4: spl2stmf for V4R3M0               
( 1)   06/01/25 00:40  01000へのコメント

Thank you very much. I found the binary objects in http://www.recursos-as400.com/utilidades13.shtml.

Now I will try them. 

> > Yes, the utilities could function. But it's necessary the C compiler on the AS400 in order to make the programs. Is it possible to found a savf with all the programs compiled in V4R3 or previous ?
> > 
> > Thank you
> > Simone
> > 
> > > > Have you the utilites SPL2SMTF for OS/400 at versione V4R3M0 ?
> > > 
> > > Yes. Read "! Read before you start !" section at my homepage.
> > > ---------------
> > > zlib, TIFF2PDF, SPL2STMF, SNDM and CRTCSVF MAY work on V3R7 or later. 
> > > ...........
> > > "htp_520.exe"has been saved specifying V4R5 as target release. If you are using V5R2 (with latest PTF level), you need to use "htp_520.exe". "hpt_510.exe" has been saved specifying V3R2 as target release. 
> > > ---------------
> > > 
> > > uzaemon@Japan
> 
> See message "891. Re: tifflib 3.4 (no C compiler)" in this BBS.
> 
> Hope this helps.
> 
> uzaemon@Japan

 
01001/01001 AAA00000  uzaemon          Re^2: problem with TIFF2PDF - CPF9897   
( 1)   06/01/24 21:55  00999へのコメント  コメント数：4
One question.

> Stream file generated. execution time 0 min 0 sec, total pages = 14 

I think "0 min 0 sec" to create TIFF file is too fast. Was the TIFF file created successfully? Try to open the file using Windows graphics software.

If the TIFF file is broken by some reason, create new WSCST for TIFF-G4 from source shown below:

0001.00       :WSCST DEVCLASS=TRANSFORM.   
0002.00                 :TRNSFRMTBL.       
0003.00                 :PRTDTASTRM        
0004.00                 DATASTREAM=TIFF_G4.
0005.00                 :INITPRT           
0006.00                 DATA ='4D4D002A'X. 
0007.00                 :RESETPRT          
0008.00                 DATA ='00000000'X. 
0009.00                 :EWSCST.           

uzaemon@Japan

 
01000/01000 AAA00000  uzaemon          Re^3: spl2stmf for V4R3M0               
( 1)   06/01/24 21:42  00996へのコメント  コメント数：1
> Yes, the utilities could function. But it's necessary the C compiler on the AS400 in order to make the programs. Is it possible to found a savf with all the programs compiled in V4R3 or previous ?
> 
> Thank you
> Simone
> 
> > > Have you the utilites SPL2SMTF for OS/400 at versione V4R3M0 ?
> > 
> > Yes. Read "! Read before you start !" section at my homepage.
> > ---------------
> > zlib, TIFF2PDF, SPL2STMF, SNDM and CRTCSVF MAY work on V3R7 or later. 
> > ...........
> > "htp_520.exe"has been saved specifying V4R5 as target release. If you are using V5R2 (with latest PTF level), you need to use "htp_520.exe". "hpt_510.exe" has been saved specifying V3R2 as target release. 
> > ---------------
> > 
> > uzaemon@Japan

See message "891. Re: tifflib 3.4 (no C compiler)" in this BBS.

Hope this helps.

uzaemon@Japan

 
00999/00999 AAA00000  uzaemon          Re: problem with TIFF2PDF - CPF9897     
( 1)   06/01/24 21:29  00998へのコメント  コメント数：5
Giancarlo,

> I list my problem:
> addlible hpt*last
> addlible tifflib *last
> ovrprtf file(qpsuprtf) devtype(*afpds)
> strseu srcfile(hpt/source) srcmbr(spl2stmfrp) option(6)
> spl2stmf file(qpsuprtf) tostmf('/tmp/spl2stmfrp.tif') wscst(qwptiffg4)   
> Stream file generated. execution time 0 min 0 sec, total pages = 14 
> tiff2pdf tiff('/tmp/spl2stmfrp.tif') pdf('/tmp/spl2stmfrp.pdf')  
> CPF9897      Unable to open input TIFF file.
> My OS/400 version's V5R3 TC05102  temporary applied.

I did exactly the same operation on V5R2 (TL04244) and V5R3 (TL05032). They worked just fine...

Operation:

> ADDLIBLE LIB(HPT) POSITION(*LAST)
  Library HPT added to library list.
> ADDLIBLE LIB(TIFFLIB) POSITION(*LAST)
  Library TIFFLIB added to library list.
> OVRPRTF FILE(QPSUPRTF) DEVTYPE(*AFPDS)
> STRSEU SRCFILE(HPT/SOURCE) SRCMBR(SPL2STMFRP) OPTION(6)
  Member SPL2STMFRP has been printed.
> SPL2STMF FILE(QPSUPRTF) TOSTMF('/tmp/spl2stmfrp.tif') WSCST(QWPTIFFG4)
  Stream file generated. execution time 0 min 2 sec, total pages = 14
> TIFF2PDF TIFF('/tmp/spl2stmfrp.tif') PDF('/tmp/spl2stmfrp.pdf')
  TIFF2PDF completed successfully.

Check followings and let me know.

- Confirm the authority of '/tmp/spl2stmfrp.tif' and '/tmp' by WRKAUT command. Also retry the operation as QSECOFR.
- If you have an access to another iSeries (or OS/400 partition, if any), try on the machine.
- Contact your support channel and try recreating the problem.
- No reason, but remove and reinstall (recompile) the distribution.

Waiting for your reply.

uzaemon@Japan

 
00998/00998 AAA00000  giancarlo sartor problem with TIFF2PDF - CPF9897         
( 1)   06/01/24 00:55

Hi Uzaemon,
I list my problem:
addlible hpt*last                                              
addlible tifflib *last                                          
ovrprtf file(qpsuprtf) devtype(*afpds)                                   
strseu srcfile(hpt/source) srcmbr(spl2stmfrp) option(6)                                                 
spl2stmf file(qpsuprtf) tostmf('/tmp/spl2stmfrp.tif') wscst(qwptiffg4)   
Stream file generated. execution time 0 min 0 sec, total pages = 14 
tiff2pdf tiff('/tmp/spl2stmfrp.tif') pdf('/tmp/spl2stmfrp.pdf')  
CPF9897      Unable to open input TIFF file.                                  
My OS/400 version's V5R3 TC05102  temporary applied.                                                                         
Best Regards.

Giancarlo
 
00997/00997 AAA00000  uzaemon          Re: SNDM Command failed reason -107     
( 1)   06/01/20 22:09  00995へのコメント

Paolo

> during tests i receive this:
> 
> failed to retrieve attachment-file information (PATH-/MAIL/POSTA.TXT, 3025: This path don't exist.
> 
> With WRKFLR i see that the file named POSTA.TXT is in path /MAIL
> 
> Where is my error ?

Instead of good old WRKFLR command, use WRKLNK command to access to stream file in IFS. You may try specifying "/QDLS/MAIL/POSTA.TXT".

Hope this helps.

uzaemon@Japan

 
00996/00996 AAA00000  Simone           Re^2: spl2stmf for V4R3M0               
( 1)   06/01/20 20:45  00972へのコメント  コメント数：2
Yes, the utilities could function. But it's necessary the C compiler on the AS400 in order to make the programs. Is it possible to found a savf with all the programs compiled in V4R3 or previous ?

Thank you
Simone

> > Have you the utilites SPL2SMTF for OS/400 at versione V4R3M0 ?
> 
> Yes. Read "! Read before you start !" section at my homepage.
> ---------------
> zlib, TIFF2PDF, SPL2STMF, SNDM and CRTCSVF MAY work on V3R7 or later. 
> ...........
> "htp_520.exe"has been saved specifying V4R5 as target release. If you are using V5R2 (with latest PTF level), you need to use "htp_520.exe". "hpt_510.exe" has been saved specifying V3R2 as target release. 
> ---------------
> 
> uzaemon@Japan

 
00995/00995 AAA00000  paolo            SNDM Command failed reason -107         
( 1)   06/01/20 01:13

Dear sirs,

during tests i receive this:

failed to retrieve attachment-file information (PATH-/MAIL/POSTA.TXT, 3025: This path don't exist.

With WRKFLR i see that the file named POSTA.TXT is in path /MAIL

Where is my error ?

Thanks and regards
Paolo

 
00992/00992 AAA00000  uzaemon          Re: SNDM (-301NEGATIVE RESPONSE FROM SMT
( 1)   06/01/17 18:59  00991へのコメント

Jose,

> NO PUEDO SOLUCIONAR EL -301 NEGATIVE RESPONSE FROM SMTP SERVER, ESCUCHO OPCIONES.
> 
> MUCHAS GRACIAS.

As you can see at the top of this page, use English or Japanese, please. 

Having that said... SNDM should report the reason of error 301 and most common reason is relaying issue as you can see at previous thread. Anyway, let me know full error message to determine your problem.

Waiting for your reply.

uzaemon@Japan


 
00991/00991 AAA00000  JOSE LUIS MERA   SNDM                                    
( 1)   06/01/17 00:42

NO PUEDO SOLUCIONAR EL -301 NEGATIVE RESPONSE FROM SMTP SERVER, ESCUCHO OPCIONES.

MUCHAS GRACIAS.
 
00987/00987 AAA00000  Jan              Re^2: -301 negative response from SMTP s
( 1)   06/01/05 00:52  00986へのコメント

Hi uzaemon@Japan,

FYI, eventually we succeeded to solve the problem by changing one SMTP attribute: CHGSMTPA ALWRLY(*ALL) // it was set to ALWRLY(*NONE).

By the way, SNDM is a very useful tool. We appreciate your work! 

Regards,
Jan


 
00986/00986 AAA00000  uzaemon          Re: -301 negative response from SMTP ser
( 1)   06/01/01 00:30  00985へのコメント  コメント数：1
Jan,

> We installed a new I5 V5R3, now SNDM abends with message "-301 negative response from SMTP
> server ( RSP[553 Relaying blocked at this site.".
> 
> How can we solve this problem?

See message "971. Re: SNDM - UNDELIVERABLE MAIL" which points to "948. Re: SndMail (SNDM - Relaying blocked)".

Hope this helps.

uzaemon@Japan

 
00985/00985 AAA00000  Jan              -301 negative response from SMTP server 
( 1)   05/12/30 19:15

Hi,

We installed a new I5 V5R3, now SNDM abends with message "-301 negative response from SMTP
server ( RSP[553 Relaying blocked at this site.".

How can we solve this problem?

Thanks in advance,
Jan
 
01588/01588 AAA00000  uzaemon          Re: SNDM: Reason -301: special character
( 1)   06/12/03 01:55  01576へのコメント

Zvi,

> I have something that seems CCSID error:
> When working from Israel on computer in sweden I got the error:
> 
> SNDM FROM('qsecofr@localhost) 
> TO(('zvi_kave@yahoo.com')) 
> FILE(SMTP/BODY) SUBJECT('test1')
> SMTPHOST(S720)                                  Command failed. reason -301 negative response from SMTP server ( RSP 501  Syntax error.  Special characters only permitted with escape            character.肄､ REQ RCPT TO:<zvi_kave@yahoo.com>肄､)             Please help if you can.
> 
> Regards,
> 
> Zvi       
>  

I recommend you to specify DEBUG(*YES) and check out followings:

- CCSIDs you are using.
- At where (mail address, description, mail body, attachment, etc.) and what "Special characters" are used.
- See http://homepage1.nifty.com/uzaemon/iso8859.html for supported CCSIDs.

uzaemon@Japan

 
01586/01586 AAA00000  uzaemon          Re: Resolution of GIF file created by SP
( 1)   06/12/03 01:47  01562へのコメント

Joseph,

> Dear Sir,
> I created a GIF file from an AFP spool using QWPGIF *wscst,
> the GIF file created had a very low resolution. There is
> a way to increase the resolution?
> Thanks,
> Joseph

Below is a similar Q&A (dated 01/02/17!).
Hope this answers to your question.

-------------------------------------
Q.
I was using your SPL2STMF with much sucess to create tiff files then converting them to PDF. I then tried to greate .gif files using workstation customization object QWPGIF and the quality is much reduced? Are there any workstation customization objects out there that could be of better quality. (Also, I was wondering if colour would be supported in these transforms? Up until now I was only using black and white since I cannot generate an overlay from Windows is colour using the IBM AFP drivers they supply?)

A.
I tried it and got same result on V4R5. Image resolution of GIF file is much lower than TIFF (see http://homepage1.nifty.com/uzaemon/tiff_gif.png ).

I think you have two options:

- Ask IBM if QWPGIF can generate better image. As RTVWSCST is not available for QWPGIF, you need to ask IBM through your standard support process.

- Convert TIFF to GIF. You can find some tools (for ANSI-C) on the Web, for example, check out http://cfa-www.harvard.edu/~alberto/tiff/ , http://netpbm.sourceforge.net/ , http://kalex.engin.umich.edu/tif2gif/ and many more. 

uzaemon@Japan

 
01585/01585 AAA00000  uzaemon          Re: SNDM (skip negative response)       
( 1)   06/12/03 01:37  01551へのコメント

Peter,

> We use the SNDM command a lot. It does what we need. Now we see some Internet providers act different if a email address does not exist. There is 1 provider that accepts all email requests and if an email address does not exist it sends back the failing email with a note that the 
> address does not exist.
> Another provider that gets a request to send an email checks the domainname interactively and let the command SNDM fail if a domainname does not exist.
> 
> How do we catch a "301 negative response from SMTP server" during transmission of an email so it does not abord.
> 
> Thanks, Peter


Please look into line 188 - 197 of SMTP/QRPGLESRC(#SEND) and modify according to your requirement. This part checks "SMTP negative response (other than 2xx, 3xx)".

Hope this helps.

uzaemon@Japan

 
01576/01576 AAA00000  Zvi Kave         SNDM: Reason -301: special character err
( 1)   06/11/30 21:40

I have something that seems CCSID error:
When working from Israel on computer in sweden I got the error:

SNDM FROM('qsecofr@localhost) 
TO(('zvi_kave@yahoo.com')) 
FILE(SMTP/BODY) SUBJECT('test1')
SMTPHOST(S720)                                  Command failed. reason -301 negative response from SMTP server ( RSP 501  Syntax error.  Special characters only permitted with escape            character.肄､ REQ RCPT TO:<zvi_kave@yahoo.com>肄､)             Please help if you can.

Regards,

Zvi       
 


 
01562/01562 AAA00000  Joseph Wechsler  Resolution of GIF file created by SPOOL2
( 1)   06/11/27 14:40

Dear Sir,
I created a GIF file from an AFP spool using QWPGIF *wscst,
the GIF file created had a very low resolution. There is
a way to increase the resolution?
Thanks,
Joseph
 
01551/01551 AAA00000  Peter Snijders   SNDM                                    
( 1)   06/11/24 20:23

We use the SNDM command a lot. It does what we need. Now we see some Internet providers act different if a email address does not exist. There is 1 provider that accepts all email requests and if an email address does not exist it sends back the failing email with a note that the 
address does not exist.
Another provider that gets a request to send an email checks the domainname interactively and let the command SNDM fail if a domainname does not exist.

How do we catch a "301 negative response from SMTP server" during transmission of an email so it does not abord.

Thanks, Peter

 
01493/01493 AAA00000  uzaemon          Re: Commercial Distribution             
( 1)   06/11/15 17:22

Vidan,

Thank you very much for your interest on my tools.

> You have excellent tools. I appreaciate them very much. Ola Japan !
> I work in a SW house. We have a SW that we sell. This SW produces spoolfiles. As a result of a request from one customer, we wish to enable customers to optionally ship the spoolfile to their mail. 
> To do this we can use many solutions among them SNDDST. As your SNDM has a nice advantage (also in some other Java solutions) that almost no preperation is needed, we wish to save the custome the time to download your tool and we wish to distribute it in a separate library alongside our SW. If you see this as a problem - offending your rights, we shall not do so. 
> In my opinion - SNDM should become the standard.
> 
> If you require a low one time payment for all tools on your site (I have to look at SPL2STMF and perhaps at CRTCSVF), please specify it and I will have to raise it to managment. They will probably not like it, but I think that I have a chance to convince them if the price is realy low.

Basically, SNDM is free software, which means you can modify, distribute, bundle it under the terms of GPL.

In my understanding, it is possible to use GPLed software for commercial use. There are some issues regarding "dynamically links". I don't think programs which call SNDM are considered to be "derivative work". For more information, refer to http://en.wikipedia.org/wiki/GPL, for instance.
 
SNDM is subject to the dual-license which means you can use whichever you want. You need commercial license when you want to "SELL" (not "bundle") SNDM. I assume most people prefer GPL and I don't want to receive lengthy legal documents to sign.

Hope this answers to your message.

uzaemon@Japan

 
01436/01436 AAA00000  HIRO             Re^2: SNDM MONMSG CPF9898メッセージ監視 
( 1)   06/11/06 16:56  01421へのコメント

uzaemonさん
ご回答ありがとうございます。
途中経過を報告します。
RPG  ->  CL  ->  SNDM
を実行しています。

いろいろと確認したところ、(というよりIBMのテクニカルサポートに相談)したところ、RPG0202でダウンするのは、プログラム状況コードに00,01以外で終了した場合のようです。

そこで、RPGで下記のフィルドを定義し、ダウンしたときの
ダンプをとると

 FMT *  . *   . 2  4 ...+... 5 ...+... 6 
0013.00  I*=  ==== ================================
0014.00  I    SDS                                         
0015.00  I              11  150AAA      

AAA      0011A6  ZONED(5,0)    202

プログラム状況コードに202がセットされているようです。
RPG内のCALLでLOに標識を設定するとエラーを無視できるようなのでその方法で回避しようと考えております。

問題解決できましたら、また、ご報告します。
またよろしくお願いします。
 
01421/01421 AAA00000  uzaemon          Re: SNDM MONMSG CPF9898メッセージ監視   
( 1)   06/11/03 20:52  01413へのコメント  コメント数：1
HIROさん、

> SNDMで㈱などの文字が＝に変換される場合(NONJISDBCS(*REPLACE)の設定)ですが、CPF9898がエラーレベル40で出されているようです。
> MONMSGでハンドリングしていますが、RPGからCLを呼び出しており
> そのCL内でSNDMを実行して、 MONMSGでCPF9898を監視しています。
> しかし、上位のRPGがRPG0202でダウンしてしまいます。

RPG(III?) → CLP → SNDM と呼び出していると思いますが、CLPがSNDMの返すエラーをうまくMONMSGできてないため、RPG(III?)がRPG2020となるのではないでしょうか。

昔の書き込みですが、下記にエラーハンドリングの例(メッセージ379の抜粋)を添付しますので参考にしてみてください。ただし、CLではなくCLLEによるCGIの例です。

-------------------------------------
/* Send mail */                                       
SNDM       FROM('webmaster@somewhere' 'from AS400') + 
             TO((&TOADDR)) FILE(&OBJLIB/&FILE) + 
             MBR(&MAILBODY) SUBJECT(&SUBJECT) +      
             ATTACHMENT(&PATH) SMTPHOST(&SMTPHOST)    
MONMSG     MSGID(CPF9800) EXEC(GOTO CMDLBL(ERROR))   
CHGVAR     VAR(&PSTR) VALUE(&HEADER |< '<BR><H2>Mail +
             sent.</H2>' |< &NULL)                    
CALLPRC    PRC('puts') PARM(&PSTR)                    
DEL        OBJLNK(&PATH)                              
GOTO       CMDLBL(EXIT)                               

ERROR:
RCVMSG     MSGTYPE(*EXCP) MSG(&SNDM_MSG)               
CHGVAR     VAR(&PSTR) VALUE(&HEADER |< '<H1>Failed to +
             send mail.</H1>message : ' || &SNDM_MSG + 
             || &TRAILER)                              
CALLPRC    PRC('puts') PARM(&PSTR)                     
GOTO       CMDLBL(EXIT)                                

EXIT:
-------------------------------------

uzaemon@Japan

 
01413/01413 AAA00000  HIRO             SNDM MONMSG CPF9898メッセージ監視       
( 1)   06/11/02 18:21

uzaemonさん、こんにちは
また、質問をさせて下さい。
SNDMで㈱などの文字が＝に変換される場合(NONJISDBCS(*REPLACE)の設定)ですが、CPF9898がエラーレベル40で出されているようです。
MONMSGでハンドリングしていますが、RPGからCLを呼び出しており
そのCL内でSNDMを実行して、 MONMSGでCPF9898を監視しています。
しかし、上位のRPGがRPG0202でダウンしてしまいます。

私の知識が足らないのかもしれませんが、MONMSGで上位のRPGへの影響は回避されると思っているのですが･･･

お手数ですが、よろしくお願いいたします。
 
01411/01411 AAA00000  uzaemon          Re: sndm Menual requide                 
( 1)   06/11/02 00:32  01404へのコメント

Jeong,

> can i get a SNDM menual(detail)

I believe that I've already published (more than) manual level information.

- I distributes online manual (help panel) with SNDM. 
- Detailed install instruction is available.
- You can browse flowchart at http://homepage1.nifty.com/uzaemon/SNDM_flowchart.gif
- SNDM is open source software so that people can investigate how it works.
- You can find lots of useful information in this BBS.

I'd like to know what you need in addition to above...

uzaemon@Japan

 
01404/01404 AAA00000  jeong won kyo    sndm Menual requide                     
( 1)   06/10/31 10:10

hello.
nice day.

can i get a SNDM menual(detail)
thank you

my e-mail adresss is jwk@easy.co.kr

e-mail please

 
01224/01224 AAA00000  uzaemon          Re: SPL2STMF Error Message              
( 1)   06/09/21 03:18  01222へのコメント

Aurelio,

> I am trying to convert a 3 pages file using your utility and I am getting the following error Message:
> 
> Fatal error : API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 30
> 
> I am running OS/400 5.2 and WSC QWPTIFFG4. 
> 
> Any idea what is causing this problem?

See message "924. Re^3: SPLTOPDF CPF3CF2 hptopt = 30 ", "566. Re: SPL2STMF error in API QwpzHostPrintTransform" in this BBS.

Hope this helps.

uzaemon@Japan

 
01222/01222 AAA00000  Aurelio Rivera   SPL2STMF Error Message                  
( 1)   06/09/20 08:18

I am trying to convert a 3 pages file using your utility and I am getting the following error Message:

Fatal error : API QwpzHostPrintTransform failed : CPF3CF2 hptopt = 30

I am running OS/400 5.2 and WSC QWPTIFFG4. 

Any idea what is causing this problem?
 
01215/01215 AAA00000  uzaemon          Re^2: SNDM PING(ファイアーウォール)     
( 1)   06/09/05 19:50  01213へのコメント

> あれ、回避できました･･･
> SMTP/QRPGLESRC(#SEND)を拝見
> 0043.00 C EVAL hostp = gethostbyname(%ADDR(smtphostn))  
> DNSの名前解決か何かと考え
> 
> AS/400(i/5)の「TCP/IP ホスト・テーブル項目の処理」で、SMTPサーバーをホスト名を登録し、そのホスト名をSNDMのSMTPHOSTのパラメーターに設定すると実行可能でした。
> 
> IPアドレスを直接指定しても使用可能だった気がしましたが･･･
> 
> お騒がせしました。

あ、自己解決されたのですね　(^-^;

uzaemon@Japan

 
01214/01214 AAA00000  uzaemon          Re: SNDM PING(Firewall?)                
( 1)   06/09/05 19:49  01212へのコメント

HIROさん、こんにちは。

> AS/400とSMTPサーバーの間にファイヤーウォールがあり、PINGコマンドが禁止されています。
> SMTPサーバーへは、アクセス可能な状況にありますが、SNDMでエラーが発生しています。
> 
> 下記、エラーメッセージ
> ================================================
> Command failed. reason -202 failed to lookup IP address from host name ( HOST-'10.1.3.65' gethostbyname(), 0: エラーはありません。 )
> ================================================
> 
> SNDMを使用するには、PINGが通っている必要がありますか？

PINGは必要ありません。SMTPのポート(TCPの25)が開いていれば動くはずです。

メールサーバーにIPアドレスを指定しているようですが、ホスト(メールサーバー)名を指定してください。DNSに登録されていない場合は、AS/400側でADDTCPHTEコマンド(またはCFGTCP→「10. TCP/IP ホスト・テーブル項目の処理」)でメールサーバーを登録してみてください。

上手くいったらお知らせくださいね。

uzaemon@Japan

 
01213/01213 AAA00000  HIRO             Re: SNDM PING(ファイアーウォール)       
( 1)   06/09/05 15:14  01212へのコメント  コメント数：1
あれ、回避できました･･･
SMTP/QRPGLESRC(#SEND)を拝見
0043.00 C EVAL hostp = gethostbyname(%ADDR(smtphostn))  
DNSの名前解決か何かと考え

AS/400(i/5)の「TCP/IP ホスト・テーブル項目の処理」で、SMTPサーバーをホスト名を登録し、そのホスト名をSNDMのSMTPHOSTのパラメーターに設定すると実行可能でした。

IPアドレスを直接指定しても使用可能だった気がしましたが･･･

お騒がせしました。
 
01212/01212 AAA00000  HIRO             SNDM PING(ファイアーウォール)           
( 1)   06/09/05 11:09

uzaemonさん、こんにちは
SNDMについて質問をさせて下さい。

AS/400とSMTPサーバーの間にファイヤーウォールがあり、PINGコマンドが禁止されています。
SMTPサーバーへは、アクセス可能な状況にありますが、SNDMでエラーが発生しています。

下記、エラーメッセージ
================================================
Command failed. reason -202 failed to lookup IP address from host name ( HOST-'10.1.3.65' gethostbyname(), 0: エラーはありません。 )
================================================

SNDMを使用するには、PINGが通っている必要がありますか？
大変お手数ですが、よろしくお願いします。
 
01203/01203 AAA00000  Sander           Re^2: Maximum recipients of SNDM command
( 1)   06/08/25 17:58  01201へのコメント

> > Hi Uzaemon,
> >
> > First of all, thanks a lot for the SNDM command. We've been using it for years now.
> 
> My pleasure :-)
> 
> > One question; I've made some programs which create an "on-the-fly" SNDM command which is executed afterwards.
> > This morning it crashed because the SNDM command reached the maximum of 30 recipients.
> > I was wondering if my version of the SNDM command is old, and if perhaps this maximum is higher now.
> >
> > Thanx
> 
> See message "502. Limit of 30 To recipients" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=502&log_no=502&msg_per_page=50&def=10) in this BBS. I quote the thread for your convenience.
> 
> 502.  Limit of 30 To recipients  Nicolas Machado  [url]  2002/11/09 (Sat) 02:22
> 
> Helo, is there any limit for the 30 Recipients, can I uprise that to 99???
> Best Regards
> 
> 
> --------------------------------------------------------------------------------
> 
> 504.  Re: Limit of 30 To recipients  uzaemon  [url]  2002/11/10 (Sun) 00:14
> 
> Nicolas,
> 
> > Helo, is there any limit for the 30 Recipients, can I uprise that to 99???
> 
> Yes, assuming that you can modify the program by yourself and CPP allows the length of command string. See SNDM command help (Restrictions, 2) for the reason of the limitation.
> 
> uzaemon@Japan


Okay, thanx for your help!!

 
01202/01202 AAA00000  uzaemon          Re: Installation problem (SNDM)         
( 1)   06/08/25 13:55  01200へのコメント

> Hi,
> I was very glad to find your program as it is what I have been looking for. However.. I am getting lots of issues when I try to install it.. can you help?
> Thanks.:
> This is the type of errors i am getting:
> 
> 
>  Change current library to "SMTP"...
>    result-> 0
>  Start creating modules for SNDM...
>    creating module SNDM...
>      50 *-*     'CRTRPGMOD MODULE(QTEMP/'MO.I') SRCFILE(&SLIB/QRPGLESRC)' 'OPT
>  ION(*SHOWCPY) DBGVIEW(&DEBUG) OPTIMIZE(&OPT) TGTRLS(&TGTRLS)';
>         +++       RC
> CPF0001)
>   result->                            creating module GETPFINFO...
>       50 *-*     'CRTRPGMOD MODULE(QTEMP/'MO.I') SRCFILE(&SLIB/QRPGLESRC)' 'OPT
>   ION(*SHOWCPY) DBGVIEW(&DEBUG) OPTIMIZE(&OPT) TGTRLS(&TGTRLS)';
>          +++       RC(CPF0001)
>     result-> CPF0001
Creating main program (SNDM)...
>   result-> CPF3C50 Start creating command ...
 creating pnlgrp...      
>   result-> 0       
>   creating command... 
>   result-> 0          
> Compile finished. Confirm error(s) if exists.                                
>                   
> Press ENTER to end terminal session.
>    

Please answer to the followings questions before you send the compile lists.

? What is the version of your OS/400 ?
? Do you have library QSYSINC on your AS/400 ?
? Did you run CHGCURLIB command before MAKE ?

Waiting for your reply.

uzaemon @ Japan

 
01201/01201 AAA00000  uzaemon          Re: Maximum recipients of SNDM command  
( 1)   06/08/25 13:51  01197へのコメント  コメント数：1
> Hi Uzaemon,
>
> First of all, thanks a lot for the SNDM command. We've been using it for years now.

My pleasure :-)

> One question; I've made some programs which create an "on-the-fly" SNDM command which is executed afterwards.
> This morning it crashed because the SNDM command reached the maximum of 30 recipients.
> I was wondering if my version of the SNDM command is old, and if perhaps this maximum is higher now.
>
> Thanx

See message "502. Limit of 30 To recipients" (http://hpmboard1.nifty.com/cgi-bin/thread.cgi?user_id=MXA02134&disp_no=502&log_no=502&msg_per_page=50&def=10) in this BBS. I quote the thread for your convenience.

502.  Limit of 30 To recipients  Nicolas Machado  [url]  2002/11/09 (Sat) 02:22

Helo, is there any limit for the 30 Recipients, can I uprise that to 99???
Best Regards


--------------------------------------------------------------------------------

504.  Re: Limit of 30 To recipients  uzaemon  [url]  2002/11/10 (Sun) 00:14

Nicolas,

> Helo, is there any limit for the 30 Recipients, can I uprise that to 99???

Yes, assuming that you can modify the program by yourself and CPP allows the length of command string. See SNDM command help (Restrictions, 2) for the reason of the limitation.

uzaemon@Japan

 
01200/01200 AAA00000  Didier           Installation problem                    
( 1)   06/08/23 15:14

Hi,
I was very glad to find your program as it is what I have been looking for. However.. I am getting lots of issues when I try to install it.. can you help?
Thanks.:
This is the type of errors i am getting:


 Change current library to "SMTP"...                                          
   result-> 0     
 Start creating modules for SNDM...                                           
   creating module SNDM...                                                    
     50 *-*     'CRTRPGMOD MODULE(QTEMP/'MO.I') SRCFILE(&SLIB/QRPGLESRC)' 'OPT
 ION(*SHOWCPY) DBGVIEW(&DEBUG) OPTIMIZE(&OPT) TGTRLS(&TGTRLS)';               
        +++       RC
CPF0001)                                                 
  result->                            creating module GETPFINFO...                                               
      50 *-*     'CRTRPGMOD MODULE(QTEMP/'MO.I') SRCFILE(&SLIB/QRPGLESRC)' 'OPT
  ION(*SHOWCPY) DBGVIEW(&DEBUG) OPTIMIZE(&OPT) TGTRLS(&TGTRLS)';               
         +++       RC(CPF0001)                                                 
    result-> CPF0001                                                    Creating main program (SNDM)...                                              
  result-> CPF3C50                                                    Start creating command ...                                                creating pnlgrp...                                                         
  result-> 0                                                                 
  creating command...                                                        
  result-> 0                                                                     
Compile finished. Confirm error(s) if exists.                                
                                                                             
Press ENTER to end terminal session.                                         
                                                             
 
01197/01197 AAA00000  Sander           Maximum recipients of SNDM command      
( 1)   06/08/22 18:14

Hi Uzaemon,

First of all, thanks a lot for the SNDM command. We've been using it for years now.
One question; I've made some programs which create an "on-the-fly" SNDM command which is executed afterwards.
This morning it crashed because the SNDM command reached the maximum of 30 recipients. 
I was wondering if my version of the SNDM command is old, and if perhaps this maximum is higher now.

Thanx
 
01176/01176 AAA00000  uzaemon          Re: SNDM  Error (Unable to relay)       
( 1)   06/07/18 21:39  01175へのコメント

Sue,

> our OS400 is on v4r3and when we run SNDM, we got the below message:
>
>                          Additional Message Information
>
>  Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40
>  Message type . . . . . :   Diagnostic
>  Date sent  . . . . . . :   18/07/06      Time sent  . . . . . . :   12:37:39
>
>  Message . . . . :   Command failed. reason -301 negative response from SMTP
>    server ( RSP[550 5.7.1 Unable to relay for ZANESAB@HOTMAIL.COM｢｣] REQ[RCPT
>    TO:<ZANESAB@HOTMAIL.COM>｢｣])
>  Cause . . . . . :   No additional online help information is available.
                     
See message "971. Re: SNDM - UNDELIVERABLE MAIL" which points to "948. Re: SndMail (SNDM - Relaying blocked)".

Hope this helps.

uzaemon@Japan

 
01175/01175 AAA00000  Sue              SNDM  Error                             
( 1)   06/07/18 13:39  01154へのコメント  コメント数：1
uzaemon,
our OS400 is on v4r3and when we run SNDM, we got the below message:  
 
                         Additional Message Information                        
                                                                               
 Message ID . . . . . . :   CPF9897       Severity . . . . . . . :   40        
 Message type . . . . . :   Diagnostic                                         
 Date sent  . . . . . . :   18/07/06      Time sent  . . . . . . :   12:37:39  
                                                                               
 Message . . . . :   Command failed. reason -301 negative response from SMTP   
   server ( RSP[550 5.7.1 Unable to relay for ZANESAB@HOTMAIL.COM｢｣] REQ[RCPT  
   TO:<ZANESAB@HOTMAIL.COM>｢｣])                                                
 Cause . . . . . :   No additional online help information is available.       
                                                                               
                                                                               
                                                                               
                                                                               
 
01158/01158 AAA00000  uzaemon          Re^7: SNDM - Account authentication?    
( 1)   06/06/16 11:52  01157へのコメント

Boris,

> yes I'm using the iSeries SMTP server to send emails to internet recepients.
> 
> I changed ALWRLY to *LIST and did:
> ADDSMTPLE TYPE(*ACCEPT) INTNETADR('127.0.0.1')
> 
> Now SNDM is working.

Thank you very much for your feedback.

> I'm just wondering, is this the correct practice? 

I think so. Relaying all mail should be avoided.

> Does it mean that the iSeries SMTP server doesn't support authentication? (using external POP server is not an option for me).

As I mentioned in previous post, you may use "POP before SMTP". You just bring up "OS/400" (not external) POP3 server and run POP3 client on the same "OS/400" for authentication. See http://www-912.ibm.com/a_dir/as4ptf.nsf/ALLPTFS/SI19288 for detail.

Hope this answers to your questions.

uzaemon@Japan

 
01157/01157 AAA00000  Boris            Re^6: SNDM - Account authentication?    
( 1)   06/06/16 06:23  01156へのコメント  コメント数：1
uzaemon,
yes I'm using the iSeries SMTP server to send emails to internet recepients.

I changed ALWRLY to *LIST and did:
ADDSMTPLE TYPE(*ACCEPT) INTNETADR('127.0.0.1')

Now SNDM is working.

I'm just wondering, is this the correct practice? 
Does it mean that the iSeries SMTP server doesn't support authentication? (using external POP server is not an option for me).

Thanks
Boris


 
01156/01156 AAA00000  uzaemon          Re^5: SNDM - Account authentication?    
( 1)   06/06/15 18:55  01154へのコメント  コメント数：2
Boris,

> my environment is i5 os/400 version 5.3 and native SMTP server.
> When I run SNDM I get the following message:
> Message ID . . . . . . :   CPF9897                                          
> Date sent  . . . . . . :   06/14/06      Time sent  . . . . . . :   23:24:35
>                                                                             
> Message . . . . :   Command failed. reason -301 negative response from SMTP 
>   server ( RSP[553 Relaying blocked at this site.｢｣] REQ[RCPT               
>   TO:<somename@someserver.COM>｢｣])                                             
>                                                                             
> Cause . . . . . :   No additional online help information is available.  
> 
> It only works if I change:
> CHGSMTPA ALWRLY(*ALL)                                                      

Are you trying to send mail from local OS/400 user (SMTP server) to external users (on other mail server)?
If so, you need to set ALWRLY parameter to other than *NONE. If you need authentication, try *POPWDW to enable "POP before SMTP". Or specify *LIST and/or *NEAR using iSeries Navigator.

Waiting for your feedback.

uzaemon@Japan

 
01154/01154 AAA00000  Boris            Re^4: SNDM - Account authentication?    
( 1)   06/06/15 05:41  01153へのコメント  コメント数：5
uzaemon,
my environment is i5 os/400 version 5.3 and native SMTP server.
When I run SNDM I get the following message:
Message ID . . . . . . :   CPF9897                                          
Date sent  . . . . . . :   06/14/06      Time sent  . . . . . . :   23:24:35
                                                                            
Message . . . . :   Command failed. reason -301 negative response from SMTP 
  server ( RSP[553 Relaying blocked at this site.｢｣] REQ[RCPT               
  TO:<somename@someserver.COM>｢｣])                                             
                                                                            
Cause . . . . . :   No additional online help information is available.  

It only works if I change:
CHGSMTPA ALWRLY(*ALL)                                                      

         

 
01153/01153 AAA00000  uzaemon          Re^3: SNDM - Account authentication?    
( 1)   06/06/14 22:24  01149へのコメント  コメント数：6
Boris,

> When you say in reply 979:
> My mail server does not require authentication
> 
> Does it mean that you your SMTP server is set to Allow mail relay = *ALL?

No. As I use only one SMTP server in closed network, there are no need to relay mail.

> Changing this option seems to be the only way to allow SNDM work.
> 
> If I only plan to use the iSeries SMTP server, how dificult is it to implement authentication? In your opinion, do I still need to implement all the quote/ (AUTH-LOGIN, AUTH PLAIN, AUTH CRAM-MD5, etc) /unquote or there could be some shortcut by using the os/400 user profile. I'm just thinking about SNDDST that acutally doesn't require any Account Authentication settings it also works with Allow mail relay = *NONE. So I suppose there is a way to allow some kind of "os/400 authentication"
> 
> I just want to know what I'm getting myself into before I start.

I don't fully understand your mail environment. 

If you use only OS/400 SMTP server with default configuration, I think you don't care about authentication.

If you want to forward your mail from OS/400 SMTP server to, say, external SMTP server, you may need to allow relay to OS/400 SMTP server and allow external SMTP server to forward mail which comes from OS/400 SMTP server.

If you want to send mail from external SMTP server (no OS/400 SMTP server), you should contact mail administrator and ask to allow relaying and disable authentication for your OS/400.

Hope this helps.

uzaemon@Japan

 
01149/01149 AAA00000  Boris            Re^2: SNDM - Account authentication?    
( 1)   06/06/11 02:37  01147へのコメント  コメント数：7
Uzaemon,
thank you for your answer.
When you say in reply 979:
My mail server does not require authentication

Does it mean that you your SMTP server is set to Allow mail relay = *ALL?
Changing this option seems to be the only way to allow SNDM work.

If I only plan to use the iSeries SMTP server, how dificult is it to implement authentication? In your opinion, do I still need to implement all the quote/ (AUTH-LOGIN, AUTH PLAIN, AUTH CRAM-MD5, etc) /unquote or there could be some shortcut by using the os/400 user profile. I'm just thinking about SNDDST that acutally doesn't require any Account Authentication settings it also works with Allow mail relay = *NONE. So I suppose there is a way to allow some kind of "os/400 authentication"

I just want to know what I'm getting myself into before I start.

Thanks
Boris
 
01147/01147 AAA00000  uzaemon          Re: SNDM - Account authentication?      
( 1)   06/06/10 13:58  01145へのコメント  コメント数：8
Boris,

> Hi
> does SNDM support account authentication?
> I read the usage description I couldn't find anything related to it.
> I guess if it's not supported the SNDM program will not work against SMTP servers that require authentication.
> Am I right?

You are right. SNDM does not support SMTP auth.
For more information, see "979. Re: SNDM using authenticated SMTP server" in this BBS.

uzaemon@Japan

 
01146/01146 AAA00000  uzaemon          Re: License? (SNDM)                     
( 1)   06/06/10 13:53  01144へのコメント

Boris,

> Hi 
> could you please explain in my view 2 contredicting statements:
> 1. The one that is placed at the top of the main web page:
> "All of the programs found here run on IBM AS/400 and iSeries. They are open-source and free for personal and commercial use."
> 2. The second is found in the license description of the SNDM program:
> - If you sell software based on SNDM, you need commercial license
> 
> So my quesion is, what is the procedure for using the SNDM program commercially?
> Thanks.

SNDM is subject to the dual-license which means you can use whichever you want. You need commercial license when you want to "SELL" SNDM. I assume most people prefer GPL and I don't want to receive lengthy legal documents to sign.

If you are planning to use SNDM just for your commercial application, you can use SNDM under GPL. There are some issues regarding "dynamically links". I don't think programs which call SNDM are not "derivative work". For more information, refer to http://en.wikipedia.org/wiki/GPL, for instance.

Hope this answers to your question.

uzaemon@Japan

 
01145/01145 AAA00000  Boris            SNDM - Account authentication?          
( 1)   06/06/10 05:00

Hi
does SNDM support account authentication?
I read the usage description I couldn't find anything related to it.
I guess if it's not supported the SNDM program will not work against SMTP servers that require authentication.
Am I right?

Thanks
 
01144/01144 AAA00000  Boris            License?                                
( 1)   06/06/10 04:21

Hi 
could you please explain in my view 2 contredicting statements:
1. The one that is placed at the top of the main web page:
"All of the programs found here run on IBM AS/400 and iSeries. They are open-source and free for personal and commercial use."
2. The second is found in the license description of the SNDM program:
- If you sell software based on SNDM, you need commercial license

So my quesion is, what is the procedure for using the SNDM program commercially?
Thanks.
 
01074/01074 AAA00000  shinya           Re^2: CRTCSVFの一時記憶域の増加について 
( 1)   06/05/17 23:51  01060へのコメント

> DSPPGM PGM(CSV/CRTCSVFRPG)で見ると、Static storage sizeは
> 111744バイト程度です。内部でいくつかのシステムAPIを利用
> していますが、いずれも利用頻度の非常に高いものなので、
> 極端に一時記憶域を消費するとは考えにくいです。
> 
> これでお答えになっているでしょうか...
> 


ご回答、ありがとうございます。
テストを重ねた結果を見ても、uzaemonさんがおっしゃる通り
極端な一時記憶域の消費はありませんでしたので
自己責任の範囲で使用させていただきます。
本当にありがとうございました。


 
01060/01060 AAA00000  uzaemon          Re: CRTCSVFの一時記憶域の増加について   
( 1)   06/05/11 00:10  01051へのコメント  コメント数：1
shinyaさん、

> CRTCSVFを使用した場合、一時記憶域の増加はないでしょうか？
> 
> CPYTOIMPFでは1JOBにおいて
> 使用一時記憶域(WRKJOBの'3')が20MB程増加してしまう為、
> CRTCSVFの使用を考えておりテストをしておりますが、
> 使用一時記憶域以外の一時記憶域の増加があるのか
> 確認できなかったので、教えて下さい。

DSPPGM PGM(CSV/CRTCSVFRPG)で見ると、Static storage sizeは
111744バイト程度です。内部でいくつかのシステムAPIを利用
していますが、いずれも利用頻度の非常に高いものなので、
極端に一時記憶域を消費するとは考えにくいです。

これでお答えになっているでしょうか...

uzaemon@Japan

 
01051/01051 AAA00000  shinya           CRTCSVFの一時記憶域の増加について       
( 1)   06/05/09 13:25

お世話になっております。

CRTCSVFを使用した場合、一時記憶域の増加はないでしょうか？

CPYTOIMPFでは1JOBにおいて
使用一時記憶域(WRKJOBの'3')が20MB程増加してしまう為、
CRTCSVFの使用を考えておりテストをしておりますが、
使用一時記憶域以外の一時記憶域の増加があるのか
確認できなかったので、教えて下さい。

以上、宜しくお願いします。
 
01046/01046 AAA00000  uzaemon          Re: cvtspl utility (see message 754)    
( 1)   06/04/22 22:59  01045へのコメント

Giuseppe,

> I have problem to convert spl *AFP to tiff and when tif2pdf goes to read, it gave me an error.
> Command seem go OK, but when i open TIFF file i can see only a single line.

Follow the procedure described in "754. Re^2: problema con SPL2STMF" and let me know what you see.

uzaemon@Japan

 
01045/01045 AAA00000  giuseppe         cvtspl utility                          
( 1)   06/04/22 19:41

I have problem to convert spl *AFP to tiff and when tif2pdf goes to read, it gave me an error.
Command seem go OK, but when i open TIFF file i can see only a single line.
What's wrong?
Thanks

 
01044/01044 AAA00000  uzaemon          Re^5: SPLTOPDF CPF3CF2 hptopt = 30      
( 1)   06/04/06 19:09  01043へのコメント

Philippa,

> I have encountered the same problem.  I tried the fix that was suggested but it still does not work.  The document that is failing is only 16 pages yet other (much larger) splfs convert to TIF just fine.  Any other suggestions?

Message CPF3CF2 indicates:

Message . . . . :   Error(s) occurred during running of &1 API.
Cause . . . . . :   Call your service organization and report the problem.
  Materials to accompany the problem are:     
    -- Job log of the failing API.            
    -- Actual parameters specified on the API.

This phenomenon is caused by various reasons, for example, when you are using old SPL2STMF on V5R2 (or later) and so on.

I suspect that your problem is in OS/400(HPT API). I recommend you to consider followings :

- apply latest Cum and HPT-related PTFs.
- there is no logical reason but just try to recompile SPL2STMF with lower optimization option.
- if you have an access to another AS/400 or iSeries or i5, run the same thing and see what happens. Or you may ask your business partner or friend to recreate your problem.
- if the problem occurs only for the specific spooled file, look for the difference.
- prepare the procedure to recreate your problem using OS/400 functions which use HPT, e.g. RMTOUTQ, LPR, Access for Web, Host on Demand, etc.
- contact your support channel to ask IBM to investigate (and fix) the problem.

Hope this helps.

uzaemon@Japan

 
01043/01043 AAA00000  Philippa         Re^4: SPLTOPDF CPF3CF2 hptopt = 30      
( 1)   06/04/05 23:05  00924へのコメント  コメント数：1
Hello uzaemon
I have encountered the same problem.  I tried the fix that was suggested but it still does not work.  The document that is failing is only 16 pages yet other (much larger) splfs convert to TIF just fine.  Any other suggestions?

 
04972/04972 AAA00000  paco             SPL2STMF doesn't work in V5R4           
( 1)   07/04/24 18:10

Hello.

Do you know if the spl2stmf utility work in V5R4. I tried to use it, and when i crete it, show me this error:

 creating pnlgrp...
 result-> CPF5A02


Do you know why?

Thanks

Regards
 
04828/04828 AAA00000  uzaemon          Re: SNDM ISO-8859-2                     
( 1)   07/04/22 22:29  04600へのコメント

> iｴve a problem with sndm in slowenia. Slowenia uses ISO-8859-2. I found on your hompage  http://homepage1.nifty.com/uzaemon/iso8859.html that you only support 8859-1 but the special characters in slowenia need the 8859-2. Can you say me how i can solve this problem please?

Christian,

Please understand that SNDM is working as designed.
SNDM supports plain-ASCII, ISO-8859-1 and Japanese because I know how to handle those encodings in Internet mail. In other words, I don't know how to properly encode other languages such as Arabic, Chinese and ISO-8859-2.

If ISO-8859-2 is just a simple variant of ISO-8859-1, you just edit a few lines of code. If not, you better look for other solutions (e.g. JavaMail).

Hope this clarifies your problem.

uzaemon@Japan

 
04600/04600 AAA00000  Christian Rettin SNDM ISO-8859-2                         
( 1)   07/04/18 23:03

Hello,

iｴve a problem with sndm in slowenia. Slowenia uses ISO-8859-2. I found on your hompage  http://homepage1.nifty.com/uzaemon/iso8859.html that you only support 8859-1 but the special characters in slowenia need the 8859-2. Can you say me how i can solve this problem please?
 
04565/04565 AAA00000  uzaemon          Re: Problem on  V5R4 TIFF2PDF           
( 1)   07/04/17 22:18  04494へのコメント

> Dear Uzaemon, recently i passed my Iseries on V5R4 release and from that moment your utility don't run correctly. The PDF files generated results damaged.
> I read the post 1658 and seems to be the same problem but i don't understand the solution.

ennio,

IBM has changed the default behavior of C runtime functions. For detail, see "Memo to users" (http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzaq9/rzaq9.pdf), Page 12, "QLOCALE system value set to default locale during installation" and page 534 of "WebSphere Development Studio: ILE C/C++ Programmer's Guide" (http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/books/sc092712.pdf). As a result, period is translated to comma in some circumstances as follows :

(*LIBL/QCSRC.LOCALE)
#include <stdio.h>
char buffer[10];

int main(void)
{
  sprintf(buffer, "%f\n", 123.45678);
  printf("value = %s\n", buffer);
}

> CRTBNDC PGM(LOCALE)
> CHGUSRPRF USRPRF(A) LOCALE('/qsys.lib/fr_fr.locale')

Open another 5250 session and sign-on as user A.

> call locale

 value = 123,456780

----------

Having that said, there are several ways to fix this problem.

1) Compile the C modules specifying LOCALETYPE(*CLD).

2) Specify other locale for USRPRF, e.g., exec CHGUSRPRF USRPRF(A) LOCALE(*C). Other locales such as POSIX, EN_US, *NONE may also work.

3) Set locale explicitly in C program.

Add a few lines to main().

(*LIBL/QCSRC.LOCALE2)
#include <locale.h> //// Add
#include <stdio.h>
char buffer[10];

int main(void)
{
  setlocale(LC_ALL, "C"); //// Add
  sprintf(buffer, "%f\n", 123.45678);
  printf("value = %s\n", buffer);
}

> CRTBNDC PGM(LOCALE2)

For more information of the setlocale(), check out page 322 of "ILE C/C++ Run-Time Library Functions" (http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/books/sc415607.pdf).

There are other ways :
- Change system value QLOCALE
- Control the locale using environment variables
- Compile TIFF2PDF on V4R5 and earlier

Try whichever you like and let me know the result.
Waiting for your feedback.

uzaemon@Japan

 
04494/04494 AAA00000  Ennio            Problem on  V5R4 TIFF2PDF               
( 1)   07/04/14 18:04

Dear Uzaemon, recently i passed my Iseries on V5R4 release and from that moment your utility don't run correctly. The PDF files generated results damaged.
I read the post 1658 and seems to be the same problem but i don't understand the solution.
Can you help me? 
Thanks in advance.
ennio

 
04289/04289 AAA00000  uzaemon          Re: EHLO (SNDM)                         
( 1)   07/04/01 22:04  04257へのコメント

Barry,

> I need to us EHLO and give a userid and password to the email server.  Is there a way to do this?

SNDM does not support EHLO command.
See "554. SNDM -301 authorization required" for detail.

Hope this answers to your question.

uzaemon@Japan

 
04257/04257 AAA00000  Barry Strain     EHLO                                    
( 1)   07/03/31 00:47

I need to us EHLO and give a userid and password to the email server.  Is there a way to do this?
 
03942/03942 AAA00000  uzaemon          Re: SNDM fatal error (Unable to relay)  
( 1)   07/03/16 19:58  03940へのコメント

Alan,

> I have been using SNDM without any problem on our local Exchange server but as part of group policy we have just moved our Exchange server to Paris. I changed the SMTPHOST name to reflect this but I get the follwoing error now...
> 
> Command failed. reason -301 negative response from SMTP server ( RSP^550 
>   5.7.1 Unable to relay for alan.medows@saint-gobain.com$[] REQ^RCPT     
>   TO:<alan.medows@saint-gobain.com>$[])                                  
> 
> Are there any suggestions on how to rectify this problem please.

Please read messages 412, 487, 716 and 850 in this BBS.

Hope you'll find useful information and let me know the result.

uzaemon@Japan

 
03940/03940 AAA00000  Alan Medows      SNDM fatal error                        
( 1)   07/03/16 17:45

I have been using SNDM without any problem on our local Exchange server but as part of group policy we have just moved our Exchange server to Paris. I changed the SMTPHOST name to reflect this but I get the follwoing error now...

Command failed. reason -301 negative response from SMTP server ( RSP^550 
  5.7.1 Unable to relay for alan.medows@saint-gobain.com$[] REQ^RCPT     
  TO:<alan.medows@saint-gobain.com>$[])                                  

Are there any suggestions on how to rectify this problem please.

Alan
 
03652/03652 AAA00000  uzaemon          Re^4: TIFFLIB/CVTSPLFPDF size limitation
( 1)   07/03/07 21:52  03630へのコメント

> I reply to myself.
> 
> I add that the problem seems to be in the SPL2STMFRP rpg program.
> Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
> hptopt = 30
> 
> If you need the joblog give me your email adress.

Enrico,

As for error CPF3CF2, please check out the message "1044. Re^5: SPLTOPDF CPF3CF2 hptopt = 30" in this BBS.

Come back here when you need further help.

uzaemon@Japan

 
03630/03630 AAA00000  Enrico Amisano   Re^3: TIFFLIB/CVTSPLFPDF size limitation
( 1)   07/03/06 23:27  03588へのコメント  コメント数：1
> > Enrico,
> > 
> > > Command CVTSPLFPDF is based on libtiff (and TIFF2PDF) free utility.
> > > We have experienced problems using this command. The problem appears to be a spool file size issue.
> > > How to solve the problem ?
> > > Do you have an update of TIFFLIB ?
> > > Our OS/400 release is V5R2M0.
> > > Enrico
> > 
> > What kind of "size" error you've encountered?
> > Without knowing detail of the error, it's impossible to guide you to solve the problem...
> > 
> > I don't know anything about CVTSPLFPDF.
> > Is that a command you created? If not, have you contacted the author for solution?
> > 
> > -----------
> > 
> > There are size limitations in my utilities.
> > 
> > - SPL2STMF (though you didn't mention) has 16MB limitation for now. I designed the program to use single USRSPC. If you want to convert large spool file, you may need to modify the program to cope with multiple USRSPCs.
> > 
> > - The maximum file size of tifflib and TIFF2PDF depends on the type of file system you are using and type of variables used in C functions. Usually, 2GB is the maximum size in traditional 16 bit implementation.
> > 
> > uzaemon@Japan
> 
> Many thanks for the answer.
> I have a great confusion.
> On my AS/400 System I have installed:
> - an HPT library
> - a TIFFLIB Library
> SPL2STMF command is put in HPT Library and I think it's used by the CVTSPLFPDF tool.
> 
> This is a tool that I have downloaded form the Internet.
> I don't know who is the author.
> 
> The error is this:
> when I have to convert a spool file with size more 80-100 pages, the pdf conversion doen't function but it's only created a TIFF file on the IFS.
> 
> What do you think ?
> Do you know HPT Library ?
> My OS/400 release is V5R2M0
> Enrico

I reply to myself.

I add that the problem seems to be in the SPL2STMFRP rpg program.
Command failed. reason - API QwpzHostPrintTransform failed : CPF3CF2
hptopt = 30

If you need the joblog give me your email adress.
Enrico

 
03588/03588 AAA00000  Enrico Amisano   Re^2: TIFFLIB/CVTSPLFPDF size limitation
( 1)   07/03/05 22:10  03510へのコメント  コメント数：2
> Enrico,
> 
> > Command CVTSPLFPDF is based on libtiff (and TIFF2PDF) free utility.
> > We have experienced problems using this command. The problem appears to be a spool file size issue.
> > How to solve the problem ?
> > Do you have an update of TIFFLIB ?
> > Our OS/400 release is V5R2M0.
> > Enrico
> 
> What kind of "size" error you've encountered?
> Without knowing detail of the error, it's impossible to guide you to solve the problem...
> 
> I don't know anything about CVTSPLFPDF.
> Is that a command you created? If not, have you contacted the author for solution?
> 
> -----------
> 
> There are size limitations in my utilities.
> 
> - SPL2STMF (though you didn't mention) has 16MB limitation for now. I designed the program to use single USRSPC. If you want to convert large spool file, you may need to modify the program to cope with multiple USRSPCs.
> 
> - The maximum file size of tifflib and TIFF2PDF depends on the type of file system you are using and type of variables used in C functions. Usually, 2GB is the maximum size in traditional 16 bit implementation.
> 
> uzaemon@Japan

Many thanks for the answer.
I have a great confusion.
On my AS/400 System I have installed:
- an HPT library
- a TIFFLIB Library
SPL2STMF command is put in HPT Library and I think it's used by the CVTSPLFPDF tool.

This is a tool that I have downloaded form the Internet.
I don't know who is the author.

The error is this:
when I have to convert a spool file with size more 80-100 pages, the pdf conversion doen't function but it's only created a TIFF file on the IFS.

What do you think ?
Do you know HPT Library ?
My OS/400 release is V5R2M0
Enrico


 
03510/03510 AAA00000  uzaemon          Re: TIFFLIB/CVTSPLFPDF size limitations 
( 1)   07/03/02 20:30  03482へのコメント  コメント数：3
Enrico,

> Command CVTSPLFPDF is based on libtiff (and TIFF2PDF) free utility.
> We have experienced problems using this command. The problem appears to be a spool file size issue.
> How to solve the problem ?
> Do you have an update of TIFFLIB ?
> Our OS/400 release is V5R2M0.
> Enrico

What kind of "size" error you've encountered?
Without knowing detail of the error, it's impossible to guide you to solve the problem...

I don't know anything about CVTSPLFPDF.
Is that a command you created? If not, have you contacted the author for solution?

-----------

There are size limitations in my utilities.

- SPL2STMF (though you didn't mention) has 16MB limitation for now. I designed the program to use single USRSPC. If you want to convert large spool file, you may need to modify the program to cope with multiple USRSPCs.

- The maximum file size of tifflib and TIFF2PDF depends on the type of file system you are using and type of variables used in C functions. Usually, 2GB is the maximum size in traditional 16 bit implementation.

uzaemon@Japan

 
03482/03482 AAA00000  Enrico Amisano   TIFFLIB/CVTSPLFPDF size limitations     
( 1)   07/03/01 20:19

Command CVTSPLFPDF is based on libtiff (and TIFF2PDF) free utility.
We have experienced problems using this command. The problem appears to be a spool file size issue.
How to solve the problem ?
Do you have an update of TIFFLIB ?
Our OS/400 release is V5R2M0.
Enrico


 
02977/02977 AAA00000  uzaemon          Re: SNDM: How it treats NTLM ?          
( 1)   07/02/13 22:40  02965へのコメント

Kave,

> I wonder if SNDM can work with SMTP
> server which runs NTLM.

What do you mean by NTLM?
If it is Microsoft authentication protocol, 
SNDM has nothing to do with it.

Actually, SNDM does not support any authentication
mechanism as stated at "1147. Re: SNDM - Account authentication?".

Hope this answers to your question.

uzaemon@Japan

 
02965/02965 AAA00000  Zvi Kave         SNDM: How it treats NTLM ?              
( 1)   07/02/13 17:48

I wonder if SNDM can work with SMTP
server which runs NTLM.
 
02600/02600 AAA00000  uzaemon          Re: SNDM (text length)                  
( 1)   07/02/04 11:27  02563へのコメント

Randy,

Thank you for using SNDM.

> Just thought I would let you know that I have modified your SNDM code on our system to allow a maximum length of 132 for the file used in the body of the e-mail. It makes it nice for use with spool files. 
> 
> Is there a reason you made the limit 80 bytes?

Here's my old post regarding your question.

--------

> P.S.: it would be nice, if i could send more than 92 characters in one line...

RFC 821 allows to send 1000 octets in one line. I limited the SNDM to allow only 80 bytes by following reasons.

1. After some encodings, 80 characters would be translated to much longer string.

2. Some mailers may unexpectedly fold the text line which exceeds about 80 characters.

3. You can send any data as attachment file.

On balance, 80 characters in one line is the safest value for most users in my opinion. If you really want to extend it by some reason which I cannot think of, you can modify the source code at your will.

--------

Hope this clarifies your question.

uzaemon@Japan

 
02563/02563 AAA00000  Randy Bartels    SNDM                                    
( 1)   07/02/03 00:07

Hello,

Just thought I would let you know that I have modified your SNDM code on our system to allow a maximum length of 132 for the file used in the body of the e-mail. It makes it nice for use with spool files. 

Is there a reason you made the limit 80 bytes?
 
01734/01734 AAA00000  uzaemon          Re^6: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/28 08:54  01733へのコメント

Giampaolo,

> MY SETTING IS QCCSID=280 QLOCALE=LC_C_ITALY   QLANGID=ITA
> THE VALUE NOT EQUAL IN OS 5.2 (MY OLD O.S.) IS QLOCALE AND THEN WHEN QLOCALE IS NOT EQUAL LC_C_USA THE '.' ARE ',' THANKS YOU FOR YOUR REPLAY.
> IF YOU WHANT MY CHANGE ON YOUR FREE PROGRAM I SEND YOU MY SOURCE. CONTACT ME ON MY E-MAIL ADDRESS "M.GM@LIBERO.IT"

Great! It seems like you've solved the problem by yourself.
Please let me know the changes you made by e-mail so that we can share information to improve the utility.

Thanks,

uzaemon@Japan

 
01733/01733 AAA00000  Giampaolo        Re^5: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/27 22:57  01698へのコメント  コメント数：1
> Giampaolo,
> 
> > I FIND THE ERROR, IF I READ WHIT WORDPAD THE PDF FILE I FIND THAT IN PROGRAM TIFF2PDF "  sprintf( buff, "q \n%f 0 0 %f %f %f cm /%s%d Do \nQ \n" , x_bounding,
> >     y_bounding, x_translate, y_translate, img_name, img_nr ) ;"         x_bounding, y_bounding, x_translate, y_traslate are numer whit ',' exemple 543,5555 instead 543.555 
> > 
> > WHAT I DO in CL LE TO CHANGE "," ON "." ?
> 
> Currently, I do not have access to V5R4 and have not been able to recreate your problem.
> 
> - Do you mean all periods in PDF file become comma?
> - If you have V5R2 binary, can you try it?
> - What language environment (Primary language, System value QLOCALE, JOB CCSID, LANGID, etc.) are you using?
> - If you run code snippet below, which ("," or ".") do you see?  
> 
> 0001.00 #include <stdio.h>                   
> 0002.00 char buffer[10];                     
> 0003.00                                      
> 0004.00 int main(void)                       
> 0005.00 {                                    
> 0006.00   sprintf(buffer, "%f\n", 123.45678);
> 0007.00   printf("value = %s\n", buffer);    
> 0008.00 }                                    
> 
> Waiting for your reply.
> 
> uzaemon@Japan

MY SETTING IS QCCSID=280 QLOCALE=LC_C_ITALY   QLANGID=ITA
THE VALUE NOT EQUAL IN OS 5.2 (MY OLD O.S.) IS QLOCALE AND THEN WHEN QLOCALE IS NOT EQUAL LC_C_USA THE '.' ARE ',' THANKS YOU FOR YOUR REPLAY.
IF YOU WHANT MY CHANGE ON YOUR FREE PROGRAM I SEND YOU MY SOURCE. CONTACT ME ON MY E-MAIL ADDRESS "M.GM@LIBERO.IT"
THANKS.
 
01698/01698 AAA00000  uzaemon          Re^4: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/23 00:28  01690へのコメント  コメント数：2
Giampaolo,

> I FIND THE ERROR, IF I READ WHIT WORDPAD THE PDF FILE I FIND THAT IN PROGRAM TIFF2PDF "  sprintf( buff, "q \n%f 0 0 %f %f %f cm /%s%d Do \nQ \n" , x_bounding,
>     y_bounding, x_translate, y_translate, img_name, img_nr ) ;"         x_bounding, y_bounding, x_translate, y_traslate are numer whit ',' exemple 543,5555 instead 543.555 
> 
> WHAT I DO in CL LE TO CHANGE "," ON "." ?

Currently, I do not have access to V5R4 and have not been able to recreate your problem.

- Do you mean all periods in PDF file become comma?
- If you have V5R2 binary, can you try it?
- What language environment (Primary language, System value QLOCALE, JOB CCSID, LANGID, etc.) are you using?
- If you run code snippet below, which ("," or ".") do you see?  

0001.00 #include <stdio.h>                   
0002.00 char buffer[10];                     
0003.00                                      
0004.00 int main(void)                       
0005.00 {                                    
0006.00   sprintf(buffer, "%f\n", 123.45678);
0007.00   printf("value = %s\n", buffer);    
0008.00 }                                    

Waiting for your reply.

uzaemon@Japan

 
01690/01690 AAA00000  Giampaolo        Re^3: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/20 22:34  01680へのコメント  コメント数：3
> > Giampaolo,
> > 
> > > i USE YOUR TOOL HPT/TIFF2PDF on OS 5.2 and all right, but I change my as/400 and I istalled OS 5.4 with JVM 1.3 default and 1.4,the tiff file is all right, but when with TIFF2PDF I CREATE a PDF the last file not open whith acrobat reader 7. Acrobat reader error is:
> > > FIND UNKNOW TOKEN: '594,580527' 
> > 
> > I have several questions.
> > 
> > - First of all, what versino of TIFF2PDF are you using? Did you recompile the utility on V5R4 by yourself?
> > - How do you create TIFF file? Are you using my SPL2STMF utility?
> > - Did you make any change to the original TIFF2PDF?
> > - Why you mention JVMs? TIFF2PDF and SPL2STMF are written in ILE-RPG and ILE-C.
> > - Can you open the PDF file by using older acrobat readers (3.x, 4.x, 5.x or 6.x)?
> > 
> > Waiting for your reply.
> > 
> > uzaemon@Japan
> I using your tiff2pdf 3.4, I recompile on O/S 5.4 AND i use your HPT 0.04 for create TIFF file.I Don't make any change on your TIFF2PDF. I wrote JVMs because I DON'T KNOW your utility and i don't Know that api use, I AM NOT  VERY expert.   I open PDF FILE WHITH ACROBAT READER 5.0, 6.0 AND 7.0 and all program produce same error.
> Help you and excuse me for my english  
I FIND THE ERROR, IF I READ WHIT WORDPAD THE PDF FILE I FIND THAT IN PROGRAM TIFF2PDF "  sprintf( buff, "q \n%f 0 0 %f %f %f cm /%s%d Do \nQ \n" , x_bounding,
    y_bounding, x_translate, y_translate, img_name, img_nr ) ;"         x_bounding, y_bounding, x_translate, y_traslate are numer whit ',' exemple 543,5555 instead 543.555 

WHAT I DO in CL LE TO CHANGE "," ON "." ?
 
 
01685/01685 AAA00000  Giampaolo        Re^3: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/19 22:36  01680へのコメント

> > Giampaolo,
> > 
> > > i USE YOUR TOOL HPT/TIFF2PDF on OS 5.2 and all right, but I change my as/400 and I istalled OS 5.4 with JVM 1.3 default and 1.4,the tiff file is all right, but when with TIFF2PDF I CREATE a PDF the last file not open whith acrobat reader 7. Acrobat reader error is:
> > > FIND UNKNOW TOKEN: '594,580527' 
> > 
> > I have several questions.
> > 
> > - First of all, what versino of TIFF2PDF are you using? Did you recompile the utility on V5R4 by yourself?
> > - How do you create TIFF file? Are you using my SPL2STMF utility?
> > - Did you make any change to the original TIFF2PDF?
> > - Why you mention JVMs? TIFF2PDF and SPL2STMF are written in ILE-RPG and ILE-C.
> > - Can you open the PDF file by using older acrobat readers (3.x, 4.x, 5.x or 6.x)?
> > 
> > Waiting for your reply.
> > 
> > uzaemon@Japan
> I using your tiff2pdf 3.4, I recompile on O/S 5.4 AND i use your HPT 0.04 for create TIFF file.I Don't make any change on your TIFF2PDF. I wrote JVMs because I DON'T KNOW your utility and i don't Know that api use, I AM NOT  VERY expert.   I open PDF FILE WHITH ACROBAT READER 5.0, 6.0 AND 7.0 and all program produce same error.
> Help you and excuse me for my english  
excuse me, have you any notice for me?
 
01680/01680 AAA00000  Giampaolo        Re^2: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR 
( 1)   06/12/18 19:13  01666へのコメント  コメント数：5
> Giampaolo,
> 
> > i USE YOUR TOOL HPT/TIFF2PDF on OS 5.2 and all right, but I change my as/400 and I istalled OS 5.4 with JVM 1.3 default and 1.4,the tiff file is all right, but when with TIFF2PDF I CREATE a PDF the last file not open whith acrobat reader 7. Acrobat reader error is:
> > FIND UNKNOW TOKEN: '594,580527' 
> 
> I have several questions.
> 
> - First of all, what versino of TIFF2PDF are you using? Did you recompile the utility on V5R4 by yourself?
> - How do you create TIFF file? Are you using my SPL2STMF utility?
> - Did you make any change to the original TIFF2PDF?
> - Why you mention JVMs? TIFF2PDF and SPL2STMF are written in ILE-RPG and ILE-C.
> - Can you open the PDF file by using older acrobat readers (3.x, 4.x, 5.x or 6.x)?
> 
> Waiting for your reply.
> 
> uzaemon@Japan
I using your tiff2pdf 3.4, I recompile on O/S 5.4 AND i use your HPT 0.04 for create TIFF file.I Don't make any change on your TIFF2PDF. I wrote JVMs because I DON'T KNOW your utility and i don't Know that api use, I AM NOT  VERY expert.   I open PDF FILE WHITH ACROBAT READER 5.0, 6.0 AND 7.0 and all program produce same error.
Help you and excuse me for my english  
 
01666/01666 AAA00000  uzaemon          Re: HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR JV
( 1)   06/12/17 11:57  01658へのコメント  コメント数：6
Giampaolo,

> i USE YOUR TOOL HPT/TIFF2PDF on OS 5.2 and all right, but I change my as/400 and I istalled OS 5.4 with JVM 1.3 default and 1.4,the tiff file is all right, but when with TIFF2PDF I CREATE a PDF the last file not open whith acrobat reader 7. Acrobat reader error is:
> FIND UNKNOW TOKEN: '594,580527' 

I have several questions.

- First of all, what versino of TIFF2PDF are you using? Did you recompile the utility on V5R4 by yourself?
- How do you create TIFF file? Are you using my SPL2STMF utility?
- Did you make any change to the original TIFF2PDF?
- Why you mention JVMs? TIFF2PDF and SPL2STMF are written in ILE-RPG and ILE-C.
- Can you open the PDF file by using older acrobat readers (3.x, 4.x, 5.x or 6.x)?

Waiting for your reply.

uzaemon@Japan

 
01658/01658 AAA00000  Giampaolo        HPT/TIFF2PDF ON OS 5.4 JVM 1.3 OR JVM 1.
( 1)   06/12/16 06:36

Dear UZAEMON,
i USE YOUR TOOL HPT/TIFF2PDF on OS 5.2 and all right, but I change my as/400 and I istalled OS 5.4 with JVM 1.3 default and 1.4,the tiff file is all right, but when with TIFF2PDF I CREATE a PDF the last file not open whith acrobat reader 7. Acrobat reader error is:
FIND UNKNOW TOKEN: '594,580527' 
THANKS YOU FOR YOUR HELP.

 
01588/01588 AAA00000  uzaemon          Re: SNDM: Reason -301: special character
( 1)   06/12/03 01:55  01576へのコメント

Zvi,

> I have something that seems CCSID error:
> When working from Israel on computer in sweden I got the error:
> 
> SNDM FROM('qsecofr@localhost) 
> TO(('zvi_kave@yahoo.com')) 
> FILE(SMTP/BODY) SUBJECT('test1')
> SMTPHOST(S720)                                  Command failed. reason -301 negative response from SMTP server ( RSP 501  Syntax error.  Special characters only permitted with escape            character.肄､ REQ RCPT TO:<zvi_kave@yahoo.com>肄､)             Please help if you can.
> 
> Regards,
> 
> Zvi       
>  

I recommend you to specify DEBUG(*YES) and check out followings:

- CCSIDs you are using.
- At where (mail address, description, mail body, attachment, etc.) and what "Special characters" are used.
- See http://homepage1.nifty.com/uzaemon/iso8859.html for supported CCSIDs.

uzaemon@Japan

 
01586/01586 AAA00000  uzaemon          Re: Resolution of GIF file created by SP
( 1)   06/12/03 01:47  01562へのコメント

Joseph,

> Dear Sir,
> I created a GIF file from an AFP spool using QWPGIF *wscst,
> the GIF file created had a very low resolution. There is
> a way to increase the resolution?
> Thanks,
> Joseph

Below is a similar Q&A (dated 01/02/17!).
Hope this answers to your question.

-------------------------------------
Q.
I was using your SPL2STMF with much sucess to create tiff files then converting them to PDF. I then tried to greate .gif files using workstation customization object QWPGIF and the quality is much reduced? Are there any workstation customization objects out there that could be of better quality. (Also, I was wondering if colour would be supported in these transforms? Up until now I was only using black and white since I cannot generate an overlay from Windows is colour using the IBM AFP drivers they supply?)

A.
I tried it and got same result on V4R5. Image resolution of GIF file is much lower than TIFF (see http://homepage1.nifty.com/uzaemon/tiff_gif.png ).

I think you have two options:

- Ask IBM if QWPGIF can generate better image. As RTVWSCST is not available for QWPGIF, you need to ask IBM through your standard support process.

- Convert TIFF to GIF. You can find some tools (for ANSI-C) on the Web, for example, check out http://cfa-www.harvard.edu/~alberto/tiff/ , http://netpbm.sourceforge.net/ , http://kalex.engin.umich.edu/tif2gif/ and many more. 

uzaemon@Japan

 
01585/01585 AAA00000  uzaemon          Re: SNDM (skip negative response)       
( 1)   06/12/03 01:37  01551へのコメント

Peter,

> We use the SNDM command a lot. It does what we need. Now we see some Internet providers act different if a email address does not exist. There is 1 provider that accepts all email requests and if an email address does not exist it sends back the failing email with a note that the 
> address does not exist.
> Another provider that gets a request to send an email checks the domainname interactively and let the command SNDM fail if a domainname does not exist.
> 
> How do we catch a "301 negative response from SMTP server" during transmission of an email so it does not abord.
> 
> Thanks, Peter


Please look into line 188 - 197 of SMTP/QRPGLESRC(#SEND) and modify according to your requirement. This part checks "SMTP negative response (other than 2xx, 3xx)".

Hope this helps.

uzaemon@Japan

 
01576/01576 AAA00000  Zvi Kave         SNDM: Reason -301: special character err
( 1)   06/11/30 21:40

I have something that seems CCSID error:
When working from Israel on computer in sweden I got the error:

SNDM FROM('qsecofr@localhost) 
TO(('zvi_kave@yahoo.com')) 
FILE(SMTP/BODY) SUBJECT('test1')
SMTPHOST(S720)                                  Command failed. reason -301 negative response from SMTP server ( RSP 501  Syntax error.  Special characters only permitted with escape            character.肄､ REQ RCPT TO:<zvi_kave@yahoo.com>肄､)             Please help if you can.

Regards,

Zvi       
 


 
05762/05762 AAA00000  uzaemon          このBBSは閉鎖されました。               
( 1)   07/05/08 15:38

このBBSは閉鎖されました。
ホームページから「New BBS」へアクセスお願いします。

uzaemon@Japan

 
05761/05761 AAA00000  uzaemon          This BBS has been closed.               
( 1)   07/05/08 15:37

This BBS has been closed.
Please access "New BBS" from the homepage.

uzaemon@Japan

 
05689/05689 AAA00000  uzaemon          Re: SPL2STMF doesn't work in V5R4       
( 1)   07/05/06 01:37  04972へのコメント

Paco,

> Do you know if the spl2stmf utility work in V5R4. I tried to use it, and when i crete it, show me this error:
> 
>  creating pnlgrp...
>  result-> CPF5A02
> 
> 
> Do you know why?

I did the same thing on a V5R4 machine and it worked just fine.


i5/OS -------------

> CRTSAVF FILE(QGPL/HPT)
  File HPT created in library QGPL.

Windows PC --------

(download hpt_520.exe and run it to extract htp.savf.)

E:\>ftp xxx.xxx.xxx.xxx
Connected to xxx.xxx.xxx.xxx.
220-QTCP AT XXX.XXX.COM.
220 CONNECTION WILL CLOSE IF IDLE MORE THAN 5 MINUTES.
User (xxx.xxx.xxx.xxx:(none)): (user_name)
331 ENTER PASSWORD.(user_password)
Password:
230 XXXXXXXX LOGGED ON.
ftp> bi
200 REPRESENTATION TYPE IS BINARY IMAGE.
ftp> put hpt.savf qgpl/hpt
200 PORT SUBCOMMAND REQUEST SUCCESSFUL.
150 SENDING FILE TO MEMBER HPT IN FILE HPT IN LIBRARY QGPL.
226 FILE TRANSFER COMPLETED SUCCESSFULLY.
ftp: 147312 bytes sent in 0.16Seconds 920.70Kbytes/sec.
ftp> quit
221 QUIT SUBCOMMAND RECEIVED.

i5/OS -------------

> RSTLIB SAVLIB(HPT) DEV(*SAVF) SAVF(QGPL/HPT)
  10 security or data format changes occurred.
  10 objects restored. 0 not restored to HPT.
> CHGJOB CCSID(37)
> STRREXPRC SRCMBR(MAKE) SRCFILE(HPT/SOURCE)

   Start SPL2STMF compilation.
    You must have authority to exec CRTxxx.

       * * * * * * * * * * * * * * * * * * * * * *


   Start creating SPL2STMF command...
     creating main program module SPL2STMFRP...
     result-> 0
     creating main program SPL2STMFRP...
     result-> 0
     creating pnlgrp...
     result-> 0
     creating command...
     result-> 0

   Compile finished. Confirm error(s) if exists.

   Press ENTER to end terminal session.

Confirm the procedure and try again.
If you still got a problem, please investigate compile list of the PNLGRP.

uzaemon@Japan

 
